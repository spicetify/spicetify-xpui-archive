"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[3878],{66759:(e,i,a)=>{a.d(i,{T:()=>u});var n=a(59496),t=a(84875),l=a.n(t),s=a(84304),r=a(30099),o=a(16532),d=a(87761);const c="pvGZ831aNzHTQMZ8CA_u";var m=a(4637);const u=(0,n.memo)((function({onClick:e=(()=>{}),size:i,className:a,uri:t,sharingInfo:u,interactionData:k,ariaLabel:p=r.ag.get("mwp.list.item.share")}){const{onCopyLink:v}=(0,d.y)({sharingInfo:u,uri:t,interactionData:k}),y=(0,n.useCallback)((()=>{v(),e()}),[e,v]);return(0,m.jsx)(o.E,{ariaLabel:p,size:i,onClick:y,className:l()(c,a),icon:s.M,condensed:!0})}))},71563:(e,i,a)=>{a.r(i),a.d(i,{ThisIsTourCard:()=>y,default:()=>y,useThisisPlaylistExtensionQuery:()=>g});var n=a(51697),t=a(29919),l=a(30099),s=a(67490),r=a(34046);const o="nX5e9EyU1GmU42OFVHwH",d="pQmF4tvRpUeLWgPKUcW7",c="mGY3ER0iIvb1NbJ1d7X4",m="JHz_5gqDYpq9Lw3pIac_",u="HPCUzqQRn7oae4vJa3y9",k="WO2PkF5DO1fE25IrD2Gy",p="StPcf0AvSM0c18nwF4hJ";var v=a(4637);const y=e=>{const{artistImageUrl:i,artistName:a,artistConcertsUri:y,spec:S}=e,h=(0,r.$P)(),g=(0,r.Wi)(S.concertsCardFactory({identifier:a,uri:y,reason:"This is On Tour phase 1 MVP"}));return i&&a&&y?(0,v.jsxs)("section",{ref:g,className:o,children:[(0,v.jsx)(n.D,{as:"h1",variant:"cello",semanticColor:"textBase",children:l.ag.get("concerts")}),(0,v.jsxs)("div",{className:d,"data-testid":"on-tour-card",children:[(0,v.jsx)("img",{className:c,src:i,alt:""}),(0,v.jsxs)("div",{className:m,children:[(0,v.jsx)(n.D,{as:"p",variant:"mesto",semanticColor:"textSubdued",className:u,children:l.ag.get("concerts_on_tour")}),(0,v.jsx)(n.D,{as:"h1",variant:"cello",className:k,semanticColor:"textBase",children:a}),(0,v.jsx)(s.default,{to:y,className:p,children:(0,v.jsx)(t.P,{as:"span",buttonSize:"sm",onClick:()=>{const e=S.concertsCardFactory({identifier:a,uri:y,reason:"This is On Tour phase 1 MVP"}).hitUiNavigate({destination:y});h.logInteraction(e)},children:l.ag.get("concerts_see_all_events")})})]})]})]}):null};var S=a(89723);const h={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"thisisPlaylistExtension"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uri"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playlistV2"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uri"},value:{kind:"Variable",name:{kind:"Name",value:"uri"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Playlist"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"artistsOnTour"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"imageUrl"}},{kind:"Field",name:{kind:"Name",value:"upcomingEventsCount"}}]}}]}}]}}]}}]},g=(e,i)=>(0,S.a)(h,e,i)},65350:(e,i,a)=>{a.r(i),a.d(i,{default:()=>Ja});var n=a(59496),t=a(83792),l=a(97601),s=a(51697),r=a(9990),o=a(31969),d=a(14887),c=a(30099),m=a(88566),u=a(740),k=a(4637);const p=(e,i,a)=>({event:e,app_startup_id:null,ad_playback_id:null,ad_id:String(i),lineitem_id:String(a),creative_id:String(i),ad_format:"sponsored playlist",slot:null,in_focus:null,username:null,jsondata:JSON.stringify({platform:"WebPlayer",revision:"1.0.0"})}),v=({clickTracking:e,clickThrough:i,thirdPartyImpression:a,impression:l,logoUrl:r,advertiserName:o,creativeId:d,lineItemId:m})=>{const v=(0,t.I0)(),[y,S]=(0,n.useState)(!1);return(0,n.useEffect)((()=>(v((0,u.Vw)()),v((0,u.kh)(p("event_viewed",d,m))),()=>{v((0,u.AG)())})),[v,d,m]),(0,k.jsxs)("div",{className:"sponsor-container",children:[(0,k.jsx)(s.D,{variant:"minuet",className:"sponsor-text","data-ta-id":"sponsor-text",children:c.ag.get("playlist.presented_by",o)}),(0,k.jsxs)("div",{className:"sponsor-logo",children:[(0,k.jsx)("a",{draggable:!1,className:"sponsor-logo__link",target:"_blank",href:i,onClick:()=>{v((0,u.kh)(p("event_clicked",d,m))),S(!0)},children:(0,k.jsx)("img",{draggable:!1,className:"sponsor-logo__image",src:r,alt:o,"data-ta-id":"sponsor-logo"})}),(0,k.jsx)("img",{className:"sponsor-logo__imp-pixel",src:l,alt:""}),a&&(0,k.jsx)("img",{className:"sponsor-logo__3p-imp-pixel",src:a,alt:""}),y&&(0,k.jsx)("img",{className:"sponsor-logo__click-img-pixel",src:e,alt:""})]})]})},y=({playlistUri:e})=>{const i=(0,t.I0)(),a=(0,t.v9)((i=>i.ads.sponsoredPlaylist.previewAd||i.ads.sponsoredPlaylist.sponsoredPlaylist.get(e)));return(0,n.useEffect)((()=>{a||i((0,u.fd)(e))}),[i,e,a]),a?(0,k.jsx)("div",{children:(0,k.jsx)(v,{...a})}):null},S=({playlistUri:e})=>{const i=(0,t.I0)(),a=(0,t.v9)((e=>e.ads.sponsoredPlaylist.sponsoredPlaylist.get("allSponsorships"))),l=(0,t.v9)((e=>e.ads.sponsoredPlaylist.previewAd));(0,n.useEffect)((()=>{a||i((0,u.z8)())}),[i,a]);const s=l||a&&((e,i)=>{const a=Date.now()/1e3,n=e.split(":"),t=n[n.length-1];return i.some((({playlistId:e,endTime:i,startTime:n})=>e===t&&a>=n&&a<(i||a+1)))})(e,a);return s?(0,k.jsx)(y,{playlistUri:e}):null};var h=a(64188),g=a(70304),b=a(87583),N=a(98484),f=a(64689);const x="hOOwEKqNuXrNvOCB1SgZ",T="csEdkIN9z2LjJIuZraqz",C=({uri:e})=>{const[i,a]=(0,f.Z)(e),t=(0,l.s0)(),r=(0,n.useCallback)((()=>{a(!1),t("/collection/playlists",{replace:!0})}),[t,a]);return(0,k.jsxs)("div",{className:x,children:[(0,k.jsx)(b.l,{iconSize:64}),(0,k.jsxs)("div",{className:T,children:[(0,k.jsx)(s.D,{as:"p",variant:"canon",children:c.ag.get("forbidden-page.title")}),(0,k.jsx)(s.D,{as:"p",variant:"mesto",children:c.ag.get("forbidden-page.description")})]}),i&&(0,k.jsx)(N.D,{colorSet:"invertedLight",onClick:r,children:c.ag.get("remove_from_your_library")})]})};var j=a(75132),F=a(46915),A=a(88104),R=a(29629),D=a(48989),E=a(71563),I=a(4398),L=a(52118),P=a(77445),U=a(90784),_=a(21324),w=a(18112),V=a(35960),M=a(7442),O=a(4229),B=a(59653),W=a(34198),Q=a(47948),z=a(60168),K=a(7554),Z=a(82760),H=a(4635),J=a(89723),G=a(13138),q=a(22645),X=a(13797),Y=a(71485),$=a(90570),ee=a(24966),ie=a(34046),ae=a(46441),ne=a(46354),te=a(36342),le=a(15644),se=a(57374),re=a(34997);const oe=new Set(D.RJ),de=new Set([]),ce={column:null,order:te.kn.NONE},me=n.memo((function({ariaLabel:e,nrTracks:i,playlistUri:a,rankType:t,scrollToUid:l,usePlayContextItem:s,tracklistDomRef:r}){const o=(0,n.useContext)(q.ZF),{filter:d,setFilter:c}=(0,n.useContext)(R.fo),m=(0,n.useRef)(null),u=(0,n.useCallback)((()=>{m.current&&m.current.update()}),[]);(0,se.r)(a,u);const{sortState:p,setSortState:v}=(0,n.useContext)(D.Gb),y=(0,n.useCallback)((e=>{v((0,A.VK)(e,p))}),[p,v]);(0,n.useEffect)((()=>{v(ce),c("")}),[a,c,v]),(0,n.useEffect)((()=>{m.current&&l&&m.current.scrollToItem({uid:l})}),[l]);const S=(0,n.useCallback)((async(e,i)=>{const n=await o.getContents(a,{offset:e,limit:i,sort:(0,A._j)(p),filter:d,decorateFormatListData:!0});return{items:n.items,totalLength:n.totalLength}}),[a,o,p,d]),h="plays"===t,g=(0,n.useCallback)(((e,i)=>{const n=(0,re.X)(e.album?.images,{desiredSize:40,desiredLabel:"small"});return(0,k.jsx)(te.h_,{index:i,contextUri:a,uri:e.uri,uid:e.uid||void 0,isPlayable:e.isPlayable,duration_ms:e.duration.milliseconds,name:e.name,artists:e.artists,album:e.album,isExplicit:e.isExplicit,isMOGEFRestricted:e.is19PlusOnly,type:e.type,imgUrl:n?.url||"",statusChange:e.formatListAttributes?.status,showPlayCount:h,playCount:parseInt(e.formatListAttributes?.rank||"0",10),usePlayContextItem:s},i+e.uri)}),[a,h,s]),b=(0,n.useMemo)((()=>h?[te.QD.INDEX,te.QD.TITLE,te.QD.PLAYS,te.QD.ALBUM,te.QD.DURATION]:[te.QD.INDEX,te.QD.TITLE,te.QD.ALBUM,te.QD.DURATION]),[h]),N=(0,n.useCallback)((e=>e.uri),[]),f=(0,n.useCallback)((e=>e.id),[]);return(0,k.jsx)(le.ZP,{value:"chart-tracklist",children:(0,k.jsx)(te.Pv,{ariaLabel:e,hasHeaderRow:!0,columns:b,sortableColumns:o.getCapabilities().canSort?oe:de,sortState:p,onSort:y,renderRow:g,resolveUri:N,resolveUid:f,nrTracks:i,fetchTracks:S,limit:100,canFetchAllTracks:o.getCapabilities().canFetchAllTracks,outerRef:m,outerDomRef:r},a)})}));var ue=a(46927),ke=a(98440),pe=a(99750),ve=a(40006),ye=a(66759),Se=a(62168),he=a(33735),ge=a(47941),be=a(68224),Ne=a(34092),fe=a(99550),xe=a(26473),Te=a(68985),Ce=a(6285),je=a(24795),Fe=a(54781),Ae=a(99548),Re=a(58745),De=a(51726);const Ee={bottomEnd:De.LR.topStart,top:De.LR.bottom},Ie=({visible:e,onHide:i,placement:a,children:n,label:t})=>(0,k.jsx)(Ae.x,{placement:a,withPortal:!0,overlay:e&&(0,k.jsx)("div",{className:"encore-dark-theme",children:(0,k.jsx)(Re.J,{arrow:Ee[a],colorSet:"announcement",onClose:i,children:t})}),children:n});var Le=a(94313),Pe=a(36621);let Ue=function(e){return e.xs="small",e.sm="medium",e.md="large",e}({});const _e=({uri:e,label:i,onClick:a,size:n=Ue.md})=>{const{onCopyLink:t}=(0,Pe.l)({uri:e,permissionLevel:"CONTRIBUTOR"}),{toggleActivationVisible:l,setToggleActivationVisible:s}=(0,Le.I)();return(0,k.jsx)(Ie,{visible:l,onHide:()=>s(!1),label:c.ag.get("web-player.playlist.invite-collaborators.message"),placement:"bottomEnd",children:(0,k.jsx)(Fe.ws,{label:i,children:(0,k.jsx)(Ce.o,{onClick:e=>{a?.(e),t?.()},iconOnly:je.V,size:n,"aria-hidden":"true","aria-label":i,condensed:!0})})})};var we=a(31186),Ve=a(5684),Me=a(44711);const Oe=n.memo((({metadata:e,tracklistDomRef:i})=>{const{hasEpisodes:a,isCollaborative:t,formatListData:l,hasDateAdded:s,collaborators:r,hasSpotifyAudiobooks:o}=e,d="chart"===l?.type,m="concert-playlist"===l?.type,u="live-streams"===l?.type,p=["blend","celebrity-blend","friends-mix"].indexOf(l?.type||"")>-1,v=!!a,y=o||!1,{spec:S,logger:h}=(0,ie.fU)(we.createDesktopSearchBarEventFactory,{}),g=(0,n.useCallback)((()=>{h.logInteraction(S.filterFieldFactory().keyStrokeFilter())}),[h,S]),b=(0,n.useCallback)((()=>{h.logInteraction(S.filterFieldFactory().hitClearFilter())}),[h,S]),N=(0,n.useCallback)((()=>{h.logInteraction(S.sortButtonFactory().hitSort())}),[h,S]),f=(0,n.useMemo)((()=>((e,i,a,n,t,l,s,r,o)=>e?D.RJ:(0,A.RG)({isCollaborative:i,isMixedMedia:a,hasDateAdded:n,isConcert:t,isLive:l,isBlend:s,nrCollaborators:r,isBooklist:o}))(d,t,v,s,m,u,p,r?.count??1,y)),[d,t,v,s,m,u,p,r?.count,y]);return(0,k.jsxs)("div",{className:F.Z.searchBoxContainer,children:[(0,k.jsx)(n.Suspense,{fallback:null,children:(0,k.jsx)(Ve.K,{placeholder:c.ag.get("playlist.search_in_playlist"),onFilter:g,onClear:b,clearOnEscapeInElementRef:i})}),(0,k.jsx)(Me.l,{columns:f,onSort:N,isBooklist:y})]})}));var Be=a(59674),We=a(75018),Qe=a(19432),ze=a(9401),Ke=a(39015),Ze=a(46432),He=a(6360);const Je="Uw4gqTFuHRLn4VKga_bJ",Ge="SdECNwBCnmkKl0Q0mJff",qe="HLkGXLclDq_7guCiD1Xq",Xe="vWR6alsFpTlgXUckErqF",Ye="EbHQLci0cfLjHmS0AKp2",$e="HzYFPEbZdd6fQW4jfcz4",ei="SQEgwtR2aj51qFj6cMNZ",ii="aaNtMSjjJ4cClWoe6K0k",ai="BhtBJTnsM9AotmyN0MPr",ni="FwoyMQocCMLEafLlvAk5",ti="xcn0geYcJliTHbvcds12",li="KptBBI16DBjQBjvPQtlH";function si(e){const i=(0,n.useRef)(null);return(0,k.jsx)(We.Y,{center:!0,onClose:e.onClose,ref:i,withPortal:!0,children:(0,k.jsx)(Qe.l,{className:Je,"aria-label":"Example showing onClose property",body:(0,k.jsxs)("div",{className:ai,children:[(0,k.jsx)(Ce.o,{buttonSize:"md","aria-label":"IconX",iconOnly:ze.k,onClick:e.onClose,className:ti}),(0,k.jsx)(Ce.o,{buttonSize:"md","aria-label":"IconArrowLeft",iconOnly:Ze.D,className:ni}),(0,k.jsx)("div",{className:Ge,children:(0,k.jsxs)("div",{className:qe,children:[(0,k.jsx)("div",{className:Ye,children:(0,k.jsxs)("div",{className:$e,children:[(0,k.jsx)(Be.E,{className:ei,src:"https://i.scdn.co/image/ab6761610000517469fd2e170a6d290939620b61",alt:"A headshot profile picture of Afrobeats artist Lojay",imageHeight:"150px",imageWidth:"150px",crop:!0,circle:!0}),(0,k.jsx)(Be.E,{className:ii,src:"spotify:image:ab67706c0000da8465307c7864e1e9d53770a94e",alt:"Ginjapiano playlist profile picture",imageHeight:"150px",imageWidth:"150px",crop:!0,circle:!0})]})}),(0,k.jsxs)("div",{className:Xe,children:[(0,k.jsxs)(s.D,{as:"p",variant:"finaleBold",children:[(0,k.jsx)("span",{style:{color:"#dc744d"},children:"4M"})," STREAMED THIS WEEK"]}),(0,k.jsxs)(s.D,{as:"p",variant:"alto",children:["IM IN THE ",(0,k.jsx)("span",{style:{color:"#dc744d"},children:"TOP 21% "}),"OF GINJAPIANO LISTENERS THIS WEEK."]})]}),(0,k.jsx)("div",{className:Ye,children:(0,k.jsx)(He.V,{iconSize:48})})]})}),(0,k.jsx)("div",{className:li,children:(0,k.jsx)(N.D,{colorSet:"invertedLight",children:"Share"})})]})})})}const ri="nTTPGZGk721M6gfldG43",oi="BFYSUcA4ifYvgDzOQX5Q",di="el9_37CCpYKxCRKDDyww",ci="FB376b7R1M_0YQZ_SahS",mi="srPBn9_CV0NzQEEzW9f6",ui="te8Z8OuKxZx1gbjb7_ua",ki=n.memo((function({setuserView:e}){const[i,a]=(0,n.useState)(!1);return(0,k.jsxs)(k.Fragment,{children:[i&&(0,k.jsx)(si,{onClose:()=>{a(!1)}}),(0,k.jsx)(We.Y,{center:!0,withPortal:!0,children:(0,k.jsx)(Qe.l,{colorSet:"overMedia","aria-label":"Title",body:(0,k.jsx)("div",{children:(0,k.jsx)(s.D,{as:"p"})}),dialogTitle:(0,k.jsxs)("div",{className:ri,children:[(0,k.jsxs)("div",{className:di,children:[(0,k.jsxs)("div",{children:[(0,k.jsx)(Be.E,{src:"https://i.scdn.co/image/54470e5e056b93d7022076960d3a6b2267ece226",alt:"A figure sits cross-legged but poised in front of their synthesizer",imageHeight:"20px",imageWidth:"20px",crop:!0,circle:!0}),(0,k.jsx)(Be.E,{src:"https://i.scdn.co/image/54470e5e056b93d7022076960d3a6b2267ece226",alt:"A figure sits cross-legged but poised in front of their synthesizer",imageHeight:"30px",imageWidth:"30px",crop:!0,circle:!0})]}),(0,k.jsx)(s.D,{as:"h1",variant:"alto",children:"Rap Caviar"})]}),(0,k.jsxs)("div",{className:oi,children:[(0,k.jsx)(Ce.o,{iconOnly:ze.k,onClick:()=>e(!1),className:mi}),(0,k.jsx)(Ce.o,{iconOnly:Ke.o,className:ui,onClick:()=>{a(!0)}})]}),(0,k.jsx)("div",{className:ci,children:(0,k.jsx)(s.D,{as:"p",variant:"ballad",children:"Hello you made it to the top 10 percent"})})]}),id:"dialogAlert"})})]})})),pi="__97AKHEfxNtqFsLai1b",vi="pzFwHV7jvPlWTI6cG5TV",yi="iZu1aH8cr2cw98gqmTeo",Si="JRvbfJh7eAZ_1FrQukej";function hi(){const[e,i]=(0,n.useState)(!1);return(0,k.jsxs)(k.Fragment,{children:[e&&(0,k.jsx)(ki,{setuserView:i}),(0,k.jsxs)("button",{className:pi,onClick:()=>i(!0),children:[(0,k.jsxs)("div",{className:vi,children:[(0,k.jsx)(Be.E,{className:yi,src:"https://i.scdn.co/image/54470e5e056b93d7022076960d3a6b2267ece226",alt:"A figure sits cross-legged but poised in front of their synthesizer",imageHeight:"30px",imageWidth:"30px",crop:!0,circle:!0}),(0,k.jsx)(Be.E,{className:yi,src:"https://i.scdn.co/image/54470e5e056b93d7022076960d3a6b2267ece226",alt:"A figure sits cross-legged but poised in front of their synthesizer",imageHeight:"30px",imageWidth:"30px",crop:!0,circle:!0}),(0,k.jsx)(Be.E,{className:yi,src:"https://i.scdn.co/image/54470e5e056b93d7022076960d3a6b2267ece226",alt:"A figure sits cross-legged but poised in front of their synthesizer",imageHeight:"30px",imageWidth:"30px",crop:!0,circle:!0})]}),(0,k.jsxs)("div",{className:Si,children:[(0,k.jsx)(s.D,{as:"p",variant:"mestoBold",children:"View employee leaderboard"}),(0,k.jsx)(s.D,{as:"p",variant:"mesto",children:"You're in the top 21% of listeners."})]})]})]})}var gi=a(28515);const bi=n.memo((function({playlist:e,capabilities:i,spec:a,isPlaying:t,isActive:l,togglePlay:s,isBooklist:o,backgroundColor:d,tracklistDomRef:m}){const{metadata:{uri:u,name:p,unfilteredTotalLength:v,isOwnedBySelf:y,hasSpotifyTracks:S,canPlay:h,isPublished:g,totalLength:b}}=e,N=(0,M.k)(),x=(0,ie.$P)(),T=(0,n.useMemo)((()=>a.shuffleButtonContainerFactory()),[a]),C=i.canFilter&&v>0,j=i.canSort&&v>0,F=v>0,A=(0,r.W6)(Q.v8$),R=(0,r.W6)(Q.eKc,{loadingValue:!1}),[D,E]=(0,f.Z)(u),L=(0,w.o)(),P=(0,n.useCallback)((async()=>{L({targetUri:u,intent:D?"unsave":"save",type:"click"});try{await E(!D)}catch{}}),[D,L,E,u]),U=(0,n.useCallback)((()=>{const e=a.shareButtonFactory().hitShare({entityToBeShared:u,shareId:""});x.logInteraction(e)}),[a,x,u]),_=(0,n.useCallback)((()=>{let e;const i=a.heartButtonFactory();e=D?i.hitUnfollow({itemToBeUnfollowed:u}):i.hitFollow({itemToBeFollowed:u}),x.logInteraction(e),P()}),[a,P,D,x,u]),V=(0,xe.j)();return(0,k.jsxs)(ue.o,{backgroundColor:d,children:[(0,k.jsxs)(ue.F,{children:[h&&!o?(0,k.jsx)(be.$,{onClick:s,isPlaying:t,size:V,uri:u,ariaPlayLabel:c.ag.get("playlist.a11y.play",p),ariaPauseLabel:c.ag.get("playlist.a11y.pause",p)}):null,R&&b>0&&(0,k.jsx)(ie.Nh,{spec:T,children:(0,k.jsx)(fe.K,{shuffleContext:gi.W.playlistActionBar,entityName:p,contextUri:u,isActive:l,activationPlacement:"bottomEnd",size:V})}),y&&S&&!o&&(0,k.jsx)(I.v,{uri:u,renderEnabled:()=>(0,k.jsx)(Ne.v,{uri:u})}),y?null:(0,k.jsx)(he.r,{children:(0,k.jsx)(ke.H,{isAdded:!!D,onClick:_,size:V})}),o?(0,k.jsx)(ye.T,{uri:u,sharingInfo:null,interactionData:{intent:"share",type:"click",itemIdSuffix:"booklist/share"}}):(0,k.jsx)(pe.o,{uri:u,isFollowing:!!D,canDownload:F,onClick:(e,i)=>(0,W.l7)(i,a.downloadButtonFactory(),x,u),onFollow:P,size:V}),(0,k.jsx)(ge.F,{property:Q.bMb,renderNewExperience:()=>e.metadata.permissions?.canAdministratePermissions&&N&&!o?(0,k.jsx)(_e,{onClick:U,label:c.ag.get("permissions.invite-collaborators",p),uri:u,size:V}):null}),(0,k.jsx)(Te.y,{onShow:()=>(0,W.qq)(a,x),menu:(0,k.jsx)(Se.X,{uri:u,isPublished:g}),children:(0,k.jsx)(ve.MoreButton,{label:c.ag.get("more.label.context",p),size:V})}),C&&j&&(0,k.jsx)(ie.Nh,{spec:a,children:(0,k.jsx)(Oe,{metadata:e.metadata,tracklistDomRef:m})})]}),A&&(0,k.jsx)(hi,{})]})}));var Ni=a(5912),fi=a(73195),xi=a(19341),Ti=a(95195);const Ci="multiUserAttributionDisplayNamesV2";var ji=a(68817),Fi=a(14190);function Ai(e){return(0,Fi.MW)(e)||(0,Fi.JF)(e)}const Ri=new Set([]),Di=n.memo((function({ariaLabel:e,nrTracks:i,playlistUri:a,playlistName:l,isMixedMedia:s,isLive:r,isBlend:o,isConcert:u,isBooklist:p,canEdit:v,scrollToUid:y,feedbackPath:S,deleteFeedbackPath:h,usePlayContextItem:g,tracklistRef:b,tracklistDomRef:N,canRemove:f,spec:x,initialItems:T}){const C=(0,ie.$P)(),j=(0,n.useContext)(q.ZF),{filter:F}=(0,n.useContext)(R.fo),{sortState:E,setSortState:I}=(0,n.useContext)(D.Gb),L=(0,n.useRef)((()=>{})),[P,_]=(0,n.useState)([]),w=(0,t.I0)(),V=(0,ji.R)(),M=(0,n.useCallback)((()=>{b?.current&&b.current.update()}),[b]);(0,q.rZ)(a,M);const O=(0,n.useCallback)(((e,i)=>{I((0,A.VK)(e,E,p)),C.logInteraction(x.columnHeaderFactory({identifier:e,position:i||0}).hitSort())}),[I,E,p,C,x]),B=(0,n.useCallback)((e=>{L.current(),j.remove(a,e)}),[j,a]),W=(0,n.useCallback)(((e,i,a=!1)=>{f&&(L.current=i,e.length>1&&!a?_(e):B(e))}),[f,B]);(0,n.useEffect)((()=>{b?.current&&y&&b.current.scrollToItem({uid:y})}),[y,b]);const Q=(0,n.useCallback)((async(e,i)=>{const n=await j.getContents(a,{offset:e,limit:i,sort:(0,A._j)(E),filter:F,decorateFormatListData:!!S||r||o});return{items:n.items,totalLength:n.totalLength}}),[a,j,E,F,S,r,o]),z=(0,n.useCallback)(((e,i,n)=>{if(!b?.current)return;const t=b.current.getRows()[i];t&&(C.logInteraction(x.dragSort()),n===xi.W.Before?j.move(a,e,{before:t}):j.move(a,e,{after:t}))}),[b,C,x,j,a]),K=(0,n.useCallback)(((e,i,n)=>{if(!b?.current)return;const t=b.current.getRows()[i];t&&(C.logInteraction(x.dragAddToPlaylist({playlist:a,itemToBeAdded:e[0]})),n===xi.W.Before?w((0,m.jV)(a,e,{before:{uri:t.uri,uid:t.uid}})):w((0,m.jV)(a,e,{after:{uri:t.uri,uid:t.uid}})))}),[b,C,x,a,w]),Z=(0,n.useCallback)((()=>{j.resync(a)}),[j,a]),H=(0,n.useCallback)(((e,i)=>{let n,t=null;(0,Fi.JF)(e)?(t=e.show,n=e.images.concat(e.show?.images||[])):(0,Fi.MW)(e)?(t=e.album,n=e.album?.images):(0,Fi.yD)(e)&&(n=e.images);const r=(0,re.X)(n,{desiredSize:40,desiredLabel:"small"});let c=[];v&&!p&&E.order===te.kn.NONE&&(c=[U.a[d.JM.TRACK],U.a[d.JM.LOCAL_TRACK],U.a[d.JM.EPISODE]]);const m="1"===e?.formatListAttributes?.["dislike-feedback-selected"],y=!!(0,Fi.JF)(e)&&e.podcastSubscription.isUserSubscribed;let b=!1;(0,Fi.JF)(e)&&e.podcastSubscription.isPaywalled&&!y?b=!0:Ai(e)?b=e.isPlayable&&!m:(0,Fi.yD)(e)&&(b=!0);let N=!1;(0,Fi.JF)(e)&&e.podcastSubscription.isPaywalled?N=!0:(0,Fi.yD)(e)&&(N=e.isLocked&&!e.isOutOfMarket);const x=o&&((e,i)=>{const a=[];if(!i)return a;const n=i[Ci]?Ci:"multiUserAttributionDisplayNames",t=i?.[n]?.split(","),l=i?.multiUserAttributionImages?.split(",");if(!t||!l)return a;const s=i?.multiUserAttributionUsernamesV2?.split(",")||[],r=i?.multiUserAttributionType?.split(",")||[],o=t.length;for(let e=0;e<o;e++){const i=s[e],n=i&&(0,d.QK)(i).toURI();a.push({username:i,uri:n,displayName:t[e],images:(c=l[e],c.length>1?[{url:c}]:[]),recsplanation:r[e]})}var c;return a.sort(((i,a)=>i.username?i.username===e?.username?-1:a.username===e?.username?1:0:0))})(e.addedBy,e?.formatListAttributes)||e.addedBy&&[e.addedBy]||[];let T=0;Ai(e)?T=e.duration.milliseconds:(0,Fi.yD)(e)&&(T=e.durationMs||0);let C="";return function(e){return(0,Fi.MW)(e)||(0,Fi.JF)(e)||(0,Fi.yD)(e)}(e)&&(C=e.name),(0,k.jsx)(te.dx,{index:i,playIndex:e.playIndex??void 0,contextUri:a,uri:e.uri,uid:e.uid,isPlayable:b,duration_ms:T,isPaywalled:N,isUserSubscribed:y,name:C,artists:(0,Fi.MW)(e)?e.artists:void 0,albumOrShow:t,isExplicit:(0,Fi.MW)(e)&&e.isExplicit,isMixedMedia:s,isLocal:(0,Fi.MW)(e)&&e.isLocal,addedBy:x,hasDecoratedAddedBy:j.getCapabilities().canDecorateAddedBy,dateAdded:e.addedAt,release_date:(0,Fi.JF)(e)&&e.release.date||"",isMOGEFRestricted:((0,Fi.MW)(e)||(0,Fi.JF)(e))&&e.is19PlusOnly,type:e.type,imgUrl:r?.url||"",onMove:z,onInsert:K,usePlayContextItem:g,allowedDropTypes:c,feedbackPath:S,feedbackUri:e?.formatListAttributes?.feedback_uri,deleteFeedbackPath:h,isDisliked:m,isBlend:o,ticketingSiteURL:e?.formatListAttributes?.ticketingSite,eventDate:e?.formatListAttributes?.eventDate,canRemove:f,onFeedbackClick:Z,playlistName:l,isConcert:u,concertURL:e.formatListAttributes?.artist_concerts_uri,concertDate:e.formatListAttributes?.concert_date,concertVenue:e.formatListAttributes?.venue,authorName:(0,Fi.yD)(e)?e.authorName:"",isOutOfMarket:!!(0,Fi.yD)(e)&&e.isOutOfMarket,consumptionCapExplanation:(0,Fi.yD)(e)?e.consumptionCapExplanation:void 0,isOwnedBySelf:v},i+e.uri)}),[v,E.order,o,a,s,j,z,K,g,S,h,f,Z,l,u,p]),J=(0,n.useMemo)((()=>{let e;return e=j.getCapabilities().canSort?p?new Set(D.i1):new Set(D.zq):Ri,e}),[p,j]);return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(le.ZP,{value:"playlist-tracklist",children:(0,k.jsx)(te.Pv,{testID:"playlist-tracklist",ariaLabel:e,hasHeaderRow:!0,columns:V,sortableColumns:J,sortState:E,onSort:O,onRemove:W,renderRow:H,resolveUri:e=>e.uri,resolveUid:e=>e.uid,nrTracks:i,fetchTracks:Q,limit:100,canFetchAllTracks:j.getCapabilities().canFetchAllTracks,outerRef:b,outerDomRef:N,tracks:T,isConcertPlaylist:u},a)}),(0,k.jsx)(fi.h,{title:c.ag.get("playlist.remove_from_playlist",l),isOpen:P.length>0,tracks:P,onClose:e=>{e.stopPropagation(),_([])},onRemove:B})]})}));var Ei=a(60119),Ii=a(7130),Li=a(53935);const Pi=n.memo((function({playlistUri:e,playlistLength:i,canEdit:a}){const{tracks:t,refresh:l}=((e,i=10)=>{const a=2*i,t=3*i,l=(0,n.useRef)(0),[s,r]=(0,n.useState)(e),[d,c]=(0,n.useState)([]),m=(0,n.useRef)([]),u=(0,n.useContext)(Ei.Z),{spec:k,logger:p}=(0,ie.fU)(o.T,{data:{uri:e}}),v=(0,n.useMemo)((()=>k.recommendedFactory()),[k]);(0,n.useEffect)((()=>{const i=u.getEvents(),a=i=>{const a=i.data;a.uri===e&&(a.operation===Li.If.ADD?c((e=>e.filter((e=>a.uris.every((i=>i!==e.uri)))))):a.operation===Li.If.REMOVE&&c((e=>e.filter((e=>a.items.every((i=>i.uri!==e.uri)))))))};return i.addListener(Li.XL.OPERATION_COMPLETE,a),()=>{i.removeListener(Li.XL.OPERATION_COMPLETE,a)}}),[u,e]),(0,n.useEffect)((()=>(c([]),r(e),m.current=[],l.current=l.current+1,()=>{l.current=l.current+1})),[e]),(0,n.useEffect)((()=>{if(d.length<a){const e=Math.min(a,t-d.length),i=l.current;u.getRecommendedTracks(s,m.current,e).then((a=>{if(i!==l.current)return;const n=a.map((e=>e?.uri&&Ii.o.from(e.uri).id)).filter((e=>null!==e));a.length<e&&m.current.length?m.current=[]:m.current=[...m.current,...n],c((e=>[...e,...a]))}))}}),[a,t,u,s,d.length]);const y=(0,n.useCallback)((()=>{if(k){const e=v.refreshButtonFactory().hitRefreshContent();p.logInteraction(e)}c((e=>e.slice(i)))}),[p,v,k,i]);return{tracks:d.slice(0,i),_bufferedTracks:d.slice(i),refresh:y}})(e),r=!i||0===i,{usePlayContextItem:d}=(0,G.n)({uri:e.replace("spotify:","spotify:internal:recs:"),pages:[{items:t.map((e=>({...e,provider:null,type:Ti.p.TRACK,uid:null})))}]},{featureIdentifier:"playlist_recommendations"}),m=(0,n.useCallback)(((i,n)=>{const t=i.duration;return(0,k.jsx)(te.cp,{index:n,imgUrl:i.album.imageUrl,contextUri:e.replace("spotify","spotify:internal:recs"),uri:i.uri,isPlayable:!i.isMOGEFRestricted,name:i.name,artists:i.artists,album:{...i.album,imgUrl:i.album.imageUrl},isExplicit:i.explicit,isMOGEFRestricted:i.isMOGEFRestricted,usePlayContextItem:d,durationMs:t,shouldRenderDuration:!a},`${n}-${i.uri}`)}),[e,d,a]),u=(0,n.useMemo)((()=>[te.QD.TITLE,te.QD.ALBUM,te.QD.ADDED_AT,te.QD.ADD]),[]),p=(0,n.useCallback)((e=>e.uri),[]),v=(0,n.useCallback)((e=>e.id),[]),y=(0,n.useMemo)((()=>t.slice(0,Math.min(t.length,10))),[t]);return t.length>0?(0,k.jsxs)("div",{className:F.Z.recommendedTrackList,children:[(0,k.jsx)("div",{className:F.Z.top,children:(0,k.jsxs)("div",{className:F.Z.header,children:[(0,k.jsx)(s.D,{variant:"canon",children:c.ag.get("playlist.extender.recommended.title")}),(0,k.jsx)(s.D,{variant:"mesto",className:F.Z.subtitle,children:r?c.ag.get("playlist.extender.title.in.playlist"):c.ag.get("playlist.extender.songs.in.playlist")})]})}),t.length?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(te.Pv,{ariaLabel:c.ag.get("playlist.extender.recommended.header"),nrTracks:Math.min(t.length,10),rowPlaceholder:te.hU,tracks:y,renderRow:m,resolveUri:p,resolveUid:v,columns:u},`${e}-recommended`),(0,k.jsx)(Ce.o,{className:F.Z.refreshButton,onClick:l,children:c.ag.get("playlist.extender.refresh")})]}):null]}):null}));var Ui=a(15318),_i=a(65548),wi=a(76359),Vi=a(28642),Mi=a(27545);const Oi={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationSearchV2Track"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Track"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"playability"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playable"}},{kind:"Field",name:{kind:"Name",value:"reason"}}]}},{kind:"Field",name:{kind:"Name",value:"artists"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"profile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"albumOfTrack"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"contentRating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"}}]}}]}}]},Bi={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"queryInlineCurationSearchV2"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"term"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"5"}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"offset"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"0"}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"numberOfTopResults"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"10"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"searchV2"},arguments:[{kind:"Argument",name:{kind:"Name",value:"query"},value:{kind:"Variable",name:{kind:"Name",value:"term"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}},{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"offset"}}},{kind:"Argument",name:{kind:"Name",value:"numberOfTopResults"},value:{kind:"Variable",name:{kind:"Name",value:"numberOfTopResults"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"query"}},{kind:"Field",name:{kind:"Name",value:"tracksV2"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"item"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2TrackWrapper"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"artists"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2ArtistWrapper"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"albums"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2AlbumWrapper"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"episodes"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2EpisodesWrapper"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"topResults"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"itemsV2"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"item"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2ArtistWrapper"}},{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2EpisodesWrapper"}},{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2AlbumWrapper"}},{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2TrackWrapper"}}]}}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationSearchV2TrackWrapper"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"TrackResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Track"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2Track"}}]}}]}}]}},...Oi.definitions,{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationSearchV2ArtistWrapper"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ArtistResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Artist"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2Artist"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationSearchV2Artist"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Artist"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"profile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"visuals"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarImage"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationSearchV2AlbumWrapper"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AlbumResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Album"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2Album"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationSearchV2Album"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Album"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationSearchV2EpisodesWrapper"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"EpisodeResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Episode"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2Episode"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationSearchV2Episode"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Episode"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"playability"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playable"}},{kind:"Field",name:{kind:"Name",value:"reason"}}]}},{kind:"Field",name:{kind:"Name",value:"contentRating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"}}]}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"podcastV2"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Podcast"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}}]}}]}}]}}]}}]},Wi={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"queryInlineCurationSearchAlbum"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uris"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"offset"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"albums"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uris"},value:{kind:"Variable",name:{kind:"Name",value:"uris"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationAlbums"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationAlbums"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AlbumResponse"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Album"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"tracks"},arguments:[{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"offset"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}},{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uid"}},{kind:"Field",name:{kind:"Name",value:"track"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2Track"}}]}}]}}]}}]}}]}},...Oi.definitions]},Qi={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"queryInlineCurationSearchArtist"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uris"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"offset"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"artists"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uris"},value:{kind:"Variable",name:{kind:"Name",value:"uris"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationArtists"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationArtists"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ArtistResponse"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Artist"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"profile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"visuals"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarImage"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"discography"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"popularReleasesAlbums"},arguments:[{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"offset"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}},{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"label"}},{kind:"Field",name:{kind:"Name",value:"playability"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playable"}},{kind:"Field",name:{kind:"Name",value:"reason"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"topTracks"},arguments:[{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"offset"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uid"}},{kind:"Field",name:{kind:"Name",value:"track"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2Track"}}]}}]}}]}}]}}]}}]}},...Oi.definitions]};var zi=a(25639),Ki=a(26244),Zi=a(96635),Hi=a(87564);function Ji(e){return{type:Ti.p.ALBUM,uri:e.uri,id:e.id,name:e.name,images:(0,Ki.NS)(e.coverArt)}}function Gi(e){if("Album"!==e.data.__typename)return null;return Ji(e.data)}function qi(e){if("Artist"!==e.data.__typename)return null;const i=e.data;return{type:Ti.p.ARTIST,uri:i.uri,id:i.id,name:i.profile.name,images:(0,Ki.NS)(i.visuals.avatarImage)}}function Xi(e){if("Episode"!==e.data.__typename)return null;const i=e.data,a=i.podcastV2.data;return"Podcast"!==a.__typename?null:{type:Ti.p.EPISODE,uri:i.uri,id:i.id,name:i.name,images:(0,Ki.NS)(i.coverArt),isExplicit:i.contentRating?.label===zi.KS.Explicit,is19PlusOnly:i.contentRating?.label===zi.KS.NineteenPlus,podcast:{id:a.id,uri:a.uri,name:a.name},isPlayable:i.playability.playable}}function Yi(e){const i=(0,Ki.NS)(e.albumOfTrack?.coverArt||null);return{type:Ti.p.TRACK,uri:e.uri,id:e.id,name:e.name,album:{name:e.albumOfTrack?.name||"",uri:e.albumOfTrack?.uri||"",imgUrl:i.at(0)?.url||"",id:e.albumOfTrack?.id||""},artists:e.artists.items.map((e=>({id:e.id,name:e.profile.name,uri:e.uri}))),isPlayable:e.playability.playable,isExplicit:e.contentRating?.label===zi.KS.Explicit,is19PlusOnly:e.contentRating?.label===zi.KS.NineteenPlus}}function $i(e){if("Track"!==e.data.__typename)return null;return Yi(e.data)}function ea(e){return(e?.itemsV2??[]).map((e=>{const i=(0,Ki.U2)(e,"item");switch(i.__typename){case"AlbumResponseWrapper":return Gi(i);case"ArtistResponseWrapper":return qi(i);case"EpisodeResponseWrapper":return Xi(i);case"TrackResponseWrapper":return $i(i);default:return(0,Hi._)(i),null}})).filter(Zi.K)||[]}const ia=async(e,i,a=0,n=10,t=10)=>{const l={term:i,offset:a,limit:n,numberOfTopResults:t},s=await e(Bi,l),r=s?.data?.searchV2;return r?(d=i,{albums:(k=(o=r).albums,((k?.items??[]).map((e=>Gi(e))).filter(Zi.K)||[])??[]),artists:(u=o.artists,((u?.items??[]).map((e=>qi(e))).filter(Zi.K)||[])??[]),episodes:(m=o.episodes,((m?.items??[]).map((e=>Xi(e))).filter(Zi.K)||[])??[]),tracks:(c=o.tracksV2,((c?.items??[]).map((e=>$i(e.item))).filter(Zi.K)||[])??[]),topResults:ea(o.topResults)??[],query:d}):null;var o,d,c,m,u,k},aa=async(e,i,a=50,n=0)=>{const t={uris:[i],limit:a,offset:n},l=await e(Wi,t),s=l?.data?.albums;return s?function(e){const i=e.at(0);if(!i)return null;switch(i.__typename){case"Album":return{albums:[],artists:[],episodes:[],tracks:i.tracks.items.map((e=>Yi(e.track)))||[],topResults:[]};case"GenericError":case"NotFound":return null;default:return(0,Hi._)(i),null}}(s):null},na=async(e,i,a=50,n=0)=>{const t={uris:[i],limit:a,offset:n},l=await e(Qi,t),s=l?.data?.artists;return s?function(e){const i=e.at(0);if(!i)return null;switch(i.__typename){case"Artist":return{albums:i.discography.popularReleasesAlbums.items.map((e=>Ji(e)))||[],artists:[],episodes:[],tracks:i.discography.topTracks.items.map((e=>Yi(e.track)))||[],topResults:[]};case"GenericError":case"NotFound":return null;default:return(0,Hi._)(i),null}}(s):null};var ta=a(84875),la=a.n(ta),sa=a(85830),ra=a(70138);const oa="YAYCVnYpPvmYV4JyTmn5",da="FeWwGSRANj36qpOBoxdx",ca="_h5mio6VqcL_fmiXAb1S",ma="Hfgj4Zbb2ijt8g54MlCA",ua="sgZ_MgcS1NlccH19fYsa",ka="JzyZE2R09wq7xtjECDeR",pa=n.memo((function({placeholder:e,onChange:i=(()=>{}),onFocus:a=(()=>{})}){const[t,l]=(0,n.useState)(""),r=(0,n.useRef)(null),o=(0,sa.y1)((e=>{i(e)}),200),d=(0,n.useCallback)((e=>{const i=e.currentTarget.value;l(i),o(i)}),[l,o]),m=(0,n.useCallback)((()=>{r.current&&r.current.focus(),l(""),i("")}),[l,i]),u=(0,n.useCallback)((e=>{"Escape"===e.key&&t&&m()}),[t,m]);return(0,k.jsxs)("div",{className:oa,role:"search",children:[(0,k.jsx)(s.D,{as:"input",variant:"mesto",ref:r,className:la()(da),role:"searchbox",maxLength:80,autoCorrect:"off",autoCapitalize:"off",spellCheck:!1,placeholder:e,onChange:d,onKeyDown:u,onFocus:a,value:t}),(0,k.jsxs)("div",{className:ca,children:[(0,k.jsx)("span",{className:ma,children:(0,k.jsx)(ra.j,{iconSize:16,className:ua,"aria-hidden":"true"})}),t&&(0,k.jsx)("button",{className:ka,onClick:m,"aria-label":c.ag.get("search.a11y.clear-input"),children:(0,k.jsx)(ze.k,{iconSize:16})})]})]})})),va=({renderRow:e,searchResults:i,renderSeeAllRow:a,seeAllXList:n})=>(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(te.Pv,{ariaLabel:c.ag.get("search.title.top-results"),renderRow:e,rowPlaceholder:te.hU,nrTracks:i.length,tracks:i,resolveUri:e=>e.uri,columns:[te.QD.TITLE,te.QD.ALBUM,te.QD.ADD],testID:"playlist-inline-curation-loaded-results"}),(0,k.jsx)(te.Pv,{ariaLabel:c.ag.get("search.title.all"),renderRow:a,rowPlaceholder:te.hU,nrTracks:n.length,tracks:n,resolveUri:e=>e.uri,columns:[te.QD.TITLE,te.QD.ALBUM,te.QD.ADD],testID:"playlist-inline-curation-see-all-options"})]}),ya=({renderRow:e,searchResults:i})=>(0,k.jsx)(te.Pv,{ariaLabel:c.ag.get("search.title.top-results"),renderRow:e,rowPlaceholder:te.hU,nrTracks:i.length,tracks:i,resolveUri:e=>e.uri,columns:[te.QD.TITLE,te.QD.ALBUM,te.QD.ADD]}),Sa=({renderRow:e,searchResults:i})=>{const a=i.filter((e=>e.type===Ti.p.TRACK)),n=i.filter((e=>e.type===Ti.p.ALBUM));return(0,k.jsxs)("div",{children:[(0,k.jsx)(s.D,{as:"p",variant:"cello",className:F.Z.artistResultListTitle,children:c.ag.get("playlist.curation.popular_songs")}),(0,k.jsx)(te.Pv,{ariaLabel:c.ag.get("playlist.curation.popular_songs"),renderRow:e,rowPlaceholder:te.hU,nrTracks:a.length,tracks:a,resolveUri:e=>e.uri,columns:[te.QD.TITLE,te.QD.ALBUM,te.QD.ADD]}),(0,k.jsx)(s.D,{as:"p",variant:"cello",className:F.Z.artistResultListTitle,children:c.ag.get("playlist.curation.albums")}),(0,k.jsx)(te.Pv,{ariaLabel:c.ag.get("playlist.curation.albums"),renderRow:e,rowPlaceholder:te.hU,nrTracks:n.length,tracks:n,resolveUri:e=>e.uri,columns:[te.QD.TITLE,te.QD.ALBUM,te.QD.ADD]})]})},ha=({renderRow:e,searchResults:i})=>(0,k.jsx)(te.Pv,{ariaLabel:c.ag.get("search.title.top-results"),renderRow:e,rowPlaceholder:te.hU,nrTracks:i.length,tracks:i,resolveUri:e=>e.uri,columns:[te.QD.TITLE,te.QD.ALBUM,te.QD.ADD]}),ga=({renderRow:e,searchResults:i})=>(0,k.jsx)(te.Pv,{ariaLabel:c.ag.get("search.title.top-results"),renderRow:e,rowPlaceholder:te.hU,nrTracks:i.length,tracks:i,resolveUri:e=>e.uri,columns:[te.QD.TITLE,te.QD.ALBUM,te.QD.ADD]}),ba=({renderRow:e,searchResults:i})=>(0,k.jsx)(te.Pv,{ariaLabel:c.ag.get("search.title.top-results"),renderRow:e,rowPlaceholder:te.hU,nrTracks:i.length,tracks:i,resolveUri:e=>e.uri,columns:[te.QD.TITLE,te.QD.ALBUM,te.QD.ADD]});var Na=a(14711);const fa="G2t3w2AAeb5OXp0_GeWs",xa="saVjTFMyWYUz975_tkQm",Ta="thi8fNCkEhutRkDC90c0",Ca="pHVlkChuJpEnBQyU3ADv",ja="ENWs3JxcqtD98_8fbPz2",Fa="L8IUKEJL6JiTyE_qUVCc",Aa="XcyjdXgsNX0DBt72tfiD",Ra="VhJnuS7UcUPfIlzD8dlU",Da="He29vQ5anFj_bJ5iEaI2",Ea=({searchResult:e,index:i,isRTL:a,onClick:n})=>{const t=e.images.at(0)?.url;return(0,k.jsx)(Na.RX,{className:ja,rowIndex:i,"aria-selected":!1,children:(0,k.jsxs)("div",{"aria-label":`${c.ag.get("artist-page.tracks.seemore")} ${e.name}`,className:Da,onClick:n,children:[(0,k.jsxs)(Na.id,{columnIndex:0,className:Fa,children:[void 0!==t?(0,k.jsx)("img",{className:Ta,src:t,alt:e.name}):null,(0,k.jsxs)("div",{className:Aa,children:[(0,k.jsx)(s.D,{as:"p",className:Ca,variant:"ballad",children:e.name}),(0,k.jsx)(s.D,{as:"p",variant:"mesto",semanticColor:"textSubdued",children:c.ag.get("album")})]})]}),(0,k.jsx)(Na.id,{columnIndex:1}),(0,k.jsx)(Na.id,{columnIndex:2,children:(0,k.jsx)("button",{"data-testid":"top-bar-forward-button","aria-label":`See more from ${e.name}`,className:Ra,onClick:n,children:a?(0,k.jsx)(wi.e,{}):(0,k.jsx)(_i.V,{})})})]})})};var Ia=a(72481);const La=({size:e})=>(0,k.jsx)("div",{className:xa,children:(0,k.jsx)(Ia.a,{iconSize:e})}),Pa=({searchResult:e,index:i,isRTL:a,onClick:n})=>{const t=e.images.at(0)?.url;return(0,k.jsx)(Na.RX,{className:ja,rowIndex:i,"aria-selected":!1,children:(0,k.jsxs)("div",{"aria-label":`${c.ag.get("artist-page.tracks.seemore")} ${e.name}`,className:Da,onClick:n,"data-testid":"playlist-inline-curation-artist",children:[(0,k.jsxs)(Na.id,{columnIndex:0,className:Fa,children:[void 0!==t?(0,k.jsx)("img",{className:fa,src:t,alt:e.name}):(0,k.jsx)(La,{size:16}),(0,k.jsxs)("div",{className:Aa,children:[(0,k.jsx)(s.D,{as:"p",className:Ca,variant:"ballad",children:e.name}),(0,k.jsx)(s.D,{as:"p",variant:"mesto",semanticColor:"textSubdued",children:c.ag.get("artist")})]})]}),(0,k.jsx)(Na.id,{columnIndex:1}),(0,k.jsx)(Na.id,{columnIndex:2,children:(0,k.jsx)("button",{"data-testid":"top-bar-forward-button","aria-label":`See more from ${e.name}`,className:Ra,onClick:n,children:a?(0,k.jsx)(wi.e,{}):(0,k.jsx)(_i.V,{})})})]})})},Ua=({episode:e,contextUri:i,index:a,usePlayContextItem:n})=>(0,k.jsx)(te.YK,{uid:e.id,uri:e.uri,isPlayable:e.isPlayable,isMOGEFRestricted:e.is19PlusOnly,isExplicit:e.isExplicit,contextUri:i,name:e.name,imgUrl:e.images.at(0)?.url??"",index:a,podcast:e.podcast,usePlayContextItem:n}),_a=({label:e,index:i,isRTL:a,onClick:n})=>(0,k.jsx)(Na.RX,{className:ja,rowIndex:i,"aria-selected":!1,children:(0,k.jsxs)("div",{"aria-label":e,className:Da,onClick:n,children:[(0,k.jsx)(Na.id,{columnIndex:0,className:Fa,children:(0,k.jsx)(s.D,{as:"p",className:Ca,variant:"ballad",children:e})}),(0,k.jsx)(Na.id,{columnIndex:1}),(0,k.jsx)(Na.id,{columnIndex:2,children:(0,k.jsx)("button",{"data-testid":"top-bar-forward-button","aria-label":e,className:Ra,onClick:n,children:a?(0,k.jsx)(wi.e,{}):(0,k.jsx)(_i.V,{})})})]})}),wa=({track:e,contextUri:i,index:a,usePlayContextItem:n})=>(0,k.jsx)(te.cp,{uid:e.id,uri:e.uri,isPlayable:e.isPlayable,isMOGEFRestricted:e.is19PlusOnly,isExplicit:e.isExplicit,contextUri:i,name:e.name,imgUrl:e.album.imgUrl,index:a,album:e.album,artists:e.artists,usePlayContextItem:n});let Va=function(e){return e[e.SEARCH=0]="SEARCH",e[e.ALBUM=1]="ALBUM",e[e.ARTIST=2]="ARTIST",e[e.PODCAST=3]="PODCAST",e[e.PLAYLIST=4]="PLAYLIST",e[e.ALBUMRESULTS=5]="ALBUMRESULTS",e[e.ARTISTRESULTS=6]="ARTISTRESULTS",e[e.PODCASTRESULTS=7]="PODCASTRESULTS",e[e.EPISODERESULTS=8]="EPISODERESULTS",e[e.TRACKRESULTS=9]="TRACKRESULTS",e}({});const Ma=(e,i)=>"GO_BACK"===i.type?1===e.breadcrumbs.length?e:e={...e,breadcrumbs:e.breadcrumbs.slice(0,e.breadcrumbs.length-1)}:"NAV_TO_ENTITY"===i.type?e={...e,breadcrumbs:[...e.breadcrumbs,i.level]}:("NAV_TO_RESULTS"===i.type?e={...e,breadcrumbs:[...e.breadcrumbs,i.level]}:"CHANGE_TERM"===i.type&&(e={term:i.term,breadcrumbs:[{navType:Va.SEARCH,term:i.term,title:""}]}),e),Oa=({resultList:e,level:i,isRTL:a,playlistUri:t,navToResults:l,navToEntity:r,term:o})=>{let m=e;const u=(e=>e.filter((e=>e.type===Ti.p.TRACK||e.type===Ti.p.EPISODE)).map((({uri:e,id:i})=>({type:(0,d.wj)(e)?Ti.p.TRACK:Ti.p.EPISODE,uri:e,uid:i,provider:null}))))(e),{usePlayContextItem:p}=(0,G.n)({uri:`${t.replace("spotify:","spotify:internal:recs:")}:${encodeURIComponent(o)}:${i?.navType??0}`,pages:[{items:u}]},{featureIdentifier:"search"}),v=(0,n.useCallback)(((e,i)=>(0,k.jsx)(_a,{isRTL:a,index:i,label:e.label,onClick:()=>{l({navType:e.type,term:o,title:e.label})}},e.uri)),[a,l,o]),y=(0,n.useCallback)(((e,i)=>e.type===Ti.p.ARTIST?(0,k.jsx)(Pa,{isRTL:a,index:i,searchResult:e,onClick:()=>{r({navType:Va.ARTIST,uri:e.uri,title:e.name})}},e.uri):e.type===Ti.p.EPISODE?(0,k.jsx)(Ua,{index:i,episode:e,contextUri:t.replace("spotify:","spotify:internal:recs:"),usePlayContextItem:p},e.uri):e.type===Ti.p.TRACK?(0,k.jsx)(wa,{index:i,track:e,contextUri:t.replace("spotify:","spotify:internal:recs:"),usePlayContextItem:p},e.uri):(0,k.jsx)(Ea,{index:i,isRTL:a,searchResult:e,onClick:()=>{r({navType:Va.ALBUM,uri:e.uri,title:e.name})}},e.uri)),[a,r,t,p]);if(""===o)return(0,k.jsx)("div",{className:F.Z.emptySearchTermContainer});if(!e||0===e?.length)return(0,k.jsxs)("div",{className:F.Z.emptyStateContainer,children:[(0,k.jsx)(s.D,{as:"h1",variant:"canon",children:c.ag.get("search.empty-results-title",o)}),(0,k.jsx)(s.D,{as:"p",variant:"mesto",children:c.ag.get("search.empty-results-text")})]});if(i?.navType===Va.SEARCH){const i=[{type:Va.ARTISTRESULTS,label:c.ag.get("playlist.curation.see_all_artists"),uri:"spotify:internal:recs:see-all-artists"},{type:Va.ALBUMRESULTS,label:c.ag.get("playlist.curation.see_all_album"),uri:"spotify:internal:recs:see-all-albums"},{type:Va.TRACKRESULTS,label:c.ag.get("playlist.curation.see_all_songs"),uri:"spotify:internal:recs:see-all-songs"}];return m=e,(0,k.jsx)(va,{renderRow:y,searchResults:m,renderSeeAllRow:v,seeAllXList:i})}return i?.navType===Va.ALBUM?(0,k.jsx)(ya,{renderRow:y,searchResults:m}):i?.navType===Va.ARTIST?(0,k.jsx)(Sa,{renderRow:y,searchResults:m}):i?.navType===Va.ALBUMRESULTS?(0,k.jsx)(ha,{renderRow:y,searchResults:m}):i?.navType===Va.TRACKRESULTS?(0,k.jsx)(ga,{renderRow:y,searchResults:m}):i?.navType===Va.ARTISTRESULTS?(0,k.jsx)(ba,{renderRow:y,searchResults:m}):null},Ba=({playlistUri:e,onCurationModeChange:i})=>{const[a,t]=(0,n.useState)([]),[l,r]=(0,n.useState)(),o=(0,Vi.S)(),{level:d,changeTerm:m,goBack:u,navToEntity:p,navToResults:v,term:y}=(()=>{const[e,i]=(0,n.useReducer)(Ma,{term:"",breadcrumbs:[]}),{breadcrumbs:a,term:t}=e;return{changeTerm:e=>{i({type:"CHANGE_TERM",term:e})},level:a[a.length-1]||null,goBack:()=>{i({type:"GO_BACK"})},navToEntity:e=>{i({type:"NAV_TO_ENTITY",level:e})},navToResults:e=>{i({type:"NAV_TO_RESULTS",level:e})},term:t}})(),{request:S}=(0,n.useContext)(Mi.Ax);return(0,n.useEffect)((()=>{let e=!0;return(async()=>{if(d)switch(d.navType){case Va.SEARCH:try{if(!l||l.query!==y&&""!==y){const i=await ia(S,y);e&&r(i)}else""===y&&t([])}catch{t([])}l&&t(l.topResults);break;case Va.ARTISTRESULTS:l&&t(l?.artists);break;case Va.ALBUMRESULTS:l&&t(l?.albums);break;case Va.TRACKRESULTS:l&&t(l?.tracks);break;case Va.EPISODERESULTS:l&&t(l?.episodes);break;case Va.ALBUM:try{const i=await aa(S,d.uri,100,0);e&&i&&t(i.tracks)}catch{t([])}break;case Va.ARTIST:try{const i=await na(S,d.uri,100,0);e&&i&&t([...i.albums,...i.tracks])}catch{t([])}}})(),()=>{e=!1}}),[d,y,l,S]),(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("section",{className:F.Z.playlistInlineCurationSection,children:[(0,k.jsxs)("div",{className:F.Z.playlistInlineCurationWrapper,children:[(0,k.jsx)(s.D,{as:"h1",className:F.Z.playlistInlineCurationTitle,variant:"canon",children:c.ag.get("playlist.curation.title")}),(0,k.jsx)(n.Suspense,{fallback:null,children:(0,k.jsx)(pa,{placeholder:c.ag.get("playlist.curation.search_placeholder"),onFocus:()=>{i(!0)},onChange:e=>{m(e)}})})]}),(0,k.jsx)("button",{className:F.Z.playlistInlineCurationCloseButton,onClick:()=>i(!1),children:(0,k.jsx)(ze.k,{"aria-label":c.ag.get("close")})})]}),null!==d&&d.navType!==Va.SEARCH?(0,k.jsxs)("button",{className:F.Z.playlistInlineCurationBackButton,onClick:()=>u(),children:[o?(0,k.jsx)(_i.V,{"aria-label":c.ag.get("navbar.go-back"),className:F.Z.icon}):(0,k.jsx)(wi.e,{"aria-label":c.ag.get("navbar.go-back"),className:F.Z.icon}),(0,k.jsx)(s.D,{as:"p",variant:"cello",children:d.title})]}):null,(0,k.jsx)("div",{className:F.Z.searchResultListContainer,"data-testid":"playlist-inline-curation-results",children:(0,k.jsx)(Oa,{playlistUri:e,term:y,level:d,resultList:a,navToEntity:p,navToResults:v,isRTL:o})})]})},Wa=n.lazy((()=>Promise.all([a.e(1814),a.e(2519),a.e(7405)]).then(a.bind(a,72519)))),Qa=n.lazy((()=>a.e(7427).then(a.bind(a,68603)))),za=n.lazy((()=>a.e(7427).then(a.bind(a,71563)))),Ka=n.lazy((()=>a.e(5457).then(a.bind(a,73771)))),Za=n.memo((function({playlist:e,capabilities:i}){const{metadata:{uri:a,name:u,images:p,totalLength:v,unfilteredTotalLength:y,isOwnedBySelf:b,isCollaborative:N,hasEpisodes:f,canAdd:x,canRemove:T,formatListData:C,hasDateAdded:j,collaborators:I,isPublished:L,hasSpotifyAudiobooks:H},contents:{items:q}}=e,{spec:Y,logger:te,UBIFragment:le}=(0,ie.fU)(o.T,{data:{uri:a}}),se=(0,M.k)(),re=(0,r.W6)(ae.OC,{loadingValue:!1}),oe=n.useMemo((()=>Y.headerFactory()),[Y]),de=n.useMemo((()=>Y.tracklistFactory()),[Y]),ce=n.useMemo((()=>Y.actionBarFactory()),[Y]),ue="chart"===C?.type,ke="concert-playlist"===C?.type&&re,pe="live-streams"===C?.type,ve=["blend","celebrity-blend","friends-mix"].indexOf(C?.type||"")>-1,ye=!!f,Se=H||!1,he="artistsets"===C?.type||"this-is"===C?.attributes["editorial.series"],ge=C?.attributes||{},be=ge.header_image_url_desktop||ge.image_url||null,Ne=x&&T,{inlineCurationModeIsOn:fe,handleInlineCurationModeChange:xe}=((e,i)=>{const[a,t]=(0,n.useState)(e&&0===i),{scrollNodeChildRef:l}=(0,n.useContext)(Z.VX),s=(0,n.useRef)(a);return(0,n.useEffect)((()=>{const e=!s.current;l&&e&&a&&l.current?.scrollIntoView({block:"end",behavior:"smooth"}),s.current=a}),[l,a]),{inlineCurationModeIsOn:a,handleInlineCurationModeChange:e=>{t(e)}}})(Ne&&!Se,y),{productState:Te}=(0,t.v9)(K.Gg),Ce=!!Te&&parseInt(Te.ads,10)>0,je="spotify"===e.metadata.owner.username,Fe=(0,t.I0)(),Ae=(0,l.ur)(),Re=(0,l.TH)(),De=(0,r.W6)(Q.XPU,{loadingValue:!1}),Ee=(0,r.W6)(Q.wAP,{loadingValue:!1}),Ie=(0,E.useThisisPlaylistExtensionQuery)({uri:a},{cacheTime:5*J.y,enabled:he}).data?.playlistV2,Le="Playlist"===Ie?.__typename?Ie.artistsOnTour?.[0]:null,Pe="POP"!==Ae?new URLSearchParams(Re.search).get("uid"):null,Ue=(0,w.o)(),{filter:_e}=(0,n.useContext)(R.fo),{sortState:we}=(0,n.useContext)(D.Gb),Ve=(0,n.useRef)(null),Me=(0,n.useRef)(null),[Oe]=p,Be=(0,O.Z)(null!==be?be:Oe?.url||null),{isPlaying:We,isActive:Qe,togglePlay:ze,usePlayContextItem:Ke}=(0,G.n)((0,X.U)(a,(0,A._j)(we),_e),{featureIdentifier:"playlist"}),Ze=(0,n.useCallback)((()=>{const e=(0,W.aK)({isPlaying:We,isActive:Qe,spec:ce.playButtonFactory(),logger:te,uri:a});ze({loggingParams:e})}),[We,Qe,ze,ce,te,a]),He=(0,n.useCallback)((e=>{const i=e.split(/[\r\n]+/g).map((e=>(0,d.EC)(e))).filter((e=>(0,d.wj)(e)||(0,d.hn)(e)||(0,d.dB)(e)));if(i.length>0&&x){const e=i.map((e=>e.toURI())),n=Ve.current?.getSelected()?.slice(-1)?.[0],t={after:n??"end"};Fe((0,m.jV)(a,e,t))}}),[x,Fe,a]);(0,B.aw)(He);const Je=(0,n.useCallback)(((e,i)=>{const n=[...i[U.a[d.JM.TRACK]]||[],...i[U.a[d.JM.LOCAL_TRACK]]||[],...i[U.a[d.JM.EPISODE]]||[],...i[U.a[d.JM.ALBUM]]||[]];n.length>0&&x&&(te.logInteraction(Y.dragAddToPlaylist({playlist:a,itemToBeAdded:n[0]})),Fe((0,m.jV)(a,n)),Ue({targetUri:a,intent:"add",type:"drop"}))}),[x,te,Y,a,Fe,Ue]),Ge=(0,V.g)(),qe=(0,t.v9)(K.n5),Xe=(0,t.v9)(z.rZ),Ye=(0,r.W6)(ae.ky),$e=(0,$.vI)(ne.k.RichPlaylistPages,Re)||Ye===ae.RG.VARIANT,ei=!Se&&se&&!Se&&(Ne&&!fe||!je&&$e&&0!==y),ii=!Se&&b&&se;(0,_.M)({category:"rpp_exposures",action:"playlist_page_visit",remoteConfigProperty:ae.ky,label:"dwp",context:a,country:qe?Xe:"",spt:!0,isAnonymous:Ge});const ai=I?.count??1,ni=(0,n.useMemo)((()=>(0,A.RG)({isCollaborative:N,isMixedMedia:ye,hasDateAdded:j,isLive:pe,isConcert:ke,isBlend:ve,nrCollaborators:ai,isBooklist:Se})),[j,ve,N,ke,pe,ye,ai,Se]);return(0,k.jsxs)(n.Suspense,{fallback:null,children:[(0,k.jsx)(g.$,{children:(0,ee.T5)({playlistName:u,userName:e.metadata.owner.displayName||"",isSpotifyOwned:je})}),(0,k.jsx)(h.Z,{types:x&&!Se?[U.a[d.JM.TRACK],U.a[d.JM.LOCAL_TRACK],U.a[d.JM.EPISODE],U.a[d.JM.ALBUM]]:[],onDrop:Je,children:(0,k.jsxs)("section",{role:"presentation",className:F.Z.playlist,"data-testid":"playlist-page","data-test-uri":a,children:[(0,k.jsx)(Ni.s,{metadata:e.metadata,isPlaying:We,isPublished:L,togglePlay:Ze,backgroundColor:Be,spec:oe}),(0,k.jsxs)("div",{className:F.Z.playlistContent,children:[(0,k.jsx)(bi,{playlist:e,capabilities:i,spec:ce,isPlaying:We,isActive:Qe,togglePlay:Ze,isBooklist:Se,backgroundColor:Be,tracklistDomRef:Me}),(0,k.jsx)(n.Suspense,{fallback:null,children:(0,k.jsx)(Qa,{formatListData:e.metadata.formatListData})}),Le?.upcomingEventsCount?(0,k.jsx)(za,{artistConcertsUri:Le.uri||"",artistImageUrl:Le.imageUrl||"",artistName:Le.title||"",spec:Y}):null,(0,k.jsxs)("div",{className:"contentSpacing",children:[Ce?(0,k.jsx)(S,{playlistUri:a}):null,De&&Ce&&je?(0,k.jsx)(Ka,{playlistUri:a,playlistName:u}):null,e.metadata.hasSpotifyAudiobooks&&Ee&&(0,k.jsxs)("div",{className:F.Z.noBooklistSupportContainer,children:[(0,k.jsx)(s.D,{variant:"cello",semanticColor:"textBase",children:c.ag.get("web-player.playlist.booklist-not-supported-title")}),(0,k.jsx)(s.D,{variant:"ballad",semanticColor:"textSubdued",children:c.ag.get("web-player.playlist.booklist-not-supported.message")})]}),v>0&&(0,k.jsx)(n.Suspense,{fallback:null,children:(0,k.jsx)(le,{spec:de,children:(0,k.jsx)(P.m,{columns:ni,children:ue?(0,k.jsx)(me,{ariaLabel:u,nrTracks:v,playlistUri:a,rankType:ge.rank_type||"",scrollToUid:Pe,usePlayContextItem:Ke,tracklistDomRef:Me},a):(0,k.jsx)(Di,{ariaLabel:u,nrTracks:v,playlistUri:a,playlistName:u,isMixedMedia:ye,isLive:pe,isConcert:ke,isBlend:ve,isBooklist:Se,canEdit:Ne,scrollToUid:Pe,feedbackPath:ge["dislike-endpoint"],deleteFeedbackPath:ge["delete-endpoint"],usePlayContextItem:Ke,tracklistRef:Ve,tracklistDomRef:Me,canRemove:T,spec:de,initialItems:q},a)})})}),ii&&(0,k.jsx)(n.Suspense,{fallback:null,children:fe?(0,k.jsx)(Ba,{playlistUri:a,onCurationModeChange:xe}):(0,k.jsx)("button",{className:F.Z.seeMore,onClick:()=>{xe(!0)},children:(0,k.jsx)(s.D,{as:"div",variant:"mestoBold",children:c.ag.get("playlist.curation.find_more")})})}),ei?(0,k.jsx)("div",{"data-testid":"recommended-track",children:(0,k.jsx)(Pi,{playlistUri:a,playlistLength:e.metadata.unfilteredTotalLength,canEdit:Ne})}):null]})]})]})})]})})),Ha=n.memo((function({uri:e}){const i=(0,n.useContext)(q.ZF).getCapabilities(),{isEnhanced:a}=(0,L.U)(e),{filter:t}=(0,n.useContext)(R.fo),{sortState:l}=(0,n.useContext)(D.Gb),{metadataOptions:s,contentsOptions:r}=(0,Ui.d)(l,t),o=(0,Y.Z)(e,s,r);return o?o.metadata.permissions&&!o.metadata.permissions.canView?(0,k.jsx)(C,{uri:e}):(0,k.jsx)(I.v,{uri:e,renderEnabled:()=>a?(0,k.jsx)(n.Suspense,{fallback:null,children:(0,k.jsx)(Wa,{metadata:o.metadata,capabilities:i,featureIdentifier:"playlist"})}):(0,k.jsx)(Za,{playlist:o,capabilities:i}),renderDisabled:()=>(0,k.jsx)(Za,{playlist:o,capabilities:i})}):(0,k.jsx)(j.h,{hasError:!1,errorMessage:c.ag.get("error.not_found.title.playlist"),loadOffline:i.canModifyOffline})})),Ja=()=>{const{playlistId:e}=(0,l.UO)(),i=(0,d.FW)((e||"").split("&")[0]).toURI();return(0,k.jsx)(H.fd,{surface:H.Tg.PLAYLIST,uris:[i],children:(0,k.jsx)(D.kz,{uri:i,children:(0,k.jsx)(R.hz,{uri:i,children:(0,k.jsx)(Ha,{uri:i})})})})}},21324:(e,i,a)=>{a.d(i,{M:()=>c});var n=a(59496),t=a(94823),l=a(24619),s=a(9990),r=a(46584),o=a(73748),d=a(54329);const c=({category:e,action:i,remoteConfigProperty:a,defaultVariant:c,label:m,context:u,country:k,spt:p=!1,isAnonymous:v=!1})=>{const y=(0,s.W6)(a),S=(0,d.s4)();(0,n.useEffect)((()=>{if(!y||!m)return;const a={category:e,action:i,variant:c??y,label:m,os:(0,r.y)(),...u&&{context:u},...k&&{country:k},...p&&{sp_t:(0,o.vQ)("sp_t")}};v?S.send((0,l.k)(a)):S.send((0,t.x)(a))}),[y,m,e,i,u,k,p,v,S,c])}},90570:(e,i,a)=>{a.d(i,{vI:()=>n});const n=(e,i)=>{const a=i?new URLSearchParams(i.search):void 0;return"1"===a?.get(e)}},46354:(e,i,a)=>{a.d(i,{k:()=>n});let n=function(e){return e.I18nSEO="i18nSEO",e.RTPTrackCredits="rtpv2p2",e.BlendParty="bp",e.BlendPartyV2="bpv2",e.VideoPodcastShowTitleTag="vidpodshow",e.I18nAdditionalPages="i18nap",e.IlrTrackCanonicalTop="ilr-track-canonical-top",e.IlrTrackCanonicalBottom="ilr-track-canonical-bottom",e.IlrTrackOrganicTop="ilr-track-organic-top",e.IlrTrackOrganicBottom="ilr-track-organic-bottom",e.RichPlaylistPages="rpp",e.GenerativeAIContent="genai",e}({})}}]);
//# sourceMappingURL=xpui-routes-playlist.js.map