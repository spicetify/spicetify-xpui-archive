"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[7521],{36121:(e,t,i)=>{i.d(t,{n:()=>D});var n=i(59496),s=i(84875),a=i.n(s),r=i(97601),l=i(51697),o=i(88559),u=i(21054),c=i(94633),d=i(85830),m=i(82760),x=i(93786);var g=i(40981),h=i(74433),p=i(30477);const j="BkpKedcdaMGbvgXMlmcg",y="muYk5XIwKmqR9iNibk_f",f="OEFWODerafYHGp09iLlA",v="m20ShRDiGGDpJ5LSABTi",b="Hvv0e7WKQ4kyftgSQJhg",C="yxf_6IsQEmHjijEBUMTP",N="oaNVBli46GtVjaQKB15g",k="JdlKTdpMquftpMwwegZo",P="Nts_ArOCGeROTDZND3M6",I="FvDsfgxSvLvL3q8d7nQv";var w=i(4637);const E=({items:e,activeItemId:t})=>(0,w.jsx)(h.v,{children:e.map((e=>e.disabled?(0,w.jsx)(p.s,{disabled:!0,role:"menuitemradio",className:C,onClick:e.handleClick,children:e.title},e.uri):(0,w.jsx)(p.s,{role:"menuitemradio",to:e.to,end:!0,"aria-checked":e.itemId===t,className:({isActive:e})=>a()(C,{[N]:e}),onClick:e.handleClick,children:e.title},e.uri)))});var S=i(46603);const D=(0,n.memo)((function({isCentered:e,links:t,landmarkLabel:i,className:s}){const h=(0,n.useRef)(null),[p,C]=(0,n.useState)([]),[D,U]=(0,n.useState)(0),[A,q]=(0,n.useState)([]),O=function(){const[e,t]=(0,n.useState)(window.innerWidth),{scrollNodeChildRef:i}=(0,n.useContext)(m.VX),s=(0,d.y1)((e=>{e?.width&&t(e.width)}),250);return(0,x.y)({refOrElement:i,observeOnly:"width",onResize:s}),e}()??1/0,{pathname:R}=(0,r.TH)(),T=t.find((e=>e.to===R));return(0,n.useEffect)((()=>{h.current&&U(h.current.clientWidth)}),[O]),(0,n.useEffect)((()=>{if(!h.current)return;const e=Array.from(h.current.children).map((e=>e.clientWidth));C(e)}),[t]),(0,n.useEffect)((()=>{if(!h.current)return;if(p.slice(0,-1).reduce(((e,t)=>e+t),0)<=D)return void q([]);const e=p.reduce(((e,t)=>e>t?e:t),0),t=[];let i=e;p.forEach(((e,n)=>{D>=i+e?i+=e:t.push(n)})),q(t)}),[D,p]),(0,w.jsx)("nav",{className:a()(s,j),"aria-label":i,children:(0,w.jsxs)("ul",{className:e?y:P,ref:h,children:[t.filter(((e,t)=>!A.includes(t))).map((e=>{const t=e?.render??(e=>e);return(0,w.jsx)(n.Fragment,{children:t((0,w.jsx)("li",{className:f,children:e.disabled?(0,w.jsx)("div",{className:k,children:(0,w.jsx)(l.D,{variant:"mestoBold",children:e.title})}):(0,w.jsx)(S.O,{end:!0,className:({isActive:e})=>a()(k,{[N]:e}),to:e.to,onClick:e.handleClick,children:(0,w.jsx)(l.D,{variant:"mestoBold",children:e.title})})}))},e.to)})),A.length||0===p.length?(0,w.jsx)("li",{className:f,children:(0,w.jsx)(g.x,{renderInline:!0,menu:(0,w.jsx)(E,{items:t.filter(((e,t)=>A.includes(t))),activeItemId:T?.itemId}),children:(e,t,i)=>(0,w.jsxs)("button",{className:a()(v,{[b]:T}),type:"button",onClick:t,ref:i,children:[(0,w.jsx)(l.D,{variant:"mestoBold",children:T?T.title:c.ag.get("more")}),e?(0,w.jsx)(o.U,{iconSize:16,className:I,"aria-hidden":"true"}):(0,w.jsx)(u.i,{iconSize:16,className:I,"aria-hidden":"true"})]})})}):null]})})}))},71415:(e,t,i)=>{i.d(t,{I:()=>x});var n=i(13837),s=i(59496),a=i(94633),r=i(36121),l=i(40245),o=i(13825),u=i(36516);const c="vhW0kRN8JJD5UwW4TdXi";var d=i(4637);const m=()=>{const e=(0,u.Y)(),t=(0,s.useCallback)((e=>(0,d.jsx)(o.v,{placement:"bottomEnd",arrow:"topStart",title:a.ag.get("pick-and-shuffle.upsell.title.queue"),children:e})),[]),i=(0,s.useMemo)((()=>[{title:a.ag.get("playback-control.queue"),itemId:"queue",to:"/queue",uri:"spotify:app:queue",render:t,disabled:e},{title:a.ag.get("view.recently-played"),itemId:"history",to:"/history",uri:"spotify:app:history"}]),[e,t]);return(0,d.jsx)(l.w,{children:(0,d.jsx)(r.n,{className:c,links:i})})},x=({children:e})=>{const t=(0,n.nF)();return(0,d.jsxs)("section",{className:"contentSpacing",children:[e,t&&(0,d.jsx)(m,{})]})}},35927:(e,t,i)=>{i.r(t),i.d(t,{default:()=>ke});var n=i(59496),s=i(84875),a=i.n(s),r=i(51697),l=i(20325),o=i(70356),u=i(94633),c=i(70304),d=i(67490),m=i(67608),x=i(62551),g=i(36533),h=i(4637);const p=({className:e,emptyStateComponent:t})=>{const{currentSession:i}=(0,g.A)();if(!i)return t??null;const n=i.session_members.find((e=>e.id===i.session_owner_id));return(0,h.jsx)("div",{className:e,children:(0,h.jsx)(r.D,{as:"h1",variant:"canon",semanticColor:"textBase",children:u.ag.get("web-player.social-connect.session-info.title",{host:n?.display_name??""})})})},j=e=>(0,h.jsx)(x.L,{onError:e=>{(0,m.vK)(e,"GroupSessionQueueHeader")},SuspenseFallback:()=>e.emptyStateComponent??null,children:(0,h.jsx)(p,{...e})});var y=i(15644),f=i(19031),v=i(13138),b=i(40319),C=i(95636),N=i(34046),k=i(29919);const P=({onClick:e})=>(0,h.jsx)(k.P,{onClick:e,buttonSize:"sm",children:u.ag.get("queue.clear-queue")});var I=i(49261),w=i(6285),E=i(98484),S=(i(6259),i(1541));const D="i9rTNwKyT_NMDghd8q65",U="DXBMXJD8Zoj4V8MxIVTB",A="UEtqSfWDubkNdPIaEkfA",q="I_Rc74Je7W4sk6KAVR05",O=n.memo((function({onClose:e,onConfirm:t,isOpen:i,itemCount:s}){const l=(0,n.useCallback)((i=>{t(),e(i)}),[t,e]),o=u.ag.get("queue.confirm-title",s);return(0,h.jsx)(S.Z,{shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,onRequestClose:e,contentLabel:o,isOpen:i,children:(0,h.jsxs)("div",{className:D,children:[(0,h.jsx)(r.D,{as:"h2",variant:"cello",className:U,children:o}),(0,h.jsx)(r.D,{as:"p",variant:"mesto",className:A,paddingBottom:I.g4,children:u.ag.get("queue.confirm-message")}),(0,h.jsxs)("div",{className:a()("encore-light-theme",q),children:[(0,h.jsx)(w.o,{onClick:e,children:u.ag.get("queue.cancel-button")}),(0,h.jsx)(E.D,{onClick:l,children:u.ag.get("queue.confirm-button")})]})]})})}));var R=i(36310),T=i(47642);const Q=()=>(0,h.jsxs)("div",{className:T.Z.emptyContainer,children:[(0,h.jsx)(R.S,{iconSize:64,"aria-hidden":"true"}),(0,h.jsx)(r.D,{as:"h1",variant:"alto",semanticColor:"textBase",className:T.Z.emptyContainerTitle,children:u.ag.get("queue.empty-title")}),(0,h.jsx)("p",{children:u.ag.get("queue.empty-description")}),(0,h.jsx)(d.default,{to:"/search",className:T.Z.findSomething,children:(0,h.jsx)(E.D,{colorSet:"invertedLight",children:u.ag.get("queue.fine-something")})})]});let F=function(e){return e[e.NowPlaying=0]="NowPlaying",e[e.NextInQueue=1]="NextInQueue",e[e.NextUp=2]="NextUp",e}({});var M=i(96355),_=i(65883),B=i(18112),L=i(97428),$=i(24725),G=i(95195),Z=i(34997),W=i(28544),K=i(39987),z=i(14887),H=i(42228),X=i(41946),J=i(17887),V=i(51431),Y=i(90216),ee=i(42808),te=i(19341),ie=i(90784),ne=i(70231),se=i(46447),ae=i(4085),re=i(29553),le=i(54110),oe=i(93256),ue=i(57161),ce=i(17106),de=i(93684);let me=function(e){return e.TRACK="track",e.EPISODE="episode",e.CHAPTER="chapter",e.LOCAL="local",e.AD="ad",e}({});const xe=n.memo((function({uri:e,uid:t,contextUri:i,name:s,duration_ms:a,artists:r,index:l,rowNumberOffset:o,imgUrl:c,isExplicit:d,isPlayable:m,isMOGEFRestricted:x,album:g,type:p,section:j,usePlayContextItem:v,isAutoPlay:b=!1,isEnhanced:C,queueSpec:k,trackContextUri:P}){const I=(0,N.$P)(),w=(0,f.g)(),{triggerPlay:E,togglePlay:S}=v({uid:t,uri:e,index:l}),{spec:D}=(0,N.fU)(K.r,{data:{position:l,reason:"",uri:e}}),{isActive:U,isPlaying:A}=(0,oe.$o)(e),q=(0,n.useCallback)(((i,n)=>{t?E({loggingParams:n},(()=>w.skipToNext({uri:e,uid:t}))):E({loggingParams:n})}),[w,E,e,t]),O=(0,n.useCallback)((i=>{t?S({loggingParams:i},(()=>U?A?w.pause():w.resume():w.skipToNext({uri:e,uid:t}))):S({loggingParams:i})}),[w,S,e,t,U,A]),R=p===me.TRACK,T=p===me.EPISODE,Q=p===me.CHAPTER,M=T&&"video"===g?.mediaType,_=p===me.LOCAL,B=p===me.AD,L=r?.map((e=>e.name)).join(u.ag.getSeparator())||"",$=(0,le._)(e),G=(0,ce.k)(e,m,(0,z.dB)(e)),{badges:Z,hasBadges:xe}=(0,ue.r)({downloadAvailability:$,isExplicit:d,isMOGEFRestricted:x,isEnhanced:C});let ge;ge=T?(0,h.jsx)(X.k,{uri:e,uid:b?void 0:t,showUri:g.uri,contextUri:i}):Q?(0,h.jsx)(H.r,{uri:e,removeFromQueueData:{uid:b?void 0:t,contextUri:i}}):_?(0,h.jsx)(J.N,{uri:e,uid:b?void 0:t,contextUri:i}):B?null:(0,h.jsx)(V.$,{uri:e,uid:b?void 0:t,albumUri:g.uri,artists:r,contextUri:i});const he=(0,n.useCallback)(((i,n)=>{const{meta:s,uris:a}=i,r=a.map((e=>({uri:e,uid:null})));let l;l=n===te.W.Before?{before:{uri:e,uid:t??null}}:{after:{uri:e,uid:t??null}},s.section===F.NowPlaying?w.addToQueue(r):s.origin===F.NowPlaying?w.insertIntoQueue(r,l):w.reorderQueue(r,l)}),[w,t,e]),pe=(0,n.useCallback)(((i,n)=>{const{items:s}=i;let a;a=n===te.W.Before?{before:{uri:e,uid:t??null}}:{after:{uri:e,uid:t??null}},w.reorderQueue(s,a)}),[w,t,e]),je=b?[]:[ie.a[z.JM.TRACK],ie.a[z.JM.EPISODE]];return(0,h.jsx)(y.ZP,{value:"row",index:l,children:(0,h.jsx)(ne._,{menu:ge,children:(0,h.jsxs)(te.c,{uri:e,contextUri:i,index:l,onTriggerPlay:q,isActive:j===F.NowPlaying&&U,ariaRowIndex:l,isPlayable:G,ageRestricted:x,spec:D,dragMetadata:{name:s,createdBy:L,sectionId:j},onInsert:(t,i,n,s,a)=>{he({uris:t,dropIndex:i,meta:a},n),k&&I.logInteraction(k.dragAddItemToQueue({itemToAddToQueue:e}))},onMove:(e,t,i,n)=>{pe({items:e,dropIndex:t,meta:n},i),k&&I.logInteraction(k.dragSort())},allowedDropTypes:je,children:[(0,h.jsx)(Y.Dd,{ariaColIndex:0,children:(0,h.jsx)(Y.Du,{uri:e,playAriaLabel:u.ag.get("tracklist.a11y.play",s,L),isPlaying:j===F.NowPlaying&&A,isActive:j===F.NowPlaying&&U,spec:D,onClick:(e,t)=>{O(t)},children:(0,h.jsx)(Y.km,{children:l+o+1})})}),(0,h.jsxs)(Y.vZ,{ariaColIndex:1,children:[(0,h.jsx)(Y.lD,{src:c,isVideo:M,isEpisode:T||Q}),(0,h.jsxs)(Y.vm,{children:[(0,h.jsx)(Y.Wh,{titleText:s,children:s}),xe&&(0,h.jsxs)(Y.g3,{children:[Z.enhanced&&(0,h.jsx)(W._,{iconSize:16,className:ee.Z.enhanced,title:u.ag.get("web-player.enhance.button_text_enhanced"),"aria-label":u.ag.get("web-player.enhance.button_text_enhanced")}),Z.download&&(0,h.jsx)(se.G,{size:16}),Z.explicit&&(0,h.jsx)(ae.N,{}),Z.nineteen&&(0,h.jsx)(re.X,{className:ee.Z.nineteen,size:16})]}),(0,h.jsxs)(Y.K9,{children:[R&&(0,h.jsx)(Y.T6,{artists:r,spec:D}),(T||_)&&!M&&L]})]})]}),(0,h.jsx)(Y.UA,{ariaColIndex:2,children:(0,h.jsx)(Y.BM,{nonInteractive:_,uri:g.uri,name:g.name,creatorUri:r?.[0]?.uri,spec:D,children:g.name})}),(0,h.jsxs)(Y.mU,{ariaColIndex:3,children:[C&&(0,h.jsx)(de.l,{contextUri:P,id:t??e,isActive:j===F.NowPlaying&&U}),!_&&!Q&&!C&&(0,h.jsx)(Y.qS,{uri:e,type:p}),(0,h.jsx)(Y.A$,{duration:a}),(0,h.jsx)(Y.Zv,{menu:ge,label:u.ag.get("more.label.track",s,L),spec:D})]})]})})})}),((e,t)=>e.uri===t.uri&&e.index===t.index&&e.name===t.name&&e.isEnhanced===t.isEnhanced)),ge=n.memo((function({tracks:e,ariaLabel:t,contextUri:i,rowNumberOffset:s=0,section:a,usePlayContextItem:r}){const l=(0,B.o)(),o=(0,f.g)(),c=(0,n.useCallback)(((e,t)=>{l({intent:"remove-from-queue",type:"click"}),o.removeFromQueue(e).then(t)}),[o,l]),d=(0,n.useCallback)(((e,t)=>{if((0,$.iw)(e)){const n=(0,Z.X)(e.show?.images,{desiredSize:40});return(0,h.jsx)(xe,{index:t,rowNumberOffset:s,imgUrl:n?.url||"",uri:(0,L.$)(e),uid:e.uid??e.uri,contextUri:i,duration_ms:e.duration.milliseconds,name:e.name,artists:[],album:{name:e.show.name,uri:e.show.uri},isExplicit:!1,isPlayable:!0,isMOGEFRestricted:!1,type:me.EPISODE,section:a,usePlayContextItem:r,isAutoPlay:"autoplay"===e.provider},`${t}${s}${e.uid}`)}if((0,$.G7)(e)){const n=(0,Z.X)(e.images||void 0,{desiredSize:40});return(0,h.jsx)(xe,{index:t,rowNumberOffset:s,imgUrl:n?.url||"",uri:(0,L.$)(e),uid:e.uid??e.uri,contextUri:i,duration_ms:e.duration.milliseconds,name:e.name,artists:[],album:{name:e.book.name,uri:e.book.uri},isExplicit:!1,isPlayable:!0,isMOGEFRestricted:!1,type:me.CHAPTER,section:a,usePlayContextItem:r,isAutoPlay:"autoplay"===e.provider},`${t}${s}${e.uid}`)}if((0,$.k6)(e)){const n=(0,Z.X)(e.images||void 0,{desiredSize:40});return(0,h.jsx)(xe,{index:t,rowNumberOffset:s,imgUrl:n?.url||"",uri:e.uri,uid:e.uid??e.uri,contextUri:i,duration_ms:e.duration.milliseconds,name:e.advertiser??e.title??u.ag.get("ad-formats.advertisement"),artists:[],album:{name:"",uri:""},isExplicit:!1,isPlayable:!0,isMOGEFRestricted:!1,type:me.AD,section:a,usePlayContextItem:r,isAutoPlay:"autoplay"===e.provider,isEnhanced:!1},`${t}${s}${e.uid}`)}if((0,$.G_)(e)||(0,$.RB)(e)){const n=(0,Z.X)(e?.album?.images,{desiredSize:40}),l=e.type===G.p.TRACK?e:null;return(0,h.jsx)(xe,{index:t,rowNumberOffset:s,imgUrl:n?.url||"",uri:(0,L.$)(e),uid:e.uid??e.uri,contextUri:i,duration_ms:e.duration.milliseconds,name:e.name,artists:e.artists,album:e.album,isExplicit:l?.isExplicit??!1,isPlayable:!0,isMOGEFRestricted:l?.is19PlusOnly??!1,type:l?.isLocal?me.LOCAL:me.TRACK,section:a,usePlayContextItem:r,isAutoPlay:"autoplay"===e.provider,isEnhanced:(0,_.$)(e?.metadata?.provider),trackContextUri:e.metadata?.context_uri},`${t}${s}${e.uid}`)}return(0,h.jsx)(M.Lb,{height:`${M.dN}px`})}),[s,i,a,r]),m=(0,n.useMemo)((()=>[M.QD.INDEX,M.QD.TITLE,M.QD.ALBUM,M.QD.DURATION]),[]),x=(0,n.useCallback)((e=>e.uri),[]),g=(0,n.useCallback)((e=>e.uid??e.uri),[]);return(0,h.jsx)(M.Pv,{ariaLabel:t,tracks:e,nrTracks:e.length,onRemove:c,renderRow:d,resolveUri:x,resolveUid:g,columns:m})})),he="rHpv7osDRvs3SUPMpQ_g",pe="DG9CsoFIptJhAneKoo_F",je="jf2HafzDEI9jn7Yo05eM",ye="H3Puuvc2nV0GoZRrfpRS",fe="HckHyQocDDePWQL2baOY",ve=()=>{const{uri:e,description:t}=(0,C.$)(),{spec:i,logger:s,UBIFragment:m}=(0,N.fU)(l.createDesktopNowPlayingQueueEventFactory,{data:{identifier:o.Wg.NOWPLAYING_QUEUE,uri:e??""}}),x=(0,n.useMemo)((()=>i.nowPlayingSectionFactory()),[i]),g=(0,n.useMemo)((()=>i.nextInQueueSectionFactory()),[i]),p=(0,n.useMemo)((()=>i.nextFromSectionFactory()),[i]),k=(0,f.g)(),{current:I,nextUp:w,queued:E}=(0,b.W)(),[S,D]=(0,n.useState)(!1),U=(0,n.useCallback)((()=>{D(!1)}),[D]),A=(0,n.useCallback)((()=>{k.clearQueue(),D(!1)}),[k]),q=(0,n.useCallback)((async()=>{let e;const t=g.clearQueueButtonFactory();E.length>0&&(e=t.hitRemoveItemsFromQueue({numberOfItemsToRemoveFromQueue:E.length}),s.logInteraction(e)),D(!0)}),[s,g,E]),{usePlayContextItem:R}=(0,v.n)({uri:e??""},{featureIdentifier:"queue"}),T="autoplay"===I?.provider,M=w.filter((e=>T?e:"autoplay"!==e.provider)),_=!!E?.length,B=!!M?.length,L=!1===(I||_||B),$=(0,n.useCallback)((async()=>{if(!B)return;const t=i.nextFromSectionFactory().queueContextLinkFactory().hitUiNavigate({destination:e??""});s.logInteraction(t)}),[B,s,i,e]);return L?(0,h.jsx)(Q,{}):(0,h.jsxs)("div",{className:he,children:[(0,h.jsx)(c.$,{children:u.ag.get("queue.page-title")}),(0,h.jsx)(j,{className:pe,emptyStateComponent:(0,h.jsx)(r.D,{as:"h1",variant:"canon",semanticColor:"textBase",className:pe,children:u.ag.get("playback-control.queue")})}),I&&e&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(r.D,{as:"h2",variant:"balladBold",semanticColor:"textSubdued",children:u.ag.get("queue.now-playing")}),(0,h.jsx)(m,{spec:x,children:(0,h.jsx)(y.ZP,{value:"now-playing",children:(0,h.jsx)(ge,{ariaLabel:u.ag.get("queue.now-playing"),tracks:[I],contextUri:e,section:F.NowPlaying,usePlayContextItem:R})})})]}),_&&e&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:a()(fe,je),children:[(0,h.jsx)(r.D,{as:"h2",variant:"balladBold",semanticColor:"textSubdued",children:u.ag.get("queue.next-in-queue")}),_&&(0,h.jsx)(P,{onClick:q})]}),(0,h.jsx)(m,{spec:g,children:(0,h.jsx)(y.ZP,{value:"next-in-queue",children:(0,h.jsx)(ge,{ariaLabel:u.ag.get("queue.next-in-queue"),tracks:E,rowNumberOffset:1,contextUri:"spotify:app:queue:NextInQueue",section:F.NextInQueue,usePlayContextItem:R})})})]}),B&&e&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(r.D,{as:"h2",variant:"balladBold",semanticColor:"textSubdued",className:a()(je,"standalone-ellipsis-one-line"),children:t&&!T?(0,h.jsxs)(h.Fragment,{children:[u.ag.get("queue.next-from")," ",(0,h.jsx)(d.Link,{className:ye,to:e,onClick:$,children:t})]}):u.ag.get("queue.next-up")}),(0,h.jsx)(m,{spec:p,children:(0,h.jsx)(y.ZP,{value:"next-up",children:(0,h.jsx)(ge,{ariaLabel:u.ag.get("queue.next-up"),tracks:M,rowNumberOffset:1+(E?.length||0),contextUri:"spotify:app:queue:NextUp",section:F.NextUp,usePlayContextItem:R})})})]}),(0,h.jsx)(O,{itemCount:E?.length||0,isOpen:S,onClose:U,onConfirm:A})]})};var be=i(71415),Ce=i(36516),Ne=i(43699);const ke=()=>(0,Ce.Y)()?(0,h.jsx)(Ne.InstrumentedRedirect,{to:"/history"}):(0,h.jsx)(be.I,{children:(0,h.jsx)(n.Suspense,{fallback:null,children:(0,h.jsx)(ve,{})})})},97428:(e,t,i)=>{i.d(t,{$:()=>n});const n=e=>e?.linked_from?.uri||e.uri},47642:(e,t,i)=>{i.d(t,{Z:()=>n});const n={emptyContainer:"gTvMl6pwfRD9PobMSB5x",emptyContainerTitle:"hNAQG0TAe2WFYyf_iZEB",findSomething:"Zhzrb2k9nQRActS2lp4U"}}}]);
//# sourceMappingURL=xpui-routes-queue-page.js.map