"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[7379],{44711:(e,t,l)=>{l.d(t,{l:()=>S});var r=l(59496),a=l(94633),s=l(43686),i=l(48989),n=l(87283);const o={"custom-order":i.HI,title:{column:n.Q.TITLE,order:n.k.ASC},artist:{column:n.Q.TITLE,order:n.k.SECONDARY_ASC},"added-by":{column:n.Q.ADDED_BY,order:n.k.ASC},"added-at":{column:n.Q.ADDED_AT,order:n.k.ASC},duration:{column:n.Q.DURATION,order:n.k.ASC},album:{column:n.Q.ALBUM,order:n.k.ASC},"album-or-podcast":{column:n.Q.ALBUM_OR_PODCAST,order:n.k.ASC},"album-or-show":{column:n.Q.ALBUM_OR_SHOW,order:n.k.ASC}},u={title:n.Q.TITLE,artist:n.Q.TITLE,"added-by":n.Q.ADDED_BY,"added-at":n.Q.ADDED_AT,duration:n.Q.DURATION,album:n.Q.ALBUM,"album-or-podcast":n.Q.ALBUM_OR_PODCAST,"album-or-show":n.Q.ALBUM_OR_SHOW},c={[n.k.NONE]:n.k.NONE,[n.k.ASC]:n.k.DESC,[n.k.DESC]:n.k.ASC,[n.k.SECONDARY_ASC]:n.k.SECONDARY_DESC,[n.k.SECONDARY_DESC]:n.k.SECONDARY_ASC},d={[n.Q.INDEX]:{key:"custom-order",get value(){return a.ag.get("sort.custom-order")}},[n.Q.TITLE]:{key:"title",get value(){return a.ag.get("sort.title")}},[n.Q.ARTIST]:{key:"artist",get value(){return a.ag.get("sort.artist")}},[n.Q.ADDED_BY]:{key:"added-by",get value(){return a.ag.get("sort.added-by")}},[n.Q.ADDED_AT]:{key:"added-at",get value(){return a.ag.get("sort.date-added")}},[n.Q.DURATION]:{key:"duration",get value(){return a.ag.get("sort.duration")}},[n.Q.EVENT_DATE]:null,[n.Q.EVENT_INFO]:null,[n.Q.ALBUM]:{key:"album",get value(){return a.ag.get("sort.album")}},[n.Q.ALBUM_OR_PODCAST]:{key:"album-or-podcast",get value(){return a.ag.get("sort.album-or-podcast")}},[n.Q.ALBUM_OR_SHOW]:{key:"album-or-show",get value(){return a.ag.get("sort.album-or-show")}},[n.Q.PLAYS]:null,[n.Q.RELEASE_DATE]:null,[n.Q.ADD]:null,[n.Q.ACTIONS]:null};var g=l(96355),m=l(88104),x=l(4637);function A(e){return!!e}const S=({columns:e,disabled:t,onSort:l})=>{const S=[...e];S.splice(2,0,g.QD.ARTIST);const{sortState:k,setSortState:C}=(0,r.useContext)(i.Gb),h=function(e){return null===e.column?d[g.QD.INDEX]:(0,m.cB)(e.column,e.order)?d[g.QD.ARTIST]:d[e.column]}(k),b=(0,r.useCallback)((e=>{l?.(),C(((e,t,l)=>e?t!==u[e]||"artist"===e&&[n.k.ASC,n.k.DESC].includes(l)||"title"===e&&[n.k.SECONDARY_ASC,n.k.SECONDARY_DESC].includes(l)?o[e]:{column:u[e],order:c[l]}:i.HI)(e,k.column,k.order))}),[l,C,k.column,k.order]),D=(0,r.useCallback)((()=>null!==k.column),[k.column]),j=S.map((e=>d[e])).filter(A);return(0,x.jsx)(s.A,{options:j,onSelect:b,selected:h,isSelectionChanged:D,sortOrder:k.order,heading:a.ag.get("drop_down.sort_by"),disabled:t})}},65278:(e,t,l)=>{l.r(t),l.d(t,{default:()=>K});var r=l(59496),a=l(93660),s=l(2542),i=l(9990),n=l(94633),o=l(46927),u=l(62926),c=l(7018),d=l(20456),g=l(29915),m=l(5684),x=l(75132),A=l(68224),S=l(88104),k=l(44711),C=l(29629),h=l(96355),b=l(48989),D=l(65671),j=l(25756),y=l(90477),f=l(22408),E=l(13138),p=l(70231),T=l(4085),Q=l(15644),_=l(57161),I=l(17887),v=l(31481),O=l(90216),R=l(21345),N=l(19341),P=l(4637);const U=r.memo((function({uri:e,uid:t,name:l,duration_ms:a,artists:s,album:i,is19PlusOnly:o,isExplicit:u,isPlayable:c,index:d,contextUri:g,imgUrl:m,usePlayContextItem:x}){const{filter:A}=(0,r.useContext)(C.fo),{isActive:S,isPlaying:k,triggerPlay:h,togglePlay:b}=x({uid:t,uri:e,index:d}),{badges:D,hasBadges:j}=(0,_.r)({isExplicit:u}),y=s?.map((e=>e.name)).join(n.ag.getSeparator())||"";return(0,P.jsx)(Q.ZP,{value:"row",index:d,children:(0,P.jsx)(p._,{menu:(0,P.jsx)(I.N,{uri:e,uid:t,contextUri:g}),children:(0,P.jsxs)(N.c,{uri:e,contextUri:g,isActive:S,index:d,onTriggerPlay:()=>{h()},ariaRowIndex:d+1,isPlayable:c,ageRestricted:o,dragMetadata:{name:l,createdBy:y},children:[(0,P.jsx)(O.Dd,{ariaColIndex:0,children:(0,P.jsx)(O.Du,{uri:e,playAriaLabel:n.ag.get("tracklist.a11y.play",l,y),isPlaying:k,isActive:S,onClick:()=>{b()},children:(0,P.jsx)(O.km,{children:d+1})})}),(0,P.jsxs)(O.vZ,{ariaColIndex:1,children:[(0,P.jsx)(O.lD,{src:m}),(0,P.jsxs)(O.vm,{children:[(0,P.jsx)(O.Wh,{titleText:l,children:(0,P.jsx)(v.o,{searchWords:[A],textToHighlight:l})}),j&&(0,P.jsx)(O.g3,{children:D.explicit?(0,P.jsx)(T.N,{}):null}),(0,P.jsx)(O.K9,{children:s&&(0,P.jsx)(R.o,{nonInteractive:!0,artists:s,filter:A})})]})]}),(0,P.jsx)(O.UA,{ariaColIndex:2,children:i?.name&&(0,P.jsx)(O.BM,{nonInteractive:!0,uri:i?.uri,name:i?.name,children:(0,P.jsx)(v.o,{searchWords:[A],textToHighlight:i?.name})})}),(0,P.jsxs)(O.mU,{ariaColIndex:3,children:[(0,P.jsx)(O.A$,{duration:a}),(0,P.jsx)(O.Zv,{menu:(0,P.jsx)(I.N,{uri:e,uid:t,contextUri:g}),label:n.ag.get("more.label.track",l,y)})]})]})})})}),((e,t)=>e.uri===t.uri&&e.index===t.index));var L=l(34997);const B=new Set(b.MI),M=r.memo((function({uri:e,tracks:t,columns:l,sortState:a,handleSort:s,usePlayContextItem:i,tracklistDomRef:o}){const u=(0,r.useRef)(null),c=(0,r.useCallback)(((t,l)=>{const r=(0,L.X)(t.album?.images,{desiredSize:40,desiredLabel:"small"});return(0,P.jsx)(U,{index:l,contextUri:e,uri:t.uri,uid:t.uid,isPlayable:t.isPlayable,duration_ms:t.duration.milliseconds,name:t.name,artists:t.artists,album:t.album||void 0,isExplicit:t.isExplicit,is19PlusOnly:t.is19PlusOnly,type:t.type,imgUrl:r?.url||"",usePlayContextItem:i},t.uid)}),[e,i]);return(0,P.jsx)(P.Fragment,{children:(0,P.jsx)(Q.ZP,{value:"playlist-tracklist",children:(0,P.jsx)(h.Pv,{ariaLabel:n.ag.get("local-files"),hasHeaderRow:!0,columns:l,sortableColumns:B,sortState:a,onSort:s,renderRow:c,resolveUri:e=>e.uri,resolveUid:e=>e.uid,tracks:t,nrTracks:t.length,limit:100,outerRef:u,outerDomRef:o},e)})})}));var w=l(47948),Y=l(99550);const H="uCHqQ74vvHOnctGg0X0B",W="feuNq1FTxMbdeOTuFgpA",z=[h.QD.INDEX,h.QD.TITLE,h.QD.ALBUM,h.QD.DURATION],F=()=>{const{filter:e}=(0,r.useContext)(C.fo),{sortState:t,setSortState:l}=(0,r.useContext)(b.Gb),h=(0,r.useContext)(y.t),p=(0,f.I)(),[T,Q]=(0,r.useState)(),_=(0,D.Y)(a.Fzl),I=(0,r.useRef)(null),v=(0,i.W6)(w.eKc,{loadingValue:!1}),O=(0,r.useCallback)((e=>{l((0,S.VK)(e,t))}),[t,l]),R=(0,r.useCallback)((async()=>{const l=await h.getTracks((0,S._j)(t),e);Q(l)}),[h,t,e]);(0,r.useEffect)((()=>{R()}),[R]);const{isPlaying:N,togglePlay:U,usePlayContextItem:L}=(0,E.n)({uri:j.b,pages:[{items:(T??[]).map((e=>({...e,provider:null})))}]},{featureIdentifier:"local_files"});return T?e||T.length&&p?(0,P.jsxs)("div",{role:"presentation",className:H,children:[(0,P.jsxs)(c.gF,{backgroundColor:_,children:[(0,P.jsxs)(d.W,{children:[(0,P.jsx)(A.$,{size:"md",onClick:()=>U(),isPlaying:N,uri:j.b}),(0,P.jsx)(g.i,{text:n.ag.get("local-files")})]}),(0,P.jsxs)(c.sP,{children:[(0,P.jsx)(c.xd,{children:n.ag.get("local-files")}),(0,P.jsx)(c.T0,{children:n.ag.get("local-files.description")})]})]}),(0,P.jsx)(o.o,{backgroundColor:_,children:(0,P.jsxs)(o.F,{children:[(0,P.jsx)(A.$,{size:"lg",onClick:()=>U(),isPlaying:N,uri:j.b}),v&&(0,P.jsx)(Y.K,{entityName:n.ag.get("local-files"),contextUri:j.b,activationPlacement:"bottomEnd"}),(0,P.jsxs)("div",{className:W,children:[(0,P.jsx)(r.Suspense,{fallback:null,children:(0,P.jsx)(m.K,{placeholder:n.ag.get("playlist.search_in_playlist"),clearOnEscapeInElementRef:I})}),(0,P.jsx)(k.l,{columns:b.MI})]})]})}),(0,P.jsx)("div",{className:"contentSpacing",children:(0,P.jsx)(M,{tracks:T,uri:j.b,columns:z,handleSort:O,sortState:t,usePlayContextItem:L,tracklistDomRef:I})})]}):(0,P.jsx)(u.u,{linkTo:"/preferences",linkTitle:n.ag.get("local-files.empty-button"),message:n.ag.get("local-files.empty-description"),title:n.ag.get("local-files.empty-header"),children:(0,P.jsx)(s.Y,{iconSize:64,"aria-hidden":"true"})}):(0,P.jsx)(x.h,{hasError:!1,errorMessage:n.ag.get("error.request-artist-failure"),loadOffline:!0})},K=()=>(0,P.jsx)(b.kz,{uri:"spotify:internal:local-files",children:(0,P.jsx)(C.hz,{uri:"spotify:internal:local-files",children:(0,P.jsx)(F,{})})})}}]);
//# sourceMappingURL=xpui-routes-collection-local-files.js.map