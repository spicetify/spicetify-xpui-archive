"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[4179],{56242:(e,a,i)=>{i.r(a),i.d(a,{default:()=>yi});var t=i(59496),n=i(84875),s=i.n(n),r=i(97601),l=i(51697),c=i(6285),o=i(9990),d=i(75645),u=i(14887),m=i(94633),g=i(46927),k=i(98440),p=i(99750),y=i(70706),v=i(51431),x=i(7018),h=i(20456),N=i(29915),j=i(75132),b=i(68224),I=i(34198),L=i(40981),C=i(62768),T=i(94946);const S="o2TlnuNKxRO5RnB9BpHB",f="q0Ke_aAvTcc4dO4wCHQt",A="UlKUfS_GcROZmofuafOW",O="I5LORTI1u3A6VoUvRCBf",P="TS85Qkpioa31wR0p4kzT",R="yL1DLXBc05CR_ACv_NhA",F="k5kRkUyoz9znqg_SGOVQ";var U=i(67291),w=i(13475),D=i(56071),_=i(95195),B=i(35585),E=i(4637);let M=function(e){return e.SMALL="small",e.LARGE="large",e}({});const Z=({art:e,disabled:a=!1,LinkComponent:i,name:t,size:n=M.SMALL,type:c,uri:o})=>{const d=e?[e]:[],g=n===M.SMALL?(0,w.R)(c):function(e){switch(e){case U.albumType.SINGLE:return m.ag.get("track-page.from-the-single");case U.albumType.EP:return m.ag.get("track-page.from-the-ep");case U.albumType.COMPILATION:return m.ag.get("track-page.from-the-compilation");case U.albumType.ALBUM:default:return m.ag.get("track-page.from-the-album")}}(c),k=(0,r.s0)();return(0,E.jsxs)("div",{className:s()(S,{[A]:n===M.SMALL,[f]:a}),children:[(0,E.jsx)("div",{className:O,children:(0,E.jsx)(D.O,{images:d,size:B.m$.SIZE_80,title:t,type:_.p.ALBUM})}),(0,E.jsxs)("div",{className:P,children:[(0,E.jsx)(l.D,{variant:n===M.SMALL?"mestoBold":"finale",children:g}),(0,E.jsx)(i,{to:o,children:(0,E.jsx)(l.D,{as:"div",className:R,variant:"balladBold",dir:"auto",children:t})})]}),(0,E.jsx)("div",{onClick:()=>{k((0,u.EC)(o).toURLPath(!0))},className:F})]})};var G=i(4635),K=i(64689),$=i(13138),Y=i(24966),q=i(16391);let z=function(e){return e.LOADING="LOADING",e.LOADED="LOADED",e.UNAVAILABLE="UNAVAILABLE",e}({});const V=(0,q.Uy)(((e,a)=>{switch(a.type){case"LYRICS_LOADING":e[a.uri]={status:z.LOADING};break;case"LYRICS_LOADED":e[a.uri]={status:z.LOADED,data:a.response};break;case"LYRICS_ERROR":e[a.uri]={status:z.UNAVAILABLE};break;default:throw new Error(`Unhandled lyrics action with type: ${a.type}`)}}));var W=i(90326),J=i(70326),H=i(90395);const Q=async({trackUri:e,api:a,convertLyricsEndpoint:i,imageForLyricsRequest:t})=>{const n=(0,u.EC)(e);try{const e=i?await J.Zz.getTrackEntityLyrics(a||W.b.getInstance(),n.id,t||""):await J.Zz.getSEOTrackLyrics(a||W.b.getInstance(),n.id);return{hasLyrics:!0,syncType:e.lyrics.syncType,lyrics:e.lyrics.lines,provider:e.lyrics.provider,providerDisplayName:e.lyrics.providerDisplayName,providerLyricsId:e.lyrics.providerLyricsId,isRtlLanguage:e.lyrics.isRtlLanguage}}catch(e){if(e instanceof H.m&&404===e.status)return{hasLyrics:!1};throw e}},X={status:z.LOADING},ee={status:z.UNAVAILABLE},ae=t.createContext(void 0),ie=({children:e,initialState:a={}})=>{const i=t.useReducer(V,a);return(0,E.jsx)(ae.Provider,{value:i,children:e})},te=({uri:e,isAnonymous:a,convertLyricsEndpoint:i,imageForLyricsRequest:n})=>{const s=t.useContext(ae);if(void 0===s)throw new Error("useTrackEntityLyrics must be used within a TrackEntityLyricsProvider");if(!e||!(0,u.wj)(e)||a)return ee;const[r,l]=s,c=r[e];return c||(l({type:"LYRICS_LOADING",uri:e}),Q({trackUri:e,convertLyricsEndpoint:i,imageForLyricsRequest:n}).then((a=>{l({type:"LYRICS_LOADED",uri:e,response:a})})).catch((()=>{l({type:"LYRICS_ERROR",uri:e})})),X)};var ne=i(25639),se=i(46441),re=i(46354),le=i(90570);const ce=(e,a)=>(0,le.vI)(re.k.IlrTrackCanonicalTop,a)||e===se.Zn.CANONICAL_TOP_POSITION,oe=(e,a)=>(0,le.vI)(re.k.IlrTrackCanonicalBottom,a)||e===se.Zn.CANONICAL_BOTTOM_POSITION,de=(e,a)=>(0,le.vI)(re.k.IlrTrackOrganicTop,a)||e===se.Zn.ORGANIC_TOP_POSITION,ue=(e,a)=>(0,le.vI)(re.k.IlrTrackOrganicBottom,a)||e===se.Zn.ORGANIC_BOTTOM_POSITION,me=(e,a)=>ce(e,a)||oe(e,a)||de(e,a)||ue(e,a);se.Zn.DEFAULT,se.Zn.CONTROL,se.Zn.CANONICAL_TOP_POSITION,ne.JI.ContentOnly,se.Zn.CANONICAL_BOTTOM_POSITION,ne.JI.ContentOnly,se.Zn.ORGANIC_TOP_POSITION,ne.JI.OrganicTraffic,se.Zn.ORGANIC_BOTTOM_POSITION,ne.JI.OrganicTraffic;var ge=i(34046),ke=i(97582),pe=i(95187),ye=i(23419),ve=i(22040);const xe="oTRKhYD0MZlNPm66W3Tw",he="sc95MwPalcHwYGZ7j3xN",Ne="zrCZCfYv4zZiB1HYv9i8",je="RnlxIDmWcYTbbwNSJNjA",be="SHkxfN1vy0wpRMP1hK7I",Ie="COXBS6zLyyxKNYuEAzjZ",Le="pynMsudlBeLA8TZkPvmK",Ce="sR5IpdOUvoUGYKlC9Dk1",Te="FHMr3WxshoYjZ7jd3YwI",Se="Evcwc4KM2tf9xrLbfB8B",fe="x4_dsi31Cx2SO1L0uYIj",Ae="euPDqfFEBILj9KHDNLC1",Oe="x6FPRUKK40oDCPP7g6Ls",Pe="k3SPcfaKewjfdYumDcGw",Re="t9C7vRiN1OSC9uWfJEr0",Fe="Onv6dO4lntCzKUqYa8PE",Ue=({richTrack:e})=>{const{search:a}=(0,r.TH)(),i=(0,t.useCallback)((()=>new URLSearchParams(a.slice(1)).get("highlight")||""),[a])(),{tracklistRef:n}=(0,ve.W)(),s=e.albumOfTrack,l=(0,ye.Y)(s?.uri||""),{usePlayContextItem:c}=(0,$.n)({uri:l},{featureIdentifier:"album"}),o=(0,t.useMemo)((()=>({items:[],totalCount:0})),[]);return s?(0,E.jsx)("div",{ref:n,className:Ce,children:(0,E.jsx)(pe.L,{ariaLabel:s.name,nrTracks:s.tracks.totalCount,albumUri:s.uri,highlightUri:i,discs:o,usePlayContextItem:c,hasHeaderRow:!1})}):null},we="OH5mnpJIVCJozYM3raMt",De="etw0slM6uVrCi5RR3iDi",_e=({padded:e,providerDisplayName:a})=>{const i=(0,o.W6)(se.Kl)&&a?m.ag.get("web-player.lyrics.providedBy",a):"Lyrics powered by Musixmatch.";return(0,E.jsx)(l.D,{as:"p",dir:"auto",variant:"finale",className:`${we} ${e?De:""}`,children:i})},Be=({uri:e,imageForLyricsRequest:a})=>{const i=(0,o.W6)(se.Kl),{data:t}=te({uri:e,convertLyricsEndpoint:i,imageForLyricsRequest:a});return t?.hasLyrics?(0,E.jsx)(_e,{providerDisplayName:t.providerDisplayName}):null};var Ee=i(83792),Me=i(98484);const Ze="QhDsXG1Gmo7XmQWLggAO",Ge="bZgWQj7UxvK8GYKWDA7N",Ke="AW61P3tnW5cKJCWtbhFh",$e=({buttonText:e,onSecondaryButtonClick:a,onPrimaryButtonClick:i,secondaryButtonText:t,text:n})=>(0,E.jsxs)("div",{className:Ze,"data-testid":"static-activation-trigger",children:[(0,E.jsx)(l.D,{className:Ge,variant:"cello",children:n}),(0,E.jsxs)("div",{className:Ke,children:[(0,E.jsx)(c.o,{onClick:a,semanticColor:"textBase",children:t}),(0,E.jsx)(Me.D,{onClick:i,colorSet:"invertedLight",children:e})]})]});var Ye=i(67490);const qe="T1nqQ4HEh3heHy4RCCKa",ze="L8zjshPVgUMXyZR4FtOk",Ve="YMn1FWcFmOz9osBrNvhF",We="Inbyq3TnvKDOJtcKFTDQ",Je="lWk5se4WETUOJwaEb8D6",He="i8DyQbWCmDV_8N5XGJQT",Qe="t5WPFlGTY6GCd9UOFfLu",Xe="AGQ3wRyMVK1odq860qnT",ea="ZX_r7uZgPgssaUplfpxT",aa="qrqctaPu2XBpxsw23nPX",ia="XnWidTagai3nQwMPxIMF";var ta=i(68466),na=i(90807);let sa=function(e){return e.SMALL="small",e.LARGE="large",e}({});const ra=e=>{const{disabled:a,images:i,LinkComponent:t,name:n,size:c,uri:o,enableI18nRoutes:d,enableI18nAdditionalPages:g}=e,k=c===sa.SMALL,p=(0,r.s0)(),y=(0,u.EC)(o),v=y?.type,x=m.ag.getUrlLocale(),h=(0,ta.S9)({localeFeatureFlag:d,entityFeatureFlag:g,urlLocale:x,entity:v,type:"link"});return(0,E.jsxs)("div",{className:s()(ze,{[Ve]:a}),"data-testid":"track-artist-link-card",children:[(0,E.jsx)(D.O,{shape:D.K.CIRCLE,images:i,size:B.m$.SIZE_80,title:n,type:_.p.ARTIST}),(0,E.jsxs)("div",{className:s()(Je,{[He]:k}),children:[(0,E.jsx)(l.D,{variant:"mestoBold",className:We,children:m.ag.get("card.tag.artist")}),(0,E.jsx)(t,{to:o,children:(0,E.jsx)(l.D,{as:"div",dir:"ltr",className:Qe,variant:"balladBold",children:n})})]}),(0,E.jsx)("div",{onClick:()=>{const e=y?.toURL(`/${na.F0}${x}/`);if(y){const a=h?e:y.toURLPath(!0);p(a)}},className:Xe})]})},la=({size:e=sa.LARGE,disabled:a=!1,enableI18nRoutes:i,enableI18nAdditionalPages:n,...r})=>{const[o,d]=(0,t.useState)(!1),u=(0,t.useCallback)((()=>{d(!o)}),[o]),g=r.artists;return(0,E.jsxs)("div",{"data-testid":"track-artist-link-card-container",children:[(0,E.jsx)("div",{className:qe,children:g.map(((t,l)=>(0,E.jsx)("div",{className:s()({[aa]:o&&l>5,[ea]:l>5}),children:(0,E.jsx)(ra,{name:t.name,uri:t.uri,images:t.images,size:e,LinkComponent:r.LinkComponent,disabled:a,enableI18nRoutes:i,enableI18nAdditionalPages:n},t.id)},`${t.uri}-${l}`)))}),g.length>6&&(0,E.jsx)(c.o,{onClick:u,className:ia,children:(0,E.jsx)(l.D,{as:"p",variant:"violaBold",children:o?m.ag.get("show_less"):m.ag.get("mwp.search.artists.all")})})]})};var ca=i(13204);const oa="EaTxqhHk6J4ecKHwpY5m",da="dUQl9yd5x_1oWk4L0Ntm",ua="xt5C47eHPYNiriMJxGnC",ma=({words:e})=>(0,E.jsx)(l.D,{as:"p",dir:"auto",variant:"ballad",className:ua,children:e});var ga=i(21046);const ka=({data:e,eventSender:a,isPlaying:i,playbackId:n,uri:s})=>{const{lyrics:r=[],provider:c,providerLyricsId:d,syncType:u}=e,g=(0,o.W6)(se.Kl),k=function(e){const{uri:a,provider:i,providerLyricsId:n,syncType:s,eventSender:r,isPlaying:l,playbackId:c}=e,[o,d]=(0,t.useState)(!1),u=(0,t.useMemo)((()=>(0,ga.N)({lyrics_format:"track-page",track_uri:a,provider:i,provider_lyrics_id:n,sync_type:s,playback_id:l?c:void 0})),[a,i,n,s,l,c]);return(0,t.useCallback)((()=>{o||(r?.send(u),d(!0))}),[u,r,o])}({uri:s,provider:c,providerLyricsId:d,syncType:u,eventSender:a,isPlaying:i,playbackId:n});return(0,t.useEffect)((()=>{g&&k()}),[g,k]),(0,E.jsxs)("div",{className:oa,children:[(0,E.jsx)(l.D,{as:"h2",variant:"canon",semanticColor:"textBase",className:da,children:m.ag.get("web-player.lyrics.title")}),r.map((({words:e},a)=>(0,E.jsx)(ma,{words:e},`lyrics-seo-line-${a}`)))]})};var pa=i(51087),ya=i(28425),va=i(54329);const xa=({uri:e,imageForLyricsRequest:a})=>{const i=(0,o.W6)(se.Kl),{data:t}=te({uri:e,convertLyricsEndpoint:i,imageForLyricsRequest:a}),n=(0,va.s4)(),{isPaused:s,currentTrackUri:r,playbackId:l}=(0,pa.Y)((e=>({isPaused:e?.isPaused,currentTrackUri:e?.item?.uri,playbackId:e?.playbackId})),ya.V),c=!s&&r===e;return t&&t?.hasLyrics?(0,E.jsx)(ka,{data:t,uri:e,eventSender:n,isPlaying:c,playbackId:l}):null};var ha=i(7442),Na=i(65545),ja=i(7554);const ba=e=>{const{albumArtists:a,columnCount:i,imageForLyricsRequest:n,uri:r}=e,l=i-2,c={"--column-count":i,"--left-column-end":l-2,"--right-column-start":l},{isAnonymous:d}=(0,Ee.v9)(ja.Gg),u=(0,ha.k)(),g=(0,o.W6)(se.Kl),{data:k,status:p}=te({uri:r,isAnonymous:d,convertLyricsEndpoint:g,imageForLyricsRequest:n}),y=!!k&&k.hasLyrics&&p!==z.UNAVAILABLE||d,v=(0,Ee.v9)(Na.br),x=(0,Ee.v9)(Na.yE);return(0,E.jsxs)(t.Suspense,{fallback:null,children:[y&&(0,E.jsx)("div",{className:s()(Ne,{[je]:i>5}),style:{...c},"data-testid":"lyrics-container",children:d?(0,E.jsx)($e,{buttonText:m.ag.get("sign_up"),secondaryButtonText:m.ag.get("login"),text:m.ag.get("track-page.sign-in-to-view-lyrics"),onPrimaryButtonClick:ca.L6,onSecondaryButtonClick:ca.h$}):(0,E.jsx)(xa,{uri:r,imageForLyricsRequest:n})}),(0,E.jsx)("div",{className:s()(xe,{[he]:i>5&&y}),style:{...c},children:(0,E.jsx)(la,{artists:a,LinkComponent:Ye.default,disabled:!u,enableI18nRoutes:v,enableI18nAdditionalPages:x})})]})};var Ia=i(70304),La=i(49261),Ca=i(70231),Ta=i(46447),Sa=i(4085),fa=i(29553),Aa=i(15644),Oa=i(54110),Pa=i(57161),Ra=i(17106),Fa=i(5352),Ua=i(90216),wa=i(490),Da=i(19341);const _a="Z9Dr8PkXFtlO8KnnDcxp",Ba="Bm0LUMlhVIcF5qusgdUP",Ea="GIyB7JDkRwjtVL6PSBbg",Ma="whTIka0YYAkqhqrs26Wa",Za=t.memo((function({uri:e,name:a,imgUrl:i,artists:t,isExplicit:n,index:s,albumUri:r,contextUri:l,isPlayable:c,usePlayContextItem:o,isMOGEFRestricted:d,totalMilliseconds:u,playcount:g}){const{isActive:k,isPlaying:p,triggerPlay:y,togglePlay:x}=o({uri:e,index:s}),h=(0,Oa._)(e),N=(0,Ra.k)(e,c),j=t.map((e=>e.name)).join(m.ag.getSeparator()),{badges:b,hasBadges:I}=(0,Pa.r)({isMOGEFRestricted:d,downloadAvailability:h,isExplicit:n}),L=t.map((e=>e.name)).join(m.ag.getSeparator());return(0,E.jsx)(Aa.ZP,{value:"row",index:s,children:(0,E.jsx)(Ca._,{menu:(0,E.jsx)(v.$,{uri:e,albumUri:r,artists:t,contextUri:l}),children:(0,E.jsxs)(Da.c,{uri:e,contextUri:l,isPlayable:N,onTriggerPlay:(e,a)=>{y({loggingParams:a})},isActive:k,index:s,ariaRowIndex:s,dragMetadata:{name:a,createdBy:j},children:[(0,E.jsxs)(Ua.vZ,{ariaColIndex:0,children:[(0,E.jsx)(Ua.VG,{uri:e,src:i,onClick:(e,a)=>{x({loggingParams:a})},isLocked:!1,isPlaying:p,isActive:k,playAriaLabel:m.ag.get("tracklist.a11y.play",a,j)}),(0,E.jsxs)(Ua.vm,{children:[(0,E.jsx)(Fa.G,{uri:e,enabled:!0,className:Ea,children:(0,E.jsx)(Ua.Wh,{titleText:a,children:a})}),I&&(0,E.jsxs)(Ua.g3,{children:[b.download&&(0,E.jsx)(Ta.G,{size:16}),b.explicit&&(0,E.jsx)(Sa.N,{}),b.nineteen&&(0,E.jsx)(fa.X,{className:Ma,size:16})]}),(0,E.jsx)(Ua.K9,{children:(0,E.jsx)(Ua.T6,{artists:t})})]})]}),(0,E.jsx)(Ua.UA,{ariaColIndex:1,children:(0,E.jsx)(wa.B,{playcount:g})}),(0,E.jsxs)(Ua.mU,{ariaColIndex:2,children:[(0,E.jsx)(Ua.qS,{uri:e}),(0,E.jsx)(Ua.A$,{duration:u}),(0,E.jsx)(Ua.Zv,{menu:(0,E.jsx)(v.$,{uri:e,albumUri:r,contextUri:l,artists:t}),label:m.ag.get("more.label.track",a,L)})]})]})})})}),((e,a)=>e.uri===a.uri&&e.index===a.index));var Ga=i(89723);const Ka={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"internalLinkRecommenderTrack"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uri"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"strategy"}},type:{kind:"NamedType",name:{kind:"Name",value:"SEORankingStrategy"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"seoRecommended"},arguments:[{kind:"Argument",name:{kind:"Name",value:"seoRecommendedInput"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"strategy"},value:{kind:"Variable",name:{kind:"Name",value:"strategy"}}},{kind:"ObjectField",name:{kind:"Name",value:"uri"},value:{kind:"Variable",name:{kind:"Name",value:"uri"}}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"GenericError"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"message"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"NotFound"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"message"}},{kind:"Field",name:{kind:"Name",value:"uri"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"ilrTrackData"}}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"ilrTrackData"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Track"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Track"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"artists"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"profile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"duration"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalMilliseconds"}}]}},{kind:"Field",name:{kind:"Name",value:"contentRating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"}}]}},{kind:"Field",name:{kind:"Name",value:"playability"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playable"}}]}},{kind:"Field",name:{kind:"Name",value:"playcount"}},{kind:"Field",name:{kind:"Name",value:"albumOfTrack"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}},{kind:"Field",name:{kind:"Name",value:"url"}}]}}]}}]}}]}}]}}]};var $a=i(21324),Ya=i(35960),qa=i(47948),za=i(60168),Va=i(96355);const Wa=e=>{return a=e,"NotFound"!==a?.__typename&&"GenericError"!==a?.__typename&&"Track"===e.__typename;var a},Ja=e=>e?e.filter((e=>Wa(e.data))).map((e=>e.data.uri)):[],Ha=t.memo((function({strategy:e,uri:a}){const{data:i}=(n={uri:a,strategy:e},(0,Ga.a)(Ka,n,s));var n,s;const r=i?.seoRecommended.items,c=(0,t.useMemo)((()=>r?.slice(0,Math.min(r.length,5))),[r]),o=(0,t.useCallback)((e=>e.uri),[]),d=(0,t.useMemo)((()=>[Va.QD.TITLE,Va.QD.ALBUM,Va.QD.DURATION]),[]),u=(0,Ya.g)(),g=(0,Ee.v9)(ja.n5),k=(0,Ee.v9)(za.rZ);(0,$a.M)({category:"track_ilr_exposures",action:"track_page_visit",remoteConfigProperty:qa.YSd,label:"dwp",context:`${a}|${Ja(r)}`,country:g?k:"",spt:!0,isAnonymous:u});const p=(r||[])?.map((e=>Wa(e.data)?{...e.data,provider:null,type:_.p.TRACK,uid:null}:{type:_.p.TRACK,uri:"",uid:null,provider:null})),y=(0,ye.Y)(a),{usePlayContextItem:v}=(0,$.n)({uri:y,pages:[{items:p}]},{featureIdentifier:"track"}),x=(0,t.useCallback)(((e,i)=>{if(!Wa(e.data))return(0,E.jsx)(t.Fragment,{});const n=e.data;return(0,E.jsx)(Za,{index:i,contextUri:a,uri:n.uri,name:n.name,totalMilliseconds:n.duration.totalMilliseconds,imgUrl:n.albumOfTrack?.coverArt?.sources[0].url,isPlayable:n.playability.playable,artists:n.artists.items.map((e=>({uri:e.uri,id:e.id,name:e.profile.name}))),albumUri:n?.albumOfTrack?.uri,isExplicit:n.contentRating?.label===ne.KS.Explicit,isMOGEFRestricted:n.contentRating?.label===ne.KS.NineteenPlus,usePlayContextItem:v,playcount:parseInt(n.playcount||"0",10)},`${i}-${n.uri}`)}),[a,v]);return r?.length?(0,E.jsxs)("div",{className:_a,children:[(0,E.jsxs)("div",{className:Ba,children:[(0,E.jsx)(l.D,{variant:"canon",semanticColor:"textBase",children:m.ag.get("playlist.extender.recommended.title")}),(0,E.jsx)(l.D,{variant:"mesto",paddingBottom:La.o7,children:m.ag.get("internal-link-recommender.based-on-this-song")})]}),(0,E.jsx)(Va.Pv,{ariaLabel:m.ag.get("playlist.extender.recommended.title"),nrTracks:Math.min(r.length,5),rowPlaceholder:Va.hU,tracks:c,renderRow:x,resolveUri:o,columns:d},"internal-link-recommender-track-list")]}):null}));var Qa=i(51653),Xa=i(28489);const ei=({album:e,index:a,artistURI:i})=>(0,E.jsx)(Aa.ZP,{value:"card",index:a,children:(0,E.jsx)(Xa.i,{index:a,latest:!1,showType:!0,...(0,Qa.B$)(e,i,e.name)})});var ai=i(854);const ii=({albums:e,artistName:a,artistId:i,artistUri:t,className:n})=>e?(0,E.jsx)(Aa.ZP,{value:"shelf/albums",children:(0,E.jsx)(ai.P,{total:e.totalCount,title:m.ag.get("rich-page.popular-albums-by-artist",{artist:a}),seeAllUri:`${(0,Qa.GJ)(i)}:discography:${ne.VZ.Album.toLowerCase()}`,seeAllLabel:m.ag.get("shelf.see-all"),alwaysShowSeeAll:!0,className:n,children:(0,Qa.Hr)(e.items).map(((e,a)=>(0,E.jsx)(ei,{album:e,index:a,artistURI:t},e.uri)))})}):null;var ti=i(53778);const ni=({artistId:e,className:a,fansAlsoLike:i,title:t})=>(0,E.jsx)(Aa.ZP,{value:"shelf/fans-also-like",children:(0,E.jsx)(ai.P,{total:i.length,title:t??m.ag.get("rich-page.fans-also-like"),seeAllUri:`${(0,Qa.GJ)(e)}:related`,className:a,children:i.map(((e,a)=>(0,E.jsx)(Aa.ZP,{value:"card",index:a,children:(0,E.jsx)(ti.I,{index:a,uri:e.uri,name:e.profile.name,images:e.visuals.avatarImage?.sources||[]})},e.uri)))})});var si=i(36127);const ri=({artistName:e,artistUri:a,headerClassName:i,rowClassName:n,topTracks:s,topTracksTransformer:r,uri:c})=>{const o=(0,t.useMemo)((()=>s?.items.map((e=>r(e,c)))),[s?.items,r,c]),{usePlayContextItem:d}=(0,$.n)({uri:a},{featureIdentifier:"artist"});return o&&o.length>0?(0,E.jsxs)("div",{className:n,children:[(0,E.jsxs)("div",{children:[(0,E.jsx)(l.D,{variant:"mesto",children:m.ag.get("rich-page.popular-tracks")}),(0,E.jsx)(l.D,{as:"h2",variant:"canon",semanticColor:"textBase",className:i,children:e})]}),(0,E.jsx)(si.k,{nrTracks:o.length,initialTracks:o,usePlayContextItem:d})]}):null},li=({artistName:e,artistId:a,artistUri:i,className:t,releases:n,artistImages:s})=>n?(0,E.jsx)(Aa.ZP,{value:"shelf/releases",children:(0,E.jsx)(ai.P,{total:10,title:m.ag.get("rich-page.popular-releases-by-artist",{artist:e}),seeAllUri:`${(0,Qa.GJ)(a)}:discography:${ne.VZ.Album.toLowerCase()}`,seeAllLabel:m.ag.get("shelf.see-all"),alwaysShowSeeAll:!0,className:t,listRowHeaderProps:s?{title:e,pretitle:m.ag.get("artist-page.popular"),media:(0,ke.o)(s,{desiredSize:48})||""}:null,children:n.items.map(((e,a)=>(0,E.jsx)(ei,{album:e,index:a,artistURI:i},e.uri)))})}):null,ci=({artistId:e,artistName:a,artistUri:i,className:t,singles:n})=>n?(0,E.jsx)(Aa.ZP,{value:"shelf/singles-and-eps",children:(0,E.jsx)(ai.P,{total:n.totalCount,title:m.ag.get("rich-page.popular-singles-and-eps-by-artist",{artist:a}),seeAllUri:`${(0,Qa.GJ)(e)}:discography:${ne.VZ.Single.toLowerCase()}`,seeAllLabel:m.ag.get("shelf.see-all"),alwaysShowSeeAll:!0,className:t,children:(0,Qa.Hr)(n.items).map(((e,a)=>(0,E.jsx)(ei,{album:e,index:a,artistURI:i},e.uri)))})}):null;var oi=i(72951),di=i(18112),ui=i(84132),mi=i(54819);const gi=e=>(e.items||[]).map((e=>({name:e.profile.name,images:(e.visuals.avatarImage?.sources||[]).map((e=>({url:e.url,width:e.width,height:e.height}))),uri:e.uri,id:e.id}))),ki=e=>(e||[]).map((e=>e.profile.name)),pi=({uri:e,track:a})=>{const i=(0,di.o)(),n=(0,ha.k)(),u=(0,Ya.g)(),j=(0,r.TH)(),S=(0,oi.k)({type:"locale",uri:e}),{firstArtist:f,otherArtists:A,albumOfTrack:O,duration:P,name:R}=a,F=O?.coverArt,U=O?.copyright.items,w=O?.courtesyLine,D=O?.date?.isoString,_=F?.extractedColors?.colorRaw.hex,B=(F?.sources||[]).map((e=>({url:e.url,width:e.width||void 0,height:e.height||void 0}))),G={uri:O?.uri||"",name:O?.name||""},q=(0,o.W6)(se.YS),z=ki(f.items),V=ki(A.items),W=gi(f),J=gi(A),H=[...W,...J],Q=f.items[0],X=a.albumOfTrack,ee=X?.playability?.playable,ae={artistId:Q?.id,artistName:Q?.profile?.name,artistUri:Q?.uri},te=a.albumOfTrack?.coverArt?.sources,re=(0,ke.o)(te||void 0,{desiredLabel:"large",desiredSize:600})??te?.[0]?.url??"",[le,pe]=(0,t.useState)(!1),ve=(0,t.useCallback)((()=>{pe(!le)}),[le]),xe=A&&A.items.length>5,{spec:he,logger:Ne}=(0,ge.fU)(d.createDesktopTrackEventFactory,{data:{uri:e}}),je=a.playability.playable,Ce=(0,ye.Y)(e),{togglePlay:we,isPlaying:De,isActive:_e}=(0,$.n)({uri:Ce},{featureIdentifier:"track"}),[Ee,Me]=(0,K.Z)(e),Ze=(0,t.useCallback)((async()=>{i({targetUri:e,intent:Ee?"unsave":"save",type:"click"});const a=he.actionBarFactory().saveButtonFactory();Ne.logInteraction(Ee?a.hitRemoveLike({itemNoLongerLiked:e}):a.hitLike({itemToBeLiked:e}));try{await Me(!Ee)}catch{}}),[i,e,Ee,he,Ne,Me]),Ge=(0,t.useCallback)((()=>(0,Y.Zs)({i18n:m.ag,trackArtistsList:[...z,...V].join(m.ag.getSeparator()),trackName:a.name,shouldLocalize:S})),[z,V,S,a.name]),Ke=(0,t.useCallback)(((e,a)=>{Ne.logInteraction(he.headerFactory().artistLinkFactory({position:a.position,uri:a.creator.uri}).hitUiNavigate({destination:a.creator.uri}))}),[Ne,he]),$e=(0,t.useCallback)((()=>{const a=(0,I.aK)({isPlaying:De,isActive:_e,spec:he.actionBarFactory().playButtonFactory(),logger:Ne,uri:e});we({loggingParams:a})}),[_e,De,Ne,he,we,e]),qe=(0,t.useCallback)((()=>{Ne.logInteraction(he.actionBarFactory().contextButtonFactory().hitUiReveal())}),[Ne,he]);return(0,E.jsxs)("section",{"data-testid":"track-page",children:[(0,E.jsx)(Ia.$,{children:Ge()}),(0,E.jsxs)(x.gF,{backgroundColor:_,children:[(0,E.jsxs)(h.W,{children:[(0,E.jsx)(b.$,{size:"md",onClick:$e,disabled:!je,isPlaying:De,uri:e}),(0,E.jsx)(N.i,{text:R,dragUri:e,dragLabel:R})]}),(0,E.jsx)(L._,{menu:(0,E.jsx)(v.$,{uri:e}),children:(0,E.jsx)(x.Oz,{dragUri:e,images:B,name:R,placeholderType:"album"})}),(0,E.jsxs)(x.sP,{children:[(0,E.jsx)(l.D,{variant:"mestoBold",children:m.ag.get("song")}),(0,E.jsx)(L._,{menu:(0,E.jsx)(v.$,{uri:e}),children:(0,E.jsx)(x.xd,{dragUri:e,dragLabel:R,children:R})}),(0,E.jsx)(x.QS,{creators:W,releaseDate:D,durationMilliseconds:P.totalMilliseconds,onCreatorClick:Ke,isTrack:!0,album:G})]})]}),(0,E.jsx)(g.o,{backgroundColor:_,children:(0,E.jsxs)(g.F,{children:[(0,E.jsx)(x.rn,{children:(0,E.jsx)(b.$,{onClick:$e,isPlaying:De,disabled:!je,size:"lg",uri:e})}),(0,E.jsx)(x.rn,{children:(0,E.jsx)(k.H,{isAdded:!!Ee,onClick:Ze,disabled:!n,size:k.q.md})}),(0,E.jsx)(p.o,{uri:e,isFollowing:!!Ee,onFollow:Ze,size:p.q.md}),(0,E.jsx)(L.ClickToggleContextMenu,{menu:(0,E.jsx)(v.$,{uri:e}),onShow:qe,children:(0,E.jsx)(y.MoreButton,{label:m.ag.get("more.label.context",R)})})]})}),(0,E.jsxs)(ie,{children:[(0,E.jsxs)("div",{className:"contentSpacing",children:[(0,E.jsx)("div",{className:be,children:(0,E.jsx)(T.T,{render:({columnCount:a})=>(0,E.jsx)(ba,{imageForLyricsRequest:re,albumArtists:H,columnCount:a,uri:e})})}),ce(q,j)&&(0,E.jsx)("div",{"data-testid":"canonical-pool-top",children:(0,E.jsx)(Ha,{strategy:ne.JI.ContentOnly,uri:a.uri})}),de(q,j)&&(0,E.jsx)("div",{"data-testid":"organic-pool-top",children:(0,E.jsx)(Ha,{strategy:ne.JI.OrganicTraffic,uri:a.uri})}),(0,E.jsx)(ri,{artistName:Q.profile.name,artistUri:Q.uri,headerClassName:Se,rowClassName:be,topTracks:Q.discography.topTracks,topTracksTransformer:ui.X7,uri:a.uri}),(0,E.jsx)(li,{className:Te,releases:Q?.discography?.popularReleasesAlbums,...ae}),(0,E.jsx)(ii,{albums:Q?.discography?.albums,className:Te,...ae}),(0,E.jsx)(ci,{className:Te,singles:Q?.discography?.singles,...ae}),A&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("div",{className:Ae,children:A.items.map(((e,a)=>(0,E.jsx)(li,{className:s()(fe,{[Pe]:a>4,[Re]:le&&a>4}),releases:e.discography.popularReleasesAlbums,artistName:e.profile.name,artistId:e.id,artistUri:e.uri,artistImages:e.visuals.avatarImage?.sources},e.id)))}),xe&&(0,E.jsx)(c.o,{onClick:ve,className:Fe,children:(0,E.jsx)(l.D,{as:"h2",variant:"violaBold",children:le?m.ag.get("show_less"):m.ag.get("mwp.search.artists.all")})}),(0,E.jsx)(ni,{artistId:Q.id,className:s()(Te,{[Oe]:A.items.length>0}),fansAlsoLike:Q.relatedContent.relatedArtists.items,title:m.ag.get("artist-page.fansalsolike")})]}),X&&(0,E.jsx)(Z,{art:X.coverArt?.sources[0],disabled:!ee||!n,LinkComponent:Ye.default,name:X.name,type:X.type,size:M.LARGE,uri:X.uri}),(0,E.jsx)(Ue,{richTrack:a})]}),(0,E.jsxs)("div",{className:"contentSpacing",children:[(0,E.jsxs)("div",{className:s()(Ie,{[Le]:me(q,j)}),children:[(0,E.jsx)(C.k,{copyrights:U||[],courtesyLine:w}),!u&&(0,E.jsx)(Be,{uri:e,imageForLyricsRequest:re})]}),oe(q,j)&&(0,E.jsx)("div",{"data-testid":"canonical-pool-bottom",children:(0,E.jsx)(Ha,{strategy:ne.JI.ContentOnly,uri:e})}),ue(q,j)&&(0,E.jsx)("div",{"data-testid":"organic-pool-bottom",children:(0,E.jsx)(Ha,{strategy:ne.JI.OrganicTraffic,uri:e})})]})]})]})},yi=(0,t.memo)((function(){const{trackId:e=""}=(0,r.UO)(),a=(0,u.tn)(e).toURI(),i=(0,mi.QN)({uri:a});return i.loading||"Track"!==i.data?.trackUnion?.__typename?(0,E.jsx)(j.h,{hasError:null!==i.error,errorMessage:m.ag.get("track-page.error")}):(0,E.jsx)(G.fd,{surface:G.Tg.TRACK,uris:[a,i.data.trackUnion.albumOfTrack?.uri??null],children:(0,E.jsx)(pi,{uri:a,track:i.data.trackUnion})})}))},21324:(e,a,i)=>{i.d(a,{M:()=>d});var t=i(59496),n=i(8172),s=i(72510),r=i(9990),l=i(46584),c=i(73748),o=i(54329);const d=({category:e,action:a,remoteConfigProperty:i,defaultVariant:d,label:u,context:m,country:g,spt:k=!1,isAnonymous:p=!1})=>{const y=(0,r.W6)(i),v=(0,o.s4)();(0,t.useEffect)((()=>{if(!y||!u)return;const i={category:e,action:a,variant:d??y,label:u,os:(0,l.y)(),...m&&{context:m},...g&&{country:g},...k&&{sp_t:(0,c.vQ)("sp_t")}};p?v.send((0,s.k)(i)):v.send((0,n.x)(i))}),[y,u,e,a,m,g,k,p,v,d])}},62768:(e,a,i)=>{i.d(a,{k:()=>r});var t=i(51697);const n="rTMkDBDp47Eo12ZEQv4U";var s=i(4637);const r=({copyrights:e,courtesyLine:a})=>{const i=(e||[]).map(((e,a)=>{const i=e.text.replace(/^(\(C\)\s+)/,"").replace(/^(\(P\)\s+)/,"").replace(/^(©\s+)/,"").replace(/^(℗\s+)/,"");let n;return n="C"===e.type?"©":"P"===e.type?"℗":`(${e.type})`,(0,s.jsx)(t.D,{as:"p",variant:"finale",dir:"auto",children:`${n} ${i}`},a)}));return a&&i.unshift((0,s.jsx)(t.D,{as:"p",variant:"finale",dir:"auto",children:a},i.length)),(0,s.jsx)("div",{className:n,children:i})}},90570:(e,a,i)=>{i.d(a,{vI:()=>t});const t=(e,a)=>{const i=a?new URLSearchParams(a.search):void 0;return"1"===i?.get(e)}},46354:(e,a,i)=>{i.d(a,{k:()=>t});let t=function(e){return e.I18nSEO="i18nSEO",e.RTPTrackCredits="rtpv2p2",e.BlendParty="bp",e.BlendPartyV2="bpv2",e.VideoPodcastShowTitleTag="vidpodshow",e.I18nAdditionalPages="i18nap",e.IlrTrackCanonicalTop="ilr-track-canonical-top",e.IlrTrackCanonicalBottom="ilr-track-canonical-bottom",e.IlrTrackOrganicTop="ilr-track-organic-top",e.IlrTrackOrganicBottom="ilr-track-organic-bottom",e.RichPlaylistPages="rpp",e}({})}}]);
//# sourceMappingURL=xpui-routes-track-v2.js.map