"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[7553],{92716:(e,t,a)=>{a.r(t),a.d(t,{default:()=>J});var l=a(59496),n=a(83792),r=a(97601),o=a(87276),s=a(9990),i=a(60056),c=a(14887),u=a(94633),d=a(46927),g=a(99750),m=a(70304),f=a(62926),h=a(75132),y=a(68224),p=a(46915),x=a(29629),k=a(96355),j=a(48989),b=a(34092),D=a(52118),F=a(29405),C=a(53851),E=a(10047),I=a(90293),S=a(5272),P=a(13138),T=a(34046),v=a(93878),w=a(31186),L=a(5684),A=a(44711),R=a(4637);const U=l.memo((({tracklistDomRef:e})=>{const{spec:t,logger:a}=(0,T.fU)(w.createDesktopSearchBarEventFactory,{}),n=(0,l.useCallback)((()=>{a.logInteraction(t.filterFieldFactory().keyStrokeFilter())}),[a,t]),r=(0,l.useCallback)((()=>{a.logInteraction(t.filterFieldFactory().hitClearFilter())}),[a,t]),o=(0,l.useCallback)((()=>{a.logInteraction(t.sortButtonFactory().hitSort())}),[a,t]);return(0,R.jsxs)("div",{className:p.Z.searchBoxContainer,children:[(0,R.jsx)(l.Suspense,{fallback:null,children:(0,R.jsx)(L.K,{placeholder:u.ag.get("playlist.search_in_playlist"),clearOnEscapeInElementRef:e,onFilter:n,onClear:r})}),(0,R.jsx)(A.l,{columns:j.P0,onSort:o})]})}));var N=a(18605),O=a(34198),_=a(47948),B=a(7554),Q=a(4398),M=a(99550),z=a(9102),G=a(72102),K=a(33960),H=a(66361),V=a(36645),W=a(75922);const $=l.lazy((()=>Promise.all([a.e(1814),a.e(8878),a.e(682)]).then(a.bind(a,98878)))),q=[k.QD.INDEX,k.QD.TITLE,k.QD.ALBUM,k.QD.ADDED_AT,k.QD.DURATION],Z="your_library",X=({data:e,canFilter:t,canSort:a})=>{const{uri:n,name:c,totalLength:D}=e.metadata,I=(0,l.useRef)(null),w=D>0,L=D>0,A=(0,C.Y5)("#5038a0"),{filter:B}=(0,l.useContext)(x.fo),{sortState:z,setSortState:G}=(0,l.useContext)(j.Gb),{spec:K,logger:H}=(0,T.fU)(i.createDesktopLikedSongsEventFactory,{data:{uri:n}}),V=l.useMemo((()=>K.headerFactory()),[K]),W=l.useMemo((()=>K.tracklistFactory()),[K]);(0,l.useEffect)((()=>{null===z.column&&G({column:k.QD.ADDED_AT,order:k.kn.DESC})}),[z,G]);const $=(0,s.W6)(_.eKc,{loadingValue:!1}),X=(0,r.ur)(),Y=(0,r.TH)(),J="POP"!==X?new URLSearchParams(Y.search).get("uri"):null,{isPlaying:ee,togglePlay:te,usePlayContextItem:ae,isActive:le}=(0,P.n)((0,E.I)(n,(0,v.w)(z),B),{featureIdentifier:Z,referrerIdentifier:"your_library"}),ne=()=>{const e=(0,O.aK)({isPlaying:ee,isActive:le,spec:K.actionBarFactory().playButtonFactory(),logger:H,uri:n});te({loggingParams:e})},re=(0,l.useCallback)(((e,t)=>{const a=K.actionBarFactory().downloadButtonFactory();t===S.mc.ADD?H.logInteraction(a.hitDownload({itemToDownload:n})):t===S.mc.REMOVE?H.logInteraction(a.hitRemoveDownload({itemToRemoveFromDownloads:n})):t===S.mc.NO_PERMISSION&&H.logInteraction(a.hitUiReveal())}),[H,K,n]);return(0,R.jsxs)("section",{role:"presentation",className:p.Z.playlist,"data-testid":"playlist-page",children:[(0,R.jsx)(m.$,{children:u.ag.get("playlist.page-title",c)}),(0,R.jsx)(F.s,{metadata:e.metadata,isPlaying:ee,togglePlay:ne,backgroundColor:A,specLikedSongs:V}),(0,R.jsx)(d.o,{backgroundColor:A,children:(0,R.jsxs)(d.F,{children:[L?(0,R.jsx)(y.$,{onClick:ne,isPlaying:ee,size:"lg",uri:n,ariaPauseLabel:u.ag.get("playlist.a11y.pause",c),ariaPlayLabel:u.ag.get("playlist.a11y.play",c)}):null,$&&(0,R.jsx)(M.K,{entityName:c,contextUri:n,activationPlacement:"bottomEnd"}),e.metadata.totalLength>0&&(0,R.jsx)(Q.v,{uri:n,renderEnabled:()=>(0,R.jsx)(b.v,{uri:n})}),(0,R.jsx)(g.o,{uri:n,canDownload:w,isFollowing:!0,onFollow:()=>{},size:g.q.md,onClick:re}),t&&a&&(0,R.jsx)(T.Nh,{spec:K.actionBarFactory(),children:(0,R.jsx)(U,{tracklistDomRef:I})})]})}),(0,R.jsx)("div",{className:"contentSpacing",children:D>0?(0,R.jsx)(l.Suspense,{fallback:(0,R.jsx)(h.h,{hasError:!1,errorMessage:u.ag.get("error.request-collection-tracks-failure")}),children:(0,R.jsx)(T.Nh,{spec:W,children:(0,R.jsx)(N.p,{nrTracks:D,columns:q,collectionUri:n,scrollToUri:J,usePlayContextItem:ae,outerDomRef:I,spec:W,initialItems:e.contents.items})})}):(0,R.jsx)(f.u,{message:u.ag.get("collection.empty-page.songs-subtitle"),title:u.ag.get("collection.empty-page.songs-title"),linkTo:"/search",linkTitle:u.ag.get("collection.empty-page.songs-cta"),renderInline:!0,children:(0,R.jsx)(o.F,{"aria-hidden":"true"})})})]})},Y=l.memo((function({user:e,uri:t}){const{filter:a}=(0,l.useContext)(x.fo),{sortState:r}=(0,l.useContext)(j.Gb),o=function(e,t,a){const n=(0,l.useContext)(I.H),r=(0,z.useQueryClient)(),o=(0,G.jP)((()=>["useLikedSongs",e,a]),[e,a]),{data:s}=(0,z.useQuery)(o(),(()=>n.getTracks(a)),{cacheTime:18e5,keepPreviousData:!0,refetchOnWindowFocus:!1}),i=(0,l.useCallback)((()=>{r.invalidateQueries(o())}),[r,o]);(0,H.b)(K.EW.UPDATE,i);const c=(0,W.I2)(t.id);return c&&s?{metadata:{uri:e,name:c.name,images:c.images,totalLength:s?.totalLength,unfilteredTotalLength:s.unfilteredTotalLength,owner:(0,V.V)(t)},contents:s}:null}(t,e,{offset:0,limit:25,sort:(0,v.w)(r),filter:a}),s=(0,l.useContext)(I.H).getCapabilities(),i=(0,n.v9)(B.n5),{isEnhanced:c}=(0,D.U)(`spotify:user:${i}:collection`);if(o){const e=(0,R.jsx)(X,{data:o,canFilter:s.canFilterTracksAndEpisodes&&o.metadata.unfilteredTotalLength>0,canSort:s.canSortTracksAndEpisodes&&o.metadata.unfilteredTotalLength>0});return(0,R.jsx)(Q.v,{uri:o.metadata.uri,renderEnabled:()=>c?(0,R.jsx)(l.Suspense,{fallback:null,children:(0,R.jsx)(j.kz,{uri:o.metadata.uri,children:(0,R.jsx)($,{metadata:{...o.metadata,collaborators:{count:1,items:[{isOwner:!0,user:o.metadata.owner,tracksAdded:o.metadata.totalLength}]}},capabilities:s,featureIdentifier:Z})})}):e,renderDisabled:()=>e})}return(0,R.jsx)(h.h,{hasError:!1,errorMessage:u.ag.get("error.not_found.title.playlist"),loadOffline:s.canModifyOffline})})),J=()=>{const{user:e}=(0,n.v9)(B.Gg);if(null===e)return null;const t=(0,c.wG)(e.id).toURI();return(0,R.jsx)(j.kz,{uri:t,children:(0,R.jsx)(x.hz,{uri:t,children:(0,R.jsx)(Y,{uri:t,user:e})})})}},29405:(e,t,a)=>{a.d(t,{s:()=>l.s});var l=a(5912)}}]);
//# sourceMappingURL=xpui-routes-collection-songs.js.map