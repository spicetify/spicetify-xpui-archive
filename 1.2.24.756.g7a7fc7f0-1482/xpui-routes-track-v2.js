"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[4179],{79226:(e,a,i)=>{i.d(a,{qj:()=>$,GA:()=>m});var t=i(24106),s=i(52529),n=i(54431),r=i(12160),l=i(95706),c=i(67515),o=i(90797),d=i(57612);const m=(e,a)=>{const i=(0,s.TH)(),m=(0,n.W6)(o.d_6),u=(0,r.vI)(l.k.GenerativeAIContent,i),g="track"===a?d.aj:d.M4,k=(0,t.v9)(g);return(0,c.$S)(k||{},e)||m===o.U0E.VARIANT||u};var u=i(59496),g=i(29378),k=i(90512),p=i(33856),y=i(40315);function h(e,a,i){try{(0,k.sQ)({metric_type:g.MetricTypes.COUNTER,what:"request-rate",value:1,tags:{endpoint:e,statusCode:a,isFatal:i}}).catch((()=>({})))}catch(e){}}class v extends y.c{build(){const e=super.build();return e.onAfterSend=a=>{let i="unknown",t=!1;if(null!==e.endpointIdentifier&&(t=!0,i=`${e.method} ${e.hostIdentifier||"unknown-host"}::${e.endpointIdentifier}`),a)throw t&&h(i,JSON.stringify(a.status||0),JSON.stringify(0===(e.endpointIdentifier||"").indexOf("/me"))),p.m.fromResponse(a,e.method);if(t){h(i,"200","false");const a=Date.now()-(e.startTimestamp||0);!function(e,a,i){try{(0,k.sQ)({metric_type:g.MetricTypes.TIMER,what:"request-duration",value:i,tags:{endpoint:e,statusCode:a}}).catch((()=>({})))}catch(e){}}(i,"200",g.Time.fromMillis(a).asNanos())}},e}}var x=i(48706);let N=null;class j{static setSession(e){if(!e)return;const{accessToken:a}=e,i=this.getInstance();i.accessToken=a,a||i.resetPendingRequests()}static setLocale(e){this.getInstance().locale=e}static setMarket(e){this.getInstance().market=e}static resetInstance(){N=null}static getInstance(){return N||(N=this.createNew()),N}static createNew(){return new v(x.e)}}var b=i(14918);const L=e=>(0,u.useCallback)((async()=>b.Wy.getGeneratedContent(j.getInstance(),e).then((e=>e.body.content))),[e]);var I=i(58531),C=i(89518),A=i(50834);const f="expandable-description-for-seo";var R=i(84875),T=i.n(R);const S="kJFJjpbeZmhT7WG2KjAM",P="gPrYeH86UvcjOx_NQYwp",F="Zf6ONkng2h6eGJg9d4l_",D="G2RRgu_U4ZPugC9x8Vuh",O="BmLmBhY6zS0mTzoMTvQA",U="dvKxmtfViMbQHGD2OUYz",E="LzDWAa70LpBOSMc_ATzA",w="Z5EIr8RoSgmXMt0y9VsS";var _=i(4637);const M=({open:e,content:a})=>{const i=a.slice(0,3),t=a.slice(3);return(0,_.jsxs)(C.D,{as:"ul",className:D,children:[i.map((e=>(0,_.jsxs)(C.D,{as:"li",className:O,variant:"ballad",children:[e,"‎"]},e))),t.map((a=>(0,_.jsxs)(C.D,{as:"li",variant:"ballad",className:T()(O,U,{[E]:e}),"aria-hidden":!e,children:[a,"‎"]},a)))]})},B=({open:e,handleClick:a})=>(0,_.jsx)("button",{className:F,onClick:a,"aria-controls":f,"aria-owns":f,children:(0,_.jsx)(C.D,{variant:"balladBold",className:w,children:e?A.ag.get("show_less"):`…${A.ag.get("show_more")}`})}),G=u.memo((function({content:e}){const[a,i]=(0,u.useState)(!1),t=JSON.parse(e);return t.length<=3?(0,_.jsx)("div",{className:S,children:(0,_.jsx)("ul",{className:P,children:t.map((e=>(0,_.jsx)("li",{children:(0,_.jsx)(C.D,{as:"p",semanticColor:"textSubdued",variant:"ballad",children:e})},e)))})}):(0,_.jsxs)("div",{className:S,"aria-expanded":a,id:f,children:[(0,_.jsx)(M,{open:a,content:t}),(0,_.jsx)(B,{open:a,handleClick:()=>{i(!a)}})]})})),K="QoqWMT7XTnQGGR9Dz8yQ",V="oRVB2r5OyoFGZLnRfzo2",Y="Ceua68dPWnYGAQKpHApG",$=({title:e,uri:a})=>{const[i,t]=(0,u.useState)(""),s=L(a);return(0,u.useEffect)((()=>{!async function(){try{const e=await s();t(e)}catch(e){}}()}),[s]),i&&0!==i.length?(0,_.jsxs)("div",{className:K,children:[(0,_.jsxs)("div",{className:V,children:[(0,_.jsx)(I.W,{size:"small",semanticColor:"textSubdued",className:Y}),(0,_.jsx)(C.D,{variant:"mesto",as:"p",children:A.ag.get("generative-ai.disclaimer")})]}),(0,_.jsx)(C.D,{variant:"canon",as:"h1",semanticColor:"textBase",children:e}),(0,_.jsx)(G,{content:i})]}):null}},18611:(e,a,i)=>{i.r(a),i.d(a,{default:()=>hi});var t=i(59496),s=i(84875),n=i.n(s),r=i(52529),l=i(89518),c=i(66863),o=i(77438),d=i(36820),m=i(50834),u=i(11565),g=i(78642),k=i(93268),p=i(79728),y=i(708),h=i(2050),v=i(45836),x=i(44858),N=i(99334),j=i(8516);const b="o2TlnuNKxRO5RnB9BpHB",L="q0Ke_aAvTcc4dO4wCHQt",I="UlKUfS_GcROZmofuafOW",C="I5LORTI1u3A6VoUvRCBf",A="TS85Qkpioa31wR0p4kzT",f="yL1DLXBc05CR_ACv_NhA",R="k5kRkUyoz9znqg_SGOVQ";var T=i(71147),S=i(48068),P=i(80041),F=i(7431),D=i(12623),O=i(4637);let U=function(e){return e.SMALL="small",e.LARGE="large",e}({});const E=({art:e,disabled:a=!1,LinkComponent:i,name:t,size:s=U.SMALL,type:c,uri:o})=>{const u=e?[e]:[],g=s===U.SMALL?(0,S.R)(c):function(e){switch(e){case T.albumType.SINGLE:return m.ag.get("track-page.from-the-single");case T.albumType.EP:return m.ag.get("track-page.from-the-ep");case T.albumType.COMPILATION:return m.ag.get("track-page.from-the-compilation");case T.albumType.ALBUM:default:return m.ag.get("track-page.from-the-album")}}(c),k=(0,r.s0)();return(0,O.jsxs)("div",{className:n()(b,{[I]:s===U.SMALL,[L]:a}),children:[(0,O.jsx)("div",{className:C,children:(0,O.jsx)(P.O,{images:u,size:D.m$.SIZE_80,title:t,type:F.p.ALBUM})}),(0,O.jsxs)("div",{className:A,children:[(0,O.jsx)(l.D,{variant:s===U.SMALL?"mestoBold":"finale",children:g}),(0,O.jsx)(i,{to:o,children:(0,O.jsx)(l.D,{as:"div",className:f,variant:"balladBold",dir:"auto",children:t})})]}),(0,O.jsx)("div",{onClick:()=>{k((0,d.EC)(o).toURLPath(!0))},className:R})]})};var w=i(60033),_=i(71308),M=i(51458),B=i(64461);let G=function(e){return e.LOADING="LOADING",e.LOADED="LOADED",e.UNAVAILABLE="UNAVAILABLE",e}({});const K=(0,B.Uy)(((e,a)=>{switch(a.type){case"LYRICS_LOADING":e[a.uri]={status:G.LOADING};break;case"LYRICS_LOADED":e[a.uri]={status:G.LOADED,data:a.response};break;case"LYRICS_ERROR":e[a.uri]={status:G.UNAVAILABLE};break;default:throw new Error(`Unhandled lyrics action with type: ${a.type}`)}}));var V=i(31731),Y=i(14918),$=i(33856);const z={status:G.LOADING},q={status:G.UNAVAILABLE},J=t.createContext(void 0),Q=({children:e,initialState:a={}})=>{const i=t.useReducer(K,a);return(0,O.jsx)(J.Provider,{value:i,children:e})},W=({uri:e,isAnonymous:a,imageForLyricsRequest:i})=>{const s=t.useContext(J);if(void 0===s)throw new Error("useTrackEntityLyrics must be used within a TrackEntityLyricsProvider");if(!e||!(0,d.wj)(e)||a)return q;const[n,r]=s,l=n[e];return l||(r({type:"LYRICS_LOADING",uri:e}),(async({trackUri:e,api:a,imageForLyricsRequest:i})=>{const t=(0,d.EC)(e);try{const e=await Y.Zz.getTrackEntityLyrics(a||V.b.getInstance(),t.id,i||"");return{hasLyrics:!0,syncType:e.lyrics.syncType,lyrics:e.lyrics.lines,provider:e.lyrics.provider,providerDisplayName:e.lyrics.providerDisplayName,providerLyricsId:e.lyrics.providerLyricsId,isRtlLanguage:e.lyrics.isRtlLanguage}}catch(e){if(e instanceof $.m&&404===e.status)return{hasLyrics:!1};throw e}})({trackUri:e,imageForLyricsRequest:i}).then((a=>{r({type:"LYRICS_LOADED",uri:e,response:a})})).catch((()=>{r({type:"LYRICS_ERROR",uri:e})})),z)};var Z=i(85730),H=i(9144),X=i(10113),ee=i(90130),ae=i(89787),ie=i(62249),te=i(93588);const se="oTRKhYD0MZlNPm66W3Tw",ne="sc95MwPalcHwYGZ7j3xN",re="zrCZCfYv4zZiB1HYv9i8",le="RnlxIDmWcYTbbwNSJNjA",ce="SHkxfN1vy0wpRMP1hK7I",oe="COXBS6zLyyxKNYuEAzjZ",de="sR5IpdOUvoUGYKlC9Dk1",me="FHMr3WxshoYjZ7jd3YwI",ue="Evcwc4KM2tf9xrLbfB8B",ge="x4_dsi31Cx2SO1L0uYIj",ke="euPDqfFEBILj9KHDNLC1",pe="x6FPRUKK40oDCPP7g6Ls",ye="k3SPcfaKewjfdYumDcGw",he="t9C7vRiN1OSC9uWfJEr0",ve="Onv6dO4lntCzKUqYa8PE",xe="vHNIIDpwcSLuHumlKDbY",Ne=({richTrack:e})=>{const{search:a}=(0,r.TH)(),i=(0,t.useCallback)((()=>new URLSearchParams(a.slice(1)).get("highlight")||""),[a])(),{tracklistRef:s}=(0,te.W)(),n=e.albumOfTrack,l=(0,ie.Y)(n?.uri||""),{usePlayContextItem:c}=(0,_.n)({uri:l},{featureIdentifier:"album"}),o=(0,t.useMemo)((()=>({items:[],totalCount:0})),[]);return n?(0,O.jsx)("div",{ref:s,className:de,children:(0,O.jsx)(ae.L,{ariaLabel:n.name,nrTracks:n.tracks.totalCount,albumUri:n.uri,highlightUri:i,discs:o,usePlayContextItem:c,hasHeaderRow:!1})}):null};var je=i(26804),be=i(26769),Le=i(47603),Ie=i(22817),Ce=i(72953),Ae=i(60536),fe=i(94638),Re=i(14013);const Te=t.memo((function({uri:e,togglePlay:a,isPlaying:i,isActive:s,spec:n,logger:r,backgroundColor:l,name:c,isPlayable:o,albumUri:d,artists:k}){const p=(0,fe.o)(),y=(0,Re.k)(),[N,j]=(0,Ce.Z)(e),b=(0,t.useCallback)((async()=>{p({targetUri:e,intent:N?"unsave":"save",type:"click"});const a=n.saveButtonFactory();r.logInteraction(N?a.hitRemoveLike({itemNoLongerLiked:e}):a.hitLike({itemToBeLiked:e}));try{await j(!N)}catch{}}),[p,e,N,n,r,j]),L=(0,t.useCallback)((()=>{const t=(0,v.aK)({isPlaying:i,isActive:s,spec:n.playButtonFactory(),logger:r,uri:e});a({loggingParams:t})}),[s,i,r,n,a,e]),I=(0,t.useCallback)((()=>{r.logInteraction(n.contextButtonFactory().hitUiReveal())}),[r,n]),C=(0,Ae.j)();return(0,O.jsx)(je.o,{backgroundColor:l,children:(0,O.jsxs)(je.F,{children:[(0,O.jsx)(g.rn,{children:(0,O.jsx)(h.$,{onClick:L,isPlaying:i,disabled:!o,size:C,uri:e})}),(0,O.jsx)(g.rn,{children:(0,O.jsx)(be.H,{isAdded:!!N,onClick:b,disabled:!y,size:C})}),(0,O.jsx)(Le.o,{uri:e,isFollowing:!!N,onFollow:b,size:C}),(0,O.jsx)(x.yj,{menu:(0,O.jsx)(u.$,{uri:e,albumUri:d,artists:k}),onShow:I,children:(0,O.jsx)(Ie.z,{label:m.ag.get("more.label.context",c),size:C})})]})})})),Se="OH5mnpJIVCJozYM3raMt",Pe="etw0slM6uVrCi5RR3iDi",Fe=({padded:e,providerDisplayName:a})=>a?(0,O.jsx)(l.D,{as:"p",dir:"auto",variant:"finale",className:`${Se} ${e?Pe:""}`,children:m.ag.get("web-player.lyrics.providedBy",a)}):null,De=({uri:e,imageForLyricsRequest:a})=>{const{data:i}=W({uri:e,imageForLyricsRequest:a});return i?.hasLyrics?(0,O.jsx)(Fe,{providerDisplayName:i.providerDisplayName}):null};var Oe=i(24106),Ue=i(51418);const Ee="QhDsXG1Gmo7XmQWLggAO",we="bZgWQj7UxvK8GYKWDA7N",_e="AW61P3tnW5cKJCWtbhFh",Me=({buttonText:e,onSecondaryButtonClick:a,onPrimaryButtonClick:i,secondaryButtonText:t,text:s})=>(0,O.jsxs)("div",{className:Ee,"data-testid":"static-activation-trigger",children:[(0,O.jsx)(l.D,{className:we,variant:"cello",children:s}),(0,O.jsxs)("div",{className:_e,children:[(0,O.jsx)(c.o,{onClick:a,semanticColor:"textBase",children:t}),(0,O.jsx)(Ue.D,{onClick:i,colorSet:"invertedLight",children:e})]})]});var Be=i(47517);const Ge="T1nqQ4HEh3heHy4RCCKa",Ke="L8zjshPVgUMXyZR4FtOk",Ve="YMn1FWcFmOz9osBrNvhF",Ye="Inbyq3TnvKDOJtcKFTDQ",$e="lWk5se4WETUOJwaEb8D6",ze="i8DyQbWCmDV_8N5XGJQT",qe="t5WPFlGTY6GCd9UOFfLu",Je="AGQ3wRyMVK1odq860qnT",Qe="ZX_r7uZgPgssaUplfpxT",We="qrqctaPu2XBpxsw23nPX",Ze="XnWidTagai3nQwMPxIMF";var He=i(2785),Xe=i(14695);let ea=function(e){return e.SMALL="small",e.LARGE="large",e}({});const aa=e=>{const{disabled:a,images:i,LinkComponent:t,name:s,size:c,uri:o,enableI18nRoutes:u,enableI18nAdditionalPages:g}=e,k=c===ea.SMALL,p=(0,r.s0)(),y=(0,d.EC)(o),h=y?.type,v=m.ag.getUrlLocale(),x=(0,He.S9)({localeFeatureFlag:u,entityFeatureFlag:g,urlLocale:v,entity:h,type:"link"});return(0,O.jsxs)("div",{className:n()(Ke,{[Ve]:a}),"data-testid":"track-artist-link-card",children:[(0,O.jsx)(P.O,{shape:P.K.CIRCLE,images:i,size:D.m$.SIZE_80,title:s,type:F.p.ARTIST}),(0,O.jsxs)("div",{className:n()($e,{[ze]:k}),children:[(0,O.jsx)(l.D,{variant:"mestoBold",className:Ye,children:m.ag.get("card.tag.artist")}),(0,O.jsx)(t,{to:o,children:(0,O.jsx)(l.D,{as:"div",dir:"ltr",className:qe,variant:"balladBold",children:s})})]}),(0,O.jsx)("div",{onClick:()=>{const e=y?.toURL(`/${Xe.F0}${v}/`);if(y){const a=x?e:y.toURLPath(!0);p(a)}},className:Je})]})},ia=({size:e=ea.LARGE,disabled:a=!1,enableI18nRoutes:i,enableI18nAdditionalPages:s,...r})=>{const[o,d]=(0,t.useState)(!1),u=(0,t.useCallback)((()=>{d(!o)}),[o]),g=r.artists;return(0,O.jsxs)("div",{"data-testid":"track-artist-link-card-container",children:[(0,O.jsx)("div",{className:Ge,children:g.map(((t,l)=>(0,O.jsx)("div",{className:n()({[We]:o&&l>5,[Qe]:l>5}),children:(0,O.jsx)(aa,{name:t.name,uri:t.uri,images:t.images,size:e,LinkComponent:r.LinkComponent,disabled:a,enableI18nRoutes:i,enableI18nAdditionalPages:s},t.id)},`${t.uri}-${l}`)))}),g.length>6&&(0,O.jsx)(c.o,{onClick:u,className:Ze,children:(0,O.jsx)(l.D,{as:"p",variant:"violaBold",children:o?m.ag.get("show_less"):m.ag.get("mwp.search.artists.all")})})]})};var ta=i(25127);const sa="EaTxqhHk6J4ecKHwpY5m",na="dUQl9yd5x_1oWk4L0Ntm",ra="xt5C47eHPYNiriMJxGnC",la=({words:e})=>(0,O.jsx)(l.D,{as:"p",dir:"auto",variant:"ballad",className:ra,children:e});var ca=i(73095);const oa=({data:e,eventSender:a,isPlaying:i,playbackId:s,uri:n})=>{const{lyrics:r=[],provider:c,providerLyricsId:o,syncType:d}=e,u=function(e){const{uri:a,provider:i,providerLyricsId:s,syncType:n,eventSender:r,isPlaying:l,playbackId:c}=e,[o,d]=(0,t.useState)(!1),m=(0,t.useMemo)((()=>(0,ca.N)({lyrics_format:"track-page",track_uri:a,provider:i,provider_lyrics_id:s,sync_type:n,playback_id:l?c:void 0})),[a,i,s,n,l,c]);return(0,t.useCallback)((()=>{o||(r?.send(m),d(!0))}),[m,r,o])}({uri:n,provider:c,providerLyricsId:o,syncType:d,eventSender:a,isPlaying:i,playbackId:s});return(0,t.useEffect)((()=>{u()}),[u]),(0,O.jsxs)("div",{className:sa,children:[(0,O.jsx)(l.D,{as:"h2",variant:"canon",semanticColor:"textBase",className:na,children:m.ag.get("web-player.lyrics.title")}),r.map((({words:e},a)=>(0,O.jsx)(la,{words:e},`lyrics-seo-line-${a}`)))]})};var da=i(69205),ma=i(91524),ua=i(6686);const ga=({uri:e,imageForLyricsRequest:a})=>{const{data:i}=W({uri:e,imageForLyricsRequest:a}),t=(0,ua.s4)(),{isPaused:s,currentTrackUri:n,playbackId:r}=(0,da.Y)((e=>({isPaused:e?.isPaused,currentTrackUri:e?.item?.uri,playbackId:e?.playbackId})),ma.V),l=!s&&n===e;return i&&i?.hasLyrics?(0,O.jsx)(oa,{data:i,uri:e,eventSender:t,isPlaying:l,playbackId:r}):null};var ka=i(91074),pa=i(7715);const ya=e=>{const{albumArtists:a,columnCount:i,imageForLyricsRequest:s,uri:r}=e,l=i-2,c={"--column-count":i,"--left-column-end":l-2,"--right-column-start":l},{isAnonymous:o}=(0,Oe.v9)(pa.Gg),d=(0,Re.k)(),{data:u,status:g}=W({uri:r,isAnonymous:o,imageForLyricsRequest:s}),k=!!u&&u.hasLyrics&&g!==G.UNAVAILABLE||o,p=(0,Oe.v9)(ka.br),y=(0,Oe.v9)(ka.yE);return(0,O.jsxs)(t.Suspense,{fallback:null,children:[k&&(0,O.jsx)("div",{className:n()(re,{[le]:i>5}),style:{...c},"data-testid":"lyrics-container",children:o?(0,O.jsx)(Me,{buttonText:m.ag.get("sign_up"),secondaryButtonText:m.ag.get("login"),text:m.ag.get("track-page.sign-in-to-view-lyrics"),onPrimaryButtonClick:ta.L6,onSecondaryButtonClick:ta.h$}):(0,O.jsx)(ga,{uri:r,imageForLyricsRequest:s})}),(0,O.jsx)("div",{className:n()(se,{[ne]:i>5&&k}),style:{...c},children:(0,O.jsx)(ia,{artists:a,LinkComponent:Be.default,disabled:!d,enableI18nRoutes:p,enableI18nAdditionalPages:y})})]})};var ha=i(67497),va=i(17454),xa=i(86560),Na=i(16263),ja=i(32597),ba=i(4477),La=i(45434),Ia=i(35992),Ca=i(6227),Aa=i(45032),fa=i(39019),Ra=i(53030),Ta=i(90426),Sa=i(59358),Pa=i(82344),Fa=i(46514),Da=i(2182);const Oa="Z9Dr8PkXFtlO8KnnDcxp",Ua="Bm0LUMlhVIcF5qusgdUP",Ea="GIyB7JDkRwjtVL6PSBbg",wa="whTIka0YYAkqhqrs26Wa",_a=t.memo((function({uri:e,name:a,imgUrl:i,artists:t,isExplicit:s,index:n,albumUri:r,contextUri:l,isPlayable:c,usePlayContextItem:o,isMOGEFRestricted:d,totalMilliseconds:g,playcount:k}){const{isActive:p,isPlaying:y,triggerPlay:h,togglePlay:v}=o({uri:e,index:n}),x=(0,Ca._)(e),N=(0,Ta.k)(e,c),j=t.map((e=>e.name)).join(m.ag.getSeparator()),{badges:b,hasBadges:L}=(0,Aa.r)({isMOGEFRestricted:d,downloadAvailability:x,isExplicit:s}),I=t.map((e=>e.name)).join(m.ag.getSeparator()),C=(0,Ra.E)();return(0,O.jsx)(Ia.JL,{value:"row",index:n,children:(0,O.jsx)(Na._,{menu:(0,O.jsx)(u.$,{uri:e,albumUri:r,artists:t,contextUri:l}),children:(0,O.jsxs)(Da.c,{uri:e,contextUri:l,isPlayable:N,onTriggerPlay:(e,a)=>{h({loggingParams:a})},isActive:p,index:n,ariaRowIndex:n,dragMetadata:{name:a,createdBy:j},children:[(0,O.jsxs)(Pa.vZ,{ariaColIndex:0,children:[(0,O.jsx)(Pa.VG,{uri:e,src:i,onClick:(e,a)=>{v({loggingParams:a})},isLocked:!1,isPlaying:y,isActive:p,playAriaLabel:m.ag.get("tracklist.a11y.play",a,j)}),(0,O.jsxs)(Pa.vm,{children:[(0,O.jsx)(Sa.G,{uri:e,enabled:C,className:Ea,children:(0,O.jsx)(Pa.Wh,{titleText:a,children:a})}),L&&(0,O.jsxs)(Pa.g3,{children:[b.download&&(0,O.jsx)(ja.G,{}),b.explicit&&(0,O.jsx)(ba.N,{}),b.nineteen&&(0,O.jsx)(La.X,{className:wa,size:16})]}),(0,O.jsx)(Pa.K9,{children:(0,O.jsx)(Pa.T6,{artists:t})})]})]}),(0,O.jsx)(Pa.UA,{ariaColIndex:1,children:(0,O.jsx)(Fa.B,{playcount:k})}),(0,O.jsxs)(Pa.mU,{ariaColIndex:2,children:[(0,O.jsx)(fa.f,{uri:e}),(0,O.jsx)(Pa.A$,{duration:g}),(0,O.jsx)(Pa.Zv,{menu:(0,O.jsx)(u.$,{uri:e,albumUri:r,contextUri:l,artists:t}),label:m.ag.get("more.label.track",a,I)})]})]})})})}),((e,a)=>e.uri===a.uri&&e.index===a.index));var Ma=i(18954),Ba=i(96160),Ga=i(65418),Ka=i(21218),Va=i(33611),Ya=i(95333),$a=i(57612);var za=i(47973);const qa={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"internalLinkRecommenderTrack"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uri"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"strategy"}},type:{kind:"NamedType",name:{kind:"Name",value:"SEORankingStrategy"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"seoTestContext"}},type:{kind:"NamedType",name:{kind:"Name",value:"SEOTestContext"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"seoRecommended"},arguments:[{kind:"Argument",name:{kind:"Name",value:"seoRecommendedInput"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"strategy"},value:{kind:"Variable",name:{kind:"Name",value:"strategy"}}},{kind:"ObjectField",name:{kind:"Name",value:"uri"},value:{kind:"Variable",name:{kind:"Name",value:"uri"}}},{kind:"ObjectField",name:{kind:"Name",value:"seoTestContext"},value:{kind:"Variable",name:{kind:"Name",value:"seoTestContext"}}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"GenericError"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"message"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"NotFound"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"message"}},{kind:"Field",name:{kind:"Name",value:"uri"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"ilrTrackData"}}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"ilrTrackData"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Track"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Track"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"artists"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"profile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"duration"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalMilliseconds"}}]}},{kind:"Field",name:{kind:"Name",value:"contentRating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"}}]}},{kind:"Field",name:{kind:"Name",value:"playability"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playable"}}]}},{kind:"Field",name:{kind:"Name",value:"playcount"}},{kind:"Field",name:{kind:"Name",value:"albumOfTrack"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}},{kind:"Field",name:{kind:"Name",value:"url"}}]}}]}}]}}]}}]}}]};var Ja=i(70613);const Qa=e=>{return a=e,"NotFound"!==a?.__typename&&"GenericError"!==a?.__typename&&"Track"===e.__typename;var a},Wa=t.memo((function({strategy:e,uri:a}){const i={pageUri:a,experimentId:xa.Ym.TRACK_INTERNAL_LINK_RECOMMENDER},{data:s}=(n={uri:a,strategy:e,seoTestContext:i},(0,za.a)(qa,n,c));var n,c;const o=s?.seoRecommended.items,d=(0,t.useMemo)((()=>o?.slice(0,Math.min(o.length,5))),[o]),u=(0,t.useCallback)((e=>e.uri),[]),g=(0,t.useMemo)((()=>[Ja.QD.TITLE_AND_ARTIST,Ja.QD.ALBUM,Ja.QD.DURATION]),[]),k=`${a}|${(e=>e?e.filter((e=>Qa(e.data))).map((e=>e.data.uri)):[])(o)}`,{trackId:p=""}=(0,r.UO)();((e,a)=>{const i=(0,Ka.g)(),s=(0,Oe.v9)(pa.n5),n=(0,Oe.v9)(Ya.rZ),r=(0,ua.s4)(),l=(0,Oe.v9)($a.aj),c=l?l[a].find((e=>e.experimentId===xa.Ym.TRACK_INTERNAL_LINK_RECOMMENDER))?.treatment:xa.tO.CONTROL;(0,t.useEffect)((()=>{const a={category:"track_ilr_exposures",action:"track_page_visit",variant:c,label:"dwp",os:(0,Va.y)(),context:e,country:s?n:"",sp_t:(0,Ga.vQ)("sp_t")};i?r.send((0,Ba.k)(a)):r.send((0,Ma.x)(a))}),[e,n,r,i,s,c])})(k,p);const y=(o||[])?.map((e=>Qa(e.data)?{...e.data,provider:null,type:F.p.TRACK,uid:null}:{type:F.p.TRACK,uri:"",uid:null,provider:null})),h=(0,ie.Y)(a),{usePlayContextItem:v}=(0,_.n)({uri:h,pages:[{items:y}]},{featureIdentifier:"track"}),x=(0,t.useCallback)(((e,i)=>{if(!Qa(e.data))return(0,O.jsx)(t.Fragment,{});const s=e.data;return(0,O.jsx)(_a,{index:i,contextUri:a,uri:s.uri,name:s.name,totalMilliseconds:s.duration.totalMilliseconds,imgUrl:s.albumOfTrack?.coverArt?.sources[0].url,isPlayable:s.playability.playable,artists:s.artists.items.map((e=>({uri:e.uri,id:e.id,name:e.profile.name}))),albumUri:s?.albumOfTrack?.uri,isExplicit:s.contentRating?.label===X.KS.Explicit,isMOGEFRestricted:s.contentRating?.label===X.KS.NineteenPlus,usePlayContextItem:v,playcount:parseInt(s.playcount||"0",10)},`${i}-${s.uri}`)}),[a,v]);return o?.length?(0,O.jsxs)("div",{className:Oa,children:[(0,O.jsxs)("div",{className:Ua,children:[(0,O.jsx)(l.D,{variant:"canon",semanticColor:"textBase",children:m.ag.get("playlist.extender.recommended.title")}),(0,O.jsx)(l.D,{variant:"mesto",paddingBottom:va.o7,children:m.ag.get("internal-link-recommender.based-on-this-song")})]}),(0,O.jsx)(Ja.Pv,{ariaLabel:m.ag.get("playlist.extender.recommended.title"),nrTracks:Math.min(o.length,5),rowPlaceholder:Ja.hU,tracks:d,renderRow:x,resolveUri:u,columns:g},"internal-link-recommender-track-list")]}):null}));var Za=i(75017),Ha=i(68939);const Xa=({album:e,index:a,artistURI:i})=>(0,O.jsx)(Ia.JL,{value:"card",index:a,children:(0,O.jsx)(Ha.i,{index:a,latest:!1,showType:!0,...(0,Za.B$)(e,i,e.name)})});var ei=i(53802);const ai=({albums:e,artistName:a,artistId:i,artistUri:t,className:s})=>e?(0,O.jsx)(Ia.JL,{value:"shelf/albums",children:(0,O.jsx)(ei.P,{total:e.totalCount,title:m.ag.get("rich-page.popular-albums-by-artist",{artist:a}),seeAllUri:`${(0,Za.GJ)(i)}:discography:${X.VZ.Album.toLowerCase()}`,seeAllLabel:m.ag.get("shelf.see-all"),alwaysShowSeeAll:!0,className:s,children:(0,Za.Hr)(e.items).map(((e,a)=>(0,O.jsx)(Xa,{album:e,index:a,artistURI:t},e.uri)))})}):null;var ii=i(60301);const ti=({artistId:e,className:a,fansAlsoLike:i,title:t})=>(0,O.jsx)(Ia.JL,{value:"shelf/fans-also-like",children:(0,O.jsx)(ei.P,{total:i.length,title:t??m.ag.get("rich-page.fans-also-like"),seeAllUri:`${(0,Za.GJ)(e)}:related`,className:a,children:i.map(((e,a)=>(0,O.jsx)(Ia.JL,{value:"card",index:a,children:(0,O.jsx)(ii.I,{index:a,uri:e.uri,name:e.profile.name,images:e.visuals.avatarImage?.sources||[]})},e.uri)))})});var si=i(35758);const ni="ERm7dIKbVoqGwPb_lXPH",ri=({artistName:e,artistUri:a,headerClassName:i,rowClassName:s,topTracks:n,topTracksTransformer:r,uri:c})=>{const o=(0,t.useMemo)((()=>n?.items.map((e=>r(e,c)))),[n?.items,r,c]),{usePlayContextItem:d}=(0,_.n)({uri:a},{featureIdentifier:"artist"});return o&&o.length>0?(0,O.jsxs)("div",{className:s,children:[(0,O.jsxs)("div",{children:[(0,O.jsx)(l.D,{variant:"mesto",className:ni,children:m.ag.get("rich-page.popular-tracks")}),(0,O.jsx)(l.D,{as:"h2",variant:"canon",semanticColor:"textBase",className:i,children:e})]}),(0,O.jsx)(si.k,{nrTracks:o.length,initialTracks:o,usePlayContextItem:d})]}):null},li=({artistName:e,artistId:a,artistUri:i,className:t,releases:s,artistImages:n})=>s?(0,O.jsx)(Ia.JL,{value:"shelf/releases",children:(0,O.jsx)(ei.P,{total:10,title:m.ag.get("rich-page.popular-releases-by-artist",{artist:e}),seeAllUri:`${(0,Za.GJ)(a)}:discography:${X.VZ.Album.toLowerCase()}`,seeAllLabel:m.ag.get("shelf.see-all"),alwaysShowSeeAll:!0,className:t,listRowHeaderProps:n?{title:e,pretitle:m.ag.get("artist-page.popular"),media:(0,H.o)(n,{desiredSize:48})||""}:null,children:s.items.map(((e,a)=>(0,O.jsx)(Xa,{album:e,index:a,artistURI:i},e.uri)))})}):null,ci=({artistId:e,artistName:a,artistUri:i,className:t,singles:s})=>s?(0,O.jsx)(Ia.JL,{value:"shelf/singles-and-eps",children:(0,O.jsx)(ei.P,{total:s.totalCount,title:m.ag.get("rich-page.popular-singles-and-eps-by-artist",{artist:a}),seeAllUri:`${(0,Za.GJ)(e)}:discography:${X.VZ.Single.toLowerCase()}`,seeAllLabel:m.ag.get("shelf.see-all"),alwaysShowSeeAll:!0,className:t,children:(0,Za.Hr)(s.items).map(((e,a)=>(0,O.jsx)(Xa,{album:e,index:a,artistURI:i},e.uri)))})}):null;var oi=i(58386),di=i(8469),mi=i(79226),ui=i(67515);var gi=i(7593);const ki=e=>(e.items||[]).map((e=>({name:e.profile.name,images:(e.visuals.avatarImage?.sources||[]).map((e=>({url:e.url,width:e.width,height:e.height}))),uri:e.uri,id:e.id}))),pi=e=>(e||[]).map((e=>e.profile.name)),yi=({uri:e,track:a})=>{const i=(0,Re.k)(),s=(0,Ka.g)(),d=(0,oi.k)({type:"locale",uri:e}),y=m.ag.getLocale(),b=parseInt(a.playcount||"0",10),{firstArtist:L,otherArtists:I,albumOfTrack:C,duration:A,name:f}=a,R=C?.coverArt,T=C?.copyright.items,S=C?.courtesyLine,P=C?.date?.isoString,F=R?.extractedColors?.colorRaw.hex,D=(R?.sources||[]).map((e=>({url:e.url,width:e.width||void 0,height:e.height||void 0}))),w={uri:C?.uri||"",name:C?.name||""},{trackId:B=""}=(0,r.UO)(),G=(0,mi.GA)(B,"track"),{isCanonicalPoolForTrackILR:K,isOrganicPoolForTrackILR:V}=(e=>{const a=(0,Oe.v9)($a.aj);return(0,Ra.E)()?{isCanonicalPoolForTrackILR:(0,ui.F4)(a||{},e),isOrganicPoolForTrackILR:(0,ui.MP)(a||{},e)}:{isCanonicalPoolForTrackILR:!1,isOrganicPoolForTrackILR:!1}})(B),Y=pi(L.items),$=pi(I.items),z=ki(L),q=ki(I),J=[...z,...q],W=L.items[0],ae=a.albumOfTrack,te=ae?.playability?.playable,se={artistId:W?.id,artistName:W?.profile?.name,artistUri:W?.uri},ne=a.albumOfTrack?.coverArt?.sources,re=(0,H.o)(ne||void 0,{desiredLabel:"large",desiredSize:600})??ne?.[0]?.url??"",[le,de]=(0,t.useState)(!1),je=(0,t.useCallback)((()=>{de(!le)}),[le]),be=I&&I.items.length>5,{spec:Le,logger:Ie}=(0,Z.fU)(o.createDesktopTrackEventFactory,{data:{uri:e}}),Ce=a.playability.playable,Ae=(0,ie.Y)(e),{togglePlay:fe,isPlaying:Se,isActive:Pe}=(0,_.n)({uri:Ae},{featureIdentifier:"track"}),Fe=(0,t.useCallback)((()=>(0,M.Zs)({i18n:m.ag,trackArtistsList:[...Y,...$].join(m.ag.getSeparator()),trackName:a.name,shouldLocalize:d})),[Y,$,d,a.name]),Ue=(0,t.useCallback)(((e,a)=>{Ie.logInteraction(Le.headerFactory().artistLinkFactory({position:a.position,uri:a.creator.uri}).hitUiNavigate({destination:a.creator.uri}))}),[Ie,Le]),Ee=(0,t.useCallback)((()=>{const a=(0,v.aK)({isPlaying:Se,isActive:Pe,spec:Le.actionBarFactory().playButtonFactory(),logger:Ie,uri:e});fe({loggingParams:a})}),[Pe,Se,Ie,Le,fe,e]),we=ae?.uri,_e=(0,t.useMemo)((()=>[...L.items,...I.items].map((e=>({uri:e.uri,name:e.profile.name})))),[L.items,I.items]),Me=(0,O.jsx)(u.$,{uri:e,albumUri:we,artists:_e});return(0,O.jsxs)("section",{"data-testid":"track-page",children:[(0,O.jsx)(ha.$,{children:Fe()}),(0,O.jsxs)(g.gF,{backgroundColor:F,children:[(0,O.jsxs)(k.W,{children:[(0,O.jsx)(h.$,{size:"medium",onClick:Ee,disabled:!Ce,isPlaying:Se,uri:e}),(0,O.jsx)(p.i,{text:f,dragUri:e,dragLabel:f})]}),(0,O.jsx)(x._P,{menu:Me,children:(0,O.jsx)(g.Oz,{dragUri:e,images:D,name:f,placeholderType:"album"})}),(0,O.jsxs)(g.sP,{children:[(0,O.jsx)(l.D,{variant:"mestoBold",children:m.ag.get("song")}),(0,O.jsx)(x._P,{menu:Me,children:(0,O.jsx)(g.xd,{dragUri:e,dragLabel:f,children:f})}),(0,O.jsx)(g.QS,{creators:z,releaseDate:P,durationMilliseconds:A.totalMilliseconds,onCreatorClick:Ue,isTrack:!0,album:w,playcount:b})]})]}),(0,O.jsx)(Te,{uri:e,togglePlay:fe,isPlaying:Se,isActive:Pe,spec:(0,t.useMemo)((()=>Le.actionBarFactory()),[Le]),logger:Ie,backgroundColor:F,name:f,isPlayable:Ce,albumUri:we,artists:_e}),(0,O.jsxs)(Q,{children:[(0,O.jsxs)("div",{className:"contentSpacing",children:[(0,O.jsx)("div",{className:ce,children:(0,O.jsx)(j.T,{render:({columnCount:a})=>(0,O.jsx)(ya,{imageForLyricsRequest:re,albumArtists:J,columnCount:a,uri:e})})}),K&&(0,O.jsx)("div",{"data-testid":"canonical-pool-top",children:(0,O.jsx)(Wa,{strategy:X.JI.ContentOnly,uri:a.uri})}),V&&(0,O.jsx)("div",{"data-testid":"organic-pool-top",children:(0,O.jsx)(Wa,{strategy:X.JI.OrganicTraffic,uri:a.uri})}),(0,O.jsx)(ri,{artistName:W.profile.name,artistUri:W.uri,headerClassName:ue,rowClassName:ce,topTracks:W.discography.topTracks,topTracksTransformer:di.X7,uri:a.uri}),(0,O.jsx)(li,{className:me,releases:W?.discography?.popularReleasesAlbums,...se}),(0,O.jsx)(ai,{albums:W?.discography?.albums,className:me,...se}),(0,O.jsx)(ci,{className:me,singles:W?.discography?.singles,...se}),I&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)("div",{className:ke,children:I.items.map(((e,a)=>(0,O.jsx)(li,{className:n()(ge,{[ye]:a>4,[he]:le&&a>4}),releases:e.discography.popularReleasesAlbums,artistName:e.profile.name,artistId:e.id,artistUri:e.uri,artistImages:e.visuals.avatarImage?.sources},e.id)))}),be&&(0,O.jsx)(c.o,{onClick:je,className:ve,children:(0,O.jsx)(l.D,{as:"h2",variant:"violaBold",children:le?m.ag.get("show_less"):m.ag.get("mwp.search.artists.all")})}),(0,O.jsx)(ti,{artistId:W.id,className:n()(me,{[pe]:I.items.length>0}),fansAlsoLike:W.relatedContent.relatedArtists.items,title:m.ag.get("artist-page.fansalsolike")})]}),ae&&(0,O.jsx)(E,{art:ae.coverArt?.sources[0],disabled:!te||!i,LinkComponent:Be.default,name:ae.name,type:ae.type,size:U.LARGE,uri:ae.uri}),(0,O.jsx)(Ne,{richTrack:a})]}),(0,O.jsxs)("div",{className:"contentSpacing",children:[(0,O.jsxs)("div",{className:oe,children:[P&&(0,O.jsx)(l.D,{as:"p",variant:"mesto",className:xe,children:(0,ee.BI)((0,ee.RX)(P),y,{year:"numeric",month:"long",day:"numeric"})}),(0,O.jsx)(N.k,{copyrights:T||[],courtesyLine:S}),!s&&(0,O.jsx)(De,{uri:e,imageForLyricsRequest:re})]}),G&&(0,O.jsx)(mi.qj,{uri:e,title:m.ag.get("generative-ai.track.title")})]})]})]})},hi=(0,t.memo)((function(){const{trackId:e=""}=(0,r.UO)(),a=(0,d.tn)(e).toURI(),i=(0,gi.QN)({uri:a});return i.loading||"Track"!==i.data?.trackUnion?.__typename?(0,O.jsx)(y.h,{hasError:null!==i.error,errorMessage:m.ag.get("track-page.error")}):(0,O.jsx)(w.fd,{surface:w.Tg.TRACK,uris:[a,i.data.trackUnion.albumOfTrack?.uri??null],children:(0,O.jsx)(yi,{uri:a,track:i.data.trackUnion})})}))},57612:(e,a,i)=>{i.d(a,{M4:()=>l,aj:()=>r});var t=i(23055),s=i(7431);const n=e=>e.seoExperiment,r=((0,t.P1)(n,(e=>e?.uri)),(0,t.P1)(n,(e=>e?.[s.p.TRACK]))),l=(0,t.P1)(n,(e=>e?.[s.p.ALBUM]))},99334:(e,a,i)=>{i.d(a,{k:()=>r});var t=i(89518);const s="rTMkDBDp47Eo12ZEQv4U";var n=i(4637);const r=({copyrights:e,courtesyLine:a})=>{const i=(e||[]).map(((e,a)=>{const i=e.text.replace(/^(\(C\)\s+)/,"").replace(/^(\(P\)\s+)/,"").replace(/^(©\s+)/,"").replace(/^(℗\s+)/,"");let s;return s="C"===e.type?"©":"P"===e.type?"℗":`(${e.type})`,(0,n.jsx)(t.D,{as:"p",variant:"finale",dir:"auto",children:`${s} ${i}`},a)}));return a&&i.unshift((0,n.jsx)(t.D,{as:"p",variant:"finale",dir:"auto",children:a},i.length)),(0,n.jsx)("div",{className:s,children:i})}},12160:(e,a,i)=>{i.d(a,{vI:()=>t});const t=(e,a)=>{const i=a?new URLSearchParams(a.search):void 0;return"1"===i?.get(e)}},95706:(e,a,i)=>{i.d(a,{k:()=>t});let t=function(e){return e.I18nSEO="i18nSEO",e.RTPTrackCredits="rtpv2p2",e.I18nAdditionalPages="i18nap",e.RichPlaylistPages="rpp",e.GenerativeAIContent="genai",e}({})},67515:(e,a,i)=>{i.d(a,{$S:()=>n,F4:()=>r,MP:()=>l});var t=i(86560);const s=({treatment:e,entityId:a,experimentId:i,treatmentVariation:t})=>{if(e&&e[a]){const s=e[a].find((e=>e.experimentId===i));return s?.treatment===t}return!1},n=(e,a)=>s({treatment:e,entityId:a,experimentId:t.Ym.GENERATIVE_AI,treatmentVariation:t.mx.VARIANT}),r=(e,a)=>s({treatment:e,entityId:a,experimentId:t.Ym.TRACK_INTERNAL_LINK_RECOMMENDER,treatmentVariation:t.tO.CANONICAL}),l=(e,a)=>s({treatment:e,entityId:a,experimentId:t.Ym.TRACK_INTERNAL_LINK_RECOMMENDER,treatmentVariation:t.tO.ORGANIC})},86560:(e,a,i)=>{i.d(a,{Ym:()=>t,mx:()=>s,tO:()=>n});let t=function(e){return e.GENERATIVE_AI="generative-ai",e.TRACK_INTERNAL_LINK_RECOMMENDER="track-ilr",e}({}),s=function(e){return e.CONTROL="0",e.VARIANT="1",e}({}),n=function(e){return e.CONTROL="0",e.CANONICAL="1",e.ORGANIC="2",e}({})}}]);
//# sourceMappingURL=xpui-routes-track-v2.js.map