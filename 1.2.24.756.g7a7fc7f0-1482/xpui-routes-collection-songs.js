"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[7553],{31431:(e,t,a)=>{a.r(t),a.d(t,{default:()=>ie});var n=a(59496),l=a(24106),o=a(52529),r=a(57969),s=a(92196),i=a(36820),c=a(50834),u=a(67497),d=a(20606),g=a(708),m=a(53470),f=a(49857),h=a(70613),p=a(73787),y=a(89874),x=a(36383),j=a(31628),k=a(57578),b=a(88127),C=a(23923),D=a(65325),T=a(71308),F=a(85730),I=a(26804),S=a(47603),E=a(94172),P=a(2050),w=a(26053),v=a(74288),A=a(16831),L=a(68351),M=a(41442),R=a(38686),N=a(25758),_=a(701),Q=a(4637);const U=n.memo((({tracklistDomRef:e})=>{const{spec:t,logger:a}=(0,F.fU)(M.createDesktopSearchBarEventFactory,{}),l=(0,n.useCallback)((()=>{a.logInteraction(t.filterFieldFactory().keyStrokeFilter())}),[a,t]),o=(0,n.useCallback)((()=>{a.logInteraction(t.filterFieldFactory().hitClearFilter())}),[a,t]),r=(0,n.useCallback)((()=>{a.logInteraction(t.sortButtonFactory().hitSort())}),[a,t]),s=(0,R.v)().filter((e=>p.P0.includes(e)));return(0,Q.jsxs)("div",{className:m.Z.searchBoxContainer,children:[(0,Q.jsx)(n.Suspense,{fallback:null,children:(0,Q.jsx)(N.K,{placeholder:c.ag.get("playlist.search_in_playlist"),clearOnEscapeInElementRef:e,onFilter:l,onClear:o})}),(0,Q.jsx)(_.l,{columns:s,onSort:r})]})}));var O=a(60536),B=a(74602),z=a(25193),G=a(73054);const K="bKlB8pmFVoswJlZ_jhtL",V=n.memo((function({metadata:e,onClickTogglePlay:t,isPlaying:a,spec:l,logger:o,backgroundColor:r,canSort:s,canFilter:i}){const{uri:u,name:d,totalLength:g}=e,m=(0,n.useRef)(null),f=(0,n.useMemo)((()=>l.actionBarFactory()),[l]),h=(0,n.useMemo)((()=>f.shuffleButtonContainerFactory()),[f]),p=g>0,y=g>0,x=s&&i,j=(0,G.Q)(),k=(0,n.useCallback)(((e,t)=>{const a=f.downloadButtonFactory();t===A.mc.ADD?o.logInteraction(a.hitDownload({itemToDownload:u})):t===A.mc.REMOVE?o.logInteraction(a.hitRemoveDownload({itemToRemoveFromDownloads:u})):t===A.mc.NO_PERMISSION&&o.logInteraction(a.hitUiReveal())}),[f,o,u]),b=(0,O.j)();return(0,Q.jsx)(I.o,{backgroundColor:r,children:(0,Q.jsxs)(I.F,{children:[y?(0,Q.jsx)(P.$,{onClick:t,isPlaying:a,size:b,uri:u,ariaPauseLabel:c.ag.get("playlist.a11y.pause",d),ariaPlayLabel:c.ag.get("playlist.a11y.play",d)}):null,j&&(0,Q.jsx)(F.Nh,{spec:h,children:(0,Q.jsx)(z.K,{entityName:d,contextUri:u,activationPlacement:"bottomEnd",size:b})}),g>0&&(0,Q.jsx)(B.v,{uri:u,renderEnabled:()=>(0,Q.jsx)(v.v,{uri:u})}),(0,Q.jsx)(S.o,{uri:u,canDownload:p,isFollowing:!0,onFollow:()=>{},size:b,onClick:k}),x?(0,Q.jsx)(F.Nh,{spec:f,children:(0,Q.jsx)(U,{tracklistDomRef:m})}):(0,Q.jsx)("div",{className:K,children:(0,Q.jsx)(E.F,{property:L.FM,renderNewExperience:()=>(0,Q.jsx)(w.A,{options:[],onSelect:()=>{},selected:null,enableViewModeMenu:!0})})})]})})}));var H=a(33460),Z=a(60843),$=a(69311),J=a(45836),W=a(7715),Y=a(9102),q=a(72102),X=a(55513),ee=a(1020),te=a(45479),ae=a(95712);const ne=n.lazy((()=>Promise.all([a.e(1814),a.e(4498),a.e(682)]).then(a.bind(a,84498)))),le=[h.QD.INDEX,h.QD.TITLE_AND_ARTIST,h.QD.ALBUM,h.QD.ADDED_AT,h.QD.DURATION],oe="your_library",re=({data:e,canFilter:t,canSort:a})=>{const{uri:l,name:i,totalLength:x}=e.metadata,D=(0,n.useRef)(null),I=(0,b.Y5)("#5038a0"),{filter:S}=(0,n.useContext)(f.fo),{sortState:E,setSortState:P}=(0,n.useContext)(p.Gb),{spec:w,logger:v}=(0,F.fU)(s.Q,{data:{uri:l}}),A=n.useMemo((()=>w.headerFactory()),[w]),L=n.useMemo((()=>w.tracklistFactory()),[w]);(0,n.useEffect)((()=>{null===E.column&&P({column:h.QD.ADDED_AT,order:h.kn.DESC})}),[E,P]);const M=(0,o.ur)(),R=(0,o.TH)(),N="POP"!==M?new URLSearchParams(R.search).get("uri"):null,{isPlaying:_,togglePlay:U,usePlayContextItem:O,isActive:B}=(0,T.n)((0,C.I)(l,(0,H.w)(E),S),{featureIdentifier:oe,referrerIdentifier:"your_library"}),z=()=>{const e=(0,J.aK)({isPlaying:_,isActive:B,spec:w.actionBarFactory().playButtonFactory(),logger:v,uri:l});U({loggingParams:e})},[G]=(0,$.d4)(),{isCompactMode:K}=(0,k.mJ)(),W=(({isCompactMode:e=!1})=>{const t=[...le];return e&&t.splice(t.indexOf(h.QD.TITLE_AND_ARTIST),1,h.QD.TITLE,h.QD.ARTIST),t})({isCompactMode:K});return(0,Q.jsx)(y.a,{columns:W,children:(0,Q.jsxs)("section",{role:"presentation",className:m.Z.playlist,"data-testid":"playlist-page",children:[(0,Q.jsx)(u.$,{children:c.ag.get("playlist.page-title",i)}),(0,Q.jsx)(j.s,{metadata:{...e.metadata,hasSpotifyTracks:!0},totalItems:G,isPlaying:_,togglePlay:z,backgroundColor:I,specLikedSongs:A}),(0,Q.jsx)(V,{metadata:e.metadata,onClickTogglePlay:z,isPlaying:_,spec:w,logger:v,backgroundColor:I,canSort:a,canFilter:t}),(0,Q.jsx)("div",{className:"contentSpacing",children:x>0?(0,Q.jsx)(n.Suspense,{fallback:(0,Q.jsx)(g.h,{hasError:!1,errorMessage:c.ag.get("error.request-collection-tracks-failure")}),children:(0,Q.jsx)(F.Nh,{spec:L,children:(0,Q.jsx)(Z.p,{nrTracks:x,collectionUri:l,scrollToUri:N,usePlayContextItem:O,outerDomRef:D,spec:L,initialItems:e.contents.items,isCompactMode:K})})}):(0,Q.jsx)(d.u,{message:c.ag.get("collection.empty-page.songs-subtitle"),title:c.ag.get("collection.empty-page.songs-title"),linkTo:"/search",linkTitle:c.ag.get("collection.empty-page.songs-cta"),renderInline:!0,children:(0,Q.jsx)(r.F,{"aria-hidden":"true"})})})]})})},se=n.memo((function({user:e,uri:t}){const{filter:a}=(0,n.useContext)(f.fo),{sortState:o}=(0,n.useContext)(p.Gb),r=function(e,t,a){const l=(0,n.useContext)(D.H),o=(0,Y.useQueryClient)(),r=(0,q.jP)((()=>["useLikedSongs",e,a]),[e,a]),{data:s}=(0,Y.useQuery)(r(),(()=>l.getTracks(a)),{cacheTime:18e5,keepPreviousData:!0,refetchOnWindowFocus:!1}),i=(0,n.useCallback)((()=>{o.invalidateQueries(r())}),[o,r]);(0,ee.b)(X.EW.UPDATE,i);const c=(0,ae.I2)(t.id);return c&&s?{metadata:{uri:e,name:c.name,images:c.images,totalLength:s?.totalLength,unfilteredTotalLength:s.unfilteredTotalLength,owner:(0,te.V)(t)},contents:s}:null}(t,e,{offset:0,limit:25,sort:(0,H.w)(o),filter:a}),s=(0,n.useContext)(D.H).getCapabilities(),i=(0,l.v9)(W.n5),{isEnhanced:u}=(0,x.U)(`spotify:user:${i}:collection`);if(r){const e=(0,Q.jsx)(re,{data:r,canFilter:s.canFilterTracksAndEpisodes&&r.metadata.unfilteredTotalLength>0,canSort:s.canSortTracksAndEpisodes&&r.metadata.unfilteredTotalLength>0});return(0,Q.jsx)(B.v,{uri:r.metadata.uri,renderEnabled:()=>u?(0,Q.jsx)(n.Suspense,{fallback:null,children:(0,Q.jsx)(p.kz,{uri:r.metadata.uri,children:(0,Q.jsx)(ne,{metadata:{...r.metadata,collaborators:{count:1,items:[{isOwner:!0,user:r.metadata.owner,tracksAdded:r.metadata.totalLength}]}},capabilities:s,featureIdentifier:oe})})}):e,renderDisabled:()=>e})}return(0,Q.jsx)(g.h,{hasError:!1,errorMessage:c.ag.get("error.not_found.title.playlist"),loadOffline:s.canModifyOffline})})),ie=()=>{const{user:e}=(0,l.v9)(W.Gg);if(null===e)return null;const t=(0,i.wG)(e.id).toURI();return(0,Q.jsx)(p.kz,{uri:t,children:(0,Q.jsx)(f.hz,{uri:t,children:(0,Q.jsx)($.Y4,{children:(0,Q.jsx)(se,{uri:t,user:e})})})})}},31628:(e,t,a)=>{a.d(t,{s:()=>n.s});var n=a(71409)}}]);
//# sourceMappingURL=xpui-routes-collection-songs.js.map