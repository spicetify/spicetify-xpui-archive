"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[6025],{33490:(e,s,i)=>{i.r(s),i.d(s,{default:()=>ne});var a=i(84875),t=i.n(a),r=i(77646),n=i(33951),c=i(98355),o=i(10154),l=i(97796),u=i(25875),g=i(8652),d=i(28791),m=i(39189),v=i(6191),b=i(58754),x=i(63934),y=i(37223),h=i(59496),f=i(31959),p=i(30994),S=i(1740),j=i(25597),k=i(45462),L=i(34604),N=i(60029);const w="Q2RPoHcoxygOoPLXLMww",C="esRByMgBY3TiENAsbDHA",A="iq4cgi0YEKr6DGaTtzUj";var D=i(4637);const F=({trackUri:e,data:s})=>{const{spec:i,logger:a}=(0,L.fU)(p.createDesktopLyricsEventFactory,{data:{uri:e}}),t=(0,k.g)(),r=(0,h.useContext)(j.VX),n=(0,h.useCallback)(((e,s)=>{const r=i.lyricsLineFactory().hitSeekToTime({msToSeekTo:s});a.logInteraction(r);e.currentTarget.scrollIntoView({behavior:"smooth",block:"center",inline:"center"}),t.seekTo(s);const n=t.getState();n&&!n.isPaused||t.resume()}),[a,t,i]),c=(0,h.useCallback)((({lineRef:e,firstUpdate:s,isFirstLine:i,isActiveLine:a,activeLineIndex:t,hasSkipped:n,shouldAnimateScroll:c})=>{if(e.current&&r.scrollNodeRef.current&&(a||i&&t<0)){const i=e.current.getBoundingClientRect().top,a=r.scrollNodeRef.current.getBoundingClientRect().height,o=a/4;if((i<o||i>a-o)&&!s&&!n&&t>=0)return;const l=c?"smooth":"auto";e.current?.scrollIntoView({behavior:l,block:"center",inline:"center"})}}),[r.scrollNodeRef]);return(0,D.jsx)("div",{className:w,children:(0,D.jsxs)("div",{className:C,children:[!s.isTimeSynced&&(0,D.jsx)(f.D,{as:"p",variant:"mesto",className:A,dir:"auto",children:S.ag.get("web-player.lyrics.unsynced")}),(0,D.jsx)(N.Z,{trackUri:e,data:s,format:"fullscreen",onLineClick:s.isTimeSynced?n:void 0,onActiveLineChange:c},e)]})})};var O=i(8527);const T="oNqyFdyc0Z01aWTF8qtF",V="C3pBU1DsOUJJOAv89ZFT",B=(0,h.memo)((function({version:e}){const{getMessage:s}=(()=>{const e=[S.ag.get("web-player.lyrics.noLyrics0"),S.ag.get("web-player.lyrics.noLyrics1"),S.ag.get("web-player.lyrics.noLyrics2"),S.ag.get("web-player.lyrics.noLyrics3")];return{getMessage:s=>{let i;switch(s){case"ad":i=S.ag.get("web-player.lyrics.ad");break;case"error":i=S.ag.get("web-player.lyrics.error");break;case"unavailable":i=e[Math.floor(Math.random()*e.length)];break;default:(0,O._)(s),i=""}return i}}})();return(0,D.jsx)("div",{className:T,children:(0,D.jsx)("span",{className:V,children:s(e)})})}));var G=i(18351),I=i(91843),E=i(93315),_=i(44688),U=i(26293),R=i(31294),J=i(20156),q=i(71280),z=i(19329),Z=i(22946),H=i(78055);const M="qnJd7AVNVGM33NxaibzG",P="tPJJwfJAQV0WDsE9Kfmd",Y=[{volume:H.B.SING_ALONG_OFF,icon:(0,D.jsx)(G.D,{iconSize:16}),get label(){return S.ag.get("singalong.off")}},{volume:H.B.HIGH,icon:(0,D.jsx)(I.d,{iconSize:16}),get label(){return S.ag.get("singalong.more-vocal")}},{volume:H.B.LOW,icon:(0,D.jsx)(E.J,{iconSize:16}),get label(){return S.ag.get("singalong.less-vocal")}}],W=h.memo((function({currentTrackUri:e}){const{isSupported:s,volume:i,setVocalVolume:a}=(e=>{const s=(0,v.$)(),[i,a]=(0,h.useState)(H.B.SING_ALONG_OFF),{isSupported:t}=s.getCapabilities();return(0,h.useEffect)((()=>{s.setStatus(H.q.DISABLED).then((()=>{a(H.B.SING_ALONG_OFF)}))}),[e,s]),(0,h.useEffect)((()=>()=>{s.setStatus(H.q.DISABLED)}),[s]),{isSupported:t,volume:i,setVocalVolume:(0,h.useCallback)((async e=>{e===H.B.SING_ALONG_OFF?await s.setStatus(H.q.DISABLED):await s.setStatus(H.q.ENABLED),await s.setVocalVolume(e),a(e)}),[s])}})(e),r=(0,h.useCallback)((e=>{s&&a(e.volume)}),[s,a]);if(!s)return null;const n=Y.find((e=>e.volume===i)),c=n?.volume===H.B.SING_ALONG_OFF;return(0,D.jsx)(J.yj,{menu:(0,D.jsxs)(q.v,{children:[(0,D.jsx)(z.F,{children:S.ag.get("singalong.title")}),Y.map((e=>(0,D.jsx)(Z.s,{role:"menuitemradio","aria-checked":i===e.volume,"aria-label":e.label,onClick:()=>r(e),icon:e.icon,iconPosition:"leading",children:e.label},e.volume)))]}),children:(e,s,i)=>(0,D.jsxs)("button",{onClick:s,ref:i,type:"button",className:t()(M,{[P]:c}),children:[c?(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(_.r,{iconSize:16}),(0,D.jsx)(f.D,{variant:"mesto",children:S.ag.get("singalong.button")})]}):(0,D.jsxs)(D.Fragment,{children:[n.icon,(0,D.jsx)(f.D,{variant:"mesto",children:n.label})]}),e?(0,D.jsx)(U.U,{iconSize:16}):(0,D.jsx)(R.i,{iconSize:16})]})})})),K="tr8V5eHsUaIkOYVw7eSG",X="iKgf4UDhbRTHxmZSuAEc",$="DADZePCqi2OVZpayspK_",Q="L9xhJOJnV2OL5Chm3Jew",ee="SaEkeiyzAoXnWVSDiTR7",se=(0,D.jsx)("div",{className:$,children:(0,D.jsx)(x.H,{})}),ie=(0,D.jsx)(B,{version:"error"}),ae=(0,D.jsx)(B,{version:"ad"}),te=(0,D.jsx)(B,{version:"unavailable"}),re={active:n.ixZ,inactive:n.Snx,passed:n.Snx,background:n.tGJ,messaging:n.ixZ},ne=()=>{const e=(0,v.$)(),{isSupported:s}=e.getCapabilities(),i=(0,c.W6)(u.cp)&&s,a=(0,d.O)(),n=(0,m.Y)((e=>e?.item),((e,s)=>e?.uri===s?.uri)),x=n?.uri||"",{data:h,loading:f,error:p}=(0,y.C)(x,n?.images,i);let S=re;h?.hasLyrics&&(S={active:h.colors.activeText,inactive:h.colors.text,passed:g.I.fromCSS(h.colors.activeText,.7).toCSS(g.j.RGBA),background:h.colors.background,messaging:h.colors.text}),(0,l.Y)(S.background,re.background);const j=(0,m.Y)((e=>e?.nextItems?.[0]),((e,s)=>e?.uri===s?.uri));(0,y.C)(j?.uri||"",j?.images,i);let k=se,L=!1;if(x)if((0,o.mg)(x))k=ae;else if(p)k=ie;else if(f)k=se;else if(h)if(h.hasLyrics){const e=a.activeDevice?.isLocal??!1;L=i&&h.hasVocalRemoval&&e,k=(0,D.jsx)(F,{trackUri:x,data:h})}else k=te;const N=(0,r.v9)((e=>e.ads.leaderboard.isEnabled)),w={"--lyrics-color-active":S.active,"--lyrics-color-inactive":S.inactive,"--lyrics-color-passed":S.passed,"--lyrics-color-background":S.background,"--lyrics-color-messaging":S.messaging};return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(b.$,{usePlayingItem:!0,children:"Spotify"}),(0,D.jsxs)("div",{className:t()(K,{[X]:N}),style:w,children:[(0,D.jsx)("div",{className:Q}),k,L?(0,D.jsx)("div",{className:ee,children:(0,D.jsx)(W,{currentTrackUri:x})}):null]})]})}}}]);
//# sourceMappingURL=xpui-routes-lyrics.js.map