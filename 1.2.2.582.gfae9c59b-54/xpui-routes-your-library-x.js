"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[3111],{76503:(e,t,r)=>{r.d(t,{l:()=>C});var l=r(59496),s=r(84875),a=r.n(s),n=r(77646),i=r(33167),o=r(65657),c=r(66760),u=r(46217);function d(){const e=(0,l.useRef)(0);return(0,l.useCallback)((t=>{const r=t.currentTarget,l=r.style.scrollBehavior;let s=!1;const a=r.scrollLeft,n=t.clientX;let i=0;function o(){cancelAnimationFrame(e.current),document.removeEventListener("wheel",c)}function c(){o(),r.style.scrollBehavior=l}function u(){r.scrollLeft+=i,i*=.95,Math.abs(i)>.5?e.current=requestAnimationFrame(u):c()}r.style.userSelect="none",r.style.scrollBehavior="auto",o();const d=e=>{const t=e.clientX-n;Math.abs(t)>10&&(s=!0);const l=r.scrollLeft;r.scrollLeft=a-t,i=r.scrollLeft-l};document.addEventListener("mousemove",d),document.addEventListener("mouseup",(()=>{const t=e=>{e.preventDefault(),e.stopImmediatePropagation()};!0===s&&(r.addEventListener("click",t,{once:!0,capture:!0}),setTimeout((()=>{r.removeEventListener("click",t,{capture:!0})}))),r.style.removeProperty("user-select"),document.removeEventListener("mousemove",d),o(),e.current=requestAnimationFrame(u),document.addEventListener("wheel",c,{once:!0})}),{once:!0})}),[])}const p="bMurPtRDRv5LuN78MTVG",m="KjPUGV8uMbl_0bvk9ePv",y="MUloQuW1xQawwVs0mDp4",g="OlnSvEViCZ_vVdnc3mSQ",x="FjMPyh7lOujDVYQRvp0H",b="ijZQH9pePkbB2MbJHCJV",h="XTk61Y8OkBdUT6Wj4F6i",f="VfDGbMWaJe9rcefizTNk";var I,E=r(4637);function j(e,t){(0,c.Bu)(e,t),t.scrollIntoView({block:"end",inline:"center"})}function S(e,t){const r=e.querySelector('[tabindex="0"]')||e.firstElementChild;r&&r instanceof HTMLElement&&(t===I.RIGHT&&r.nextElementSibling instanceof HTMLElement?j(r,r.nextElementSibling):t===I.LEFT&&r.previousElementSibling instanceof HTMLElement&&j(r,r.previousElementSibling))}!function(e){e[e.LEFT=-1]="LEFT",e[e.RIGHT=1]="RIGHT"}(I||(I={}));const C=e=>{const{children:t,className:r,showButtons:s=!0,ariaLabel:c}=e,j=(0,l.useRef)(null),C=(0,l.useRef)(null),[T,v]=(0,l.useState)(!1),[D,L]=(0,l.useState)(!1),O=(0,l.useCallback)((()=>{if(!j.current||!C.current)return;const e=j.current,t=C.current,r=e.scrollWidth-e.clientWidth,l=Math.ceil(Math.abs(e.scrollLeft)),s=t.offsetWidth>e.clientWidth;L(s&&0!==l),v(s&&l<r)}),[]);(0,u.y)({refOrElement:C,observeOnly:"width",onResize:O}),(0,u.y)({refOrElement:j,observeOnly:"width",onResize:O});const w=l.Children.toArray(t).length;(0,l.useEffect)(O,[w,O]);const R=(0,l.useCallback)((e=>{const t=e*(j.current.clientWidth/2);j.current.scrollBy({left:t}),O()}),[O]),F=(0,n.v9)((e=>e.ui?.textDirection?.isRTL)),_=(0,l.useCallback)((e=>{"ArrowLeft"===e.key?(e.preventDefault(),S(j.current,F?I.RIGHT:I.LEFT)):"ArrowRight"===e.key&&(e.preventDefault(),S(j.current,F?I.LEFT:I.RIGHT))}),[F]),A=F?T:D,N=F?D:T,k=d(),M=function(){const e=(0,l.useRef)(!0),t=(0,l.useRef)(null),r=(0,l.useRef)(null);return(0,l.useCallback)((l=>{if(!l.deltaY)return;const s=l.currentTarget;e.current&&(e.current=!1,t.current=s.style.scrollBehavior,s.style.scrollBehavior="auto"),s.scrollLeft+=l.deltaY+l.deltaX,r.current&&clearTimeout(r.current),r.current=setTimeout((()=>{e.current=!0,s.style.scrollBehavior=t.current??""}),100)}),[])}();return(0,E.jsxs)("div",{className:a()(p,r),children:[(0,E.jsx)("div",{ref:j,className:a()(m,{[g]:N&&!A,[y]:A&&!N,[x]:A&&N}),onScroll:O,onKeyDown:_,onMouseDown:k,onWheel:M,role:"list","aria-label":c,tabIndex:0,children:(0,E.jsx)("div",{ref:C,children:t})}),s&&(0,E.jsxs)("div",{className:b,dir:"ltr",children:[(0,E.jsx)("button",{className:a()(h,{[f]:A}),tabIndex:-1,onClick:()=>R(I.LEFT),children:(0,E.jsx)(i.e,{semanticColor:"textBase",iconSize:16})}),(0,E.jsx)("button",{className:a()(h,{[f]:N}),tabIndex:-1,onClick:()=>R(I.RIGHT),children:(0,E.jsx)(o.V,{semanticColor:"textBase",iconSize:16})})]})]})}},51922:(e,t,r)=>{r.d(t,{i:()=>g});var l=r(84875),s=r.n(l),a=r(78534);const n="kwJGggri7IZMFvQEClUf",i="yt0QcQy0t7LfbeVaEJG_",o="WHMDRepGVQXXrTx3838g",c="wLoqasagmgNF8ULGMhil",u="cpC_03FZN3i93V8j3g0l",d="S7CXd4i9huhWL_kPV_e3",p="c85eTWJAYaGjCiwH1WDu",m="cTTgGuDbNSWllHjVqiUx";var y=r(4637);const g=({className:e,leading:t,media:r,pretitle:l,title:g,subtitle:x,body:b,footer:h,trailing:f,onContextMenu:I,onTouchStart:E,onTouchEnd:j,onDragStart:S,onDoubleClick:C})=>{const T=(0,a.jh)();return(0,y.jsxs)("div",{className:s()(e,n),onContextMenu:I,onTouchStart:E,onTouchEnd:j,draggable:!0,onDragStart:S,onDoubleClick:C,children:[t?(0,y.jsx)("div",{className:i,children:t}):null,r?(0,y.jsx)("div",{className:o,children:r}):null,(0,y.jsxs)("div",{className:c,children:[l?(0,y.jsx)("div",{children:l}):null,g?(0,y.jsx)("div",{className:p,children:g}):null,x?(0,y.jsx)("div",{className:m,children:x}):null,b?(0,y.jsx)("div",{children:b}):null,h?(0,y.jsx)("div",{children:h}):null]}),f?(0,y.jsx)("div",{className:s()(u,{[d]:T===a.Uo.MEDIUM}),children:f}):null]})}},36522:(e,t,r)=>{r.d(t,{S:()=>n});var l=r(39746);const s="fRZRXRIV2YBCFLYgwDAr";var a=r(4637);const n=({iconSize:e=64,...t})=>(0,a.jsx)("div",{className:s,children:(0,a.jsx)(l._,{iconSize:e,...t,semanticColor:"textBrightAccent","aria-hidden":!0})})},70232:(e,t,r)=>{r.r(t),r.d(t,{YourLibraryX:()=>_r});var l=r(59496),s=r(84875),a=r.n(s),n=r(89130),i=r(77646),o=r(27002),c=r(72102),u=r(10154),d=r(2953),p=r(73455),m=r(19831),y=r(6997),g=r(41062),x=r(28010),b=r(93224),h=r(92456),f=r(52945),I=r(73961),E=r(91328);var j=r(35299);const S=[u.JM.TRACK,u.JM.LOCAL_TRACK,u.JM.ALBUM,u.JM.ARTIST,u.JM.PLAYLIST,u.JM.PLAYLIST_V2,u.JM.FOLDER,u.JM.EPISODE,u.JM.SHOW];let C;!function(e){e.ON="on",e.BEFORE="before",e.AFTER="after"}(C||(C={}));const T=(0,j.y)(C);function v(e){return S.includes(e)}function D(e,t,r){if(e.defaultPrevented)return null;const l=r.includes(C.BEFORE),s=r.includes(C.AFTER);let a=C.ON;if(t instanceof HTMLElement&&(l||s)){const{top:s,height:n}=t.getBoundingClientRect();r.includes(C.ON)&&l?e.clientY<Math.round(s)+n/4&&(a=C.BEFORE):a=e.clientY<Math.round(s)+n/2?C.BEFORE:C.AFTER}return r.includes(a)?a:null}var L=r(66691),O=r(15695);function w(e,t){return Array.from(e.dataTransfer?.types??[]).filter(O.Fu).filter((e=>{const r=O.UD[e];return!!v(r)&&t.includes(r)})).map((e=>O.UD[e])).filter(v)}var R=r(1178);function F(e,t,r){const l=w(e,t),s=function(e,t){return e.split(/[\s,;]+/g).map((e=>(0,u.EC)(e?.trim()))).filter(R.K).reduce(((e,r)=>v(r.type)&&t.includes(r.type)?(e[r.type]||=[],e[r.type].push(r.toURI()),e):e),{})}(e.dataTransfer?.getData("text/plain"),t),a=Array.from(new Set([...Object.keys(s),...l])).filter(v),n=Object.fromEntries(a.map((t=>{const r=s[t]??[],l=e.dataTransfer?.getData(L.aN[t])?.split("\n").filter(Boolean)??[];return[t,Array.from(new Set([...l,...r]))]})));if(r){const{[u.JM.PLAYLIST]:e,...t}=n,r=Array.from(new Set([...n[u.JM.PLAYLIST_V2]??[],...(n[u.JM.PLAYLIST]??[]).map(_)]));return{...t,...r.length?{[u.JM.PLAYLIST_V2]:r}:null}}return n}function _(e){const t=(0,u.EC)(e);return t?.type===u.JM.PLAYLIST?(0,u.FW)(t.id).toURI():e}const A={droppableUriTypes:"album artist episode folder playlist playlist-v2 show track local",useDropTarget:"ufICQKJq0XJE5iiIsZfj","useDropTarget--album":"vOp2HlcPkxOHebo3If32","useDropTarget--artist":"VNdHKKznHkpJ0VHoDmai","useDropTarget--episode":"ETclQEbcAcQdGdSioHaJ","useDropTarget--folder":"cuH8l_VHkTiz_NYVslQe","useDropTarget--playlist":"kXEKypZEUzxx9rNJy09C","useDropTarget--playlist-v2":"eZnAGhYcXE4Bt0a7958z","useDropTarget--show":"ratGUXdpLCkyXZNaJryg","useDropTarget--track":"caTDfb6Oj7a5_8jBLUSo","useDropTarget--local":"aRyoyQFJkzhoSOnf2ERM"};function N({allowedURITypesByDropPosition:e,onDrop:t,onLongDragOver:r,longDragOverTimeout:s=1e3}){const a=(0,c.NY)((()=>e),[e]),n=Object.values(a).every((e=>e.includes(u.JM.PLAYLIST_V2)&&!e.includes(u.JM.PLAYLIST))),[i,o]=(0,l.useState)(null),d=(0,l.useCallback)((e=>Object.entries(a).filter((([t,r])=>w(e,r).length>0)).map((([e])=>e)).filter(T)),[a]),p=(0,l.useRef)(0),m=(0,l.useRef)(null),y=(0,l.useRef)(null),g=(0,l.useCallback)((()=>{y.current&&(window.clearTimeout(y.current),y.current=null)}),[]);(0,l.useEffect)(g,[g]);const x=(0,l.useCallback)((e=>{const t=d(e);t.length&&(o(D(e,m.current,t)),e.dataTransfer&&!e.defaultPrevented&&(e.dataTransfer.dropEffect=t.includes(C.ON)?"copy":"move"),e.preventDefault())}),[d]),b=(0,l.useCallback)((e=>{d(e).length&&(e.preventDefault(),1==++p.current&&e.target instanceof HTMLElement&&(m.current=e.target,r&&(y.current=window.setTimeout(r,s))))}),[d,r,s]),h=(0,l.useCallback)((e=>{d(e).length&&0==--p.current&&(o(null),m.current=null,g())}),[d,g]),f=(0,l.useCallback)((e=>{const r=D(e,m.current,d(e));if(!e.defaultPrevented&&r){const l=F(e,a[r]??[],n);Object.keys(l).length&&t&&(t(l,r),e.preventDefault())}p.current=0,m.current=null,o(null),g()}),[d,a,n,t,g]);return{dropPosition:i,className:(0,l.useMemo)((()=>`${A.useDropTarget} ${Array.from(new Set(Object.values(a).flat()))?.map((e=>A[`useDropTarget--${e}`]??"")).join(" ")}`),[a]),onDragEnter:b,onDragLeave:h,onDragOver:x,onDrop:f}}var k=r(82411),M=r(29769);function P(){const e=(0,M.o)();return(0,l.useCallback)((async(t,r)=>{const l=await e.contains(t);if(1!==new Set(l).size)throw new Error("Dropping a mix of newly added and moved playlists is not supported");if(l[0]){if(t.length>1)throw new Error("Moving multiple playlists at once is not supported");await e.move({uri:t[0]},r)}else await e.add(t,r)}),[e])}function U(){const{createPlaylistFromAlbum:e,createPlaylistFromTracks:t}=(0,k.K)(),r=(0,M.o)(),s=P();return{handleDropOnFolder:(0,l.useCallback)((async(l,a)=>{const{[u.JM.TRACK]:n=[],[u.JM.LOCAL_TRACK]:i=[],[u.JM.ALBUM]:o=[],[u.JM.EPISODE]:c=[],[u.JM.PLAYLIST_V2]:d=[],[u.JM.FOLDER]:p=[]}=l,m={after:{uri:a}};d.length?await s(d,m):o.length?e(o[0],m):n.length||i.length||c.length?t([...n,...i,...c],m):p.length&&r.moveFolder({uri:p[0]},m)}),[s,e,t,r])}}var B=r(97490);const J=(0,l.createContext)(null);function Z(){const[e,t]=(0,B.z)("opened-folder",null);return{openedFolder:e,setOpenedFolder:t}}var K=r(46439),Y=r(46980),H=r(47735),V=r(5479),W=r(40239),z=r(8527),G=r(1740),X=r(56659),Q=r(18306),$=r(82441),q=r(45937),ee=r(73305),te=r(18371);const re="xFfODpPkWh3RFEif2u_b",le="kv4Mj5FTpBW6fWD10NhI",se="p2NI7AGpy5BWL6TSVIOb",ae="zcFmKgU1VJFEt7QXEQ9N",ne="uqcGV_T5xRcWDEMJoGNG",ie="yOc9v5MGaitl1r9UpHKg",oe="P2siDCCdfpelJSQDo7ov",ce="Z2BXDPtMtuJ9hFPs2DR_",ue="nKLGCHG03_iLOz_vnJ8f",de="gQX_uIhDHRU7D49YnMEQ",pe="Um4h5vvUjPQVwLR25iqA",me="epapS3x39tacSs2tzxQg";var ye=r(4637);const ge=({pinned:e})=>e?(0,ye.jsx)(te.t,{semanticColor:"textBrightAccent",iconSize:16,title:G.ag.get("web-player.your-library-x.pinned"),className:de}):null;var xe=r(51922),be=r(78410),he=r(20156);const fe="e5qQNU02pEY3d315iDOC",Ie=({folderDepth:e=0})=>(0,ye.jsx)("li",{className:fe,style:{"--ylx-folder-depth":e}}),Ee="oLOECYtBhVmBtyisKwew",je="as7TWnIA1jnumFte_u0R",Se={state:{preventMoveFocus:!0}},Ce=(0,l.memo)((function({uri:e,to:t=(0,u.EC)(e)?.toURLPath(!0)||"",handleNavigate:r,title:s,subtitle:n,trailing:i,media:o,alt:c,onDoubleClick:d,folderDepth:p,className:m,dragLabel:y,onDragStart:g,allowedDropTargetURITypesByDropPosition:x={},onDropTargetDrop:b,onLongDragOver:h,style:I,menu:E,...j}){const S=(0,K.s0)(),{leftSidebarIsCollapsed:T}=(0,f.G)(),v=(0,l.useCallback)((()=>{S(t,Se)}),[S,t]),D=(0,l.useCallback)((()=>{r?r():t&&S(t,Se)}),[r,S,t]),O=!!(0,K.bS)(t)?.pattern.end,w=(0,L.O1)([e],y),{dropPosition:R,className:F,..._}=N({allowedURITypesByDropPosition:x,onDrop:b,onLongDragOver:h??v}),A=(0,ye.jsxs)(H.E,{style:{"--ylx-folder-depth":T?0:p,...I},draggable:!!y,onDragStart:e=>{g?.(e),w(e)},onDoubleClick:d,className:a()(re,m,F,{[Ee]:R===C.ON,[le]:O}),...j,..._,children:[(0,ye.jsx)(xe.i,{onDragStart:()=>{},media:T?(0,ye.jsx)(q.default,{to:t,title:c,children:o}):o,title:T?void 0:s,subtitle:T?void 0:n,trailing:T?void 0:i}),(0,ye.jsx)(he._P,{menu:E,children:(0,ye.jsx)("div",{className:se,onClick:D,tabIndex:-1,role:"none",onDoubleClick:d})})]});return(0,ye.jsxs)(ye.Fragment,{children:[R===C.BEFORE&&(0,ye.jsx)(Ie,{folderDepth:p}),T?(0,ye.jsx)(be._,{label:(0,ye.jsxs)("div",{className:"encore-dark-theme",children:[s,n]}),placement:"right",showDelay:0,children:A}):A,R===C.AFTER&&(0,ye.jsx)(Ie,{folderDepth:p})]})}));var Te=r(13991),ve=r(49351);const De=({title:e,type:t,images:r})=>(0,ye.jsx)(Te.O,{images:r,shape:Te.K.ROUNDED_CORNERS,size:ve.m$.SIZE_48,type:t,title:e});var Le=r(91843),Oe=r(86255);const we=({uri:e})=>{const{isPlaying:t}=(0,Oe.cR)(e),{leftSidebarIsCollapsed:r}=(0,f.G)();return t&&!r?(0,ye.jsx)(Le.d,{iconSize:16,semanticColor:"textBrightAccent"}):null};var Re=r(31959);const Fe=({leading:e,subtitle:t})=>(0,ye.jsxs)("div",{className:oe,children:[e,(0,ye.jsx)(Re.D,{variant:"mesto",semanticColor:"textSubdued",className:ce,children:t})]});var _e=r(98340);const Ae=({uri:e,playbackUri:t=e,title:r,menu:s,handleNavigate:a})=>{const{filter:n}=(0,l.useContext)(I.fo),{isActive:i}=(0,Oe.cR)(t);return a?(0,ye.jsx)("button",{onClick:a,className:me,children:(0,ye.jsx)(Re.D,{variant:"ballad",semanticColor:i?"textBrightAccent":"textBase",children:(0,ye.jsx)($.o,{autoEscape:!0,searchWords:[n.trim()],textToHighlight:r})})}):(0,ye.jsx)(_e._,{menu:s,children:(0,ye.jsx)(q.Link,{to:e,className:ie,children:(0,ye.jsx)(Re.D,{variant:"ballad",semanticColor:i?"textBrightAccent":"textBase",children:(0,ye.jsx)($.o,{autoEscape:!0,searchWords:[n.trim()],textToHighlight:r})})})})},Ne=({libraryItem:e,shouldShowType:t})=>{const{uri:r,artists:s,images:a,name:n,pinned:i,type:o}=e,{filter:c}=(0,l.useContext)(I.fo),{togglePlay:u}=(0,ee.n)({uri:r},{featureIdentifier:"album",referrerIdentifier:"your_library"}),d=(0,l.useCallback)((()=>{u()}),[u]),p=(0,ye.jsx)(De,{title:n,type:o,images:a}),m=(0,ye.jsx)(X.Y,{uri:r,isPinnable:!0,isPinned:e.pinned}),y=(0,ye.jsx)(Ae,{uri:r,title:n,menu:m}),g=(0,ye.jsx)(Fe,{leading:(0,ye.jsxs)(ye.Fragment,{children:[(0,ye.jsx)(ge,{pinned:i}),(0,ye.jsx)(Q.$,{uri:r,size:16,className:de})]}),subtitle:(0,ye.jsxs)(ye.Fragment,{children:[t&&`${G.ag.get("web-player.your-library-x.type-album")} • `,(0,ye.jsx)(q.Link,{to:s.at(0)?.uri??"",className:ue,children:(0,ye.jsx)($.o,{searchWords:[c.trim()],textToHighlight:s.at(0)?.name??""})})]})}),x=(0,ye.jsx)(we,{uri:r});return(0,ye.jsx)(Ce,{uri:r,media:p,title:y,subtitle:g,trailing:x,alt:n,dragLabel:n,menu:m,onDoubleClick:d})};var ke=r(83797);const Me=({libraryItem:e,shouldShowType:t})=>{const{uri:r,images:s,name:a,pinned:n,type:i}=e,{togglePlay:o}=(0,ee.n)({uri:r},{featureIdentifier:"artist",referrerIdentifier:"your_library"}),c=(0,l.useCallback)((()=>{o()}),[o]),u=(0,ye.jsx)(De,{title:a,type:i,images:s}),d=(0,ye.jsx)(ke.m,{uri:r,isPinnable:!0,isPinned:e.pinned}),p=(0,ye.jsx)(Ae,{uri:r,title:a,menu:d}),m=(0,ye.jsx)(Fe,{leading:(0,ye.jsxs)(ye.Fragment,{children:[(0,ye.jsx)(ge,{pinned:n}),(0,ye.jsx)(Q.$,{uri:r,size:16,className:de})]}),subtitle:t&&G.ag.get("web-player.your-library-x.type-artist")}),y=(0,ye.jsx)(we,{uri:r});return(0,ye.jsx)(Ce,{uri:r,media:u,title:p,subtitle:m,trailing:y,alt:a,dragLabel:a,menu:d,onDoubleClick:c})};var Pe=r(27350);const Ue=({libraryItem:e,shouldShowType:t})=>{const{uri:r,authorName:s,images:a,name:n,pinned:i,type:o}=e,{filter:c}=(0,l.useContext)(I.fo),{togglePlay:u}=(0,ee.n)({uri:r},{featureIdentifier:"audiobook",referrerIdentifier:"your_library"}),d=(0,l.useCallback)((()=>{u()}),[u]),p=(0,ye.jsx)(De,{title:n,type:o,images:a}),m=(0,ye.jsx)(Pe.X,{uri:r,isPinnable:!0,isPinned:e.pinned}),y=(0,ye.jsx)(Ae,{uri:r,title:n,menu:m}),g=(0,ye.jsx)(Fe,{leading:(0,ye.jsxs)(ye.Fragment,{children:[(0,ye.jsx)(ge,{pinned:i}),(0,ye.jsx)(Q.$,{uri:r,size:16,className:de})]}),subtitle:(0,ye.jsxs)(ye.Fragment,{children:[t&&`${G.ag.get("web-player.your-library-x.type-audiobook")} • `,(0,ye.jsx)($.o,{searchWords:[c.trim()],textToHighlight:s})]})}),x=(0,ye.jsx)(we,{uri:r});return(0,ye.jsx)(Ce,{uri:r,media:p,title:y,subtitle:g,trailing:x,alt:n,dragLabel:n,menu:m,onDoubleClick:d})};var Be=r(86203),Je=r(26293),Ze=r(31294),Ke=r(85824),Ye=r(88668);const He=[u.JM.PLAYLIST_V2,u.JM.FOLDER];function Ve(){const e=(0,M.o)(),t=P();return(0,l.useCallback)((async(r,l,s)=>{const{[u.JM.PLAYLIST_V2]:a=[],[u.JM.FOLDER]:n=[]}=r;if(a.length&&n.length)throw new Error("Dropping a mix of playlists and folders is not supported");if(n.length>1)throw new Error("Dropping multiple folders is not supported");const i=l===C.BEFORE?{before:{uri:s}}:{after:{uri:s}},o=n.at(0);o?await e.moveFolder({uri:o},i):a.length&&await t(a,i)}),[e,t])}const We=({libraryItem:e})=>{const{uri:t,folderDepth:r,name:s,numberOfFolders:a,numberOfPlaylists:n,pinned:i,type:o,canReorder:c}=e,[d,p]=function(e){const{getIsFolderExpanded:t,setIsFolderExpanded:r}=(0,l.useContext)(J);return[(0,l.useMemo)((()=>t(e)),[t,e]),(0,l.useCallback)((t=>{r(e,t)}),[r,e])]}(t),{setOpenedFolder:m}=Z(),y=(0,l.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),p(!d)}),[p,d]),{togglePlay:g}=(0,ee.n)({uri:t},{featureIdentifier:"folder",referrerIdentifier:"your_library"}),x=(0,l.useCallback)((()=>{g()}),[g]),{handleDropOnFolder:b}=U(),h=Ve(),{renameFolder:f}=(0,Ye.lh)(),I=(0,l.useMemo)((()=>({[C.ON]:[u.JM.TRACK,u.JM.LOCAL_TRACK,u.JM.ALBUM,u.JM.EPISODE,u.JM.PLAYLIST_V2,u.JM.FOLDER],...c&&{[C.BEFORE]:He,[C.AFTER]:He}})),[c]),E=(0,l.useCallback)((async(e,r)=>{r===C.ON?b(e,t):r!==C.BEFORE&&r!==C.AFTER||h(e,r,t)}),[b,h,t]),j=(0,l.useCallback)((()=>{p(!0)}),[p]),S=(0,l.useCallback)((e=>{e.stopPropagation()}),[]),T=[n>0||!a?G.ag.get("web-player.your-library-x.rows.folder.number-of-playlists",n):null,a>0?G.ag.get("web-player.your-library-x.rows.folder.number-of-folders",a):null].filter(R.K).join(G.ag.getSeparator()),v=(0,l.useCallback)(((t="")=>{f(e,t)}),[e,f]),D=(0,l.useCallback)((()=>{m(e)}),[e,m]),L=(0,ye.jsx)(Ke.A,{reference:{uri:t},name:s,isPinnable:!0,isPinned:i,onRename:v,onCreateCallback:()=>{}}),O=(0,ye.jsx)(De,{title:s,type:o}),w=(0,ye.jsx)(Ae,{uri:t,title:s,menu:L,handleNavigate:D}),F=(0,ye.jsx)(Fe,{leading:(0,ye.jsx)(ge,{pinned:i}),subtitle:T}),_=(0,ye.jsx)(Be.o,{"aria-label":d?G.ag.get("web-player.your-library-x.collapse-folder"):G.ag.get("web-player.your-library-x.expand-folder"),iconOnly:d?Je.U:Ze.i,buttonSize:"sm",condensedAll:!0,onClick:y,onDoubleClick:S,tabIndex:-1,className:ne});return(0,ye.jsx)(Ce,{uri:t,to:`/folder/${(0,u.EC)(t)?.id??""}`,handleNavigate:D,folderDepth:r,media:O,title:w,subtitle:F,trailing:_,alt:s,dragLabel:s,menu:L,allowedDropTargetURITypesByDropPosition:I,onDropTargetDrop:E,onLongDragOver:j,onDoubleClick:x})};var ze=r(71280),Ge=r(46997),Xe=r(18563);const Qe=l.memo((function({uri:e,isPinned:t}){return(0,ye.jsx)(Ge.ZP,{value:"generic",children:(0,ye.jsx)(ze.v,{children:(0,ye.jsx)(Xe.X,{uri:e,isPinned:t,type:W.p.PLAYLIST})})})}));var $e=r(84805);const qe=({libraryItem:e,shouldShowType:t})=>{const{user:r}=(0,i.v9)($e.Gg),s=(0,u.wG)(r?.id).toURI(),a=s,n=s,o=s,c="spotify:collection:tracks",{images:d,name:p,numberOfSongs:m,pinned:y,type:x}=e,{togglePlay:b}=(0,ee.n)({uri:a},{featureIdentifier:"your_library",referrerIdentifier:"your_library"}),h=(0,l.useCallback)((()=>{b()}),[b]),f=(0,l.useContext)(g.H),I=(0,l.useMemo)((()=>({[C.ON]:[u.JM.TRACK]})),[]),E=(0,l.useCallback)((e=>{const{[u.JM.TRACK]:t=[]}=e;t?.length&&f?.add(...t)}),[f]),j=(0,ye.jsx)(De,{title:p,type:x,images:d}),S=(0,ye.jsx)(Qe,{uri:n,isPinned:e.pinned}),T=(0,ye.jsx)(Ae,{uri:c,playbackUri:a,title:p,menu:S}),v=(0,ye.jsx)(Fe,{leading:(0,ye.jsxs)(ye.Fragment,{children:[(0,ye.jsx)(ge,{pinned:y}),(0,ye.jsx)(Q.$,{uri:o,size:16,className:de})]}),subtitle:(0,ye.jsxs)(ye.Fragment,{children:[t&&`${G.ag.get("web-player.your-library-x.type-playlist")} • `,G.ag.get("web-player.your-library-x.rows.liked-songs.subtitle",m)]})}),D=(0,ye.jsx)(we,{uri:a});return(0,ye.jsx)(Ce,{uri:c,media:j,title:T,subtitle:v,trailing:D,alt:p,dragLabel:p,menu:S,allowedDropTargetURITypesByDropPosition:I,onDropTargetDrop:E,onDoubleClick:h})};var et=r(77098),tt=r(36522),rt=r(11179),lt=r(667);const st=({libraryItem:e,shouldShowType:t})=>{const r=lt.b,l=(0,rt.gB)().uri,s=e.uri,{name:a,numberOfFiles:n,pinned:i}=e,o=(0,ye.jsx)("div",{className:ae,children:(0,ye.jsx)(tt.S,{iconSize:24,title:a})}),c=(0,ye.jsx)(Qe,{uri:s,isPinned:e.pinned}),u=(0,ye.jsx)(Ae,{uri:l,playbackUri:r,title:a,menu:c}),d=(0,ye.jsx)(Fe,{leading:(0,ye.jsxs)(ye.Fragment,{children:[(0,ye.jsx)(ge,{pinned:i}),(0,ye.jsx)(et.E,{iconSize:16,className:de,semanticColor:"textBrightAccent"})]}),subtitle:`${t?`${G.ag.get("web-player.your-library-x.type-playlist")} • `:""}${G.ag.get("web-player.your-library-x.rows.local-files.subtitle",n)}`}),p=(0,ye.jsx)(we,{uri:r});return(0,ye.jsx)(Ce,{uri:l,media:o,title:u,subtitle:d,trailing:p,alt:a,dragLabel:a,menu:c})};var at=r(25620),nt=r(9178);const it=({libraryItem:e,shouldShowType:t})=>{const{uri:r,images:s,isLoading:a,folderDepth:n,name:o,owner:c,pinned:d,type:p,canAddTo:m,canReorder:y}=e,g=(0,l.useContext)(Ye.ZF),{filter:x}=(0,l.useContext)(I.fo);(0,l.useEffect)((()=>{a&&g.resync(r)}),[g,r,a]);const{togglePlay:b}=(0,ee.n)({uri:r},{featureIdentifier:"playlist",referrerIdentifier:"your_library"}),h=(0,l.useCallback)((()=>{b()}),[b]),f=Ve(),E=(0,i.I0)(),j=(0,l.useMemo)((()=>({...m&&{[C.ON]:[u.JM.TRACK,u.JM.LOCAL_TRACK,u.JM.ALBUM,u.JM.EPISODE]},...y&&{[C.BEFORE]:He,[C.AFTER]:He}})),[m,y]),S=(0,l.useCallback)((async(e,t)=>{if(t===C.ON){const{[u.JM.TRACK]:t=[],[u.JM.LOCAL_TRACK]:l=[],[u.JM.ALBUM]:s=[],[u.JM.EPISODE]:a=[]}=e,n=[...t,...l,...s,...a];E((0,at.jV)(r,n))}else t!==C.BEFORE&&t!==C.AFTER||f(e,t,r)}),[E,r,f]),T=(0,ye.jsx)(De,{title:o,type:p,images:s}),v=(0,ye.jsx)(nt.X,{uri:e.uri,isPinnable:!0,isPinned:d}),D=(0,ye.jsx)(Ae,{uri:r,title:o,menu:v}),L=(0,ye.jsx)(Fe,{leading:(0,ye.jsxs)(ye.Fragment,{children:[(0,ye.jsx)(ge,{pinned:d}),(0,ye.jsx)(Q.$,{uri:r,size:16,className:de})]}),subtitle:(0,ye.jsxs)(ye.Fragment,{children:[t&&`${G.ag.get("web-player.your-library-x.type-playlist")} • `,c.uri?(0,ye.jsx)(q.Link,{to:c.uri,className:ue,children:(0,ye.jsx)($.o,{searchWords:[x.trim()],textToHighlight:c.name})}):(0,ye.jsx)($.o,{searchWords:[x.trim()],textToHighlight:c.name})]})}),O=(0,ye.jsx)(we,{uri:r});return(0,ye.jsx)(Ce,{uri:r,folderDepth:n,media:T,title:D,subtitle:L,trailing:O,alt:o,dragLabel:o,menu:v,allowedDropTargetURITypesByDropPosition:j,onDropTargetDrop:S,onDoubleClick:h})};var ot=r(99722);const ct=({libraryItem:e,shouldShowType:t})=>{const{uri:r,images:s,name:a,pinned:n,publisher:i,type:o}=e,{filter:c}=(0,l.useContext)(I.fo),{togglePlay:u}=(0,ee.n)({uri:r},{featureIdentifier:"show",referrerIdentifier:"your_library"}),d=(0,l.useCallback)((()=>{u()}),[u]),p=(0,ye.jsx)(De,{title:a,type:o,images:s}),m=(0,ye.jsx)(ot.M,{uri:r,isPinnable:!0,isPinned:e.pinned}),y=(0,ye.jsx)(Ae,{uri:r,title:a,menu:m}),g=(0,ye.jsx)(Fe,{leading:(0,ye.jsxs)(ye.Fragment,{children:[(0,ye.jsx)(ge,{pinned:n}),(0,ye.jsx)(Q.$,{uri:r,size:16,className:de})]}),subtitle:(0,ye.jsxs)(ye.Fragment,{children:[t&&`${G.ag.get("web-player.your-library-x.type-show")} • `,(0,ye.jsx)($.o,{autoEscape:!0,searchWords:[c.trim()],textToHighlight:i})]})}),x=(0,ye.jsx)(we,{uri:r});return(0,ye.jsx)(Ce,{uri:r,media:p,title:y,subtitle:g,trailing:x,alt:a,dragLabel:a,menu:m,onDoubleClick:d})},ut=({libraryItem:e})=>{const{user:t}=(0,i.v9)($e.Gg),r=(0,u.wG)(t?.id,"your-episodes").toURI(),s=r,a=r,n="spotify:collection:your-episodes",{togglePlay:o}=(0,ee.n)({uri:s},{featureIdentifier:"episode",referrerIdentifier:"your_library"}),c=(0,l.useCallback)((()=>{o()}),[o]),{images:d,name:p,numberOfDownloadedEpisodes:m,pinned:y,type:x}=e,b=(0,l.useContext)(g.H),h=(0,l.useMemo)((()=>({[C.ON]:[u.JM.EPISODE]})),[]),f=(0,l.useCallback)((e=>{const{[u.JM.EPISODE]:t=[]}=e;t?.length&&b?.add(...t)}),[b]),I=(0,ye.jsx)(De,{title:p,type:x,images:d}),E=(0,ye.jsx)(Qe,{uri:a,isPinned:e.pinned}),j=(0,ye.jsx)(Ae,{uri:n,playbackUri:s,title:p,menu:E}),S=(0,ye.jsx)(Fe,{leading:(0,ye.jsxs)(ye.Fragment,{children:[(0,ye.jsx)(ge,{pinned:y}),m?(0,ye.jsx)(et.E,{iconSize:16,className:de,semanticColor:"textBrightAccent"}):null]}),subtitle:G.ag.get("web-player.your-library-x.subtitle-your-episodes")}),T=(0,ye.jsx)(we,{uri:s});return(0,ye.jsx)(Ce,{uri:n,media:I,title:j,subtitle:S,trailing:T,alt:p,dragLabel:p,menu:E,allowedDropTargetURITypesByDropPosition:h,onDropTargetDrop:f,onDoubleClick:c})},dt=l.memo((function({libraryItem:e,primaryFilter:t}){switch(e.type){case W.p.FOLDER:return(0,ye.jsx)(We,{libraryItem:e});case W.p.ALBUM:return(0,ye.jsx)(Ne,{libraryItem:e,shouldShowType:t!==W.p.ALBUM});case W.p.ARTIST:return(0,ye.jsx)(Me,{libraryItem:e,shouldShowType:t!==W.p.ARTIST});case W.p.AUDIOBOOK:return(0,ye.jsx)(Ue,{libraryItem:e,shouldShowType:t!==W.p.AUDIOBOOK});case W.p.SHOW:return(0,ye.jsx)(ct,{libraryItem:e,shouldShowType:t!==W.p.SHOW});case W.p.PLAYLIST:return(0,ye.jsx)(it,{libraryItem:e,shouldShowType:t!==W.p.PLAYLIST});case W.p.LIKED_SONGS:return(0,ye.jsx)(qe,{libraryItem:e,shouldShowType:t!==W.p.PLAYLIST});case W.p.YOUR_EPISODES:return(0,ye.jsx)(ut,{libraryItem:e});case W.p.LOCAL_FILES:return(0,ye.jsx)(st,{libraryItem:e,shouldShowType:t!==W.p.PLAYLIST});default:return(0,z._)(e),null}})),pt=({height:e})=>(0,ye.jsx)(H.E,{className:pe,style:{height:e}}),mt=({getItems:e,scrollNodeRef:t,primaryFilter:r,nrValidItems:s})=>{const a=(0,l.useCallback)((e=>(0,ye.jsx)(dt,{libraryItem:e,primaryFilter:r},e.uri)),[r]),n=(0,l.useCallback)(((e,t)=>(0,ye.jsx)(pt,{height:e},t)),[]),i=(0,l.useCallback)(((t,r)=>e(t,r).map(((e,r)=>e?a(e):n("64px",`${t+r}`)))),[e,a,n]);return(0,ye.jsx)(H.A,{circular:!1,children:(0,ye.jsx)(V.V,{renderRows:i,nrRows:s,rowHeight:64,scrollNodeRef:t,renderPlaceholder:n})})};var yt=r(77304),gt=r(62141),xt=r(96054),bt=r(20460),ht=r(6663);const ft={[yt.XD.ALBUMS]:W.p.ALBUM,[yt.XD.ARTISTS]:W.p.ARTIST,[yt.XD.BOOKS]:W.p.AUDIOBOOK,[yt.XD.EPISODES]:W.p.EPISODE,[yt.XD.SHOWS]:W.p.SHOW,[yt.XD.TRACKS]:W.p.TRACK};function It(e,t){const r=(0,l.useCallback)((({data:{list:r}})=>{Et(e,ft[r])&&t()}),[e,t]);(0,gt.b)(yt.EW.UPDATE,r),(0,gt.b)(yt.EW.UPDATE_PIN,t);const s=(0,l.useCallback)((()=>{Et(e,W.p.PLAYLIST)&&t()}),[e,t]);(0,Ye.iu)(s),function(e){(0,l.useEffect)((()=>{const t=(0,ht.k)(),r=/^hm:\/\/collection\/ylpin\//;return t.matchMessages(r,e),()=>{t.unmatchMessages(r,e)}}),[e])}(t),function(e){const t=(0,l.useContext)(bt.t),r=t.getEvents();(0,l.useEffect)((()=>(r.addListener(xt.p.UPDATE,e),()=>{r.removeListener(xt.p.UPDATE,e)})),[t,r,e])}(t)}function Et(e,t){switch(e){case W.p.ALBUM:case W.p.ARTIST:case W.p.AUDIOBOOK:case W.p.SHOW:return e===t;case W.p.PLAYLIST:switch(t){case W.p.TRACK:case W.p.PLAYLIST:case W.p.EPISODE:return!0;default:return!1}default:return!0}}const jt="wW9brXu3G3dR9CQ77Tyk",St="sgpkGFrp4dcnre_TJtaI",Ct=({className:e})=>(0,ye.jsx)("section",{className:a()(jt,e),children:(0,ye.jsxs)("div",{className:St,children:[(0,ye.jsx)(Re.D,{as:"h2",variant:"canon",semanticColor:"textBase",children:G.ag.get("web-player.your-library-x.empty-state-folder-title")}),(0,ye.jsx)(Re.D,{as:"p",variant:"mesto",semanticColor:"textBase",children:G.ag.get("web-player.your-library-x.empty-state-folder-subtitle")})]})});var Tt=r(91770),vt=r(22592);const Dt="xi3ytXbuSuzCYy5LwjFu",Lt="OcOr6YadMDDeh_NPgClX",Ot="eL94fWmhg6WbrdKZfGEW",wt=(0,l.memo)((function(e){const{message:t,title:r,linkTitle:l,linkTo:s,onClick:n,className:i}=e;return(0,ye.jsxs)("section",{className:a()(Dt,i),children:[(0,ye.jsxs)("div",{className:Lt,children:[(0,ye.jsx)(Re.D,{variant:"balladBold",semanticColor:"textBase",children:r}),(0,ye.jsx)(Re.D,{variant:"mesto",semanticColor:"textBase",children:t})]}),(0,ye.jsx)("div",{className:Ot,children:l&&(s||n)&&(0,ye.jsx)(Tt.D,{className:Ot,as:n?"button":void 0,colorSet:"invertedLight",href:s,onClick:n,component:vt.Z,buttonSize:"sm",children:l})})]})})),Rt=({className:e})=>{const{createPlaylist:t}=(0,k.K)(),r=(0,l.useCallback)((()=>{t()}),[t]);return(0,ye.jsxs)(ye.Fragment,{children:[(0,ye.jsx)(wt,{onClick:r,linkTitle:G.ag.get("web-player.your-library-x.empty-state-playlists-cta"),title:G.ag.get("web-player.your-library-x.empty-state-playlists-title"),message:G.ag.get("web-player.your-library-x.empty-state-playlists-subtitle"),className:e}),(0,ye.jsx)(wt,{linkTo:"/genre/podcasts-web",linkTitle:G.ag.get("web-player.your-library-x.empty-state-podcasts-browse"),title:G.ag.get("web-player.your-library-x.empty-state-podcasts-to-follow"),message:G.ag.get("web-player.your-library-x.empty-state-podcasts-keep-you-updated"),className:e})]})},Ft="JouuH90_RNAdTj0ZjcCA",_t="YtlFVHxvaGSz4vJdDdEa",At="spFG_i1jkxOkxb1_SaLJ",Nt="_8ZKfG3dOxfcr9Yyy5cv",kt=({query:e,className:t})=>(0,ye.jsxs)("div",{className:a()(Ft,t),"data-testid":"no-search-results-view",children:[(0,ye.jsx)(Re.D,{as:"h1",variant:"cello",className:_t,children:G.ag.get("web-player.your-library-x.empty-results-title-short").split(/(\{0\})/).map(((t,r)=>"{0}"===t?(0,ye.jsx)("span",{className:At,children:(0,ye.jsx)("span",{className:Nt,children:e})},r):t))}),(0,ye.jsx)(Re.D,{as:"h2",variant:"mesto",children:G.ag.get("web-player.your-library-x.empty-results-text-short")})]});var Mt=r(18936);const Pt="yrUQENj0tMcKDW5v0mfb",Ut="jsT0vJ8rWXPMeoFsMdNK",Bt=({onClick:e})=>(0,ye.jsxs)("div",{className:Pt,children:[(0,ye.jsx)("div",{className:"icon",children:(0,ye.jsx)(Mt.l,{iconSize:48,semanticColor:"textBase"})}),(0,ye.jsxs)("div",{className:Ut,children:[(0,ye.jsx)(Re.D,{as:"h2",variant:"canon",semanticColor:"textBase",children:G.ag.get("web-player.your-library-x.error-title")}),(0,ye.jsx)(Re.D,{as:"p",variant:"mesto",semanticColor:"textBase",children:G.ag.get("web-player.your-library-x.error-body")})]}),(0,ye.jsx)("div",{children:(0,ye.jsx)(Tt.D,{onClick:e,colorSet:"invertedLight",buttonSize:"sm",children:G.ag.get("web-player.your-library-x.error-button")})})]}),Jt=({children:e})=>{const t=function(){const[e,t]=(0,B.z)("ylx-expanded-folders",[]),r=(0,l.useCallback)((t=>e.includes(t)),[e]),s=(0,l.useCallback)(((r,l)=>{const s=e.indexOf(r);if(l){if(-1!==s)return;t([...e,r])}else{if(-1===s)return;t(e.filter((e=>e!==r)))}}),[e,t]);return{expandedFolders:e,getIsFolderExpanded:r,setIsFolderExpanded:s}}();return(0,ye.jsx)(J.Provider,{value:t,children:e})};var Zt=r(74895),Kt=r(21328),Yt=r(76503),Ht=r(22245);const Vt="V57QBvW1q79gFmT8NBvz",Wt={marginBlockEnd:0,willChange:"transform, opacity"},zt=({filterId:e,isPrimaryFilter:t,isPlaceholder:r,resetFilterIds:s,toggleFilterId:n,allowedDropTargetURITypes:i=S,className:o,ChipComponent:c=Ht.A,...u})=>{const d=u.selected,p=(0,l.useCallback)((()=>{!e||d&&t?s():n(e)}),[e,d,t,s,n]),m=(0,l.useCallback)((e=>{e.detail>1||r||p()}),[r,p]),{className:y,dropPosition:g,...x}=N({allowedURITypesByDropPosition:{[C.ON]:i},onLongDragOver:p});return(0,ye.jsx)(c,{...u,"aria-label":u["aria-label"],...x,...g===C.ON?{selectedColorSet:"base"}:void 0,className:a()(o,y,{[je]:g===C.ON,[Vt]:r}),onClick:m,selectedColorSet:g===C.ON?"invertedDark":"invertedLight",secondary:d&&!t,style:Wt})},Gt=e=>{(0,Zt.ST)({onUpdate:t=>{e.style.opacity=t.toString()}})},Xt=(e,t,r)=>((0,Zt.ST)({onUpdate:t=>{e.style.opacity=(1-Number(t)).toString()},onComplete:r}),()=>{e.style.opacity="",r()}),Qt=({hideEnteringElements:e,animateEnteringElements:t,animateExitingElements:r,animateFlippedElements:l})=>{e(),r(),l(),t()},$t="CVYEjtXcJcEl5Q7ca8dP",qt=[{id:"p1",name:"Playlists"},{id:"p2",name:"Podcasts & Shows"},{id:"p3",name:"Artists"},{id:"p4",name:"Albums"}],er=(0,l.memo)((function({availableFilters:e,selectedFilters:t,toggleFilterId:r,resetFilterIds:l,className:s}){const n=!(t||e),i=n?qt:[...t??[],...e??[]];return(0,ye.jsx)(Zt.U5,{flipKey:i.map((e=>e.id)).join("|"),handleEnterUpdateDelete:Qt,children:(0,ye.jsxs)(Yt.l,{className:a()($t,s),children:[!!t?.length&&(0,ye.jsx)(Zt.$3,{flipId:"clear-filter",onAppear:Gt,onExit:Xt,translate:!0,opacity:!0,children:(0,ye.jsx)(zt,{resetFilterIds:l,toggleFilterId:r,allowedDropTargetURITypes:wr,ChipComponent:Kt.w,"aria-label":"Clear"})},"clear-filter"),i.map(((e,s)=>{const a=t?.includes(e),i=0===s;return(0,ye.jsx)(Zt.$3,{flipId:e.id,onAppear:Gt,onExit:Xt,translate:!0,opacity:!0,children:(0,ye.jsx)(zt,{filterId:e.id,isPrimaryFilter:i,isPlaceholder:n,resetFilterIds:l,toggleFilterId:r,selected:a,children:e.name})},e.id)}))]})})}));var tr=r(40098),rr=r(90337),lr=r(33167),sr=r(23936),ar=r(33550),nr=r(57205),ir=r(22946);const or=function({folderUri:e}){const{createPlaylist:t}=(0,k.K)(),{createFolder:r}=(0,Ye.lh)(),l=e?{after:{uri:e}}:{before:"start"};return(0,ye.jsxs)(ze.v,{children:[(0,ye.jsx)(ir.s,{onClick:()=>{t(void 0,l)},role:"menuitem",icon:(0,ye.jsx)(ar.h,{iconSize:16}),iconPosition:"leading",children:G.ag.get("web-player.your-library-x.create.create-a-new-playlist")}),(0,ye.jsx)(ir.s,{onClick:()=>{r(G.ag.get("web-player.your-library-x.default_folder_name"),l)},role:"menuitem",icon:(0,ye.jsx)(nr.P,{iconSize:16}),iconPosition:"leading",children:G.ag.get("web-player.your-library-x.create.create-a-playlist-folder")})]})},cr=({className:e="",folderUri:t})=>{const r=G.ag.get("web-player.your-library-x.create.button-label"),{createPlaylistFromAlbum:s,createPlaylistFromTracks:n,createPlaylistFromPlaylist:i}=(0,k.K)(),{className:o,dropPosition:c,...d}=N({allowedURITypesByDropPosition:{[C.ON]:[u.JM.TRACK,u.JM.ALBUM,u.JM.PLAYLIST_V2]},onDrop:(0,l.useCallback)((e=>{const{[u.JM.TRACK]:t,[u.JM.ALBUM]:r,[u.JM.PLAYLIST_V2]:l=[]}=e;t?.length&&n(t,{before:"start"}),r?.length&&s(r[0],{before:"start"}),l.length&&i(l[0],{before:"start"})}),[s,i,n])});return(0,ye.jsx)(he.xV,{renderInline:!0,placement:"bottom-end",menu:(0,ye.jsx)(or,{folderUri:t}),preventScrollingWhileOpen:!1,children:(t,l,s)=>(0,ye.jsx)(be._,{label:r,placement:"right",children:(0,ye.jsx)(Be.o,{ref:s,iconOnly:sr.S,className:a()(e,o,{[je]:c===C.ON}),"aria-label":r,onClick:l,buttonSize:"sm",...d})})})},ur="UvXqRORKQr_N3jlgGTcS",dr="ksmcxhImUuj3_s1lcIm0",pr="O2Vp_sNHMLHUcgMPVnOA",mr="WYU7SXdABSulyirnmIYb",yr="DF8qJeKP7CRNb13tJeJg",gr="OMCDc2F7g_AufJAtaKfL",xr=({className:e,isLibraryCompletelyEmpty:t})=>{const{leftSidebarIsCollapsed:r,setSize:s}=(0,f.G)(),{renameFolder:n}=(0,Ye.lh)(),{openedFolder:i,setOpenedFolder:o}=Z(),c=!r||t&&r,u=(0,l.useCallback)((()=>{s(r?f.R.DEFAULT:f.R.COLLAPSED)}),[r,s]),d=(0,l.useCallback)(((e="")=>{i&&n(i,e)}),[i,n]),p=(0,l.useCallback)((()=>{o(null)}),[o]);return(0,ye.jsxs)("header",{className:a()(ur,e,{[pr]:r}),children:[(0,ye.jsx)(be._,{label:r?G.ag.get("web-player.your-library-x.expand-your-library"):G.ag.get("web-player.your-library-x.collapse-your-library"),placement:"bottom",children:(0,ye.jsx)(Be.o,{"aria-label":r?G.ag.get("web-player.your-library-x.expand-your-library"):G.ag.get("web-player.your-library-x.collapse-your-library"),iconOnly:r?tr.$:rr.n,onClick:u,className:gr})}),!r&&(0,ye.jsx)(ye.Fragment,{children:i?(0,ye.jsxs)("div",{className:mr,children:[(0,ye.jsx)(Be.o,{"aria-label":G.ag.get("web-player.your-library-x.navigate-back-folder"),onClick:p,iconOnly:lr.e,buttonSize:"sm",className:gr}),(0,ye.jsx)(he._P,{menu:(0,ye.jsx)(Ke.A,{reference:{uri:i.uri},name:i.name,onRename:d,onCreateCallback:()=>{}}),children:(0,ye.jsx)(Re.D,{variant:"balladBold",semanticColor:"textBase",className:yr,children:i.name})})]}):(0,ye.jsx)(Re.D,{variant:"balladBold",semanticColor:"textBase",children:G.ag.get("web-player.your-library-x.your-library")})}),c&&(0,ye.jsx)(cr,{className:dr,folderUri:i?.uri})]})};var br=r(5405);const hr="RGofdOZulhL2p9MRA5hg",fr=({sortOrders:e,activeSortOrderId:t,setActiveSortOrderId:r})=>{const l=e.find((e=>e.id===t))??e?.at(0);return(0,ye.jsx)("div",{className:hr,children:(0,ye.jsx)(br.A,{options:e.map((({id:e,name:t})=>({key:e,value:t}))),onSelect:r,selected:{key:l?.id??"",value:l?.name??""},heading:G.ag.get("web-player.your-library-x.sort_by")})})};var Ir=r(43001);const Er=({clearOnEscapeInElementRef:e,primaryFilter:t})=>{const r=(0,Y.y)(),l=function(e){switch(e){case W.p.ALBUM:return G.ag.get("web-player.your-library-x.text-filter.albums-placeholder");case W.p.ARTIST:return G.ag.get("web-player.your-library-x.text-filter.artists-placeholder");case W.p.PLAYLIST:return G.ag.get("web-player.your-library-x.text-filter.playlists-placeholder");case W.p.SHOW:return G.ag.get("web-player.your-library-x.text-filter.shows-placeholder");case W.p.AUDIOBOOK:return G.ag.get("web-player.your-library-x.text-filter.audiobooks-placeholder");case"downloaded":return G.ag.get("web-player.your-library-x.text-filter.downloaded-placeholder");case void 0:return G.ag.get("web-player.your-library-x.text-filter.generic-placeholder");default:return void(0,z._)(e)}}(t);return(0,ye.jsx)(Ir.K,{placeholder:l,clearOnEscapeInElementRef:e,debounceFilterChangeTimeout:r?.getCapabilities().canTextFilterContentsInRealtime?0:void 0})},jr="PpUTJL2NIYDUnmfzVIbE",Sr="_0FuodatXU4_fToYAuYtY",Cr="_K79lE9KrIAkl_bUSSUM",Tr="ifVI2CEdOZGgMWIUN2Cw",vr="MLbFLVC33caOj3FgSQMC",Dr="HUFl7FOi5oAlMEZNCBf4",Lr="y2UicQnlTq148rL8Y0jp",Or={items:[],totalLength:0},wr=[u.JM.TRACK,u.JM.ALBUM,u.JM.ARTIST,u.JM.PLAYLIST_V2,u.JM.SHOW,u.JM.EPISODE],Rr=[u.JM.TRACK,u.JM.LOCAL_TRACK,u.JM.ALBUM,u.JM.EPISODE,u.JM.PLAYLIST_V2],Fr=()=>{const{filter:e}=(0,l.useContext)(I.fo),[t,r]=(0,l.useState)(null),{filtersPickedByUserRef:s,selectedFilterIds:i,resetFilterIds:d,toggleFilterId:p}=function(e){const[t,r]=(0,B.z)("ylx-active-filter-ids",[]),s=(0,l.useRef)(!0),a=(0,c.jP)(((t,l=!0)=>{const a=new Set(e);a.has(t)?a.delete(t):a.add(t),s.current=l,r(Array.from(a))}),[e,r]),n=(0,l.useCallback)((()=>r([])),[r]);return{filtersPickedByUserRef:s,selectedFilterIds:t,resetFilterIds:n,toggleFilterId:a}}(t?.selectedFilters?.map((e=>e.id))??[]),b=i?.[0],{selectedSortOrderId:j,setSelectedSortOrderId:S}=function(e){const[t,r]=(0,B.z)("ylx-active-sort-order-by-filter-id",{}),s=`${e}`;return{selectedSortOrderId:t[s],setSelectedSortOrderId:(0,l.useCallback)((e=>{r({...t,[s]:e})}),[s,t,r])}}(b),T=(0,l.useRef)(null),{expandedFolders:v}=(0,l.useContext)(J),{openedFolder:D}=Z(),L=(0,x.I)(),O=(0,l.useContext)(g.H),[w,R]=(0,l.useState)(!1),{leftSidebarIsCollapsed:F,setSize:_}=(0,f.G)();!function(e=[],t=[],r){const s=(0,E.k)(),a=(0,l.useContext)(g.H).getContentsDownloadedFilterId(),n=(0,l.useRef)(e);n.current=e;const i=(0,l.useRef)(t);i.current=t;const o=(0,l.useRef)(r);o.current=r;const u=(0,l.useRef)(!1);(0,l.useEffect)((()=>{if(!a)return;const e=i.current.includes(a),t=n.current.includes(a),r=i.current.length>1,l=!s&&!r&&!e&&t,c=s&&e&&u.current;(l||c)&&(l&&(u.current=!0),o.current(a,!1))}),[a,s]);const d=(0,l.useRef)(t);(0,c.KW)((()=>{a&&(t.includes(a)&&!d.current.includes(a)&&u.current||(u.current=!1),d.current=t)}),[a,t])}(t?.availableFilters?.map((e=>e.id)),t?.selectedFilters?.map((e=>e.id)),p);const{handleDropOnFolder:A}=U(),{dropPosition:k,className:M,...P}=N({allowedURITypesByDropPosition:{[C.ON]:D?Rr:wr},onDrop:(0,l.useCallback)((async e=>{if(D)A(e,D?.uri);else{const{[u.JM.TRACK]:t,[u.JM.ALBUM]:r,[u.JM.ARTIST]:l,[u.JM.EPISODE]:s,[u.JM.SHOW]:a,[u.JM.PLAYLIST_V2]:n=[]}=e;t?.length&&O?.add(...t),r?.length&&O?.add(...r),l?.length&&O?.add(...l),s?.length&&O?.add(...s),a?.length&&O?.add(...a),n.length&&O?.add(...n)}}),[A,O,D]),onLongDragOver:(0,l.useCallback)((()=>{F&&_(f.R.DEFAULT)}),[F,_])}),H=(0,l.useMemo)((()=>({filters:i,sortOrder:j,textFilter:e,includeLocalFiles:L,includeYourEpisodes:!0,expandedFolders:F?[]:v,filtersPickedByUser:s.current,folderUri:D?.uri})),[v,s,L,F,D?.uri,i,j,e]),[V,W]=(0,l.useState)(!1);(0,l.useEffect)((()=>{W(!0),d()}),[D,d]);const z=(0,l.useRef)(H);z.current=H;const G=(0,l.useCallback)((async(e,t)=>{try{const l=H,s=await O.getContents({offset:e,limit:t,...H}),a=!(0,n.J)(l,z.current),{offset:i,limit:o,items:c,...u}=s;return a||r((e=>(0,n.J)(u,e)?e:u)),W(!1),s}catch(e){if(W(!1),R(!0),e instanceof y.Ik)return d(),Or;if(e instanceof y.j2)return S(void 0),Or;throw e}}),[O,H,d,S]),X=!1===t?.hasUnfilteredItems,Q=t?.hasTextFilter&&0===t.totalLength&&""!==e,$=0===t?.totalLength&&t.selectedFilters.length>0&&!t?.hasTextFilter&&t?.hasUnfilteredItems;(0,c.KW)((()=>{const e=t?.selectedFilters.at(-1);$&&e&&p(e.id,!1)}),[$,t?.selectedFilters]);const{getItems:q,nrValidItems:ee,invalidateCache:te}=(0,m.Q)({nrItems:50,fetch:G,limit:50}),re=(0,o.y1)(te,200,{leading:!0,trailing:!0,maxWait:1e3});It(t?.primaryFilter,re),((e,t)=>{const r=(0,l.useRef)(""),s=(0,K.TH)(),a=(0,Y.y)(),n=(0,l.useCallback)((t=>{if(!e.current)return;const{scrollTop:r,offsetHeight:l}=e.current;if(t<r||t>r+l){const r=t-l/2;e.current.scrollTop=r}}),[e]),i=(0,l.useRef)(0);(0,l.useEffect)((()=>{if(!e.current)return;const l=(0,u.EC)(s.pathname)?.toURI();if(l&&!(0,u.U4)(l,r.current)){const e=++i.current;a?.findContentsItemIndex(l,t.current??void 0).then((t=>{e!==i.current||-1===t||(n(64*t),r.current=l)}))}}),[t,a,s,n,e])})(T,z);const le=(0,l.useCallback)((()=>{te(),R(!1)}),[te]),se=(0,l.useRef)(null),[ae,ne]=(0,l.useState)(!1);(0,l.useEffect)((()=>{if(!window.IntersectionObserver)return()=>{};const e=new window.IntersectionObserver((e=>{e.forEach((e=>{ne(!e.isIntersecting)}))}),{root:T.current,rootMargin:"-100% 0px 0px 0px",threshold:0});return T.current?.firstElementChild&&e.observe(T.current.firstElementChild),()=>{e.disconnect()}}),[T]);const ie=(0,ye.jsx)(mt,{getItems:q,scrollNodeRef:T,primaryFilter:t?.primaryFilter,nrValidItems:ee});let oe;w?oe=(0,ye.jsx)(Bt,{onClick:le}):X?F||(oe=(0,ye.jsxs)(ye.Fragment,{children:[D?(0,ye.jsx)(Ct,{className:M}):(0,ye.jsx)(Rt,{className:M}),ie]})):oe=F?ie:(0,ye.jsxs)(ye.Fragment,{children:[(0,ye.jsxs)("div",{className:a()(Sr,M),children:[(0,ye.jsx)(Er,{clearOnEscapeInElementRef:se,primaryFilter:t?.primaryFilter}),(0,ye.jsx)(fr,{sortOrders:t?.availableSortOrders??[],activeSortOrderId:t?.selectedSortOrder?.id,setActiveSortOrderId:S})]}),Q&&(0,ye.jsx)(kt,{query:e,className:M},"empty-search"),ie]});const ce=w&&!t;return(0,ye.jsxs)("div",{className:a()(jr,{[Ee]:k===C.ON}),ref:se,...P,children:[(0,ye.jsxs)("div",{className:a()({[Lr]:ae}),children:[(0,ye.jsx)(xr,{className:M,isLibraryCompletelyEmpty:X}),!F&&!ce&&(0,ye.jsx)(er,{selectedFilters:t?.selectedFilters,availableFilters:t?.availableFilters,toggleFilterId:p,resetFilterIds:d,className:a()(M,vr),scrollNodeRef:T})]}),(0,ye.jsx)(h.U,{className:Cr,ref:e=>{e&&!T.current&&(T.current=e.osInstance().getElements().viewport)},children:(0,ye.jsx)("div",{className:a()(Tr,{[Dr]:V}),children:oe})})]})},_r=()=>{const{isAnonymous:e}=(0,i.v9)((e=>e.session));return(0,ye.jsx)(d.L,{onError:e=>{(0,b.vK)(e,"YourLibraryX")},children:(0,ye.jsx)(I.hz,{uri:"spotify:collection",children:(0,ye.jsxs)(Jt,{children:[(0,ye.jsx)(Fr,{}),(0,ye.jsx)(p.W,{isAnonymous:e})]})})})}},13991:(e,t,r)=>{r.d(t,{O:()=>j,K:()=>E});var l=r(59496),s=r(84875),a=r.n(s),n=r(97631),i=r(49351);const o="g3kBhX1E4EYEC2NFhhxG",c="O5_0cReFdHe81E0xFAD1",u="H71KtIrytVayf_dFofu7",d="SBpny8HrUTBzSjk7Vtk1",p="CxurIfvXVb_TqGF4q8Yf",m="OadpZJiOaGfX6Qp4j6n5",y="iJp40IxKg6emF6KYJ414",g="vreceNX3ABcxyddeS83B",x="Ozitxbqs1vcOukDz3GDw",b="AeEoI6ueagbJtaHl2cRd";var h=r(10616),f=r(4637);const I=({title:e,type:t,className:r})=>(0,f.jsx)("div",{"aria-label":e,className:a()(x,r),children:(0,f.jsx)(h.t,{type:t,className:b})});let E;!function(e){e[e.ROUNDED_CORNERS=0]="ROUNDED_CORNERS",e[e.CIRCLE=1]="CIRCLE",e[e.SQUARE=2]="SQUARE"}(E||(E={}));const j=(0,l.memo)((function({loadingMode:e="lazy",type:t,title:r,images:l=[],shape:s=E.SQUARE,size:x=i.m$.SIZE_56,className:b,onContextMenu:h=(()=>{}),onTouchStart:j=(()=>{}),onTouchEnd:S=(()=>{})}){const C=function(e=[]){const t=e.filter((e=>Boolean(e.width))),r=t.filter((e=>e.url&&e.width&&e.width>=i.eM[i.m$.SIZE_56])).sort(((e,t)=>e.width-t.width));return r.length?r:t}(l),T=C.length>0?C[0].url:"",v=C.map((({url:e,width:t})=>`${e} ${t/2}w, ${e} ${t}w`)).join(", "),D=()=>({[o]:i.pj.includes(x),[c]:i.wL.includes(x),[u]:i.VZ.includes(x),[d]:i.B_.includes(x)});return(0,f.jsx)("div",{className:a()(g,b),onContextMenu:h,onTouchStart:j,onTouchEnd:S,style:{width:`${i.eM[x]}px`,height:`${i.eM[x]}px`},children:(0,f.jsx)(n.E,{loading:e,src:T,alt:r,ariaHidden:!0,className:a()(y,{[m]:s===E.CIRCLE,[p]:s===E.SQUARE,...D()}),srcSet:v||void 0,testid:"entity-image",children:(0,f.jsx)(I,{title:r,type:t,className:a()({[m]:s===E.CIRCLE,[p]:s===E.SQUARE,...D()})})})})}))},49351:(e,t,r)=>{let l;r.d(t,{B_:()=>o,VZ:()=>i,eM:()=>s,m$:()=>l,pj:()=>a,wL:()=>n}),function(e){e[e.SIZE_48=0]="SIZE_48",e[e.SIZE_56=1]="SIZE_56",e[e.SIZE_64=2]="SIZE_64",e[e.SIZE_72=3]="SIZE_72",e[e.SIZE_80=4]="SIZE_80",e[e.SIZE_96=5]="SIZE_96",e[e.SIZE_104=6]="SIZE_104",e[e.SIZE_112=7]="SIZE_112",e[e.SIZE_120=8]="SIZE_120",e[e.SIZE_128=9]="SIZE_128",e[e.SIZE_136=10]="SIZE_136",e[e.SIZE_144=11]="SIZE_144",e[e.SIZE_152=12]="SIZE_152",e[e.SIZE_160=13]="SIZE_160",e[e.SIZE_168=14]="SIZE_168",e[e.SIZE_176=15]="SIZE_176",e[e.SIZE_184=16]="SIZE_184",e[e.SIZE_200=17]="SIZE_200",e[e.SIZE_232=18]="SIZE_232"}(l||(l={}));const s={[l.SIZE_48]:48,[l.SIZE_56]:56,[l.SIZE_64]:64,[l.SIZE_72]:72,[l.SIZE_80]:80,[l.SIZE_96]:96,[l.SIZE_104]:104,[l.SIZE_112]:112,[l.SIZE_120]:120,[l.SIZE_128]:128,[l.SIZE_136]:136,[l.SIZE_144]:144,[l.SIZE_152]:152,[l.SIZE_160]:160,[l.SIZE_168]:168,[l.SIZE_176]:176,[l.SIZE_184]:184,[l.SIZE_200]:200,[l.SIZE_232]:232},a=[l.SIZE_48,l.SIZE_56,l.SIZE_64],n=[l.SIZE_72,l.SIZE_80,l.SIZE_96,l.SIZE_104,l.SIZE_112,l.SIZE_120,l.SIZE_128],i=[l.SIZE_136,l.SIZE_144,l.SIZE_152,l.SIZE_160,l.SIZE_168,l.SIZE_176],o=[l.SIZE_184,l.SIZE_200,l.SIZE_232]},28010:(e,t,r)=>{r.d(t,{I:()=>s});var l=r(94887);function s(){return(0,l.S)()[0]}}}]);
//# sourceMappingURL=xpui-routes-your-library-x.js.map