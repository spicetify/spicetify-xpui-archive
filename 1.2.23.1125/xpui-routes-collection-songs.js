"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[7553],{75047:(e,t,a)=>{a.r(t),a.d(t,{default:()=>ae});var n=a(59496),l=a(24106),r=a(31752),o=a(76230),s=a(54584),i=a(17499),c=a(86961),u=a(84265),d=a(80159),g=a(14043),m=a(16972),f=a(24241),h=a(36952),y=a(99626),p=a(38130),x=a(12046),k=a(97036),j=a(58530),b=a(77452),C=a(20721),D=a(95755),F=a(90266),P=a(67997),S=a(75345),T=a(91224),I=a(19368),E=a(51688),v=a(52582),w=a(26702),L=a(32986),R=a(4637);const A=n.memo((({tracklistDomRef:e})=>{const{spec:t,logger:a}=(0,F.fU)(v.createDesktopSearchBarEventFactory,{}),l=(0,n.useCallback)((()=>{a.logInteraction(t.filterFieldFactory().keyStrokeFilter())}),[a,t]),r=(0,n.useCallback)((()=>{a.logInteraction(t.filterFieldFactory().hitClearFilter())}),[a,t]),o=(0,n.useCallback)((()=>{a.logInteraction(t.sortButtonFactory().hitSort())}),[a,t]);return(0,R.jsxs)("div",{className:m.Z.searchBoxContainer,children:[(0,R.jsx)(n.Suspense,{fallback:null,children:(0,R.jsx)(w.K,{placeholder:c.ag.get("playlist.search_in_playlist"),clearOnEscapeInElementRef:e,onFilter:l,onClear:r})}),(0,R.jsx)(L.l,{columns:y.P0,onSort:o})]})}));var U=a(25474),N=a(1637),Q=a(38530),M=a(48457);const O=n.memo((function({metadata:e,onClickTogglePlay:t,isPlaying:a,spec:l,logger:r,backgroundColor:o,canSort:s,canFilter:i}){const{uri:u,name:d,totalLength:g}=e,m=(0,n.useRef)(null),f=(0,n.useMemo)((()=>l.actionBarFactory()),[l]),h=(0,n.useMemo)((()=>f.shuffleButtonContainerFactory()),[f]),y=g>0,p=g>0,x=(0,M.Q)(),k=(0,n.useCallback)(((e,t)=>{const a=f.downloadButtonFactory();t===E.mc.ADD?r.logInteraction(a.hitDownload({itemToDownload:u})):t===E.mc.REMOVE?r.logInteraction(a.hitRemoveDownload({itemToRemoveFromDownloads:u})):t===E.mc.NO_PERMISSION&&r.logInteraction(a.hitUiReveal())}),[f,r,u]),j=(0,U.j)();return(0,R.jsx)(P.o,{backgroundColor:o,children:(0,R.jsxs)(P.F,{children:[p?(0,R.jsx)(T.$,{onClick:t,isPlaying:a,size:j,uri:u,ariaPauseLabel:c.ag.get("playlist.a11y.pause",d),ariaPlayLabel:c.ag.get("playlist.a11y.play",d)}):null,x&&(0,R.jsx)(F.Nh,{spec:h,children:(0,R.jsx)(Q.K,{entityName:d,contextUri:u,activationPlacement:"bottomEnd",size:j})}),g>0&&(0,R.jsx)(N.v,{uri:u,renderEnabled:()=>(0,R.jsx)(I.v,{uri:u})}),(0,R.jsx)(S.o,{uri:u,canDownload:y,isFollowing:!0,onFollow:()=>{},size:j,onClick:k}),i&&s&&(0,R.jsx)(F.Nh,{spec:f,children:(0,R.jsx)(A,{tracklistDomRef:m})})]})})}));var _=a(44938),B=a(88694),z=a(58311),G=a(73388),H=a(3439),K=a(9102),$=a(72102),V=a(85946),W=a(22402),Y=a(7155),Z=a(90519);const q=n.lazy((()=>Promise.all([a.e(1814),a.e(5216),a.e(682)]).then(a.bind(a,65216)))),X=[h.QD.INDEX,h.QD.TITLE,h.QD.ALBUM,h.QD.ADDED_AT,h.QD.DURATION],J="your_library",ee=({data:e,canFilter:t,canSort:a})=>{const{uri:l,name:i,totalLength:p}=e.metadata,C=(0,n.useRef)(null),P=(0,j.Y5)("#5038a0"),{filter:S}=(0,n.useContext)(f.fo),{sortState:T,setSortState:I}=(0,n.useContext)(y.Gb),{spec:E,logger:v}=(0,F.fU)(s.Q,{data:{uri:l}}),w=n.useMemo((()=>E.headerFactory()),[E]),L=n.useMemo((()=>E.tracklistFactory()),[E]);(0,n.useEffect)((()=>{null===T.column&&I({column:h.QD.ADDED_AT,order:h.kn.DESC})}),[T,I]);const A=(0,r.ur)(),U=(0,r.TH)(),N="POP"!==A?new URLSearchParams(U.search).get("uri"):null,{isPlaying:Q,togglePlay:M,usePlayContextItem:H,isActive:K}=(0,D.n)((0,b.I)(l,(0,_.w)(T),S),{featureIdentifier:J,referrerIdentifier:"your_library"}),$=()=>{const e=(0,G.aK)({isPlaying:Q,isActive:K,spec:E.actionBarFactory().playButtonFactory(),logger:v,uri:l});M({loggingParams:e})},[V]=(0,z.d4)();return(0,R.jsxs)("section",{role:"presentation",className:m.Z.playlist,"data-testid":"playlist-page",children:[(0,R.jsx)(u.$,{children:c.ag.get("playlist.page-title",i)}),(0,R.jsx)(x.s,{metadata:{...e.metadata,hasSpotifyTracks:!0},totalItems:V,isPlaying:Q,togglePlay:$,backgroundColor:P,specLikedSongs:w}),(0,R.jsx)(O,{metadata:e.metadata,onClickTogglePlay:$,isPlaying:Q,spec:E,logger:v,backgroundColor:P,canSort:a,canFilter:t}),(0,R.jsx)("div",{className:"contentSpacing",children:p>0?(0,R.jsx)(n.Suspense,{fallback:(0,R.jsx)(g.h,{hasError:!1,errorMessage:c.ag.get("error.request-collection-tracks-failure")}),children:(0,R.jsx)(F.Nh,{spec:L,children:(0,R.jsx)(k.m,{columns:X,children:(0,R.jsx)(B.p,{nrTracks:p,collectionUri:l,scrollToUri:N,usePlayContextItem:H,outerDomRef:C,spec:L,initialItems:e.contents.items})})})}):(0,R.jsx)(d.u,{message:c.ag.get("collection.empty-page.songs-subtitle"),title:c.ag.get("collection.empty-page.songs-title"),linkTo:"/search",linkTitle:c.ag.get("collection.empty-page.songs-cta"),renderInline:!0,children:(0,R.jsx)(o.F,{"aria-hidden":"true"})})})]})},te=n.memo((function({user:e,uri:t}){const{filter:a}=(0,n.useContext)(f.fo),{sortState:r}=(0,n.useContext)(y.Gb),o=function(e,t,a){const l=(0,n.useContext)(C.H),r=(0,K.useQueryClient)(),o=(0,$.jP)((()=>["useLikedSongs",e,a]),[e,a]),{data:s}=(0,K.useQuery)(o(),(()=>l.getTracks(a)),{cacheTime:18e5,keepPreviousData:!0,refetchOnWindowFocus:!1}),i=(0,n.useCallback)((()=>{r.invalidateQueries(o())}),[r,o]);(0,W.b)(V.EW.UPDATE,i);const c=(0,Z.I2)(t.id);return c&&s?{metadata:{uri:e,name:c.name,images:c.images,totalLength:s?.totalLength,unfilteredTotalLength:s.unfilteredTotalLength,owner:(0,Y.V)(t)},contents:s}:null}(t,e,{offset:0,limit:25,sort:(0,_.w)(r),filter:a}),s=(0,n.useContext)(C.H).getCapabilities(),i=(0,l.v9)(H.n5),{isEnhanced:u}=(0,p.U)(`spotify:user:${i}:collection`);if(o){const e=(0,R.jsx)(ee,{data:o,canFilter:s.canFilterTracksAndEpisodes&&o.metadata.unfilteredTotalLength>0,canSort:s.canSortTracksAndEpisodes&&o.metadata.unfilteredTotalLength>0});return(0,R.jsx)(N.v,{uri:o.metadata.uri,renderEnabled:()=>u?(0,R.jsx)(n.Suspense,{fallback:null,children:(0,R.jsx)(y.kz,{uri:o.metadata.uri,children:(0,R.jsx)(q,{metadata:{...o.metadata,collaborators:{count:1,items:[{isOwner:!0,user:o.metadata.owner,tracksAdded:o.metadata.totalLength}]}},capabilities:s,featureIdentifier:J})})}):e,renderDisabled:()=>e})}return(0,R.jsx)(g.h,{hasError:!1,errorMessage:c.ag.get("error.not_found.title.playlist"),loadOffline:s.canModifyOffline})})),ae=()=>{const{user:e}=(0,l.v9)(H.Gg);if(null===e)return null;const t=(0,i.wG)(e.id).toURI();return(0,R.jsx)(y.kz,{uri:t,children:(0,R.jsx)(f.hz,{uri:t,children:(0,R.jsx)(z.Y4,{children:(0,R.jsx)(te,{uri:t,user:e})})})})}},12046:(e,t,a)=>{a.d(t,{s:()=>n.s});var n=a(96197)}}]);
//# sourceMappingURL=xpui-routes-collection-songs.js.map