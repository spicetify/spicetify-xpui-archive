"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[3878],{86147:(e,i,a)=>{a.d(i,{T:()=>u});var n=a(50959),t=a(84875),l=a.n(t),s=a(98862),r=a(5701),o=a(38159),d=a(75357);const c="pvGZ831aNzHTQMZ8CA_u";var m=a(11527);const u=(0,n.memo)((function({onClick:e=(()=>{}),size:i,className:a,uri:t,sharingInfo:u,interactionData:k,ariaLabel:p=r.ag.get("mwp.list.item.share")}){const{onCopyLink:v}=(0,d.y)({sharingInfo:u,uri:t,interactionData:k}),h=(0,n.useCallback)((()=>{v(),e()}),[e,v]);return(0,m.jsx)(o.E,{ariaLabel:p,size:i,onClick:h,className:l()(c,a),icon:s.M,condensed:!0})}))},56790:(e,i,a)=>{a.r(i),a.d(i,{ThisIsTourCard:()=>c,default:()=>c,useThisisPlaylistExtensionQuery:()=>k});var n=a(87190),t=a(66019),l=a(5701),s=a(54171),r=a(59242),o=a(1054),d=a(11527);const c=e=>{const{artistImageUrl:i,artistName:a,artistConcertsUri:c,spec:m}=e,u=(0,r.$P)(),k=(0,r.Wi)(m.concertsCardFactory({identifier:a,uri:c,reason:"This is On Tour phase 1 MVP"}));return i&&a&&c?(0,d.jsxs)("section",{ref:k,className:"contentSpacing",children:[(0,d.jsx)(n.D,{as:"h1",variant:"cello",semanticColor:"textBase",children:l.ag.get("concerts")}),(0,d.jsx)("div",{className:o.Z.cards,children:(0,d.jsxs)("div",{className:o.Z.tourCard,"data-testid":"on-tour-card",children:[(0,d.jsx)("img",{className:o.Z.cardImage,src:i,alt:""}),(0,d.jsxs)("div",{className:o.Z.cardContent,children:[(0,d.jsx)(n.D,{as:"p",variant:"mesto",semanticColor:"textSubdued",className:o.Z.subtitle,children:l.ag.get("concerts_on_tour")}),(0,d.jsx)(n.D,{as:"h1",variant:"cello",className:o.Z.title,semanticColor:"textBase",children:a}),(0,d.jsx)(s.default,{to:c,className:o.Z.cardLink,children:(0,d.jsx)(t.P,{as:"span",size:"small",onClick:()=>{const e=m.concertsCardFactory({identifier:a,uri:c,reason:"This is On Tour phase 1 MVP"}).hitUiNavigate({destination:c});u.logInteraction(e)},className:o.Z.cardButton,children:l.ag.get("concerts_see_all_events")})})]})]})})]}):null};var m=a(1620);const u={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"thisisPlaylistExtension"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uri"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playlistV2"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uri"},value:{kind:"Variable",name:{kind:"Name",value:"uri"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Playlist"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"artistsOnTour"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"imageUrl"}},{kind:"Field",name:{kind:"Name",value:"upcomingEventsCount"}}]}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"concerts"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ConcertV2"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"startDateIsoString"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"location"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"city"}},{kind:"Field",name:{kind:"Name",value:"country"}}]}},{kind:"Field",name:{kind:"Name",value:"artists"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Artist"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"profile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"visuals"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarImage"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}}]}}]}}]}}]}}]}}]}}]}}]}}]}}]}}]}}]}}]},k=(e,i)=>(0,m.a)(u,e,i)},20545:(e,i,a)=>{a.r(i),a.d(i,{default:()=>Jn});a(44267),a(29746),a(29593),a(18974),a(7340),a(28220),a(80628),a(14534),a(24208),a(99801),a(55330);var n=a(50959),t=a(92389),l=a(76917),s=a(87190),r=a(29611),o=a(3673),d=a(90880),c=a(5701),m=a(87099),u=(a(69776),a(7422)),k=a(11527);const p=(e,i,a)=>({event:e,app_startup_id:null,ad_playback_id:null,ad_id:String(i),lineitem_id:String(a),creative_id:String(i),ad_format:"sponsored playlist",slot:null,in_focus:null,username:null,jsondata:JSON.stringify({platform:"WebPlayer",revision:"1.0.0"})}),v=({clickTracking:e,clickThrough:i,thirdPartyImpression:a,impression:l,logoUrl:r,advertiserName:o,creativeId:d,lineItemId:m})=>{const v=(0,t.I0)(),[h,g]=(0,n.useState)(!1);return(0,n.useEffect)((()=>(v((0,u.Vw)()),v((0,u.kh)(p("event_viewed",d,m))),()=>{v((0,u.AG)())})),[v,d,m]),(0,k.jsxs)("div",{className:"sponsor-container",children:[(0,k.jsx)(s.D,{variant:"minuet",className:"sponsor-text","data-ta-id":"sponsor-text",children:c.ag.get("playlist.presented_by",o)}),(0,k.jsxs)("div",{className:"sponsor-logo",children:[(0,k.jsx)("a",{draggable:!1,className:"sponsor-logo__link",target:"_blank",href:i,onClick:()=>{v((0,u.kh)(p("event_clicked",d,m))),g(!0)},children:(0,k.jsx)("img",{draggable:!1,className:"sponsor-logo__image",src:r,alt:o,"data-ta-id":"sponsor-logo"})}),(0,k.jsx)("img",{className:"sponsor-logo__imp-pixel",src:l,alt:""}),a&&(0,k.jsx)("img",{className:"sponsor-logo__3p-imp-pixel",src:a,alt:""}),h&&(0,k.jsx)("img",{className:"sponsor-logo__click-img-pixel",src:e,alt:""})]})]})},h=({playlistUri:e})=>{const i=(0,t.I0)(),a=(0,t.v9)((i=>i.ads.sponsoredPlaylist.previewAd||i.ads.sponsoredPlaylist.sponsoredPlaylist.get(e)));return(0,n.useEffect)((()=>{a||i((0,u.fd)(e))}),[i,e,a]),a?(0,k.jsx)("div",{children:(0,k.jsx)(v,{...a})}):null},g=({playlistUri:e})=>{const i=(0,t.I0)(),a=(0,t.v9)((e=>e.ads.sponsoredPlaylist.sponsoredPlaylist.get("allSponsorships"))),l=(0,t.v9)((e=>e.ads.sponsoredPlaylist.previewAd));(0,n.useEffect)((()=>{a||i((0,u.z8)())}),[i,a]);const s=l||a&&((e,i)=>{const a=Date.now()/1e3,n=e.split(":"),t=n[n.length-1];return i.some((({playlistId:e,endTime:i,startTime:n})=>e===t&&a>=n&&a<(i||a+1)))})(e,a);return s?(0,k.jsx)(h,{playlistUri:e}):null};var y=a(34514),S=a(8968),N=a(25408),x=a(21651),b=a(16254);const f="hOOwEKqNuXrNvOCB1SgZ",C="csEdkIN9z2LjJIuZraqz",j=({uri:e})=>{const[i,a]=(0,b.Z)(e),t=(0,l.s0)(),r=(0,n.useCallback)((()=>{a(!1),t("/",{replace:!0})}),[t,a]);return(0,k.jsxs)("div",{className:f,children:[(0,k.jsx)(N.l,{size:"xxlarge"}),(0,k.jsxs)("div",{className:C,children:[(0,k.jsx)(s.D,{as:"p",variant:"canon",children:c.ag.get("forbidden-page.title")}),(0,k.jsx)(s.D,{as:"p",variant:"mesto",children:c.ag.get("forbidden-page.description")})]}),i&&(0,k.jsx)(x.D,{colorSet:"invertedLight",onClick:r,children:c.ag.get("remove_from_your_library")})]})};var T=a(77864),F=a(71851),R=a(49679),A=a(15120),I=a(85712),D=a(76457),E=a(70267),_=a(56790),L=a(43095),P=a(45053),w=a(42955),U=a(28528),V=a(29729),M=a(18561),O=a(21355),B=a(90763),Z=a(84726),W=a(43206),K=a(28307),z=a(90343),Q=a(65939),H=a(47001);const J=({context:e,shouldFire:i})=>{const a=(0,Z.g)(),l=(0,t.v9)(H.n5),s=(0,t.v9)(Q.rZ),o=(0,r.W6)(z.kye),d=(0,W.s4)(),c=(0,n.useCallback)((()=>{const i={category:"rpp_exposures",action:"playlist_page_visit",variant:o,label:"dwp",os:(0,K.y)(),context:e,country:l?s:"",sp_t:(0,B.vQ)("sp_t")};a?d.send((0,O.k)(i)):d.send((0,M.x)(i))}),[o,e,l,s,a,d]);(0,n.useEffect)((()=>{i&&c()}),[c,i])};var G=a(33325),q=a(49698),Y=a(43113),X=a(20982),$=a(56522),ee=a(45503),ie=a(1620),ae=a(22038),ne=a(71749),te=a(44338),le=a(17673),se=a(28004);var re=a(10508),oe=a(19916),de=a(1186),ce=a(59242),me=a(6962),ue=a(57409),ke=a(52483),pe=a(75390);const ve=[],he=(e,i)=>{const a=[];let n=e,t=i;for(;n>0;){const i=Math.ceil(n/t);a.push({first:e-n,nrItems:i}),n-=i,t--}return a},ge=e=>{const{itemsInNode:i,renderItem:a,renderPlaceholder:n,estimatedHeight:t,scrollNodeRef:l,nrRowsOverscan:s=10,nrInitialInView:r=0,firstIndex:o,heights:d,fanOut:c=2}=e,{ref:m,inView:u,entry:p}=(0,pe.YD)({root:l.current,rootMargin:s*t+"px 0px",initialInView:o<r}),v=`${o}-${i}`;d[v]??=t*i,p?.boundingClientRect?.height&&(d[v]=p.boundingClientRect.height);const h=d[v];return 0===i?null:u?1===i?(0,k.jsx)("div",{ref:m,role:"presentation",children:a(o,h)}):(0,k.jsx)("div",{ref:m,role:"presentation",children:he(i,c).map((({first:i,nrItems:a},n)=>(0,k.jsx)(ge,{...e,itemsInNode:a,firstIndex:o+i},n)))}):(0,k.jsx)("div",{ref:m,role:"presentation",children:n(`${h}px`)})},ye=e=>{const i=(e=>{const i=ve.find((i=>i.key===e))?.heights||{},a=(0,n.useCallback)((i=>{if(!e)return;const a=ve.findIndex((i=>i.key===e));-1===a?ve.push({key:e,heights:i}):(ve[a].heights=i,ve.push(ve.splice(a,1)[0])),ve.length>10&&ve.shift()}),[e]),t=(0,n.useRef)({...i});return(0,n.useEffect)((()=>()=>{a(t.current)}),[a]),t.current})(e.persistanceKey);return(0,k.jsx)(ge,{...e,itemsInNode:e.totalCount,firstIndex:0,heights:i,nrInitialInView:e.nrInitialInView})};var Se=a(81804),Ne=a(70931),xe=a(99822),be=a(92837),fe=a(14263),Ce=a(96688),je=a(26228),Te=a(80774),Fe=a(71751),Re=a(53981),Ae=a(50807),Ie=a(14894),De=a(84875),Ee=a.n(De),_e=a(49730),Le=a(7637),Pe=a(67939);const we="vkhnr3uwrBrS2pegUmPR",Ue="qKPpyOLvm9usHh9yuKUe",Ve="VwgowRwmzJbjcNgje5Af",Me="pokfjIuYWJEbZYTep0bj",Oe=({isExplicit:e,rating:i,durationMs:a})=>(0,k.jsx)(be.o,{semanticColor:"textBase",hasTextSeparator:!0,className:Ee()(we,Ue),children:(0,k.jsxs)("span",{className:Ue,children:[e&&(0,k.jsx)(Le.N,{}),(0,k.jsxs)("span",{className:Me,children:[i?.showAverage&&i.average&&(0,k.jsxs)("span",{children:[(0,k.jsx)(_e.u,{size:"xsmall",className:Ve}),c.ag.formatNumber(i.average,{maximumFractionDigits:1})]}),a&&(0,k.jsx)(Pe.nL,{durationMs:a})]})]})});var Be=a(22786);const Ze=(0,n.createContext)({getReference:()=>null,setReference:()=>{}}),We=({children:e})=>{const i=(0,n.useRef)(null),a=(0,n.useCallback)((()=>i.current),[]),t=(0,n.useCallback)((e=>{i.current=e}),[]);return(0,k.jsx)(Ze.Provider,{value:{getReference:a,setReference:t},children:e})};const Ke=(e,i,a)=>{const{name:l,uri:s,uid:r}=e,o=(0,P.O)({itemUris:[s],itemMimeTypes:[Be.RN.AUDIOBOOKS],dragLabelText:l,contextUri:i}),{setReference:d,getReference:c}=(0,n.useContext)(Ze),u=(0,n.useCallback)((e=>{d({uri:s,uid:r}),o(e)}),[o,d,r,s]),k=(0,t.I0)(),p=(0,n.useContext)(ne.ZF),v=(0,n.useCallback)(((e,a)=>{const n=e[Be.RN.AUDIOBOOKS];if(!n)return;const t=c();t?a===je.Pw.BEFORE?p.move(i,[t],{before:{uri:s,uid:r}}):p.move(i,[t],{after:{uri:s,uid:r}}):a===je.Pw.BEFORE?k((0,m.jV)(i,n,{before:{uri:s,uid:r}})):k((0,m.jV)(i,n,{after:{uri:s,uid:r}})),d(null)}),[i,k,c,p,d,r,s]),h=a?[Be.RN.AUDIOBOOKS]:[];return{...(0,je.WB)({uri:s,id:r,allowedMimeTypesByDropPosition:{[je.Pw.BEFORE]:h,[je.Pw.AFTER]:h},onDrop:v}),onDragStart:u}},ze="bg5inM_sdkHpYWiFf7Id",Qe="TtqXijjGONVNSJN1gzLA",He="DyW2LAm9YDcCkcdM0eeP",Je=()=>(0,k.jsx)("div",{className:He}),Ge=(0,n.memo)((function({item:e,contextUri:i,canEdit:a}){const{name:n,description:t,isLocked:r,isExplicit:o,images:m,type:u,uri:p,authorName:v,consumptionCapExplanation:h,rating:g,durationMs:y}=e,[S,N]=(0,b.Z)(p),{isPlaying:x,togglePlay:f}=(0,ae.n)({uri:p},{featureIdentifier:"playlist"}),C=(0,l.s0)(),j=(0,d.EC)(p).toURLPath(!0),{className:T,dropPosition:F,...R}=Ke(e,i,a),A=(0,Ie.TJ)(),I=(0,k.jsx)(xe.g,{children:n}),D=(0,k.jsxs)("div",{children:[t&&(0,k.jsx)(be.o,{lineClamp:2,as:"div",children:(0,k.jsx)(Te.w,{asTextContent:!0,html:t})}),(0,k.jsx)(Oe,{isExplicit:!!o,rating:g,durationMs:y})]}),E=(0,k.jsxs)("div",{className:Qe,children:[(0,k.jsx)(Ce.H,{isAdded:S,onClick:()=>{N(!S)},size:"small",isAudiobook:!0}),(0,k.jsx)(Fe.f,{size:"small",version:Fe.u.secondary,onClick:f,isPlaying:x,ariaPlayLabel:c.ag.get("tracklist.a11y.play",n,n),ariaPauseLabel:c.ag.get("tracklist.a11y.pause",n,n),locked:r&&!h})]}),_=(0,k.jsx)(Re.O,{fadeIn:!0,images:A(m,48),shape:Re.K.ROUNDED_CORNERS,size:Ae.m$.SIZE_64,iconSize:"medium",type:u,title:n,loadingMode:"eager"}),L=e.signifierText?(0,k.jsx)(s.D,{as:"div",variant:"mesto",semanticColor:"textBrightAccent",children:e.signifierText}):null;return(0,k.jsxs)(k.Fragment,{children:[F===je.Pw.BEFORE&&(0,k.jsx)(Je,{}),(0,k.jsx)(fe.w,{hoverBackgroundColor:"backgroundTintedHighlight",activeBackgroundColor:"backgroundTintedBase",className:T,draggable:!0,id:`book-${p}`,size:"xl",layout:"wide",media:_,pretitle:L,title:I,body:D,subtitle:v,footer:E,onClick:()=>{C(j)},hoverAnimationDuration:"0ms",...R}),F===je.Pw.AFTER&&(0,k.jsx)(Je,{})]})}));var qe=a(27337);const Ye=({contextUri:e,initialItems:i,nrItems:a,canEdit:t})=>{const s=(0,n.useContext)(ne.ZF),r=(0,$.Mi)(),{filter:o}=(0,n.useContext)(A.fo),{sortState:d}=(0,n.useContext)(I.Gb),{contentsOptions:c}=(0,qe.d)(d,o),m=(0,n.useCallback)((async(i,a)=>{const n=await s.getContents(e,{...c,offset:i,limit:a}),t=n.items.map((e=>null===e?null:(0,Ne.yD)(e)?e:null));return{...n,items:t}}),[s,c,e]),{getItem:u,nrValidItems:p,invalidateCache:v}=(0,Se.Q)({nrItems:a,fetch:m,limit:50,initialItems:i});(0,ne.rZ)(e,v);const h=(0,n.useCallback)((e=>(0,k.jsx)("div",{style:{height:e}})),[]),g=(0,n.useCallback)(((i,a)=>{const n=u(i);return n?(0,k.jsx)(Ge,{contextUri:e,item:n,canEdit:t},n.uri):h(`${a}px`)}),[t,e,u,h]),y="POP"===(0,l.ur)()?0:10;return(0,k.jsx)("div",{className:ze,children:(0,k.jsx)(We,{children:(0,k.jsx)(ye,{totalCount:p,estimatedHeight:200,renderItem:g,renderPlaceholder:h,scrollNodeRef:r,nrRowsOverscan:10,persistanceKey:e,nrInitialInView:y})})})};var Xe=a(41812),$e=a(79446),ei=a(69767),ii=a(85804),ai=a(99993);const ni={column:null,order:Xe.kn.NONE},ti=n.memo((function({ariaLabel:e,nrTracks:i,playlistUri:a,showPlayCount:t,scrollToUid:l,usePlayContextItem:s,tracklistDomRef:r,sortableColumns:o}){const d=(0,n.useContext)(ne.ZF),{filter:c,setFilter:m}=(0,n.useContext)(A.fo),u=(0,n.useRef)(null),p=(0,n.useCallback)((()=>{u.current&&u.current.update()}),[]);(0,ii.r)(a,p);const{sortState:v,setSortState:h}=(0,n.useContext)(I.Gb),g=(0,n.useCallback)((e=>{h((0,R.VK)(e,v))}),[v,h]);(0,n.useEffect)((()=>{h(ni),m("")}),[a,m,h]),(0,n.useEffect)((()=>{u.current&&l&&u.current.scrollToItem({uid:l})}),[l]);const y=(0,n.useCallback)((async(e,i)=>{const n=await d.getContents(a,{offset:e,limit:i,sort:(0,R._j)(v),filter:c,decorateFormatListData:!0});return{items:n.items,totalLength:n.totalLength}}),[a,d,v,c]),S=(0,n.useCallback)(((e,i)=>{const n=(0,ai.X)(e.album?.images,{desiredSize:40,desiredLabel:"small"});return(0,k.jsx)(Xe.h_,{index:i,contextUri:a,uri:e.uri,uid:e.uid||void 0,isPlayable:e.isPlayable,duration_ms:e.duration.milliseconds,name:e.name,artists:e.artists,album:e.album,isExplicit:e.isExplicit,isMOGEFRestricted:e.is19PlusOnly,type:e.type,imgUrl:n?.url||"",statusChange:e.formatListAttributes?.status,showPlayCount:t,playCount:parseInt(e.formatListAttributes?.rank||"0",10),usePlayContextItem:s},i+e.uri)}),[a,t,s]),N=(0,$e.v)(),x=(0,n.useCallback)((e=>({uri:e.uri,uid:e.uid})),[]);return(0,k.jsx)(ei.JL,{value:"chart-tracklist",children:(0,k.jsx)(Xe.Pv,{ariaLabel:e,hasHeaderRow:!0,columns:N,sortableColumns:o,sortState:v,onSort:g,renderRow:S,resolveItem:x,nrTracks:i,fetchTracks:y,limit:100,canFetchAllTracks:d.getCapabilities().canFetchAllTracks,outerRef:u,outerDomRef:r,columnPersistenceKey:"chart-tracklist"},a)})}));var li=a(84816),si=a(76999),ri=a(95018),oi=a(86147),di=a(57735),ci=a(21393),mi=a(49597),ui=a(79258),ki=a(83524),pi=a(54472),vi=a(38776),hi=a(75317),gi=a(70173),yi=a(51195),Si=a(79476),Ni=a(89321),xi=a(25441),bi=a(43056);const fi={bottomEnd:bi.LR.topStart,top:bi.LR.bottom},Ci=({visible:e,onHide:i,placement:a,children:n,label:t})=>(0,k.jsx)(Ni.x,{placement:a,withPortal:!0,overlay:e&&(0,k.jsx)("div",{className:"encore-dark-theme encore-layout-themes",children:(0,k.jsx)(xi.J,{arrow:fi[a],colorSet:"announcement",onClose:i,children:t})}),children:n});var ji=a(60190),Ti=a(6200);let Fi=function(e){return e.xs="small",e.sm="medium",e.md="large",e}({});const Ri=({uri:e,label:i,onClick:a,size:n=Fi.md})=>{const{onCopyLink:t}=(0,Ti.l)({uri:e,permissionLevel:"CONTRIBUTOR"}),{toggleActivationVisible:l,setToggleActivationVisible:s}=(0,ji.I)();return(0,k.jsx)(Ci,{visible:l,onHide:()=>s(!1),label:c.ag.get("web-player.playlist.invite-collaborators.message"),placement:"bottomEnd",children:(0,k.jsx)(Si.ws,{label:i,children:(0,k.jsx)(gi.o,{onClick:e=>{a?.(e),t?.()},iconOnly:yi.V,size:n,"aria-hidden":"true","aria-label":i,condensed:!0})})})};var Ai=a(42846),Ii=a(97253),Di=a(77558);const Ei=n.memo((({metadata:e,tracklistDomRef:i,sortableColumns:a})=>{const{hasSpotifyAudiobooks:t}=e,l=t||!1,{spec:s,logger:r}=(0,ce.fU)(Ai.createDesktopSearchBarEventFactory,{}),o=(0,n.useCallback)((()=>{r.logInteraction(s.filterFieldFactory().keyStrokeFilter())}),[r,s]),d=(0,n.useCallback)((()=>{r.logInteraction(s.filterFieldFactory().hitClearFilter())}),[r,s]);return(0,k.jsxs)("div",{className:F.Z.searchBoxContainer,children:[(0,k.jsx)(n.Suspense,{fallback:null,children:(0,k.jsx)(Ii.K,{placeholder:c.ag.get("playlist.search_in_playlist"),onFilter:o,onClear:d,clearOnEscapeInElementRef:i})}),(0,k.jsx)(Di.l,{columns:[...a],isBooklist:l})]})}));var _i=a(79761),Li=a(4864),Pi=a(41504),wi=a(87992),Ui=a(50076),Vi=a(36848),Mi=a(58758);const Oi="Uw4gqTFuHRLn4VKga_bJ",Bi="SdECNwBCnmkKl0Q0mJff",Zi="HLkGXLclDq_7guCiD1Xq",Wi="vWR6alsFpTlgXUckErqF",Ki="EbHQLci0cfLjHmS0AKp2",zi="HzYFPEbZdd6fQW4jfcz4",Qi="SQEgwtR2aj51qFj6cMNZ",Hi="aaNtMSjjJ4cClWoe6K0k",Ji="BhtBJTnsM9AotmyN0MPr",Gi="FwoyMQocCMLEafLlvAk5",qi="xcn0geYcJliTHbvcds12",Yi="KptBBI16DBjQBjvPQtlH";function Xi(e){const i=(0,n.useRef)(null);return(0,k.jsx)(Li.Y,{center:!0,onClose:e.onClose,ref:i,withPortal:!0,children:(0,k.jsx)(Pi.l,{className:Oi,"aria-label":"Example showing onClose property",body:(0,k.jsxs)("div",{className:Ji,children:[(0,k.jsx)(gi.o,{size:"medium","aria-label":"IconX",iconOnly:wi.k,onClick:e.onClose,className:qi}),(0,k.jsx)(gi.o,{size:"medium","aria-label":"IconArrowLeft",iconOnly:Vi.D,className:Gi}),(0,k.jsx)("div",{className:Bi,children:(0,k.jsxs)("div",{className:Zi,children:[(0,k.jsx)("div",{className:Ki,children:(0,k.jsxs)("div",{className:zi,children:[(0,k.jsx)(_i.E,{className:Qi,src:"https://i.scdn.co/image/ab6761610000517469fd2e170a6d290939620b61",alt:"A headshot profile picture of Afrobeats artist Lojay",imageHeight:"150px",imageWidth:"150px",crop:!0,circle:!0}),(0,k.jsx)(_i.E,{className:Hi,src:"spotify:image:ab67706c0000da8465307c7864e1e9d53770a94e",alt:"Ginjapiano playlist profile picture",imageHeight:"150px",imageWidth:"150px",crop:!0,circle:!0})]})}),(0,k.jsxs)("div",{className:Wi,children:[(0,k.jsxs)(s.D,{as:"p",variant:"finaleBold",children:[(0,k.jsx)("span",{style:{color:"#dc744d"},children:"4M"})," STREAMED THIS WEEK"]}),(0,k.jsxs)(s.D,{as:"p",variant:"alto",children:["IM IN THE ",(0,k.jsx)("span",{style:{color:"#dc744d"},children:"TOP 21% "}),"OF GINJAPIANO LISTENERS THIS WEEK."]})]}),(0,k.jsx)("div",{className:Ki,children:(0,k.jsx)(Mi.V,{size:"xlarge"})})]})}),(0,k.jsx)("div",{className:Yi,children:(0,k.jsx)(x.D,{colorSet:"invertedLight",children:"Share"})})]})})})}const $i="nTTPGZGk721M6gfldG43",ea="BFYSUcA4ifYvgDzOQX5Q",ia="el9_37CCpYKxCRKDDyww",aa="FB376b7R1M_0YQZ_SahS",na="srPBn9_CV0NzQEEzW9f6",ta="te8Z8OuKxZx1gbjb7_ua",la=n.memo((function({setuserView:e}){const[i,a]=(0,n.useState)(!1);return(0,k.jsxs)(k.Fragment,{children:[i&&(0,k.jsx)(Xi,{onClose:()=>{a(!1)}}),(0,k.jsx)(Li.Y,{center:!0,withPortal:!0,children:(0,k.jsx)(Pi.l,{colorSet:"overMedia","aria-label":"Title",body:(0,k.jsx)("div",{children:(0,k.jsx)(s.D,{as:"p"})}),dialogTitle:(0,k.jsxs)("div",{className:$i,children:[(0,k.jsxs)("div",{className:ia,children:[(0,k.jsxs)("div",{children:[(0,k.jsx)(_i.E,{src:"https://i.scdn.co/image/54470e5e056b93d7022076960d3a6b2267ece226",alt:"A figure sits cross-legged but poised in front of their synthesizer",imageHeight:"20px",imageWidth:"20px",crop:!0,circle:!0}),(0,k.jsx)(_i.E,{src:"https://i.scdn.co/image/54470e5e056b93d7022076960d3a6b2267ece226",alt:"A figure sits cross-legged but poised in front of their synthesizer",imageHeight:"30px",imageWidth:"30px",crop:!0,circle:!0})]}),(0,k.jsx)(s.D,{as:"h1",variant:"alto",children:"Rap Caviar"})]}),(0,k.jsxs)("div",{className:ea,children:[(0,k.jsx)(gi.o,{iconOnly:wi.k,onClick:()=>e(!1),className:na}),(0,k.jsx)(gi.o,{iconOnly:Ui.o,className:ta,onClick:()=>{a(!0)}})]}),(0,k.jsx)("div",{className:aa,children:(0,k.jsx)(s.D,{as:"p",variant:"ballad",children:"Hello you made it to the top 10 percent"})})]}),id:"dialogAlert"})})]})})),sa="__97AKHEfxNtqFsLai1b",ra="pzFwHV7jvPlWTI6cG5TV",oa="iZu1aH8cr2cw98gqmTeo",da="JRvbfJh7eAZ_1FrQukej";function ca(){const[e,i]=(0,n.useState)(!1);return(0,k.jsxs)(k.Fragment,{children:[e&&(0,k.jsx)(la,{setuserView:i}),(0,k.jsxs)("button",{className:sa,onClick:()=>i(!0),children:[(0,k.jsxs)("div",{className:ra,children:[(0,k.jsx)(_i.E,{className:oa,src:"https://i.scdn.co/image/54470e5e056b93d7022076960d3a6b2267ece226",alt:"A figure sits cross-legged but poised in front of their synthesizer",imageHeight:"30px",imageWidth:"30px",crop:!0,circle:!0}),(0,k.jsx)(_i.E,{className:oa,src:"https://i.scdn.co/image/54470e5e056b93d7022076960d3a6b2267ece226",alt:"A figure sits cross-legged but poised in front of their synthesizer",imageHeight:"30px",imageWidth:"30px",crop:!0,circle:!0}),(0,k.jsx)(_i.E,{className:oa,src:"https://i.scdn.co/image/54470e5e056b93d7022076960d3a6b2267ece226",alt:"A figure sits cross-legged but poised in front of their synthesizer",imageHeight:"30px",imageWidth:"30px",crop:!0,circle:!0})]}),(0,k.jsxs)("div",{className:da,children:[(0,k.jsx)(s.D,{as:"p",variant:"mestoBold",children:"View employee leaderboard"}),(0,k.jsx)(s.D,{as:"p",variant:"mesto",children:"You're in the top 21% of listeners."})]})]})]})}var ma=a(76977),ua=a(36208);const ka=n.memo((function({playlist:e,capabilities:i,spec:a,isPlaying:t,isActive:l,togglePlay:s,isBooklist:o,isConcert:d=!1,backgroundColor:m,tracklistDomRef:u,sortableColumns:p}){const{metadata:{uri:v,name:h,unfilteredTotalLength:g,isOwnedBySelf:y,canPlay:S,isPublished:N,totalLength:x}}=e,f=(0,V.k)(),C=(0,ce.$P)(),j=(0,n.useMemo)((()=>a.shuffleButtonContainerFactory()),[a]),T=i.canFilter&&g>0,R=i.canSort&&g>0,A=g>0,I=(0,r.W6)(z.v8$),D=(0,r.W6)(z.MF8,{loadingValue:!1}),E=(0,ua.Q)(),[_,L]=(0,b.Z)(v),P=(0,U.o)(),w=(0,n.useCallback)((async()=>{P({targetUri:v,intent:_?"unsave":"save",type:"click"});try{await L(!_)}catch{}}),[_,P,L,v]),M=(0,n.useCallback)((()=>{const e=a.shareButtonFactory().hitShare({entityToBeShared:v,shareId:""});C.logInteraction(e)}),[a,C,v]),O=(0,n.useCallback)((()=>{let e;const i=a.heartButtonFactory();e=_?i.hitUnfollow({itemToBeUnfollowed:v}):i.hitFollow({itemToBeFollowed:v}),C.logInteraction(e),w()}),[a,w,_,C,v]),B=(0,vi.j)(),Z=T&&R;return(0,k.jsxs)(li.o,{backgroundColor:m,children:[(0,k.jsxs)(li.F,{children:[S&&!o?(0,k.jsx)(ui.$,{onClick:s,isPlaying:t,size:B,uri:v,ariaPlayLabel:c.ag.get("playlist.a11y.play",h),ariaPauseLabel:c.ag.get("playlist.a11y.pause",h)}):null,E&&x>0&&!o&&(0,k.jsx)(ce.Nh,{spec:j,children:(0,k.jsx)(pi.K,{shuffleContext:ma.W.playlistActionBar,entityName:h,contextUri:v,isActive:l,activationPlacement:"bottomEnd",size:B})}),y?null:(0,k.jsx)(ci.r,{children:(0,k.jsx)(Ce.H,{isAdded:!!_,onClick:O,size:B})}),!o&&(0,k.jsx)(si.o,{uri:v,isFollowing:!!_,canDownload:A,onClick:(e,i)=>(0,Y.l7)(i,a.downloadButtonFactory(),C,v),onFollow:w,size:B}),(0,k.jsx)(mi.F,{property:z.bMb,renderNewExperience:()=>e.metadata.permissions?.canAdministratePermissions&&f&&(!o||D)?(0,k.jsx)(Ri,{onClick:M,label:c.ag.get("permissions.invite-collaborators",h),uri:v,size:B}):null}),(d||o)&&(0,k.jsx)(oi.T,{uri:v,sharingInfo:null,interactionData:{intent:"share",type:"click",itemIdSuffix:d?"concerts-near-you/share":"booklist/share"},onClick:M,size:B}),(0,k.jsx)(hi.y,{onShow:()=>(0,Y.qq)(a,C),menu:(0,k.jsx)(di.X,{uri:v,isPublished:N}),children:(0,k.jsx)(ri.z,{label:c.ag.get("more.label.context",h),size:B})}),Z?(0,k.jsx)(ce.Nh,{spec:a,children:(0,k.jsx)(Ei,{metadata:e.metadata,tracklistDomRef:u,sortableColumns:p})}):(0,k.jsx)("div",{className:F.Z.leadingSlot,children:(0,k.jsx)(mi.F,{property:z.FMs,renderNewExperience:()=>(0,k.jsx)(ki.A,{options:[],onSelect:()=>{},selected:null,enableViewModeMenu:!0})})})]}),I&&(0,k.jsx)(ca,{})]})}));var pa=a(3999),va=a(54171);const ha=e=>{const i=(0,ce.$P)(),a=(0,n.useMemo)((()=>e.spec.promoCardFactory()),[e.spec]),t=(0,ce.Wi)(a);return(0,k.jsxs)("div",{className:F.Z.concertsFooter,children:[(0,k.jsx)(va.default,{to:"/concerts",className:F.Z.ctaLink,onClick:()=>{const e=a.hitUiNavigate({destination:"spotify:app:concerts"});i.logInteraction(e)},children:(0,k.jsxs)("div",{className:F.Z.promoRow,ref:t,children:[(0,k.jsx)(s.D.h2,{variant:"cello",className:F.Z.promoTitle,children:c.ag.get("concerts.find_more")}),(0,k.jsx)(pa.A,{as:"span",selected:!0,children:c.ag.get("concerts.find_nearby")}),(0,k.jsx)("img",{className:F.Z.promoImage,alt:"",src:"https://i.scdn.co/image/ab676d63000076a0dbdb7dc2499cbb9ef096518d"})]})}),(0,k.jsx)("div",{className:F.Z.disclaimerContainer,children:(0,k.jsx)(s.D,{as:"div",variant:"finale",semanticColor:"textSubdued",children:c.ag.get("concerts_near_you.playlist_disclaimer")})})]})};var ga=a(61058),ya=a(70087),Sa=a(8516),Na=a(91733);const xa="multiUserAttributionDisplayNamesV2";function ba(e){return(0,Ne.MW)(e)||(0,Ne.JF)(e)}function fa(e){return(0,Ne.MW)(e)||(0,Ne.JF)(e)||(0,Ne.yD)(e)}const Ca=n.memo((function({ariaLabel:e,nrTracks:i,playlistUri:a,playlistName:l,isMixedMedia:s,isLive:o,isBlend:u,isConcert:p,isBooklist:v,canEdit:h,scrollToUid:g,feedbackPath:y,deleteFeedbackPath:S,usePlayContextItem:N,tracklistRef:x,tracklistDomRef:b,canRemove:f,spec:C,initialItems:j,isCompactMode:T=!1,sortableColumns:F}){const E=(0,ce.$P)(),_=(0,r.W6)(z.X_F),L=(0,n.useContext)(ne.ZF),{filter:w}=(0,n.useContext)(A.fo),{sortState:U,setSortState:V}=(0,n.useContext)(I.Gb),M=(0,n.useRef)((()=>{})),[O,B]=(0,n.useState)([]),Z=(0,t.I0)(),W=(0,$e.v)(),K=(0,n.useCallback)((()=>{x?.current&&x.current.update()}),[x]);(0,ne.rZ)(a,K);const Q=(0,n.useCallback)(((e,i)=>{V((0,R.VK)(e,U)),E.logInteraction(C.columnHeaderFactory({identifier:e,position:i||0}).hitSort())}),[V,U,E,C]),H=(0,n.useCallback)((e=>{M.current(),L.remove(a,e)}),[L,a]),J=(0,n.useCallback)(((e,i,a=!1)=>{f&&(M.current=i,e.length>1&&!a?B(e):H(e))}),[f,H]);(0,n.useEffect)((()=>{x?.current&&g&&x.current.scrollToItem({uid:g})}),[g,x]);const G=(0,n.useCallback)((async(e,i)=>{const n=await L.getContents(a,{offset:e,limit:i,sort:(0,R._j)(U),filter:w,decorateFormatListData:!!y||o||u});return{items:n.items,totalLength:n.totalLength}}),[a,L,U,w,y,o,u]),q=(0,n.useCallback)(((e,i,n)=>{if(!x?.current)return;const t=x.current.getRows()[i];t&&(E.logInteraction(C.dragSort()),n===Sa.W.Before?L.move(a,e,{before:t}):L.move(a,e,{after:t}))}),[x,E,C,L,a]),Y=(0,n.useCallback)(((e,i,n)=>{if(!x?.current)return;const t=x.current.getRows()[i];t&&(E.logInteraction(C.dragAddToPlaylist({playlist:a,itemToBeAdded:e[0]})),n===Sa.W.Before?Z((0,m.jV)(a,e,{before:{uri:t.uri,uid:t.uid}})):Z((0,m.jV)(a,e,{after:{uri:t.uri,uid:t.uid}})))}),[x,E,C,a,Z]),X=(0,n.useCallback)((()=>{L.resync(a)}),[L,a]),$=(0,n.useCallback)(((e,i)=>{let n,t=null;(0,Ne.JF)(e)?(t=e.show,n=e.images.concat(e.show?.images||[])):(0,Ne.MW)(e)?(t=e.album,n=e.album?.images):(0,Ne.yD)(e)&&(n=e.images);const r=(0,ai.X)(n,{desiredSize:40,desiredLabel:"small"});let o=[];h&&!v&&U.order===Xe.kn.NONE&&(o=[P.a[d.JM.TRACK],P.a[d.JM.LOCAL_TRACK],P.a[d.JM.EPISODE]]);const c="1"===e?.formatListAttributes?.["dislike-feedback-selected"],m=!!(0,Ne.JF)(e)&&e.podcastSubscription.isUserSubscribed;let g=!1;(0,Ne.JF)(e)&&e.podcastSubscription.isPaywalled&&!m?g=!0:ba(e)?g=e.isPlayable&&!c:(0,Ne.yD)(e)&&(g=!0);let x=!1;(0,Ne.JF)(e)&&e.podcastSubscription.isPaywalled?x=!0:(0,Ne.yD)(e)&&(x=e.isLocked&&!e.isOutOfMarket);const b=u&&((e,i)=>{const a=[];if(!i)return a;const n=i[xa]?xa:"multiUserAttributionDisplayNames",t=i?.[n]?.split(","),l=i?.multiUserAttributionImages?.split(",");if(!t||!l)return a;const s=i?.multiUserAttributionUsernamesV2?.split(",")||[],r=i?.multiUserAttributionType?.split(",")||[],o=t.length;for(let e=0;e<o;e++){const i=s[e],n=i&&(0,d.QK)(i).toURI();a.push({username:i,uri:n,displayName:t[e],images:(c=l[e],c.length>1?[{url:c}]:[]),recsplanation:r[e]})}var c;return a.sort(((i,a)=>i.username?i.username===e?.username?-1:a.username===e?.username?1:0:0))})(e.addedBy,e?.formatListAttributes)||e.addedBy&&[e.addedBy]||[];let C=0;ba(e)?C=e.duration.milliseconds:(0,Ne.yD)(e)&&(C=e.durationMs||0);let j="";return fa(e)&&(j=e.name),(0,k.jsx)(Xe.dx,{isCompactMode:T,index:i,playIndex:e.playIndex??void 0,contextUri:a,uri:e.uri,uid:e.uid,isPlayable:g,duration_ms:C,isPaywalled:x,isUserSubscribed:m,name:j,artists:(0,Ne.MW)(e)?e.artists:void 0,albumOrShow:t,isExplicit:(fa(e)&&e.isExplicit)??!1,hasAssociatedVideo:((0,Ne.MW)(e)&&e.hasAssociatedVideo&&_)??!1,isMixedMedia:s,isLocal:(0,Ne.MW)(e)&&e.isLocal,addedBy:b,hasDecoratedAddedBy:L.getCapabilities().canDecorateAddedBy,dateAdded:e.addedAt,release_date:(0,Ne.JF)(e)&&e.release.date||"",isMOGEFRestricted:((0,Ne.MW)(e)||(0,Ne.JF)(e))&&e.is19PlusOnly,type:e.type,imgUrl:r?.url||"",onMove:q,onInsert:Y,usePlayContextItem:N,allowedDropTypes:o,feedbackPath:y,feedbackUri:e?.formatListAttributes?.feedback_uri,deleteFeedbackPath:S,isDisliked:c,isBlend:u,ticketingSiteURL:e?.formatListAttributes?.ticketingSite,eventDate:e?.formatListAttributes?.eventDate,canRemove:f,onFeedbackClick:X,playlistName:l,isConcert:p,concertsCount:e.formatListAttributes?.concerts_count,concertURI:e.formatListAttributes?.target_uri,concertDate:e.formatListAttributes?.first_concert_date,concertVenue:e.formatListAttributes?.first_concert_venue,authorName:(0,Ne.yD)(e)?e.authorName:"",isOutOfMarket:!!(0,Ne.yD)(e)&&e.isOutOfMarket,consumptionCapExplanation:(0,Ne.yD)(e)?e.consumptionCapExplanation:void 0,isOwnedBySelf:h},i+e.uri)}),[h,U.order,u,a,s,L,q,Y,N,y,S,f,X,l,p,v,T,_]),ee=(0,n.useCallback)((e=>({uri:e.uri,uid:e.uid,type:e.type})),[]),[,ie]=(0,D.d4)();return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(ei.JL,{value:"playlist-tracklist",children:(0,k.jsx)(Xe.Pv,{isCompactMode:T,testID:"playlist-tracklist",ariaLabel:e,hasHeaderRow:!0,columns:W,sortableColumns:F,sortState:U,onSort:Q,onRemove:J,renderRow:$,resolveItem:ee,nrTracks:i,fetchTracks:G,limit:100,canFetchAllTracks:L.getCapabilities().canFetchAllTracks,outerRef:x,outerDomRef:b,tracks:j,isConcertPlaylist:p,onNrValidItemsChange:ie,columnPersistenceKey:"playlist-tracklist"},a)}),(0,k.jsx)(ya.h,{title:c.ag.get("playlist.remove_from_playlist",l),isOpen:O.length>0,tracks:O,onClose:e=>{e.stopPropagation(),B([])},onRemove:H})]})}));var ja=a(20929),Ta=a(5619),Fa=a(34471),Ra=a(14937);const Aa={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationSearchV2Track"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Track"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"playability"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playable"}},{kind:"Field",name:{kind:"Name",value:"reason"}}]}},{kind:"Field",name:{kind:"Name",value:"artists"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"profile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"albumOfTrack"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"contentRating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"}}]}}]}}]},Ia={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"queryInlineCurationSearchV2"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"term"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"5"}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"offset"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"0"}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"numberOfTopResults"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"10"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"searchV2"},arguments:[{kind:"Argument",name:{kind:"Name",value:"query"},value:{kind:"Variable",name:{kind:"Name",value:"term"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}},{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"offset"}}},{kind:"Argument",name:{kind:"Name",value:"numberOfTopResults"},value:{kind:"Variable",name:{kind:"Name",value:"numberOfTopResults"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"query"}},{kind:"Field",name:{kind:"Name",value:"tracksV2"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"item"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2TrackWrapper"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"artists"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2ArtistWrapper"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"albumsV2"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2AlbumWrapper"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"episodes"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2EpisodesWrapper"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"topResultsV2"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"itemsV2"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"item"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2ArtistWrapper"}},{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2EpisodesWrapper"}},{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2AlbumWrapper"}},{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2TrackWrapper"}}]}}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationSearchV2TrackWrapper"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"TrackResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Track"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2Track"}}]}}]}}]}},...Aa.definitions,{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationSearchV2ArtistWrapper"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ArtistResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Artist"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2Artist"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationSearchV2Artist"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Artist"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"profile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"visuals"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarImage"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationSearchV2AlbumWrapper"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AlbumResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Album"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2Album"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationSearchV2Album"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Album"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationSearchV2EpisodesWrapper"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"EpisodeResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Episode"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2Episode"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationSearchV2Episode"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Episode"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"playability"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playable"}},{kind:"Field",name:{kind:"Name",value:"reason"}}]}},{kind:"Field",name:{kind:"Name",value:"contentRating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"}}]}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"podcastV2"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Podcast"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}}]}}]}}]}}]}}]},Da={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"queryInlineCurationSearchAlbum"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uris"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"offset"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"albums"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uris"},value:{kind:"Variable",name:{kind:"Name",value:"uris"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationAlbums"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationAlbums"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AlbumResponse"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Album"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"tracks"},arguments:[{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"offset"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}},{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uid"}},{kind:"Field",name:{kind:"Name",value:"track"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2Track"}}]}}]}}]}}]}}]}},...Aa.definitions]},Ea={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"queryInlineCurationSearchArtist"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uris"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"offset"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"artists"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uris"},value:{kind:"Variable",name:{kind:"Name",value:"uris"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationArtists"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationArtists"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ArtistResponse"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Artist"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"profile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"visuals"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarImage"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"discography"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"popularReleasesAlbums"},arguments:[{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"offset"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}},{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"label"}},{kind:"Field",name:{kind:"Name",value:"playability"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playable"}},{kind:"Field",name:{kind:"Name",value:"reason"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"topTracks"},arguments:[{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"offset"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uid"}},{kind:"Field",name:{kind:"Name",value:"track"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2Track"}}]}}]}}]}}]}}]}}]}},...Aa.definitions]};var _a=a(11024),La=a(54325),Pa=a(7511),wa=a(86506);function Ua(e){return{type:Na.p.ALBUM,uri:e.uri,id:e.id,name:e.name,images:(0,La.NS)(e.coverArt)}}function Va(e){if("Album"!==e.data.__typename)return null;return Ua(e.data)}function Ma(e){const i=e?.items.filter((e=>"AlbumResponseWrapper"===e.__typename));return(i??[]).map((e=>Va(e))).filter(Pa.K)||[]}function Oa(e){if("Artist"!==e.data.__typename)return null;const i=e.data;return{type:Na.p.ARTIST,uri:i.uri,id:i.id,name:i.profile.name,images:(0,La.NS)(i.visuals.avatarImage)}}function Ba(e){if("Episode"!==e.data.__typename)return null;const i=e.data,a=i.podcastV2.data;return"Podcast"!==a.__typename?null:{type:Na.p.EPISODE,uri:i.uri,id:i.id,name:i.name,images:(0,La.NS)(i.coverArt),isExplicit:i.contentRating?.label===_a.KS.Explicit,is19PlusOnly:i.contentRating?.label===_a.KS.NineteenPlus,podcast:{id:a.id,uri:a.uri,name:a.name},isPlayable:i.playability.playable}}function Za(e){const i=(0,La.NS)(e.albumOfTrack?.coverArt||null);return{type:Na.p.TRACK,uri:e.uri,id:e.id,name:e.name,album:{name:e.albumOfTrack?.name||"",uri:e.albumOfTrack?.uri||"",imgUrl:i.at(0)?.url||"",id:e.albumOfTrack?.id||""},artists:e.artists.items.map((e=>({id:e.id,name:e.profile.name,uri:e.uri}))),isPlayable:e.playability.playable,isExplicit:e.contentRating?.label===_a.KS.Explicit,is19PlusOnly:e.contentRating?.label===_a.KS.NineteenPlus}}function Wa(e){if("Track"!==e.data.__typename)return null;return Za(e.data)}function Ka(e){return(e?.itemsV2??[]).map((e=>{const i=(0,La.U2)(e,"item");switch(i.__typename){case"AlbumResponseWrapper":return Va(i);case"ArtistResponseWrapper":return Oa(i);case"EpisodeResponseWrapper":return Ba(i);case"TrackResponseWrapper":return Wa(i);default:return(0,wa._)(i),null}})).filter(Pa.K)||[]}const za=async(e,i,a=0,n=10,t=10)=>{const l={term:i,offset:a,limit:n,numberOfTopResults:t},s=await e(Ia,l),r=s?.data?.searchV2;return r?(d=i,{albums:Ma((o=r).albumsV2)??[],artists:(u=o.artists,((u?.items??[]).map((e=>Oa(e))).filter(Pa.K)||[])??[]),episodes:(m=o.episodes,((m?.items??[]).map((e=>Ba(e))).filter(Pa.K)||[])??[]),tracks:(c=o.tracksV2,((c?.items??[]).map((e=>Wa(e.item))).filter(Pa.K)||[])??[]),topResults:Ka(o.topResultsV2)??[],query:d}):null;var o,d,c,m,u},Qa=async(e,i,a=50,n=0)=>{const t={uris:[i],limit:a,offset:n},l=await e(Da,t),s=l?.data?.albums;return s?function(e){const i=e.at(0);if(!i)return null;switch(i.__typename){case"Album":return{albums:[],artists:[],episodes:[],tracks:i.tracks.items.map((e=>Za(e.track)))||[],topResults:[]};case"GenericError":case"NotFound":return null;default:return(0,wa._)(i),null}}(s):null},Ha=async(e,i,a=50,n=0)=>{const t={uris:[i],limit:a,offset:n},l=await e(Ea,t),s=l?.data?.artists;return s?function(e){const i=e.at(0);if(!i)return null;switch(i.__typename){case"Artist":return{albums:i.discography.popularReleasesAlbums.items.map((e=>Ua(e)))||[],artists:[],episodes:[],tracks:i.discography.topTracks.items.map((e=>Za(e.track)))||[],topResults:[]};case"GenericError":case"NotFound":return null;default:return(0,wa._)(i),null}}(s):null};var Ja=a(49857),Ga=a(37037);const qa="YAYCVnYpPvmYV4JyTmn5",Ya="FeWwGSRANj36qpOBoxdx",Xa="_h5mio6VqcL_fmiXAb1S",$a="Hfgj4Zbb2ijt8g54MlCA",en="sgZ_MgcS1NlccH19fYsa",an="JzyZE2R09wq7xtjECDeR",nn=n.memo((function({placeholder:e,onChange:i=(()=>{}),onFocus:a=(()=>{})}){const[t,l]=(0,n.useState)(""),r=(0,n.useRef)(null),o=(0,Ja.y1)((e=>{i(e)}),200),d=(0,n.useCallback)((e=>{const i=e.currentTarget.value;l(i),o(i)}),[l,o]),m=(0,n.useCallback)((()=>{r.current&&r.current.focus(),l(""),i("")}),[l,i]),u=(0,n.useCallback)((e=>{"Escape"===e.key&&t&&m()}),[t,m]);return(0,k.jsxs)("div",{className:qa,role:"search",children:[(0,k.jsx)(s.D,{as:"input",variant:"mesto",ref:r,className:Ee()(Ya),role:"searchbox",maxLength:80,autoCorrect:"off",autoCapitalize:"off",spellCheck:!1,placeholder:e,onChange:d,onKeyDown:u,onFocus:a,value:t}),(0,k.jsxs)("div",{className:Xa,children:[(0,k.jsx)("span",{className:$a,children:(0,k.jsx)(Ga.j,{size:"small",className:en,"aria-hidden":"true"})}),t&&(0,k.jsx)("button",{className:an,onClick:m,"aria-label":c.ag.get("search.a11y.clear-input"),children:(0,k.jsx)(wi.k,{size:"small"})})]})]})})),tn=({renderRow:e,searchResults:i,renderSeeAllRow:a,seeAllXList:n})=>(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(Xe.Pv,{ariaLabel:c.ag.get("search.title.top-results"),renderRow:e,rowPlaceholder:Xe.hU,nrTracks:i.length,tracks:i,resolveItem:e=>({uri:e.uri}),columns:[Xe.QD.TITLE_AND_ARTIST,Xe.QD.ALBUM,Xe.QD.ADD],testID:"playlist-inline-curation-loaded-results"}),(0,k.jsx)(Xe.Pv,{ariaLabel:c.ag.get("search.title.all"),renderRow:a,rowPlaceholder:Xe.hU,nrTracks:n.length,tracks:n,resolveItem:e=>({uri:e.uri}),columns:[Xe.QD.TITLE_AND_ARTIST,Xe.QD.ALBUM,Xe.QD.ADD],testID:"playlist-inline-curation-see-all-options"})]}),ln=({renderRow:e,searchResults:i})=>(0,k.jsx)(Xe.Pv,{ariaLabel:c.ag.get("search.title.top-results"),renderRow:e,rowPlaceholder:Xe.hU,nrTracks:i.length,tracks:i,resolveItem:e=>({uri:e.uri}),columns:[Xe.QD.TITLE_AND_ARTIST,Xe.QD.ALBUM,Xe.QD.ADD]}),sn=({renderRow:e,searchResults:i})=>{const a=i.filter((e=>e.type===Na.p.TRACK)),n=i.filter((e=>e.type===Na.p.ALBUM));return(0,k.jsxs)("div",{children:[(0,k.jsx)(s.D,{as:"p",variant:"cello",className:F.Z.artistResultListTitle,children:c.ag.get("playlist.curation.popular_songs")}),(0,k.jsx)(Xe.Pv,{ariaLabel:c.ag.get("playlist.curation.popular_songs"),renderRow:e,rowPlaceholder:Xe.hU,nrTracks:a.length,tracks:a,resolveItem:e=>({uri:e.uri}),columns:[Xe.QD.TITLE_AND_ARTIST,Xe.QD.ALBUM,Xe.QD.ADD]}),(0,k.jsx)(s.D,{as:"p",variant:"cello",className:F.Z.artistResultListTitle,children:c.ag.get("playlist.curation.albums")}),(0,k.jsx)(Xe.Pv,{ariaLabel:c.ag.get("playlist.curation.albums"),renderRow:e,rowPlaceholder:Xe.hU,nrTracks:n.length,tracks:n,resolveItem:e=>({uri:e.uri}),columns:[Xe.QD.TITLE_AND_ARTIST,Xe.QD.ALBUM,Xe.QD.ADD]})]})},rn=({renderRow:e,searchResults:i})=>(0,k.jsx)(Xe.Pv,{ariaLabel:c.ag.get("search.title.top-results"),renderRow:e,rowPlaceholder:Xe.hU,nrTracks:i.length,tracks:i,resolveItem:e=>({uri:e.uri}),columns:[Xe.QD.TITLE_AND_ARTIST,Xe.QD.ALBUM,Xe.QD.ADD]}),on=({renderRow:e,searchResults:i})=>(0,k.jsx)(Xe.Pv,{ariaLabel:c.ag.get("search.title.top-results"),renderRow:e,rowPlaceholder:Xe.hU,nrTracks:i.length,tracks:i,resolveItem:e=>({uri:e.uri}),columns:[Xe.QD.TITLE_AND_ARTIST,Xe.QD.ALBUM,Xe.QD.ADD]}),dn=({renderRow:e,searchResults:i})=>(0,k.jsx)(Xe.Pv,{ariaLabel:c.ag.get("search.title.top-results"),renderRow:e,rowPlaceholder:Xe.hU,nrTracks:i.length,tracks:i,resolveItem:e=>({uri:e.uri}),columns:[Xe.QD.TITLE_AND_ARTIST,Xe.QD.ALBUM,Xe.QD.ADD]});var cn=a(30662);const mn="G2t3w2AAeb5OXp0_GeWs",un="saVjTFMyWYUz975_tkQm",kn="thi8fNCkEhutRkDC90c0",pn="pHVlkChuJpEnBQyU3ADv",vn="ENWs3JxcqtD98_8fbPz2",hn="L8IUKEJL6JiTyE_qUVCc",gn="XcyjdXgsNX0DBt72tfiD",yn="VhJnuS7UcUPfIlzD8dlU",Sn="He29vQ5anFj_bJ5iEaI2",Nn=({searchResult:e,index:i,isRTL:a,onClick:n})=>{const t=e.images.at(0)?.url;return(0,k.jsx)(cn.RX,{className:vn,rowIndex:i,"aria-selected":!1,children:(0,k.jsxs)("div",{"aria-label":`${c.ag.get("artist-page.tracks.seemore")} ${e.name}`,className:Sn,onClick:n,children:[(0,k.jsxs)(cn.id,{columnIndex:0,className:hn,children:[void 0!==t?(0,k.jsx)("img",{className:kn,src:t,alt:e.name}):null,(0,k.jsxs)("div",{className:gn,children:[(0,k.jsx)(s.D,{as:"p",className:pn,variant:"ballad",children:e.name}),(0,k.jsx)(s.D,{as:"p",variant:"mesto",semanticColor:"textSubdued",children:c.ag.get("album")})]})]}),(0,k.jsx)(cn.id,{columnIndex:1}),(0,k.jsx)(cn.id,{columnIndex:2,children:(0,k.jsx)("button",{"data-testid":"top-bar-forward-button","aria-label":`See more from ${e.name}`,className:yn,onClick:n,children:a?(0,k.jsx)(Ta.e,{}):(0,k.jsx)(ja.V,{})})})]})})};var xn=a(14586);const bn=({size:e})=>(0,k.jsx)("div",{className:un,children:(0,k.jsx)(xn.a,{size:e})}),fn=({searchResult:e,index:i,isRTL:a,onClick:n})=>{const t=e.images.at(0)?.url;return(0,k.jsx)(cn.RX,{className:vn,rowIndex:i,"aria-selected":!1,children:(0,k.jsxs)("div",{"aria-label":`${c.ag.get("artist-page.tracks.seemore")} ${e.name}`,className:Sn,onClick:n,"data-testid":"playlist-inline-curation-artist",children:[(0,k.jsxs)(cn.id,{columnIndex:0,className:hn,children:[void 0!==t?(0,k.jsx)("img",{className:mn,src:t,alt:e.name}):(0,k.jsx)(bn,{size:"small"}),(0,k.jsxs)("div",{className:gn,children:[(0,k.jsx)(s.D,{as:"p",className:pn,variant:"ballad",children:e.name}),(0,k.jsx)(s.D,{as:"p",variant:"mesto",semanticColor:"textSubdued",children:c.ag.get("artist")})]})]}),(0,k.jsx)(cn.id,{columnIndex:1}),(0,k.jsx)(cn.id,{columnIndex:2,children:(0,k.jsx)("button",{"data-testid":"top-bar-forward-button","aria-label":`See more from ${e.name}`,className:yn,onClick:n,children:a?(0,k.jsx)(Ta.e,{}):(0,k.jsx)(ja.V,{})})})]})})},Cn=({episode:e,contextUri:i,index:a,usePlayContextItem:n})=>(0,k.jsx)(Xe.YK,{uid:e.id,uri:e.uri,isPlayable:e.isPlayable,isMOGEFRestricted:e.is19PlusOnly,isExplicit:e.isExplicit,contextUri:i,name:e.name,imgUrl:e.images.at(0)?.url??"",index:a,podcast:e.podcast,usePlayContextItem:n}),jn=({label:e,index:i,isRTL:a,onClick:n})=>(0,k.jsx)(cn.RX,{className:vn,rowIndex:i,"aria-selected":!1,children:(0,k.jsxs)("div",{"aria-label":e,className:Sn,onClick:n,children:[(0,k.jsx)(cn.id,{columnIndex:0,className:hn,children:(0,k.jsx)(s.D,{as:"p",className:pn,variant:"ballad",children:e})}),(0,k.jsx)(cn.id,{columnIndex:1}),(0,k.jsx)(cn.id,{columnIndex:2,children:(0,k.jsx)("button",{"data-testid":"top-bar-forward-button","aria-label":e,className:yn,onClick:n,children:a?(0,k.jsx)(Ta.e,{}):(0,k.jsx)(ja.V,{})})})]})}),Tn=({track:e,contextUri:i,index:a,usePlayContextItem:n})=>(0,k.jsx)(Xe.cp,{uid:e.id,uri:e.uri,isPlayable:e.isPlayable,isMOGEFRestricted:e.is19PlusOnly,isExplicit:e.isExplicit,contextUri:i,name:e.name,imgUrl:e.album.imgUrl,index:a,album:e.album,artists:e.artists,usePlayContextItem:n});let Fn=function(e){return e[e.SEARCH=0]="SEARCH",e[e.ALBUM=1]="ALBUM",e[e.ARTIST=2]="ARTIST",e[e.PODCAST=3]="PODCAST",e[e.PLAYLIST=4]="PLAYLIST",e[e.ALBUMRESULTS=5]="ALBUMRESULTS",e[e.ARTISTRESULTS=6]="ARTISTRESULTS",e[e.PODCASTRESULTS=7]="PODCASTRESULTS",e[e.EPISODERESULTS=8]="EPISODERESULTS",e[e.TRACKRESULTS=9]="TRACKRESULTS",e}({});const Rn=(e,i)=>"GO_BACK"===i.type?1===e.breadcrumbs.length?e:e={...e,breadcrumbs:e.breadcrumbs.slice(0,e.breadcrumbs.length-1)}:"NAV_TO_ENTITY"===i.type?e={...e,breadcrumbs:[...e.breadcrumbs,i.level]}:("NAV_TO_RESULTS"===i.type?e={...e,breadcrumbs:[...e.breadcrumbs,i.level]}:"CHANGE_TERM"===i.type&&(e={term:i.term,breadcrumbs:[{navType:Fn.SEARCH,term:i.term,title:""}]}),e),An=({resultList:e,level:i,isRTL:a,playlistUri:t,navToResults:l,navToEntity:r,term:o})=>{let m=e;const u=(e=>e.filter((e=>e.type===Na.p.TRACK||e.type===Na.p.EPISODE)).map((({uri:e,id:i})=>({type:(0,d.wj)(e)?Na.p.TRACK:Na.p.EPISODE,uri:e,uid:i,provider:null}))))(e),{usePlayContextItem:p}=(0,ae.n)({uri:`${t.replace("spotify:","spotify:internal:recs:")}:${encodeURIComponent(o)}:${i?.navType??0}`,pages:[{items:u}]},{featureIdentifier:"search"}),v=(0,n.useCallback)(((e,i)=>(0,k.jsx)(jn,{isRTL:a,index:i,label:e.label,onClick:()=>{l({navType:e.type,term:o,title:e.label})}},e.uri)),[a,l,o]),h=(0,n.useCallback)(((e,i)=>e.type===Na.p.ARTIST?(0,k.jsx)(fn,{isRTL:a,index:i,searchResult:e,onClick:()=>{r({navType:Fn.ARTIST,uri:e.uri,title:e.name})}},e.uri):e.type===Na.p.EPISODE?(0,k.jsx)(Cn,{index:i,episode:e,contextUri:t.replace("spotify:","spotify:internal:recs:"),usePlayContextItem:p},e.uri):e.type===Na.p.TRACK?(0,k.jsx)(Tn,{index:i,track:e,contextUri:t.replace("spotify:","spotify:internal:recs:"),usePlayContextItem:p},e.uri):(0,k.jsx)(Nn,{index:i,isRTL:a,searchResult:e,onClick:()=>{r({navType:Fn.ALBUM,uri:e.uri,title:e.name})}},e.uri)),[a,r,t,p]);if(""===o)return(0,k.jsx)("div",{className:F.Z.emptySearchTermContainer});if(!e||0===e?.length)return(0,k.jsxs)("div",{className:F.Z.emptyStateContainer,children:[(0,k.jsx)(s.D,{as:"h1",variant:"canon",children:c.ag.get("search.empty-results-title",o)}),(0,k.jsx)(s.D,{as:"p",variant:"mesto",children:c.ag.get("search.empty-results-text")})]});if(i?.navType===Fn.SEARCH){const i=[{type:Fn.ARTISTRESULTS,label:c.ag.get("playlist.curation.see_all_artists"),uri:"spotify:internal:recs:see-all-artists"},{type:Fn.ALBUMRESULTS,label:c.ag.get("playlist.curation.see_all_album"),uri:"spotify:internal:recs:see-all-albums"},{type:Fn.TRACKRESULTS,label:c.ag.get("playlist.curation.see_all_songs"),uri:"spotify:internal:recs:see-all-songs"}];return m=e,(0,k.jsx)(tn,{renderRow:h,searchResults:m,renderSeeAllRow:v,seeAllXList:i})}return i?.navType===Fn.ALBUM?(0,k.jsx)(ln,{renderRow:h,searchResults:m}):i?.navType===Fn.ARTIST?(0,k.jsx)(sn,{renderRow:h,searchResults:m}):i?.navType===Fn.ALBUMRESULTS?(0,k.jsx)(rn,{renderRow:h,searchResults:m}):i?.navType===Fn.TRACKRESULTS?(0,k.jsx)(on,{renderRow:h,searchResults:m}):i?.navType===Fn.ARTISTRESULTS?(0,k.jsx)(dn,{renderRow:h,searchResults:m}):null},In=({playlistUri:e,onCurationModeChange:i})=>{const[a,t]=(0,n.useState)([]),[l,r]=(0,n.useState)(),o=(0,Fa.S)(),{level:d,changeTerm:m,goBack:u,navToEntity:p,navToResults:v,term:h}=(()=>{const[e,i]=(0,n.useReducer)(Rn,{term:"",breadcrumbs:[]}),{breadcrumbs:a,term:t}=e;return{changeTerm:e=>{i({type:"CHANGE_TERM",term:e})},level:a[a.length-1]||null,goBack:()=>{i({type:"GO_BACK"})},navToEntity:e=>{i({type:"NAV_TO_ENTITY",level:e})},navToResults:e=>{i({type:"NAV_TO_RESULTS",level:e})},term:t}})(),{request:g}=(0,n.useContext)(Ra.Ax);return(0,n.useEffect)((()=>{let e=!0;return(async()=>{if(d)switch(d.navType){case Fn.SEARCH:try{if(!l||l.query!==h&&""!==h){const i=await za(g,h);e&&r(i)}else""===h&&t([])}catch{t([])}l&&t(l.topResults);break;case Fn.ARTISTRESULTS:l&&t(l?.artists);break;case Fn.ALBUMRESULTS:l&&t(l?.albums);break;case Fn.TRACKRESULTS:l&&t(l?.tracks);break;case Fn.EPISODERESULTS:l&&t(l?.episodes);break;case Fn.ALBUM:try{const i=await Qa(g,d.uri,100,0);e&&i&&t(i.tracks)}catch{t([])}break;case Fn.ARTIST:try{const i=await Ha(g,d.uri,100,0);e&&i&&t([...i.albums,...i.tracks])}catch{t([])}}})(),()=>{e=!1}}),[d,h,l,g]),(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("section",{className:F.Z.playlistInlineCurationSection,children:[(0,k.jsxs)("div",{className:F.Z.playlistInlineCurationWrapper,children:[(0,k.jsx)(s.D,{as:"h1",className:F.Z.playlistInlineCurationTitle,variant:"canon",children:c.ag.get("playlist.curation.title")}),(0,k.jsx)(n.Suspense,{fallback:null,children:(0,k.jsx)(nn,{placeholder:c.ag.get("playlist.curation.search_placeholder"),onFocus:()=>{i(!0)},onChange:e=>{m(e)}})})]}),(0,k.jsx)("button",{className:F.Z.playlistInlineCurationCloseButton,onClick:()=>i(!1),children:(0,k.jsx)(wi.k,{"aria-label":c.ag.get("close")})})]}),null!==d&&d.navType!==Fn.SEARCH?(0,k.jsxs)("button",{className:F.Z.playlistInlineCurationBackButton,onClick:()=>u(),children:[o?(0,k.jsx)(ja.V,{"aria-label":c.ag.get("navbar.go-back"),className:F.Z.icon}):(0,k.jsx)(Ta.e,{"aria-label":c.ag.get("navbar.go-back"),className:F.Z.icon}),(0,k.jsx)(s.D,{as:"p",variant:"cello",children:d.title})]}):null,(0,k.jsx)("div",{className:F.Z.searchResultListContainer,"data-testid":"playlist-inline-curation-results",children:(0,k.jsx)(An,{playlistUri:e,term:h,level:d,resultList:a,navToEntity:p,navToResults:v,isRTL:o})})]})};var Dn=a(20187),En=(a(56321),a(88993)),_n=a(61191),Ln=a(15610),Pn=a(20460),wn=a(39017);const Un=3e5;function Vn(e){return["playlist-extender",e]}const Mn=n.memo((function({playlistUri:e,canEdit:i,tracks:a}){const{usePlayContextItem:t}=(0,ae.n)({uri:e.replace("spotify:","spotify:internal:recs:"),pages:[{items:a.map((e=>({...e,provider:null,type:Na.p.TRACK,uid:null})))}]},{featureIdentifier:"playlist_recommendations"}),l=(0,n.useCallback)(((a,n)=>{const l=a.duration;return(0,k.jsx)(Xe.cp,{index:n,imgUrl:a.album.imageUrl,contextUri:e.replace("spotify","spotify:internal:recs"),uri:a.uri,isPlayable:!a.isMOGEFRestricted,name:a.name,artists:a.artists,album:{...a.album,imgUrl:a.album.imageUrl},isExplicit:a.explicit,isMOGEFRestricted:a.isMOGEFRestricted,usePlayContextItem:t,durationMs:l,shouldRenderDuration:!i,internalLink:!0},`${n}-${a.uri}`)}),[e,t,i]),s=(0,n.useMemo)((()=>[Xe.QD.TITLE_AND_ARTIST,Xe.QD.ALBUM,Xe.QD.ADDED_AT,Xe.QD.ADD]),[]),r=(0,n.useCallback)((e=>({uri:e.uri,uid:e.id})),[]),o=(0,n.useMemo)((()=>a.slice(0,Math.min(a.length,10))),[a]);return(0,k.jsx)(Xe.Pv,{ariaLabel:c.ag.get("playlist.extender.recommended.header"),nrTracks:Math.min(a.length,10),rowPlaceholder:Xe.hU,tracks:o,renderRow:l,resolveItem:r,columns:s},`${e}-recommended`)})),On=n.memo((function({playlistUri:e,playlistLength:i,canEdit:a}){const{tracks:t,refresh:l}=((e,i=10)=>{const a=2*i,t=3*i,l=(0,wn.useQueryClient)(),s=(0,n.useRef)(0),[r,d]=(0,n.useState)(e),[c,m]=(0,n.useState)((()=>l.getQueryData(Vn(e),{stale:!1})??[])),u=(0,n.useRef)(c.map((e=>e.id))),k=(0,n.useContext)(En.Z),{spec:p,logger:v}=(0,ce.fU)(o.T,{data:{uri:e}}),h=(0,n.useMemo)((()=>p.recommendedFactory()),[p]);(0,Pn.F)(Ln.XL.OPERATION_COMPLETE,(({data:i})=>{i.uri===e&&(i.operation===Ln.If.ADD?m((e=>e.filter((e=>i.uris.every((i=>i!==e.uri)))))):i.operation===Ln.If.REMOVE&&m((e=>e.filter((e=>i.items.every((i=>i.uri!==e.uri)))))),i.operation!==Ln.If.ADD&&i.operation!==Ln.If.REMOVE||l.invalidateQueries(Vn(e)))}));const g=(0,n.useRef)(!0);(0,n.useEffect)((()=>(g.current||(m([]),d(e),u.current=[],s.current=s.current+1),g.current=!0,()=>{s.current=s.current+1})),[e]),(0,n.useEffect)((()=>{if(c.length<a){const e=Math.min(a,t-c.length),i=s.current,n=Vn(r),o=g.current&&0===u.current.length,d=()=>k.getRecommendedTracks(r,u.current,e);(o?l.fetchQuery({queryKey:n,queryFn:d,staleTime:Un,cacheTime:Un}):d()).then((a=>{if(i!==s.current)return;const t=a.map((e=>e?.uri&&_n.o.from(e.uri).id)).filter((e=>null!==e));a.length<e&&u.current.length?u.current=[]:u.current=[...u.current,...t],m((e=>[...e,...a])),o&&l.setQueryData(n,a)}))}g.current=!1}),[a,t,k,r,c.length,l]);const y=(0,n.useCallback)((()=>{if(p){const e=h.refreshButtonFactory().hitRefreshContent();v.logInteraction(e)}m((e=>e.slice(i)))}),[v,h,p,i]);return{tracks:c.slice(0,i),_bufferedTracks:c.slice(i),refresh:y}})(e),r=!i||0===i,d=(0,Dn.s)(),m=`${e}|${u=t,u?u.map((e=>e.uri)):[]}`;var u;J({context:m,shouldFire:!!t.length});const p=r?c.ag.get("playlist.extender.title.in.playlist"):c.ag.get("playlist.extender.songs.in.playlist");return d?t.length>0?(0,k.jsxs)("div",{className:F.Z.recommendedTrackList,children:[(0,k.jsx)("div",{className:F.Z.top,children:(0,k.jsxs)("div",{className:F.Z.header,children:[(0,k.jsx)(s.D,{variant:"canon",children:c.ag.get("playlist.extender.recommended.title")}),(0,k.jsx)(s.D,{variant:"mesto",className:F.Z.subtitle,children:p})]})}),d&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(Mn,{playlistUri:e,canEdit:a,tracks:t}),(0,k.jsx)(gi.o,{className:F.Z.refreshButton,onClick:l,children:c.ag.get("playlist.extender.refresh")})]})]}):null:(0,k.jsx)("div",{className:F.Z.recommendedTrackList,children:(0,k.jsx)("div",{className:F.Z.top,children:(0,k.jsxs)("div",{className:F.Z.header,children:[(0,k.jsx)(s.D,{variant:"canon",children:c.ag.get("playlist.extender.recommended.title")}),(0,k.jsx)(s.D,{variant:"mesto",className:F.Z.subtitle,children:c.ag.get("web-player.playlist.recommender-dsa-message")})]})})})})),Bn=n.lazy((()=>a.e(7427).then(a.bind(a,8757)))),Zn=n.lazy((()=>Promise.resolve().then(a.bind(a,56790)))),Wn=n.lazy((()=>a.e(1021).then(a.bind(a,97834)))),Kn=n.lazy((()=>a.e(5457).then(a.bind(a,37263)))),zn=new Set([]),Qn=n.memo((function({playlist:e,capabilities:i}){const{metadata:{uri:a,name:u,images:p,totalLength:v,unfilteredTotalLength:h,isOwnedBySelf:N,hasEpisodes:x,canAdd:b,canRemove:f,formatListData:C,hasDateAdded:j,collaborators:T,isPublished:M,hasSpotifyAudiobooks:O},contents:{items:B}}=e,{spec:Z,logger:W,UBIFragment:K}=(0,ce.fU)(o.T,{data:{uri:a}}),Q=(0,V.k)(),ee=(0,r.W6)(me.OC,{loadingValue:!1}),{isCompactMode:re}=(0,L.mJ)(),pe=n.useMemo((()=>Z.headerFactory()),[Z]),ve=n.useMemo((()=>Z.tracklistFactory()),[Z]),he=n.useMemo((()=>Z.actionBarFactory()),[Z]),ge="chart"===C?.type,ye="concerts-near-you"===C?.type&&ee,Se="live-streams"===C?.type,Ne=["blend","celebrity-blend","friends-mix"].indexOf(C?.type||"")>-1,xe=!!x,be=O||!1,fe="artistsets"===C?.type||"this-is"===C?.attributes["editorial.series"],Ce=C?.attributes||{},je=Ce.header_image_url_desktop||Ce.image_url||null,Te=b&&f,{inlineCurationModeIsOn:Fe,handleInlineCurationModeChange:Re}=((e,i)=>{const[a,t]=(0,n.useState)(e&&0===i),{scrollNodeChildRef:l}=(0,n.useContext)($.VX),s=(0,n.useRef)(a);return(0,n.useEffect)((()=>{const e=!s.current;l&&e&&a&&l.current?.scrollIntoView({block:"end",behavior:"smooth"}),s.current=a}),[l,a]),{inlineCurationModeIsOn:a,handleInlineCurationModeChange:e=>{t(e)}}})(Te&&!be,h),{productState:Ae}=(0,t.v9)(H.Gg),Ie=!!Ae&&parseInt(Ae.ads,10)>0,De="spotify"===e.metadata.owner.username,Ee=(0,t.I0)(),_e=(0,l.ur)(),Le=(0,l.TH)(),Pe=(0,r.W6)(z.XPU,{loadingValue:!1}),we=(0,r.W6)(z.wAP,{loadingValue:!1}),Ue=(0,r.W6)(z.bys,{loadingValue:!1}),Ve=(0,_.useThisisPlaylistExtensionQuery)({uri:a},{cacheTime:5*ie.y,enabled:fe}).data?.playlistV2,Me="Playlist"===Ve?.__typename?Ve.artistsOnTour?.[0]:null,Oe=Ue&&"Playlist"===Ve?.__typename?Ve.concerts?.items.map((e=>e.data)):null,Be=Oe?.flatMap((e=>"ConcertV2"===e.__typename?[e]:[])).map((e=>{const i=[e.location.name,e.location.city].join(c.ag.getSeparator()),a=e.artists.items.flatMap((e=>"Artist"===e.data.__typename?[e.data]:[]));return{venue:i,title:e.title,uri:e.uri,startDate:e.startDateIsoString,imageUrl:a[0]?.visuals.avatarImage?.sources[0]?.url}})),Ze="POP"!==_e?new URLSearchParams(Le.search).get("uid"):null,We=(0,U.o)(),{filter:Ke}=(0,n.useContext)(A.fo),{sortState:ze}=(0,n.useContext)(I.Gb),Qe=(0,n.useContext)(ne.ZF),He=(0,n.useRef)(null),Je=(0,n.useRef)(null),[Ge]=p,qe=(0,G.Z)(null!==je?je:Ge?.url||null),{isPlaying:Xe,isActive:$e,togglePlay:ei,usePlayContextItem:ii}=(0,ae.n)(function(e,i,a){const n={uri:e};return(0,te.R)(n,i),(0,le.I)(n,(0,se.cj)(a)),n}(a,(0,R._j)(ze),Ke),{featureIdentifier:"playlist"}),ai=(0,n.useCallback)((()=>{const e=(0,Y.aK)({isPlaying:Xe,isActive:$e,spec:he.playButtonFactory(),logger:W,uri:a});ei({loggingParams:e})}),[Xe,$e,ei,he,W,a]),ni=(0,n.useCallback)((e=>{const i=e.split(/[\r\n]+/g).map((e=>(0,d.EC)(e))).filter((e=>null!==e&&((0,d.wj)(e)||(0,d.hn)(e)||(0,d.dB)(e))));if(i.length>0&&b){const e=i.map((e=>e.toURI())),n=He.current?.getSelected()?.slice(-1)?.[0],t={after:n??"end"};Ee((0,m.jV)(a,e,t))}}),[b,Ee,a]);(0,q.aw)(ni);const li=(0,n.useCallback)(((e,i)=>{const n=[...i[P.a[d.JM.TRACK]]||[],...i[P.a[d.JM.LOCAL_TRACK]]||[],...i[P.a[d.JM.EPISODE]]||[],...i[P.a[d.JM.ALBUM]]||[]];n.length>0&&b&&(W.logInteraction(Z.dragAddToPlaylist({playlist:a,itemToBeAdded:n[0]})),Ee((0,m.jV)(a,n)),We({targetUri:a,intent:"add",type:"drop"}))}),[b,W,Z,a,Ee,We]),si=(0,oe.vI)(ue.k.RichPlaylistPages,Le),ri=(0,d.EC)(a)?.id;(0,w.W)(a);const oi=(0,t.v9)(X.eZ),di=(0,ke.J)(oi||{},ri||""),ci=!be&&Q&&(Te&&!Fe||!De&&(si||di)&&0!==h),mi=!be&&N&&Q;J({context:a,shouldFire:!ci});const ui=T?.count??1,[ki]=(0,D.d4)(),pi="plays"===Ce.rank_type,vi=(0,n.useMemo)((()=>(0,R.RG)({isMixedMedia:xe,hasDateAdded:j,isLive:Se,isConcert:ye,isBlend:Ne,nrCollaborators:ui,isBooklist:be,isCompactMode:re,isChart:ge,showPlayCount:pi})),[xe,j,Se,ye,Ne,ui,be,re,ge,pi]),hi=(0,n.useMemo)((()=>{let e;return e=Qe.getCapabilities().canSort?be?new Set(I.i1):new Set((0,R.yj)(vi)):zn,e}),[vi,be,Qe]),gi=(0,r.W6)(z.OBF)&&be;return(0,k.jsxs)(n.Suspense,{fallback:null,children:[(0,k.jsx)(S.$,{children:(0,de.T5)({playlistName:u,userName:e.metadata.owner.displayName||"",isSpotifyOwned:De})}),(0,k.jsx)(y.Z,{types:b&&!be?[P.a[d.JM.TRACK],P.a[d.JM.LOCAL_TRACK],P.a[d.JM.EPISODE],P.a[d.JM.ALBUM]]:[],onDrop:li,children:(0,k.jsxs)("section",{role:"presentation",className:F.Z.playlist,"data-testid":"playlist-page","data-test-uri":a,children:[(0,k.jsx)(ga.s,{metadata:e.metadata,isPlaying:Xe,isPublished:M,totalItems:ki,togglePlay:ai,backgroundColor:qe,spec:pe}),(0,k.jsxs)("div",{className:F.Z.playlistContent,children:[(0,k.jsx)(ka,{playlist:e,capabilities:i,spec:he,isPlaying:Xe,isActive:$e,togglePlay:ai,isBooklist:be,backgroundColor:qe,tracklistDomRef:Je,isConcert:ye,sortableColumns:hi}),(0,k.jsx)(n.Suspense,{fallback:null,children:(0,k.jsx)(Bn,{formatListData:e.metadata.formatListData})}),!Ue&&Me?.upcomingEventsCount?(0,k.jsx)(Zn,{artistConcertsUri:Me.uri||"",artistImageUrl:Me.imageUrl||"",artistName:Me.title||"",spec:Z}):null,Ue&&!!Me&&Be&&Be.length>0&&(0,k.jsx)(n.Suspense,{fallback:null,children:(0,k.jsx)(Wn,{liveEvents:Be,artistConcertsUri:Me.uri||"",artistName:Me.title||"",spec:Z})}),(0,k.jsxs)("div",{className:"contentSpacing",children:[Ie?(0,k.jsx)(g,{playlistUri:a}):null,Pe&&Ie&&De?(0,k.jsx)(Kn,{uri:a,playlistName:u}):null,e.metadata.hasSpotifyAudiobooks&&we&&(0,k.jsxs)("div",{className:F.Z.noBooklistSupportContainer,children:[(0,k.jsx)(s.D,{variant:"cello",semanticColor:"textBase",children:c.ag.get("web-player.playlist.booklist-not-supported-title")}),(0,k.jsx)(s.D,{variant:"ballad",semanticColor:"textSubdued",children:c.ag.get("web-player.playlist.booklist-not-supported.message")})]}),v>0&&(0,k.jsx)(n.Suspense,{fallback:null,children:gi?(0,k.jsx)(Ye,{initialItems:B,contextUri:a,nrItems:v,canEdit:Te}):(0,k.jsx)(K,{spec:ve,children:(0,k.jsx)(E.a,{columns:vi,children:ge?(0,k.jsx)(ti,{ariaLabel:u,nrTracks:v,playlistUri:a,showPlayCount:pi,scrollToUid:Ze,usePlayContextItem:ii,tracklistDomRef:Je,sortableColumns:hi},a):(0,k.jsx)(Ca,{ariaLabel:u,nrTracks:v,playlistUri:a,playlistName:u,isMixedMedia:xe,isLive:Se,isConcert:ye,isBlend:Ne,isBooklist:be,canEdit:Te,scrollToUid:Ze,feedbackPath:Ce["dislike-endpoint"],deleteFeedbackPath:Ce["delete-endpoint"],usePlayContextItem:ii,tracklistRef:He,tracklistDomRef:Je,canRemove:f,spec:ve,initialItems:B,isCompactMode:re,sortableColumns:hi},a)})})}),mi&&(0,k.jsx)(n.Suspense,{fallback:null,children:Fe?(0,k.jsx)(In,{playlistUri:a,onCurationModeChange:Re}):(0,k.jsx)("button",{className:F.Z.seeMore,onClick:()=>{Re(!0)},children:(0,k.jsx)(s.D,{as:"div",variant:"mestoBold",children:c.ag.get("playlist.curation.find_more")})})}),ci?(0,k.jsx)("div",{"data-testid":"recommended-track",children:(0,k.jsx)(On,{playlistUri:a,playlistLength:e.metadata.unfilteredTotalLength,canEdit:Te})}):null]})]}),ye&&(0,k.jsx)(ha,{spec:Z.footerSectionFactory()})]})})]})})),Hn=n.memo((function({uri:e}){const i=(0,n.useContext)(ne.ZF).getCapabilities(),{filter:a}=(0,n.useContext)(A.fo),{sortState:t}=(0,n.useContext)(I.Gb),{metadataOptions:l,contentsOptions:s}=(0,qe.d)(t,a),{data:r,isLoading:o,isError:d}=(0,re.Z)(e,l,s);return!r||o?(0,k.jsx)(T.h,{hasError:d,errorMessage:c.ag.get("error.not_found.title.playlist"),loadOffline:i.canModifyOffline}):r.metadata.permissions&&!r.metadata.permissions.canView?(0,k.jsx)(j,{uri:e}):(0,k.jsx)(Qn,{playlist:r,capabilities:i})})),Jn=()=>{const{playlistId:e}=(0,l.UO)(),i=(0,d.FW)((e||"").split("&")[0]).toURI();return(0,k.jsx)(ee.fd,{surface:ee.Tg.PLAYLIST,uris:[i],children:(0,k.jsx)(I.kz,{uri:i,children:(0,k.jsx)(A.hz,{uri:i,children:(0,k.jsx)(D.Y4,{children:(0,k.jsx)(Hn,{uri:i})})})})})}},42955:(e,i,a)=>{a.d(i,{W:()=>o});var n=a(50959),t=a(92389),l=a(4704),s=a(94834),r=a(20982);const o=e=>{const i=(0,t.I0)(),a=(0,l.E)(),o=(0,t.v9)(r.KQ);(0,n.useEffect)((()=>{a&&e!==o&&i((0,s.jZ)(e))}),[e,o,i,a])}},20982:(e,i,a)=>{a.d(i,{KQ:()=>s,M4:()=>o,aj:()=>r,eZ:()=>d});var n=a(23055),t=a(91733);const l=e=>e.seoExperiment,s=(0,n.P1)(l,(e=>e?.uri)),r=(0,n.P1)(l,(e=>e?.[t.p.TRACK])),o=(0,n.P1)(l,(e=>e?.[t.p.ALBUM])),d=(0,n.P1)(l,(e=>({...e?.[t.p.PLAYLISTV2],...e?.[t.p.PLAYLIST]})))},19916:(e,i,a)=>{a.d(i,{vI:()=>n});a(55330);const n=(e,i)=>{const a=i?new URLSearchParams(i.search):void 0;return"1"===a?.get(e)}},57409:(e,i,a)=>{a.d(i,{k:()=>n});let n=function(e){return e.I18nSEO="i18nSEO",e.RTPTrackCredits="rtpv2p2",e.I18nAdditionalPages="i18nap",e.RichPlaylistPages="rpp",e.LFC="lfc",e.ILRAlbum="ilra",e.ILRAlbumAbove="ilraa",e.ILRAlbumBelow="ilrab",e}({})},52483:(e,i,a)=>{a.d(i,{y:()=>s,J:()=>r});a(14534),a(53261);let n=function(e){return e.LFC="lfc",e.TRACK_INTERNAL_LINK_RECOMMENDER="track-ilr",e.RPP="rich-playlist-pages-2",e}({}),t=function(e){return e.CONTROL="0",e.VARIANT="1",e}({});const l=({treatment:e,entityId:i,experimentId:a,treatmentVariation:n})=>{if(e&&e[i]){const t=e[i].find((e=>e.experimentId===a));return t?.treatment===n}return!1},s=(e,i)=>l({treatment:e,entityId:i,experimentId:n.LFC,treatmentVariation:t.VARIANT}),r=(e,i)=>l({treatment:e,entityId:i,experimentId:n.RPP,treatmentVariation:t.VARIANT})},1054:(e,i,a)=>{a.d(i,{Z:()=>n});const n={cards:"TGW6mpr34dHAhhFh0pfw",tourCard:"pQmF4tvRpUeLWgPKUcW7",cardImage:"mGY3ER0iIvb1NbJ1d7X4",cardContent:"JHz_5gqDYpq9Lw3pIac_",subtitle:"oTFzEDWGQSLME1nHjJrt",title:"HPCUzqQRn7oae4vJa3y9",venue:"YxZlxyNx0MHxSVO51TVQ",cardLink:"_B5m05rOGq0BKdTa7al5",cardButton:"StPcf0AvSM0c18nwF4hJ",eventCard:"KhaSITGJnz5MH4qDsYkK",interestedIcon:"ERx0RCdRdFFmYdmZR1P5",concertsCarousel:"nX5e9EyU1GmU42OFVHwH",carouselContent:"MIgjuGue6dRaJWwfUX0K",allEventsCard:"C5dyMaEg91RyIp9YajnW",concertsCarouselControls:"himyaJTaj2PpeC7nuAH5",carouselControlPrev:"KfXbOs2l5lLjtz9R4DiW",carouselControlNext:"yy5akXrxTifXTssHWubJ"}}}]);
//# sourceMappingURL=xpui-routes-playlist.js.map