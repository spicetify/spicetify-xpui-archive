"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[7553],{82190:(e,t,a)=>{a.r(t),a.d(t,{default:()=>se});a(14534),a(99801);var l=a(50959),n=a(92389),o=a(76917),r=a(34351),s=a(29624),i=a(90880),c=a(5701),u=a(8968),d=a(45849),g=a(77864),m=a(71851),p=a(15120),f=a(41812),h=a(85712),y=a(70267),x=a(61058),j=a(43095),k=a(6473),T=a(90696),C=a(42643),D=a(82946),F=a(7511);function b(e,t,a){const l={uri:e};return(0,T.R4)(l,t),(0,C.U6)(l,a?.map((e=>(0,D.cj)(e)??null)).filter(F.K)),l}var I=a(78776),S=a(22038),P=a(59242),E=a(84816),w=a(76999),v=a(49597),A=a(79258),L=a(83524),R=a(13323),M=a(6962),N=a(42846),_=a(79446),Q=a(97253),U=a(77558),O=a(11527);const B=l.memo((({tracklistDomRef:e})=>{const{spec:t,logger:a}=(0,P.fU)(N.createDesktopSearchBarEventFactory,{}),n=(0,l.useCallback)((()=>{a.logInteraction(t.filterFieldFactory().keyStrokeFilter())}),[a,t]),o=(0,l.useCallback)((()=>{a.logInteraction(t.filterFieldFactory().hitClearFilter())}),[a,t]),r=(0,_.v)().filter((e=>h.P0.includes(e)));return(0,O.jsxs)("div",{className:m.Z.searchBoxContainer,children:[(0,O.jsx)(l.Suspense,{fallback:null,children:(0,O.jsx)(Q.K,{placeholder:c.ag.get("playlist.search_in_playlist"),clearOnEscapeInElementRef:e,onFilter:n,onClear:o})}),(0,O.jsx)(U.l,{columns:r})]})}));var z=a(38776),K=a(54472),G=a(36208);const V="bKlB8pmFVoswJlZ_jhtL",H=l.memo((function({metadata:e,onClickTogglePlay:t,isPlaying:a,spec:n,logger:o,backgroundColor:r,canSort:s,canFilter:i}){const{uri:u,name:d,totalLength:g}=e,m=(0,l.useRef)(null),p=(0,l.useMemo)((()=>n.actionBarFactory()),[n]),f=(0,l.useMemo)((()=>p.shuffleButtonContainerFactory()),[p]),h=g>0,y=g>0,x=s&&i,j=(0,G.Q)(),k=(0,l.useCallback)(((e,t)=>{const a=p.downloadButtonFactory();t===R.mc.ADD?o.logInteraction(a.hitDownload({itemToDownload:u})):t===R.mc.REMOVE?o.logInteraction(a.hitRemoveDownload({itemToRemoveFromDownloads:u})):t===R.mc.NO_PERMISSION&&o.logInteraction(a.hitUiReveal())}),[p,o,u]),T=(0,z.j)();return(0,O.jsx)(E.o,{backgroundColor:r,children:(0,O.jsxs)(E.F,{children:[y?(0,O.jsx)(A.$,{onClick:t,isPlaying:a,size:T,uri:u,ariaPauseLabel:c.ag.get("playlist.a11y.pause",d),ariaPlayLabel:c.ag.get("playlist.a11y.play",d)}):null,j&&(0,O.jsx)(P.Nh,{spec:f,children:(0,O.jsx)(K.K,{entityName:d,contextUri:u,activationPlacement:"bottomEnd",size:T})}),(0,O.jsx)(w.o,{uri:u,canDownload:h,isFollowing:!0,onFollow:()=>{},size:T,onClick:k}),x?(0,O.jsx)(P.Nh,{spec:p,children:(0,O.jsx)(B,{tracklistDomRef:m})}):(0,O.jsx)("div",{className:V,children:(0,O.jsx)(v.F,{property:M.FM,renderNewExperience:()=>(0,O.jsx)(L.A,{options:[],onSelect:()=>{},selected:null,enableViewModeMenu:!0})})})]})})}));var Z=a(38683),J=a(44191),W=a(76457),Y=a(43113),$=a(47001),q=a(39017),X=a(33329),ee=a(87296),te=a(31027),ae=a(95467),le=a(55170);const ne=[f.QD.INDEX,f.QD.TITLE_AND_ARTIST,f.QD.ALBUM,f.QD.ADDED_AT,f.QD.DURATION],oe=({data:e,canFilter:t,canSort:a})=>{const{uri:n,name:i,totalLength:T}=e.metadata,C=(0,l.useRef)(null),D=(0,k.Y5)("#5038a0"),{filter:F}=(0,l.useContext)(p.fo),{sortState:I,setSortState:E}=(0,l.useContext)(h.Gb),{spec:w,logger:v}=(0,P.fU)(s.Q,{data:{uri:n}}),A=l.useMemo((()=>w.headerFactory()),[w]),L=l.useMemo((()=>w.tracklistFactory()),[w]);(0,l.useEffect)((()=>{null===I.column&&E({column:f.QD.ADDED_AT,order:f.kn.DESC})}),[I,E]);const R=(0,o.ur)(),M=(0,o.TH)(),N="POP"!==R?new URLSearchParams(M.search).get("uri"):null,{isPlaying:_,togglePlay:Q,usePlayContextItem:U,isActive:B}=(0,S.n)(b(n,(0,Z.w)(I),[F]),{featureIdentifier:"your_library",referrerIdentifier:"your_library"}),z=()=>{const e=(0,Y.aK)({isPlaying:_,isActive:B,spec:w.actionBarFactory().playButtonFactory(),logger:v,uri:n});Q({loggingParams:e})},[K]=(0,W.d4)(),{isCompactMode:G}=(0,j.mJ)(),V=(({isCompactMode:e=!1})=>{const t=[...ne];return e&&t.splice(t.indexOf(f.QD.TITLE_AND_ARTIST),1,f.QD.TITLE,f.QD.ARTIST),t})({isCompactMode:G});return(0,O.jsx)(y.a,{columns:V,children:(0,O.jsxs)("section",{role:"presentation",className:m.Z.playlist,"data-testid":"playlist-page",children:[(0,O.jsx)(u.$,{children:c.ag.get("playlist.page-title",i)}),(0,O.jsx)(x.s,{metadata:{...e.metadata,hasSpotifyTracks:!0},totalItems:K,isPlaying:_,togglePlay:z,backgroundColor:D,specLikedSongs:A}),(0,O.jsx)(H,{metadata:e.metadata,onClickTogglePlay:z,isPlaying:_,spec:w,logger:v,backgroundColor:D,canSort:a,canFilter:t}),(0,O.jsx)("div",{className:"contentSpacing",children:T>0?(0,O.jsx)(l.Suspense,{fallback:(0,O.jsx)(g.h,{hasError:!1,errorMessage:c.ag.get("error.request-collection-tracks-failure")}),children:(0,O.jsx)(P.Nh,{spec:L,children:(0,O.jsx)(J.p,{nrTracks:T,collectionUri:n,scrollToUri:N,usePlayContextItem:U,outerDomRef:C,spec:L,initialItems:e.contents.items,isCompactMode:G})})}):(0,O.jsx)(d.u,{message:c.ag.get("collection.empty-page.songs-subtitle"),title:c.ag.get("collection.empty-page.songs-title"),linkTo:"/search",linkTitle:c.ag.get("collection.empty-page.songs-cta"),renderInline:!0,children:(0,O.jsx)(r.F,{"aria-hidden":"true"})})})]})})},re=l.memo((function({user:e,uri:t}){const{filter:a}=(0,l.useContext)(p.fo),{sortState:n}=(0,l.useContext)(h.Gb),o=function(e,t,a){const n=(0,l.useContext)(I.H),o=(0,q.useQueryClient)(),r=(0,X.jP)((()=>["useLikedSongs",e,a]),[e,a]),{data:s}=(0,q.useQuery)(r(),(()=>n.getTracks(a)),{cacheTime:18e5,keepPreviousData:!0,refetchOnWindowFocus:!1}),i=(0,l.useCallback)((()=>{o.invalidateQueries(r())}),[o,r]);(0,te.b)(ee.EW.UPDATE,i);const c=(0,le.I2)(t.id);return c&&s?{metadata:{uri:e,name:c.name,images:c.images,totalLength:s?.totalLength,unfilteredTotalLength:s.unfilteredTotalLength,owner:(0,ae.V)(t)},contents:s}:null}(t,e,{offset:0,limit:25,sort:(0,Z.w)(n),filters:[a]}),r=(0,l.useContext)(I.H).getCapabilities();return o?(0,O.jsx)(oe,{data:o,canFilter:r.canFilterTracksAndEpisodes&&o.metadata.unfilteredTotalLength>0,canSort:r.canSortTracksAndEpisodes&&o.metadata.unfilteredTotalLength>0}):(0,O.jsx)(g.h,{hasError:!1,errorMessage:c.ag.get("error.not_found.title.playlist"),loadOffline:r.canModifyOffline})})),se=()=>{const{user:e}=(0,n.v9)($.Gg);if(null===e)return null;const t=(0,i.wG)(e.id).toURI();return(0,O.jsx)(h.kz,{uri:t,children:(0,O.jsx)(p.hz,{uri:t,children:(0,O.jsx)(W.Y4,{children:(0,O.jsx)(re,{uri:t,user:e})})})})}}}]);
//# sourceMappingURL=xpui-routes-collection-songs.js.map