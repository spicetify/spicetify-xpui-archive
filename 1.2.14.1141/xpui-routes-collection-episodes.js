"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[1289],{56584:(e,t,a)=>{a.d(t,{$:()=>o,Q:()=>n});var r=a(59496),l=a(76285),i=a(88114),s=a(4637);const n=(0,r.createContext)({setSortState:()=>{throw new Error("setSortState must be used within a LibrarySortProvider")},sortState:i.oT.ADDED_AT}),o=r.memo((function({uri:e,children:t,defaultSortOption:a}){return(0,s.jsx)(l.r,{uri:e,defaultState:a,sortContext:n,children:t})}))},88114:(e,t,a)=>{a.d(t,{Aq:()=>u,Bf:()=>x,EY:()=>h,G5:()=>p,JV:()=>S,MY:()=>o,Ru:()=>A,ZP:()=>L,a6:()=>T,aY:()=>P,e3:()=>g,ei:()=>n,o$:()=>d,oT:()=>s,pT:()=>m,rJ:()=>b,u3:()=>f,w0:()=>y});var r=a(55740),l=a(17347),i=a(22217);let s=function(e){return e.SHOW_ALPHABETICAL="SHOW_ALPHABETICAL",e.BOOK_ALPHABETICAL="BOOK_ALPHABETICAL",e.EPISODE_ALPHABETICAL="EPISODE_ALPHABETICAL",e.PLAYLIST_ALPHABETICAL="PLAYLIST_ALPHABETICAL",e.ALBUM_ALPHABETICAL="ALBUM_ALPHABETICAL",e.ADDED_AT="ADDED_AT",e.CREATOR_NAME="CREATOR_NAME",e.CREATOR_NAME_ALPHABETICAL="CREATOR_NAME_ALPHABETICAL",e.ALBUM_CREATOR_NAME="ALBUM_CREATOR_NAME",e.RECENTLY_PLAYED="RECENTLY_PLAYED",e.MOST_RELEVANT="MOST_RELEVANT",e.CUSTOM_ORDER="CUSTOM_ORDER",e}({});const n={"show-alphabetical":s.SHOW_ALPHABETICAL,"book-alphabetical":s.BOOK_ALPHABETICAL,"episode-alphabetical":s.EPISODE_ALPHABETICAL,"playlist-alphabetical":s.PLAYLIST_ALPHABETICAL,"album-alphabetical":s.ALBUM_ALPHABETICAL,"recently-added":s.ADDED_AT,"creator-name":s.CREATOR_NAME,"creator-name-alphabetical":s.CREATOR_NAME_ALPHABETICAL,"album-creator-name":s.ALBUM_CREATOR_NAME,"recently-played":s.RECENTLY_PLAYED,"playlist-most-relevant":s.MOST_RELEVANT,"playlist-custom-order":s.CUSTOM_ORDER},o={[s.RECENTLY_PLAYED]:{key:"recently-played",get value(){return r.ag.get("collection.sort.recently-played")}},[s.ADDED_AT]:{key:"recently-added",get value(){return r.ag.get("collection.sort.recently-added")}},[s.SHOW_ALPHABETICAL]:{key:"show-alphabetical",get value(){return r.ag.get("collection.sort.alphabetical")}},[s.BOOK_ALPHABETICAL]:{key:"book-alphabetical",get value(){return r.ag.get("collection.sort.alphabetical")}},[s.EPISODE_ALPHABETICAL]:{key:"episode-alphabetical",get value(){return r.ag.get("collection.sort.alphabetical")}},[s.PLAYLIST_ALPHABETICAL]:{key:"playlist-alphabetical",get value(){return r.ag.get("collection.sort.alphabetical")}},[s.ALBUM_CREATOR_NAME]:{key:"album-creator-name",get value(){return r.ag.get("collection.sort.creator")}},[s.CREATOR_NAME]:{key:"creator-name",get value(){return r.ag.get("collection.sort.creator")}},[s.CREATOR_NAME_ALPHABETICAL]:{key:"creator-name-alphabetical",get value(){return r.ag.get("collection.sort.alphabetical")}},[s.ALBUM_ALPHABETICAL]:{key:"album-alphabetical",get value(){return r.ag.get("collection.sort.alphabetical")}},[s.MOST_RELEVANT]:{key:"playlist-most-relevant",get value(){return r.ag.get("collection.sort.most-relevant")}},[s.CUSTOM_ORDER]:{key:"playlist-custom-order",get value(){return r.ag.get("collection.sort.custom-order")}}},A=[s.ADDED_AT,s.ALBUM_ALPHABETICAL,s.CREATOR_NAME],c={[s.ADDED_AT]:{field:l.lY.ADDED_AT,order:l.As.DESC},[s.ALBUM_ALPHABETICAL]:{field:l.lY.NAME,order:l.As.ASC},[s.CREATOR_NAME]:{field:l.lY.ARTIST_NAME,order:l.As.ASC}};const u=e=>{if(function(e){return A.includes(e)}(e))return c[e]},d=[s.ADDED_AT,s.CREATOR_NAME_ALPHABETICAL],E={[s.ADDED_AT]:{field:l.hx.ADDED_AT,order:l.As.DESC},[s.CREATOR_NAME_ALPHABETICAL]:{field:l.hx.NAME,order:l.As.ASC}};const g=e=>{if(function(e){return d.includes(e)}(e))return E[e]},T=[s.ADDED_AT,s.SHOW_ALPHABETICAL],D={[s.ADDED_AT]:{field:l.aW.ADDED_AT,order:l.As.DESC},[s.SHOW_ALPHABETICAL]:{field:l.aW.NAME,order:l.As.ASC}};const h=e=>{if(function(e){return T.includes(e)}(e))return D[e]},L=[s.ADDED_AT,s.BOOK_ALPHABETICAL],C={[s.ADDED_AT]:l.VN.ADDED_AT,[s.BOOK_ALPHABETICAL]:l.VN.NAME};const p=e=>{if(function(e){return L.includes(e)}(e))return C[e]},y=[s.MOST_RELEVANT,s.RECENTLY_PLAYED,s.ADDED_AT,s.PLAYLIST_ALPHABETICAL,s.CUSTOM_ORDER],_={[s.ADDED_AT]:{field:i.bD.ADDED_AT,order:i.As.DESC},[s.RECENTLY_PLAYED]:{field:i.bD.RECENTLY_PLAYED,order:i.As.ASC},[s.PLAYLIST_ALPHABETICAL]:{field:i.bD.NAME,order:i.As.ASC},[s.MOST_RELEVANT]:{field:i.bD.RELEVANCE,order:i.As.DESC},[s.CUSTOM_ORDER]:void 0};const m=e=>{if(function(e){return y.includes(e)}(e))return _[e]},P=s.ADDED_AT,f=s.ADDED_AT,b=s.ADDED_AT,x=s.MOST_RELEVANT,S=s.ADDED_AT},67981:(e,t,a)=>{a.d(t,{h:()=>E});var r=a(59496),l=a(76218),i=a(52535),s=a(57115),n=a(90633),o=a(56584),A=a(88114),c=a(4637);const u=r.memo((function({sortOptions:e,onSort:t}){const{sortState:a,setSortState:l}=(0,r.useContext)(o.Q),i=(0,r.useCallback)((e=>{const a=A.ei[e];t?.(a),l(a)}),[t,l]),s=e.map((e=>A.MY[e])),u=A.MY[a];return(0,c.jsx)(n.A,{options:s,onSelect:i,selected:u})})),d="VuUpAVlUW_OfMfOcDEID",E=r.memo((function({canSort:e,canFilter:t,filterPlaceholder:a,sortOptions:n}){const{spec:o,logger:A}=(0,s.fU)(l.createDesktopSearchBarEventFactory,{}),E=(0,r.useCallback)((()=>{A.logInteraction(o.filterFieldFactory().keyStrokeFilter())}),[A,o]),g=(0,r.useCallback)((()=>{A.logInteraction(o.filterFieldFactory().hitClearFilter())}),[A,o]),T=(0,r.useCallback)((()=>{A.logInteraction(o.sortButtonFactory().hitSort())}),[A,o]);return(0,c.jsxs)("div",{className:d,children:[t?(0,c.jsx)(r.Suspense,{fallback:null,children:(0,c.jsx)(i.K,{placeholder:a,onFilter:E,onClear:g})}):null,e?(0,c.jsx)(u,{sortOptions:n,onSort:T}):null]})}))},42140:(e,t,a)=>{a.d(t,{$:()=>r.$,Q:()=>r.Q});var r=a(56584)},35132:(e,t,a)=>{a.d(t,{Aq:()=>r.Aq,Bf:()=>r.Bf,EY:()=>r.EY,G5:()=>r.G5,JV:()=>r.JV,Ru:()=>r.Ru,ZP:()=>r.ZP,a6:()=>r.a6,aY:()=>r.aY,e3:()=>r.e3,o$:()=>r.o$,oT:()=>r.oT,pT:()=>r.pT,rJ:()=>r.rJ,u3:()=>r.u3,w0:()=>r.w0});var r=a(88114)},25713:(e,t,a)=>{a.r(t),a.d(t,{default:()=>ge});var r=a(59496),l=a(37055),i=a(55740),s=a(72962),n=a(17286),o=a(1789),A=a(9864),c=a(42140),u=a(35132),d=a(17140),E=a(67033),g=a(87754),T=a(55207),D=a(84389),h=a(57579),L=a(6123),C=a(67981),p=a(82487),y=a(17347);const _={[y.yW.NAME]:o.hI.TITLE,[y.yW.SHOW_NAME]:o.hI.SHOW,[y.yW.ADDED_AT]:o.hI.ADDED_AT},m=[u.oT.ADDED_AT,u.oT.CREATOR_NAME,u.oT.EPISODE_ALPHABETICAL],P={[u.oT.ADDED_AT]:{field:y.yW.ADDED_AT,order:y.As.DESC},[u.oT.CREATOR_NAME]:{field:y.yW.SHOW_NAME,order:y.As.ASC},[u.oT.EPISODE_ALPHABETICAL]:{field:y.yW.NAME,order:y.As.ASC}};const f=e=>{if(function(e){return m.includes(e)}(e))return P[e]},b=e=>{if(!m.includes(e))return;const t=f(e);if(!t?.field)return;const a=_[t.field];if(!a)return;return o.Vd[a].map((e=>t.order?`${e} ${t.order}`:e)).join(",")},x="m9xwK71Ieq9cySIq4FAP",S="PkEMTu8sGqJeQWJ7HvEs",O="DbH2KkRA8yVWWpXGaNSW";var I=a(4637);const R=({metadata:e,canSort:t,backgroundColor:a,isPlaying:r,isOnline:l,togglePlay:s})=>{const n=(0,p.y)(),{uri:o,name:A}=e,c=e.totalLength>0;return(0,I.jsx)(h.o,{backgroundColor:a,children:(0,I.jsxs)(h.F,{children:[c&&(0,I.jsx)(L.$,{onClick:()=>s(),isPlaying:r,size:"lg",uri:o,disabled:!l,ariaPlayLabel:i.ag.get("playlist.a11y.play",A),ariaPauseLabel:i.ag.get("playlist.a11y.pause",A)}),t&&(0,I.jsx)("div",{className:O,children:(0,I.jsx)(C.h,{canSort:n.getCapabilities().canSort,canFilter:n.getCapabilities().canFilter,filterPlaceholder:i.ag.get("playlist.search_in_playlist"),sortOptions:m})})]})})};var M=a(76883),N=a(91560),k=a(33236),B=a(97653),j=a(1858),v=a(70014),H=a(96651),w=a(46873),U=a(56287);const Y="p6DKqBcwmVtxmHt8ju43",W="_OxEpxzAgJiTENfolVUN";var V=a(41567),F=a(57265),$=a(4699),K=a(59642),q=a(14126),G=a(21558),z=a(88513),J=a(37859),Q=a(2437),Z=a(47480),X=a(84179),ee=a(98474);const te={small:64,standard:300,large:640,xlarge:1024},ae=r.memo((function({index:e,contextUri:t,episode:a,onRemove:l,usePlayContextItem:i}){const s=(0,r.useRef)(a.duration.milliseconds-a.timeLeft.milliseconds),n=a.uri,[o,c]=(0,r.useState)(0===a.timeLeft.milliseconds),{filter:u}=(0,r.useContext)(A.fo),E=(0,V.O)(),g=(0,k.jh)(),D=(0,F.o)(),[h]=(0,p.Z)(n,!0),L=(0,X.k)(a.uri,a.isPlayable),C=(0,d.k)(),y=(0,G.Y)((e=>{if(e?.item?.uri===a.uri){const t=(0,z.k)(e)??0;return s.current=t,t}return 0})),{isPlaying:_,isActive:m,togglePlay:P}=i({uri:n,index:e}),{isPlaying:f,isActive:b,togglePlay:x}=(0,T.n)({uri:n,pages:[{items:[{type:J.p.EPISODE,uri:n,uid:null,provider:null}]}]},{featureIdentifier:"your_library",referrerIdentifier:"your_library"});(0,r.useEffect)((()=>{h||l()}),[h,l]),(0,r.useEffect)((()=>{_||a.duration.milliseconds<=s.current&&c(!0)}),[_,a.duration.milliseconds]);const S=(0,r.useCallback)((e=>{e||(s.current=0),c(e)}),[]),O=e=>{if(e.target!==e.currentTarget)return;let r=`${a.name}`;a.show&&(r+=` â€¢ ${a.show.name}`),E(e,[n],r,t)},R=(0,r.useCallback)((()=>{D({type:"click",targetUri:n,intent:"navigate"})}),[n,D]),M=(0,r.useCallback)((()=>{C?(D({type:"click",intent:_?"pause":"play"}),P()):(D({type:"click",intent:f?"pause":"play"}),x())}),[C,_,f,D,P,x]),W=(0,r.useCallback)((e=>(0,I.jsx)(Z.o,{searchWords:[u],textToHighlight:e})),[u]),ae=a.podcastSubscription?.isPaywalled??!1,re=a.podcastSubscription?.isUserSubscribed??!1,{badges:le}=(0,Q.r)({isExplicit:a.isExplicit,isMOGEFRestricted:a.is19PlusOnly,isPaywalled:ae});let ie=!1;(m||!C&&b)&&(ie=!0);const se=(0,B.W6)(ee.el,{loadingValue:!1});return h?(0,I.jsxs)(N.ZP,{value:"row",index:e,children:[(0,I.jsx)("hr",{className:Y,"aria-hidden":!0}),(0,I.jsx)($._,{menu:(0,I.jsx)(j.k,{uri:n,showUri:a.show?.uri,isPlayed:o,onMarkAsPlayed:S}),children:se?(0,I.jsx)(H.k,{requestId:a.requestId,index:e,uri:n,uid:n,size:g,images:a.images.map((e=>({url:e.url,width:e.width||(e.label?te[e.label]:null),height:e.height||(e.label?te[e.label]:null)}))),isPaywalled:ae,isUserSubscribed:re,name:a.name,highlightText:W,showName:a.show?.name,showUri:a.show?.uri,description:a.description,isPlayable:L,fullyPlayed:o,durationMs:a.duration.milliseconds,releaseDate:a.release.date||"",resumePositionMs:s.current,handleDragStart:O,handlePlaybackClick:M,handleClick:R,isCurrentlyPlaying:ie,isPlaying:C?_:f,position:ie?y:void 0,episodeSharingInfo:null,onMarkAsPlayed:S,badges:(0,I.jsxs)(I.Fragment,{children:[le.explicit&&(0,I.jsx)(K.N,{}),le.paid&&(0,I.jsx)(U.g,{}),le.nineteen&&(0,I.jsx)(q.X,{size:16})]}),playButtonWrapper:e=>(0,I.jsx)(w.l,{enabled:ae&&!re,showUri:a.show?.uri||void 0,children:e})}):(0,I.jsx)(v.X,{requestId:a.requestId,index:e,uri:n,uid:n,size:g,images:a.images.map((e=>({url:e.url,width:e.width||(e.label?te[e.label]:null),height:e.height||(e.label?te[e.label]:null)}))),isPaywalled:ae,isUserSubscribed:re,name:a.name,highlightText:W,showName:a.show?.name,showUri:a.show?.uri,description:a.description,isPlayable:L,fullyPlayed:o,durationMs:a.duration.milliseconds,releaseDate:a.release.date||"",resumePositionMs:s.current,handleDragStart:O,handlePlaybackClick:M,handleClick:R,isCurrentlyPlaying:ie,isPlaying:C?_:f,position:ie?y:void 0,episodeSharingInfo:null,onMarkAsPlayed:S,badges:(0,I.jsxs)(I.Fragment,{children:[le.explicit&&(0,I.jsx)(K.N,{}),le.paid&&(0,I.jsx)(U.g,{}),le.nineteen&&(0,I.jsx)(q.X,{size:16})]}),playButtonWrapper:e=>(0,I.jsx)(w.l,{enabled:ae&&!re,showUri:a.show?.uri||void 0,children:e})})})]}):null})),re=r.memo((function({contextUri:e,usePlayContextItem:t}){const a=(0,r.useContext)(g.H),{sortState:l}=(0,r.useContext)(c.Q),[i,s]=(0,r.useState)({totalLength:0,unfilteredTotalLength:0,offset:0,items:[],limit:50}),n=(0,r.useRef)(!1),o=(0,r.useRef)(0),u=(0,r.useRef)(0),{filter:d}=(0,r.useContext)(A.fo),E=(0,r.useCallback)((()=>{u.current++}),[]),{ref:T,breakpoint:D}=(0,k.Db)({[k.Uo.MEDIUM]:0,[k.Uo.LARGE]:600}),h=(0,r.useCallback)(((e=!1)=>{const t=o.current;null!==t&&(n.current||(n.current=!0,(async e=>{const t=await a.getEpisodes({offset:e-u.current,limit:50,sort:f(l),filter:d});return u.current=0,t})(Number(t)).then((a=>{s((r=>{const l=Number(a.offset)+a.items.length,i=e?[]:[...r.items];return i.splice(Number(t),a.items.length,...a.items),o.current=l<a.totalLength?l:null,{...a,items:i}})),n.current=!1}))))}),[d,a,l]);return(0,r.useEffect)((()=>{o.current=0,h(!0)}),[h]),(0,I.jsx)(k.ZU.Provider,{value:D,children:(0,I.jsx)(N.ZP,{value:"track-list",children:(0,I.jsx)("div",{ref:T,children:(0,I.jsx)(M.C,{onReachBottom:h,triggerOnInitialLoad:!0,children:i.items.map(((a,r)=>(0,I.jsx)("div",{className:W,children:(0,I.jsx)(ae,{index:r,episode:a,contextUri:e,onRemove:E,usePlayContextItem:t},`${a.uri}/${r}`)},`${r}${a.uri}`)))})})})})}));var le=a(64641),ie=a(85583),se=a(59476),ne=a(86739),oe=a(97045),Ae=a(872);const ce=({metadata:e,backgroundColor:t,isPlaying:a,isOnline:l,togglePlay:s})=>{const{uri:n,name:o,images:A,totalLength:c,owner:u}=e,d=(0,r.useMemo)((()=>({id:u.username,uri:u.uri,name:u.username,displayName:u.displayName||void 0,images:u.images||[]})),[u]);return(0,I.jsxs)(ie.gF,{backgroundColor:t,children:[(0,I.jsxs)(se.W,{children:[(0,I.jsx)(L.$,{size:"md",onClick:()=>s(),isPlaying:a,uri:n,disabled:!l,ariaPlayLabel:i.ag.get("playlist.a11y.play",o),ariaPauseLabel:i.ag.get("playlist.a11y.pause",o)}),(0,I.jsx)(ne.i,{text:o})]}),(0,I.jsx)(ie.Oz,{images:A,name:o,shape:oe.K.ROUNDED_CORNERS,renderImage:()=>(0,I.jsx)(Ae.$,{})}),(0,I.jsxs)(ie.sP,{children:[(0,I.jsx)(le.D,{variant:"mestoBold",children:i.ag.get("playlist")}),(0,I.jsx)(ie.xd,{canEdit:!1,onClick:()=>{},children:o}),(0,I.jsx)(ie.QS,{creators:[d],totalEpisodes:c})]})]})};var ue=a(42673),de=a(41986);const Ee=({metadata:e,canSort:t})=>{const a=(0,E.Y5)("#006450"),n=(0,d.k)(),{sortState:u}=(0,r.useContext)(c.Q),{filter:g}=(0,r.useContext)(A.fo),{isPlaying:h,togglePlay:L,usePlayContextItem:C}=(0,T.n)({uri:e.uri,metadata:{[D.sb.SORTING_CRITERIA]:b(u),[D.sb.FILTERING_PREDICATE]:(0,o.aK)(g)}},{featureIdentifier:"your_library",referrerIdentifier:"your_library"});return(0,I.jsxs)("section",{className:S,"data-testid":"your-episodes-page",children:[(0,I.jsx)(ue.$,{children:i.ag.get("sidebar.your_episodes")}),(0,I.jsx)(ce,{metadata:e,backgroundColor:a,isPlaying:h,isOnline:n,togglePlay:L}),(0,I.jsxs)("div",{className:x,children:[(0,I.jsx)(R,{metadata:e,backgroundColor:a,isPlaying:h,isOnline:n,togglePlay:L,canSort:t}),(0,I.jsx)("div",{className:"contentSpacing",children:e.totalLength>0?(0,I.jsx)(re,{contextUri:e.uri,usePlayContextItem:C}):(0,I.jsx)(s.u,{message:i.ag.get("collection.empty-page.episodes-subtitle"),title:i.ag.get("collection.empty-page.episodes-title"),linkTo:"/genre/podcasts-web",linkTitle:i.ag.get("collection.empty-page.shows-cta"),renderInline:!0,children:(0,I.jsx)(l.G,{"aria-hidden":"true"})})})]})]})},ge=(0,r.memo)((function(){const e=(0,r.useContext)(g.H).getCapabilities(),t=(0,de.x)();return t?(0,I.jsx)(c.$,{uri:t.uri,defaultSortOption:u.oT.ADDED_AT,children:(0,I.jsx)(A.hz,{uri:t.uri,children:(0,I.jsx)(Ee,{metadata:t,canSort:e.canSortTracksAndEpisodes&&t.totalLength>0})})}):(0,I.jsx)(n.h,{hasError:!1,errorMessage:i.ag.get("error.not_found.title.page"),loadOffline:e.canModifyOffline})}))}}]);
//# sourceMappingURL=xpui-routes-collection-episodes.js.map