"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[3111],{76503:(e,t,r)=>{r.d(t,{l:()=>T});var l=r(59496),s=r(84875),a=r.n(s),n=r(77646),i=r(54162),o=r(28625),c=r(66760),u=r(40699);function d(){const e=(0,l.useRef)(0);return(0,l.useCallback)((t=>{const r=t.currentTarget,l=r.style.scrollBehavior;let s=!1;const a=r.scrollLeft,n=t.clientX;let i=0;function o(){cancelAnimationFrame(e.current),document.removeEventListener("wheel",c)}function c(){o(),r.style.scrollBehavior=l}function u(){r.scrollLeft+=i,i*=.95,Math.abs(i)>.5?e.current=requestAnimationFrame(u):c()}r.style.userSelect="none",r.style.scrollBehavior="auto",o();const d=e=>{const t=e.clientX-n;Math.abs(t)>10&&(s=!0);const l=r.scrollLeft;r.scrollLeft=a-t,i=r.scrollLeft-l};document.addEventListener("mousemove",d),document.addEventListener("mouseup",(()=>{const t=e=>{e.preventDefault(),e.stopImmediatePropagation()};!0===s&&(r.addEventListener("click",t,{once:!0,capture:!0}),setTimeout((()=>{r.removeEventListener("click",t,{capture:!0})}))),r.style.removeProperty("user-select"),document.removeEventListener("mousemove",d),o(),e.current=requestAnimationFrame(u),document.addEventListener("wheel",c,{once:!0})}),{once:!0})}),[])}const p="bMurPtRDRv5LuN78MTVG",m="KjPUGV8uMbl_0bvk9ePv",y="MUloQuW1xQawwVs0mDp4",g="OlnSvEViCZ_vVdnc3mSQ",x="FjMPyh7lOujDVYQRvp0H",b="ijZQH9pePkbB2MbJHCJV",h="XTk61Y8OkBdUT6Wj4F6i",f="VfDGbMWaJe9rcefizTNk";var I,S=r(4637);function E(e,t){(0,c.Bu)(e,t),t.scrollIntoView({block:"end",inline:"center"})}function j(e,t){const r=e.querySelector('[tabindex="0"]')||e.firstElementChild;r&&r instanceof HTMLElement&&(t===I.RIGHT&&r.nextElementSibling instanceof HTMLElement?E(r,r.nextElementSibling):t===I.LEFT&&r.previousElementSibling instanceof HTMLElement&&E(r,r.previousElementSibling))}!function(e){e[e.LEFT=-1]="LEFT",e[e.RIGHT=1]="RIGHT"}(I||(I={}));const T=e=>{const{children:t,className:r,showButtons:s=!0,ariaLabel:c}=e,E=(0,l.useRef)(null),T=(0,l.useRef)(null),[C,v]=(0,l.useState)(!1),[D,L]=(0,l.useState)(!1),O=(0,l.useCallback)((()=>{if(!T.current||!E.current)return;const e=T.current,t=E.current,r=e.scrollWidth-e.clientWidth,l=Math.ceil(Math.abs(e.scrollLeft)),s=e.scrollWidth>t.clientWidth;L(s&&0!==l),v(s&&l<r)}),[]);(0,u.a)((()=>{O()}));const _=l.Children.toArray(t).length;(0,l.useEffect)(O,[_,O]);const w=(0,l.useCallback)((e=>{const t=e*(E.current.clientWidth/2);T.current.scrollBy({left:t}),O()}),[O]),R=(0,n.v9)((e=>e.ui?.textDirection?.isRTL)),A=(0,l.useCallback)((e=>{"ArrowLeft"===e.key?(e.preventDefault(),j(T.current,R?I.RIGHT:I.LEFT)):"ArrowRight"===e.key&&(e.preventDefault(),j(T.current,R?I.LEFT:I.RIGHT))}),[R]),k=R?C:D,N=R?D:C,F=d(),M=function(){const e=(0,l.useRef)(!0),t=(0,l.useRef)(null),r=(0,l.useRef)(null);return(0,l.useCallback)((l=>{if(!l.deltaY)return;const s=l.currentTarget;e.current&&(e.current=!1,t.current=s.style.scrollBehavior,s.style.scrollBehavior="auto"),s.scrollLeft+=l.deltaY+l.deltaX,r.current&&clearTimeout(r.current),r.current=setTimeout((()=>{e.current=!0,s.style.scrollBehavior=t.current??""}),100)}),[])}();return(0,S.jsxs)("div",{ref:E,className:a()(p,r),children:[(0,S.jsx)("div",{ref:T,className:a()(m,{[g]:N&&!k,[y]:k&&!N,[x]:k&&N}),onScroll:O,onKeyDown:A,onMouseDown:F,onWheel:M,role:"list","aria-label":c,tabIndex:0,children:t}),s&&(0,S.jsxs)("div",{className:b,dir:"ltr",children:[(0,S.jsx)("button",{className:a()(h,{[f]:k}),tabIndex:-1,onClick:()=>w(I.LEFT),children:(0,S.jsx)(i.e,{semanticColor:"textBase",iconSize:16})}),(0,S.jsx)("button",{className:a()(h,{[f]:N}),tabIndex:-1,onClick:()=>w(I.RIGHT),children:(0,S.jsx)(o.V,{semanticColor:"textBase",iconSize:16})})]})]})}},51922:(e,t,r)=>{r.d(t,{i:()=>g});var l=r(84875),s=r.n(l),a=r(78534);const n="kwJGggri7IZMFvQEClUf",i="yt0QcQy0t7LfbeVaEJG_",o="WHMDRepGVQXXrTx3838g",c="wLoqasagmgNF8ULGMhil",u="cpC_03FZN3i93V8j3g0l",d="S7CXd4i9huhWL_kPV_e3",p="c85eTWJAYaGjCiwH1WDu",m="cTTgGuDbNSWllHjVqiUx";var y=r(4637);const g=({className:e,leading:t,media:r,pretitle:l,title:g,subtitle:x,body:b,footer:h,trailing:f,onContextMenu:I,onTouchStart:S,onTouchEnd:E,onDragStart:j,onDoubleClick:T})=>{const C=(0,a.jh)();return(0,y.jsxs)("div",{className:s()(e,n),onContextMenu:I,onTouchStart:S,onTouchEnd:E,draggable:!0,onDragStart:j,onDoubleClick:T,children:[t?(0,y.jsx)("div",{className:i,children:t}):null,r?(0,y.jsx)("div",{className:o,children:r}):null,(0,y.jsxs)("div",{className:c,children:[l?(0,y.jsx)("div",{children:l}):null,g?(0,y.jsx)("div",{className:p,children:g}):null,x?(0,y.jsx)("div",{className:m,children:x}):null,b?(0,y.jsx)("div",{children:b}):null,h?(0,y.jsx)("div",{children:h}):null]}),f?(0,y.jsx)("div",{className:s()(u,{[d]:C===a.Uo.MEDIUM}),children:f}):null]})}},36522:(e,t,r)=>{r.d(t,{S:()=>n});var l=r(46622);const s="fRZRXRIV2YBCFLYgwDAr";var a=r(4637);const n=({iconSize:e=64,...t})=>(0,a.jsx)("div",{className:s,children:(0,a.jsx)(l._,{iconSize:e,...t,semanticColor:"textBrightAccent","aria-hidden":!0})})},74673:(e,t,r)=>{r.r(t),r.d(t,{YourLibraryX:()=>fr});var l=r(59496),s=r(84875),a=r.n(s),n=r(89130),i=r(77646),o=r(27002),c=r(72102),u=r(10154),d=r(2953),p=r(73455),m=r(19831),y=r(6997),g=r(41062),x=r(28010),b=r(93224),h=r(92456),f=r(52945),I=r(73961),S=r(91328);var E=r(35299);const j=[u.JM.TRACK,u.JM.LOCAL_TRACK,u.JM.ALBUM,u.JM.ARTIST,u.JM.PLAYLIST,u.JM.PLAYLIST_V2,u.JM.FOLDER,u.JM.EPISODE,u.JM.SHOW];let T;!function(e){e.ON="on",e.BEFORE="before",e.AFTER="after"}(T||(T={}));const C=(0,E.y)(T);function v(e){return j.includes(e)}function D(e,t,r){if(e.defaultPrevented)return null;const l=r.includes(T.BEFORE),s=r.includes(T.AFTER);let a=T.ON;if(t instanceof HTMLElement&&(l||s)){const{top:s,height:n}=t.getBoundingClientRect();r.includes(T.ON)&&l?e.clientY<Math.round(s)+n/4&&(a=T.BEFORE):a=e.clientY<Math.round(s)+n/2?T.BEFORE:T.AFTER}return r.includes(a)?a:null}var L=r(66691),O=r(15695);function _(e,t){return Array.from(e.dataTransfer?.types??[]).filter(O.Fu).filter((e=>{const r=O.UD[e];return!!v(r)&&t.includes(r)})).map((e=>O.UD[e])).filter(v)}var w=r(1178);function R(e,t,r){const l=_(e,t),s=function(e,t){return e.split(/[\s,;]+/g).map((e=>(0,u.EC)(e?.trim()))).filter(w.K).reduce(((e,r)=>v(r.type)&&t.includes(r.type)?(e[r.type]||=[],e[r.type].push(r.toURI()),e):e),{})}(e.dataTransfer?.getData("text/plain"),t),a=Array.from(new Set([...Object.keys(s),...l])).filter(v),n=Object.fromEntries(a.map((t=>{const r=s[t]??[],l=e.dataTransfer?.getData(L.aN[t])?.split("\n").filter(Boolean)??[];return[t,Array.from(new Set([...l,...r]))]})));if(r){const{[u.JM.PLAYLIST]:e,...t}=n,r=Array.from(new Set([...n[u.JM.PLAYLIST_V2]??[],...(n[u.JM.PLAYLIST]??[]).map(A)]));return{...t,...r.length?{[u.JM.PLAYLIST_V2]:r}:null}}return n}function A(e){const t=(0,u.EC)(e);return t?.type===u.JM.PLAYLIST?(0,u.FW)(t.id).toURI():e}const k={droppableUriTypes:"album artist episode folder playlist playlist-v2 show track local",useDropTarget:"ufICQKJq0XJE5iiIsZfj","useDropTarget--album":"vOp2HlcPkxOHebo3If32","useDropTarget--artist":"VNdHKKznHkpJ0VHoDmai","useDropTarget--episode":"ETclQEbcAcQdGdSioHaJ","useDropTarget--folder":"cuH8l_VHkTiz_NYVslQe","useDropTarget--playlist":"kXEKypZEUzxx9rNJy09C","useDropTarget--playlist-v2":"eZnAGhYcXE4Bt0a7958z","useDropTarget--show":"ratGUXdpLCkyXZNaJryg","useDropTarget--track":"caTDfb6Oj7a5_8jBLUSo","useDropTarget--local":"aRyoyQFJkzhoSOnf2ERM"};function N({allowedURITypesByDropPosition:e,onDrop:t,onLongDragOver:r,longDragOverTimeout:s=1e3}){const a=(0,c.NY)((()=>e),[e]),n=Object.values(a).every((e=>e.includes(u.JM.PLAYLIST_V2)&&!e.includes(u.JM.PLAYLIST))),[i,o]=(0,l.useState)(null),d=(0,l.useCallback)((e=>Object.entries(a).filter((([t,r])=>_(e,r).length>0)).map((([e])=>e)).filter(C)),[a]),p=(0,l.useRef)(0),m=(0,l.useRef)(null),y=(0,l.useRef)(null),g=(0,l.useCallback)((()=>{y.current&&(window.clearTimeout(y.current),y.current=null)}),[]);(0,l.useEffect)(g,[g]);const x=(0,l.useCallback)((e=>{const t=d(e);t.length&&(o(D(e,m.current,t)),e.dataTransfer&&!e.defaultPrevented&&(e.dataTransfer.dropEffect=t.includes(T.ON)?"copy":"move"),e.preventDefault())}),[d]),b=(0,l.useCallback)((e=>{d(e).length&&(e.preventDefault(),1==++p.current&&e.target instanceof HTMLElement&&(m.current=e.target,r&&(y.current=window.setTimeout(r,s))))}),[d,r,s]),h=(0,l.useCallback)((e=>{d(e).length&&0==--p.current&&(o(null),m.current=null,g())}),[d,g]),f=(0,l.useCallback)((e=>{const r=D(e,m.current,d(e));if(!e.defaultPrevented&&r){const l=R(e,a[r]??[],n);Object.keys(l).length&&t&&(t(l,r),e.preventDefault())}p.current=0,m.current=null,o(null),g()}),[d,a,n,t,g]);return{dropPosition:i,className:(0,l.useMemo)((()=>`${k.useDropTarget} ${Array.from(new Set(Object.values(a).flat()))?.map((e=>k[`useDropTarget--${e}`]??"")).join(" ")}`),[a]),onDragEnter:b,onDragLeave:h,onDragOver:x,onDrop:f}}var F=r(97490);const M=(0,l.createContext)(null);var P=r(77304),Z=r(62141),U=r(96054),B=r(20460),J=r(88668),K=r(6663),Y=r(40239);const H={[P.XD.ALBUMS]:Y.p.ALBUM,[P.XD.ARTISTS]:Y.p.ARTIST,[P.XD.BOOKS]:Y.p.AUDIOBOOK,[P.XD.EPISODES]:Y.p.EPISODE,[P.XD.SHOWS]:Y.p.SHOW,[P.XD.TRACKS]:Y.p.TRACK};function V(e,t){const r=(0,l.useCallback)((({data:{list:r}})=>{W(e,H[r])&&t()}),[e,t]);(0,Z.b)(P.EW.UPDATE,r),(0,Z.b)(P.EW.UPDATE_PIN,t);const s=(0,l.useCallback)((()=>{W(e,Y.p.PLAYLIST)&&t()}),[e,t]);(0,J.iu)(s),function(e){(0,l.useEffect)((()=>{const t=(0,K.k)(),r=/^hm:\/\/collection\/ylpin\//;return t.matchMessages(r,e),()=>{t.unmatchMessages(r,e)}}),[e])}(t),function(e){const t=(0,l.useContext)(B.t),r=t.getEvents();(0,l.useEffect)((()=>(r.addListener(U.p.UPDATE,e),()=>{r.removeListener(U.p.UPDATE,e)})),[t,r,e])}(t)}function W(e,t){switch(e){case Y.p.ALBUM:case Y.p.ARTIST:case Y.p.AUDIOBOOK:case Y.p.SHOW:return e===t;case Y.p.PLAYLIST:switch(t){case Y.p.TRACK:case Y.p.PLAYLIST:case Y.p.EPISODE:return!0;default:return!1}default:return!0}}var z=r(1740),G=r(82411),X=r(2592),$=r(4285),Q=r(22592);const q="xi3ytXbuSuzCYy5LwjFu",ee="OcOr6YadMDDeh_NPgClX",te="eL94fWmhg6WbrdKZfGEW";var re=r(4637);const le=(0,l.memo)((function(e){const{message:t,title:r,linkTitle:l,linkTo:s,onClick:n,className:i}=e;return(0,re.jsxs)("section",{className:a()(q,i),children:[(0,re.jsxs)("div",{className:ee,children:[(0,re.jsx)(X.D,{variant:"balladBold",semanticColor:"textBase",children:r}),(0,re.jsx)(X.D,{variant:"mesto",semanticColor:"textBase",children:t})]}),(0,re.jsx)("div",{className:te,children:l&&(s||n)&&(0,re.jsx)($.D,{className:te,as:n?"button":void 0,colorSet:"invertedLight",href:s,onClick:n,component:Q.Z,buttonSize:"sm",children:l})})]})})),se=({className:e})=>{const{createPlaylist:t}=(0,G.K)(),r=(0,l.useCallback)((()=>{t()}),[t]);return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(le,{onClick:r,linkTitle:z.ag.get("web-player.your-library-x.empty-state-playlists-cta"),title:z.ag.get("web-player.your-library-x.empty-state-playlists-title"),message:z.ag.get("web-player.your-library-x.empty-state-playlists-subtitle"),className:e}),(0,re.jsx)(le,{linkTo:"/genre/podcasts-web",linkTitle:z.ag.get("web-player.your-library-x.empty-state-podcasts-browse"),title:z.ag.get("web-player.your-library-x.empty-state-podcasts-to-follow"),message:z.ag.get("web-player.your-library-x.empty-state-podcasts-keep-you-updated"),className:e})]})},ae="JouuH90_RNAdTj0ZjcCA",ne="YtlFVHxvaGSz4vJdDdEa",ie="spFG_i1jkxOkxb1_SaLJ",oe="_8ZKfG3dOxfcr9Yyy5cv",ce=({query:e,className:t})=>(0,re.jsxs)("div",{className:a()(ae,t),"data-testid":"no-search-results-view",children:[(0,re.jsx)(X.D,{as:"h1",variant:"cello",className:ne,children:z.ag.get("web-player.your-library-x.empty-results-title-short").split(/(\{0\})/).map(((t,r)=>"{0}"===t?(0,re.jsx)("span",{className:ie,children:(0,re.jsx)("span",{className:oe,children:e})},r):t))}),(0,re.jsx)(X.D,{as:"h2",variant:"mesto",children:z.ag.get("web-player.your-library-x.empty-results-text-short")})]});var ue=r(30528);const de="yrUQENj0tMcKDW5v0mfb",pe="jsT0vJ8rWXPMeoFsMdNK",me=({onClick:e})=>(0,re.jsxs)("div",{className:de,children:[(0,re.jsx)("div",{className:"icon",children:(0,re.jsx)(ue.l,{iconSize:48,semanticColor:"textBase"})}),(0,re.jsxs)("div",{className:pe,children:[(0,re.jsx)(X.D,{as:"h2",variant:"canon",semanticColor:"textBase",children:z.ag.get("web-player.your-library-x.error-title")}),(0,re.jsx)(X.D,{as:"p",variant:"mesto",semanticColor:"textBase",children:z.ag.get("web-player.your-library-x.error-body")})]}),(0,re.jsx)("div",{children:(0,re.jsx)($.D,{onClick:e,colorSet:"invertedLight",buttonSize:"sm",children:z.ag.get("web-player.your-library-x.error-button")})})]}),ye=({children:e})=>{const t=function(){const[e,t]=(0,F.z)("ylx-expanded-folders",[]),r=(0,l.useCallback)((t=>e.includes(t)),[e]),s=(0,l.useCallback)(((r,l)=>{const s=e.indexOf(r);if(l){if(-1!==s)return;t([...e,r])}else{if(-1===s)return;t(e.filter((e=>e!==r)))}}),[e,t]);return{expandedFolders:e,getIsFolderExpanded:r,setIsFolderExpanded:s}}();return(0,re.jsx)(M.Provider,{value:t,children:e})};var ge=r(74895),xe=r(98490),be=r(76503),he=r(41341);const fe="oLOECYtBhVmBtyisKwew",Ie="as7TWnIA1jnumFte_u0R",Se="V57QBvW1q79gFmT8NBvz",Ee={marginBlockEnd:0,willChange:"transform, opacity"},je=({filterId:e,isPrimaryFilter:t,isPlaceholder:r,resetFilterIds:s,toggleFilterId:n,allowedDropTargetURITypes:i=j,className:o,ChipComponent:c=he.A,...u})=>{const d=u.selected,p=(0,l.useCallback)((()=>{!e||d&&t?s():n(e)}),[e,d,t,s,n]),m=(0,l.useCallback)((e=>{e.detail>1||r||p()}),[r,p]),{className:y,dropPosition:g,...x}=N({allowedURITypesByDropPosition:{[T.ON]:i},onLongDragOver:p});return(0,re.jsx)(c,{...u,"aria-label":u["aria-label"],...x,...g===T.ON?{selectedColorSet:"base"}:void 0,className:a()(o,y,{[Ie]:g===T.ON,[Se]:r}),onClick:m,selectedColorSet:g===T.ON?"invertedDark":"invertedLight",secondary:d&&!t,style:Ee})},Te=e=>{(0,ge.ST)({onUpdate:t=>{e.style.opacity=t.toString()}})},Ce=(e,t,r)=>((0,ge.ST)({onUpdate:t=>{e.style.opacity=(1-Number(t)).toString()},onComplete:r}),()=>{e.style.opacity="",r()}),ve=({hideEnteringElements:e,animateEnteringElements:t,animateExitingElements:r,animateFlippedElements:l})=>{e(),r(),l(),t()},De="CVYEjtXcJcEl5Q7ca8dP",Le="xSwWyIvT1GvIuF3Bc9yI",Oe=[{id:"p1",name:"Playlists"},{id:"p2",name:"Podcasts & Shows"},{id:"p3",name:"Artists"},{id:"p4",name:"Albums"}],_e=(0,l.memo)((function({availableFilters:e,selectedFilters:t,toggleFilterId:r,resetFilterIds:s,className:n,scrollNodeRef:i}){const o=!(t||e),c=o?Oe:[...t??[],...e??[]],[u,d]=(0,l.useState)(!1);return(0,l.useEffect)((()=>{if(!window.IntersectionObserver)return()=>{};const e=new window.IntersectionObserver((e=>{e.forEach((e=>{d(!e.isIntersecting)}))}),{root:i.current,rootMargin:"-100% 0px 0px 0px",threshold:0});return i.current?.firstElementChild&&e.observe(i.current.firstElementChild),()=>{e.disconnect()}}),[i]),(0,re.jsx)(ge.U5,{flipKey:c.map((e=>e.id)).join("|"),handleEnterUpdateDelete:ve,className:a()({[Le]:u}),children:(0,re.jsxs)(be.l,{className:a()(De,n),children:[!!t?.length&&(0,re.jsx)(ge.$3,{flipId:"clear-filter",onAppear:Te,onExit:Ce,translate:!0,opacity:!0,children:(0,re.jsx)(je,{resetFilterIds:s,toggleFilterId:r,allowedDropTargetURITypes:br,ChipComponent:xe.w,"aria-label":"Clear"})},"clear-filter"),c.map(((e,l)=>{const a=t?.includes(e),n=0===l;return(0,re.jsx)(ge.$3,{flipId:e.id,onAppear:Te,onExit:Ce,translate:!0,opacity:!0,children:(0,re.jsx)(je,{filterId:e.id,isPrimaryFilter:n,isPlaceholder:o,resetFilterIds:s,toggleFilterId:r,selected:a,children:e.name})},e.id)}))]})})}));var we=r(73540),Re=r(42598),Ae=r(63098),ke=r(78410),Ne=r(92767),Fe=r(20156),Me=r(81755),Pe=r(12293),Ze=r(71280),Ue=r(22946);const Be=function(){const{createPlaylist:e}=(0,G.K)(),{createFolder:t}=(0,J.lh)();return(0,re.jsxs)(Ze.v,{children:[(0,re.jsx)(Ue.s,{onClick:()=>{e()},role:"menuitem",icon:(0,re.jsx)(Me.h,{iconSize:16}),iconPosition:"leading",children:z.ag.get("web-player.your-library-x.create.create-a-new-playlist")}),(0,re.jsx)(Ue.s,{onClick:()=>{t(z.ag.get("web-player.your-library-x.default_folder_name"),{before:"start"})},role:"menuitem",icon:(0,re.jsx)(Pe.P,{iconSize:16}),iconPosition:"leading",children:z.ag.get("web-player.your-library-x.create.create-a-playlist-folder")})]})},Je=({className:e=""})=>{const t=z.ag.get("web-player.your-library-x.create.button-label"),{createPlaylistFromAlbum:r,createPlaylistFromTracks:s,createPlaylistFromPlaylist:n}=(0,G.K)(),{className:i,dropPosition:o,...c}=N({allowedURITypesByDropPosition:{[T.ON]:[u.JM.TRACK,u.JM.ALBUM,u.JM.PLAYLIST_V2]},onDrop:(0,l.useCallback)((e=>{const{[u.JM.TRACK]:t,[u.JM.ALBUM]:l,[u.JM.PLAYLIST_V2]:a=[]}=e;t?.length&&s(t,null),l?.length&&r(l[0],null),a.length&&n(a[0],null)}),[r,n,s])});return(0,re.jsx)(Fe.xV,{renderInline:!0,placement:"bottom-end",menu:(0,re.jsx)(Be,{}),preventScrollingWhileOpen:!1,children:(r,l,s)=>(0,re.jsx)(ke._,{label:t,placement:"right",children:(0,re.jsx)(we.o,{ref:s,iconOnly:Ne.S,className:a()(e,i,{[Ie]:o===T.ON}),"aria-label":t,onClick:l,buttonSize:"sm",...c})})})},Ke="UvXqRORKQr_N3jlgGTcS",Ye="ksmcxhImUuj3_s1lcIm0",He="O2Vp_sNHMLHUcgMPVnOA",Ve=({className:e,isLibraryCompletelyEmpty:t})=>{const{leftSidebarIsCollapsed:r,setSize:s}=(0,f.G)(),n=!r||t&&r,i=(0,l.useCallback)((()=>{s(r?f.R.DEFAULT:f.R.COLLAPSED)}),[r,s]);return(0,re.jsxs)("header",{className:a()(Ke,e,{[He]:r}),children:[(0,re.jsx)(ke._,{label:r?z.ag.get("web-player.your-library-x.expand-your-library"):z.ag.get("web-player.your-library-x.collapse-your-library"),placement:"bottom",children:(0,re.jsx)(we.o,{"aria-label":r?z.ag.get("web-player.your-library-x.expand-your-library"):z.ag.get("web-player.your-library-x.collapse-your-library"),iconOnly:r?Re.$:Ae.n,onClick:i})}),!r&&(0,re.jsx)(re.Fragment,{children:(0,re.jsx)(X.D,{variant:"balladBold",semanticColor:"textBase",children:z.ag.get("web-player.your-library-x.your-library")})}),n&&(0,re.jsx)(Je,{className:Ye})]})};var We=r(47735),ze=r(5479),Ge=r(8527),Xe=r(56659),$e=r(18306),Qe=r(82441),qe=r(45937),et=r(73305),tt=r(14754);const rt="xFfODpPkWh3RFEif2u_b",lt="kv4Mj5FTpBW6fWD10NhI",st="p2NI7AGpy5BWL6TSVIOb",at="zcFmKgU1VJFEt7QXEQ9N",nt="uqcGV_T5xRcWDEMJoGNG",it="yOc9v5MGaitl1r9UpHKg",ot="P2siDCCdfpelJSQDo7ov",ct="Z2BXDPtMtuJ9hFPs2DR_",ut="nKLGCHG03_iLOz_vnJ8f",dt="gQX_uIhDHRU7D49YnMEQ",pt="Um4h5vvUjPQVwLR25iqA",mt=({pinned:e})=>e?(0,re.jsx)(tt.t,{semanticColor:"textBrightAccent",iconSize:16,title:z.ag.get("web-player.your-library-x.pinned"),className:dt}):null;var yt=r(3539),gt=r(46439),xt=r(51922);const bt="e5qQNU02pEY3d315iDOC",ht=({folderDepth:e=0})=>(0,re.jsx)("li",{className:bt,style:{"--ylx-folder-depth":e}}),ft={state:{preventMoveFocus:!0}},It=(0,l.memo)((function({uri:e,to:t=(0,u.EC)(e)?.toURLPath(!0)||"",title:r,subtitle:s,trailing:n,media:i,alt:o,onDoubleClick:c,folderDepth:d,className:p,dragLabel:m,onDragStart:y,allowedDropTargetURITypesByDropPosition:g={},onDropTargetDrop:x,onLongDragOver:b,style:h,menu:I,...S}){const E=(0,gt.s0)(),{leftSidebarIsCollapsed:j}=(0,f.G)(),C=(0,l.useCallback)((()=>{E(t,ft)}),[E,t]),v=(0,l.useCallback)((()=>{t&&E(t,ft)}),[E,t]),D=!!(0,yt.$B)(t)?.isExact,O=(0,L.O1)([e],m),{dropPosition:_,className:w,...R}=N({allowedURITypesByDropPosition:g,onDrop:x,onLongDragOver:b??C}),A=(0,re.jsxs)(We.E,{style:{"--ylx-folder-depth":j?0:d,...h},draggable:!!m,onDragStart:e=>{y?.(e),O(e)},onDoubleClick:c,className:a()(rt,p,w,{[fe]:_===T.ON,[lt]:D}),...S,...R,children:[(0,re.jsx)(xt.i,{onDragStart:()=>{},media:j?(0,re.jsx)(qe.default,{to:t,title:o,children:i}):i,title:j?void 0:r,subtitle:j?void 0:s,trailing:j?void 0:n}),(0,re.jsx)(Fe._P,{menu:I,children:(0,re.jsx)("div",{className:st,onClick:v,tabIndex:-1,role:"none",onDoubleClick:c})})]});return(0,re.jsxs)(re.Fragment,{children:[_===T.BEFORE&&(0,re.jsx)(ht,{folderDepth:d}),j?(0,re.jsx)(ke._,{label:(0,re.jsxs)("div",{className:"encore-dark-theme",children:[r,s]}),placement:"right",showDelay:0,children:A}):A,_===T.AFTER&&(0,re.jsx)(ht,{folderDepth:d})]})}));var St=r(13991),Et=r(49351);const jt=({title:e,type:t,images:r})=>(0,re.jsx)(St.O,{images:r,shape:St.K.ROUNDED_CORNERS,size:Et.m$.SIZE_48,type:t,title:e});var Tt=r(47875),Ct=r(86255);const vt=({uri:e})=>{const{isPlaying:t}=(0,Ct.cR)(e),{leftSidebarIsCollapsed:r}=(0,f.G)();return t&&!r?(0,re.jsx)(Tt.d,{iconSize:16,semanticColor:"textBrightAccent"}):null},Dt=({leading:e,subtitle:t})=>(0,re.jsxs)("div",{className:ot,children:[e,(0,re.jsx)(X.D,{variant:"mesto",semanticColor:"textSubdued",className:ct,children:t})]});var Lt=r(98340);const Ot=({uri:e,playbackUri:t=e,title:r,menu:s})=>{const{filter:a}=(0,l.useContext)(I.fo),{isActive:n}=(0,Ct.cR)(t);return(0,re.jsx)(Lt._,{menu:s,children:(0,re.jsx)(qe.Link,{to:e,className:it,children:(0,re.jsx)(X.D,{variant:"ballad",semanticColor:n?"textBrightAccent":"textBase",className:it,children:(0,re.jsx)(Qe.o,{autoEscape:!0,searchWords:[a.trim()],textToHighlight:r})})})})},_t=({libraryItem:e,shouldShowType:t})=>{const{uri:r,artists:s,images:a,name:n,pinned:i,type:o}=e,{filter:c}=(0,l.useContext)(I.fo),{togglePlay:u}=(0,et.n)({uri:r},{featureIdentifier:"album",referrerIdentifier:"your_library"}),d=(0,l.useCallback)((()=>{u()}),[u]),p=(0,re.jsx)(jt,{title:n,type:o,images:a}),m=(0,re.jsx)(Xe.Y,{uri:r,isPinnable:!0,isPinned:e.pinned}),y=(0,re.jsx)(Ot,{uri:r,title:n,menu:m}),g=(0,re.jsx)(Dt,{leading:(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(mt,{pinned:i}),(0,re.jsx)($e.$,{uri:r,size:16,className:dt})]}),subtitle:(0,re.jsxs)(re.Fragment,{children:[t&&`${z.ag.get("web-player.your-library-x.type-album")} • `,(0,re.jsx)(qe.Link,{to:s.at(0)?.uri??"",className:ut,children:(0,re.jsx)(Qe.o,{searchWords:[c.trim()],textToHighlight:s.at(0)?.name??""})})]})}),x=(0,re.jsx)(vt,{uri:r});return(0,re.jsx)(It,{uri:r,media:p,title:y,subtitle:g,trailing:x,alt:n,dragLabel:n,menu:m,onDoubleClick:d})};var wt=r(83797);const Rt=({libraryItem:e,shouldShowType:t})=>{const{uri:r,images:s,name:a,pinned:n,type:i}=e,{togglePlay:o}=(0,et.n)({uri:r},{featureIdentifier:"artist",referrerIdentifier:"your_library"}),c=(0,l.useCallback)((()=>{o()}),[o]),u=(0,re.jsx)(jt,{title:a,type:i,images:s}),d=(0,re.jsx)(wt.m,{uri:r,isPinnable:!0,isPinned:e.pinned}),p=(0,re.jsx)(Ot,{uri:r,title:a,menu:d}),m=(0,re.jsx)(Dt,{leading:(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(mt,{pinned:n}),(0,re.jsx)($e.$,{uri:r,size:16,className:dt})]}),subtitle:t&&z.ag.get("web-player.your-library-x.type-artist")}),y=(0,re.jsx)(vt,{uri:r});return(0,re.jsx)(It,{uri:r,media:u,title:p,subtitle:m,trailing:y,alt:a,dragLabel:a,menu:d,onDoubleClick:c})};var At=r(27350);const kt=({libraryItem:e,shouldShowType:t})=>{const{uri:r,authorName:s,images:a,name:n,pinned:i,type:o}=e,{filter:c}=(0,l.useContext)(I.fo),{togglePlay:u}=(0,et.n)({uri:r},{featureIdentifier:"audiobook",referrerIdentifier:"your_library"}),d=(0,l.useCallback)((()=>{u()}),[u]),p=(0,re.jsx)(jt,{title:n,type:o,images:a}),m=(0,re.jsx)(At.X,{uri:r,isPinnable:!0,isPinned:e.pinned}),y=(0,re.jsx)(Ot,{uri:r,title:n,menu:m}),g=(0,re.jsx)(Dt,{leading:(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(mt,{pinned:i}),(0,re.jsx)($e.$,{uri:r,size:16,className:dt})]}),subtitle:(0,re.jsxs)(re.Fragment,{children:[t&&`${z.ag.get("web-player.your-library-x.type-audiobook")} • `,(0,re.jsx)(Qe.o,{searchWords:[c.trim()],textToHighlight:s})]})}),x=(0,re.jsx)(vt,{uri:r});return(0,re.jsx)(It,{uri:r,media:p,title:y,subtitle:g,trailing:x,alt:n,dragLabel:n,menu:m,onDoubleClick:d})};var Nt=r(10606),Ft=r(34402),Mt=r(85824),Pt=r(29769);const Zt=({libraryItem:e})=>{const{uri:t,rowId:r,folderDepth:s,name:a,numberOfFolders:n,numberOfPlaylists:i,pinned:o,type:c}=e,[d,p]=function(e){const{getIsFolderExpanded:t,setIsFolderExpanded:r}=(0,l.useContext)(M);return[(0,l.useMemo)((()=>t(e)),[t,e]),(0,l.useCallback)((t=>{r(e,t)}),[r,e])]}(t),m=(0,l.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),p(!d)}),[p,d]),{togglePlay:y}=(0,et.n)({uri:t},{featureIdentifier:"folder",referrerIdentifier:"your_library"}),g=(0,l.useCallback)((()=>{y()}),[y]),x=(0,Pt.o)(),{createPlaylistFromAlbum:b,createPlaylistFromTracks:h}=(0,G.K)(),{renameFolder:f}=(0,J.lh)(),I=(0,l.useMemo)((()=>({[T.ON]:[u.JM.TRACK,u.JM.LOCAL_TRACK,u.JM.ALBUM,u.JM.EPISODE,u.JM.PLAYLIST_V2]})),[]),S=(0,l.useCallback)((async(e,t)=>{if(t===T.ON){const{[u.JM.TRACK]:t=[],[u.JM.LOCAL_TRACK]:l=[],[u.JM.ALBUM]:s=[],[u.JM.EPISODE]:a=[],[u.JM.PLAYLIST_V2]:n=[]}=e;if(n.length){1===n.length&&((await x.contains(n)).at(0)??!1)?x.move(n[0],{after:r}):x.add(n,{after:r})}else s.length?b(s[0],r):(t.length||l.length||a.length)&&h([...t,...l,...a],r)}}),[x,b,h,r]),E=(0,l.useCallback)((()=>{p(!0)}),[p]),j=(0,l.useCallback)((e=>{e.stopPropagation()}),[]),C=[i>0||!n?z.ag.get("web-player.your-library-x.rows.folder.number-of-playlists",i):null,n>0?z.ag.get("web-player.your-library-x.rows.folder.number-of-folders",n):null].filter(w.K).join(z.ag.getSeparator()),v=(0,l.useCallback)(((t="")=>{f(e,t)}),[e,f]),D=(0,re.jsx)(Mt.A,{id:t,uri:t,name:a,isPinnable:!0,isPinned:o,onRename:v,onCreateCallback:()=>{}}),L=(0,re.jsx)(jt,{title:a,type:c}),O=(0,re.jsx)(Ot,{uri:t,title:a,menu:D}),_=(0,re.jsx)(Dt,{leading:(0,re.jsx)(mt,{pinned:o}),subtitle:C}),R=(0,re.jsx)(we.o,{"aria-label":d?z.ag.get("web-player.your-library-x.collapse-folder"):z.ag.get("web-player.your-library-x.expand-folder"),iconOnly:d?Nt.U:Ft.i,buttonSize:"sm",condensedAll:!0,onClick:m,onDoubleClick:j,tabIndex:-1,className:nt});return(0,re.jsx)(It,{uri:t,to:`/folder/${(0,u.EC)(t)?.id??""}`,folderDepth:s,media:L,title:O,subtitle:_,trailing:R,alt:a,menu:D,allowedDropTargetURITypesByDropPosition:I,onDropTargetDrop:S,onLongDragOver:E,onDoubleClick:g})};var Ut=r(46997),Bt=r(18563);const Jt=l.memo((function({uri:e,isPinned:t}){return(0,re.jsx)(Ut.ZP,{value:"generic",children:(0,re.jsx)(Ze.v,{children:(0,re.jsx)(Bt.X,{uri:e,isPinned:t,type:Y.p.PLAYLIST})})})}));var Kt=r(84805);const Yt=({libraryItem:e,shouldShowType:t})=>{const{user:r}=(0,i.v9)(Kt.Gg),s=(0,u.wG)(r?.id).toURI(),a=s,n=s,o=s,c="spotify:collection:tracks",{images:d,name:p,numberOfSongs:m,pinned:y,type:x}=e,{togglePlay:b}=(0,et.n)({uri:a},{featureIdentifier:"your_library",referrerIdentifier:"your_library"}),h=(0,l.useCallback)((()=>{b()}),[b]),f=(0,l.useContext)(g.H),I=(0,l.useMemo)((()=>({[T.ON]:[u.JM.TRACK]})),[]),S=(0,l.useCallback)((e=>{const{[u.JM.TRACK]:t=[]}=e;t?.length&&f?.add(...t)}),[f]),E=(0,re.jsx)(jt,{title:p,type:x,images:d}),j=(0,re.jsx)(Jt,{uri:n,isPinned:e.pinned}),C=(0,re.jsx)(Ot,{uri:c,playbackUri:a,title:p,menu:j}),v=(0,re.jsx)(Dt,{leading:(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(mt,{pinned:y}),(0,re.jsx)($e.$,{uri:o,size:16,className:dt})]}),subtitle:(0,re.jsxs)(re.Fragment,{children:[t&&`${z.ag.get("web-player.your-library-x.type-playlist")} • `,z.ag.get("web-player.your-library-x.rows.liked-songs.subtitle",m)]})}),D=(0,re.jsx)(vt,{uri:a});return(0,re.jsx)(It,{uri:c,media:E,title:C,subtitle:v,trailing:D,alt:p,dragLabel:p,menu:j,allowedDropTargetURITypesByDropPosition:I,onDropTargetDrop:S,onDoubleClick:h})};var Ht=r(11328),Vt=r(36522),Wt=r(11179),zt=r(667);const Gt=({libraryItem:e,shouldShowType:t})=>{const r=zt.b,l=(0,Wt.gB)().uri,s=e.uri,{name:a,numberOfFiles:n,pinned:i}=e,o=(0,re.jsx)("div",{className:at,children:(0,re.jsx)(Vt.S,{iconSize:24,title:a})}),c=(0,re.jsx)(Jt,{uri:s,isPinned:e.pinned}),u=(0,re.jsx)(Ot,{uri:l,playbackUri:r,title:a,menu:c}),d=(0,re.jsx)(Dt,{leading:(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(mt,{pinned:i}),(0,re.jsx)(Ht.E,{iconSize:16,className:dt,semanticColor:"textBrightAccent"})]}),subtitle:`${t?`${z.ag.get("web-player.your-library-x.type-playlist")} • `:""}${z.ag.get("web-player.your-library-x.rows.local-files.subtitle",n)}`}),p=(0,re.jsx)(vt,{uri:r});return(0,re.jsx)(It,{uri:l,media:o,title:u,subtitle:d,trailing:p,alt:a,dragLabel:a,menu:c})};var Xt=r(25620),$t=r(9178);const Qt=({libraryItem:e,shouldShowType:t})=>{const{uri:r,images:s,isLoading:a,folderDepth:n,name:o,owner:c,pinned:d,type:p,canAddTo:m,canReorder:y}=e,g=(0,l.useContext)(J.ZF),x=(0,Pt.o)(),{filter:b}=(0,l.useContext)(I.fo);(0,l.useEffect)((()=>{a&&g.resync(r)}),[g,r,a]);const{togglePlay:h}=(0,et.n)({uri:r},{featureIdentifier:"playlist",referrerIdentifier:"your_library"}),f=(0,l.useCallback)((()=>{h()}),[h]),S=(0,i.I0)(),E=(0,l.useMemo)((()=>{const e=[u.JM.PLAYLIST_V2,u.JM.FOLDER];return{...m&&{[T.ON]:[u.JM.TRACK,u.JM.LOCAL_TRACK,u.JM.ALBUM,u.JM.EPISODE]},...y&&{[T.BEFORE]:e,[T.AFTER]:e}}}),[m,y]),j=(0,l.useCallback)((async(e,t)=>{if(t===T.ON){const{[u.JM.TRACK]:t=[],[u.JM.LOCAL_TRACK]:l=[],[u.JM.ALBUM]:s=[],[u.JM.EPISODE]:a=[]}=e,n=[...t,...l,...s,...a];S((0,Xt.jV)(r,n))}else if(t===T.BEFORE||t===T.AFTER){const{[u.JM.PLAYLIST_V2]:l=[],[u.JM.FOLDER]:s=[]}=e,a=[...l,...s],n=t===T.BEFORE?{before:r}:{after:r};1===a.length&&((await x.contains(a)).at(0)??!1)?x.move(a[0],n):x.add(a,n)}}),[S,r,x]),C=(0,re.jsx)(jt,{title:o,type:p,images:s}),v=(0,re.jsx)($t.X,{uri:e.uri,isPinnable:!0,isPinned:d}),D=(0,re.jsx)(Ot,{uri:r,title:o,menu:v}),L=(0,re.jsx)(Dt,{leading:(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(mt,{pinned:d}),(0,re.jsx)($e.$,{uri:r,size:16,className:dt})]}),subtitle:(0,re.jsxs)(re.Fragment,{children:[t&&`${z.ag.get("web-player.your-library-x.type-playlist")} • `,c.uri?(0,re.jsx)(qe.Link,{to:c.uri,className:ut,children:(0,re.jsx)(Qe.o,{searchWords:[b.trim()],textToHighlight:c.name})}):(0,re.jsx)(Qe.o,{searchWords:[b.trim()],textToHighlight:c.name})]})}),O=(0,re.jsx)(vt,{uri:r});return(0,re.jsx)(It,{uri:r,folderDepth:n,media:C,title:D,subtitle:L,trailing:O,alt:o,dragLabel:o,menu:v,allowedDropTargetURITypesByDropPosition:E,onDropTargetDrop:j,onDoubleClick:f})};var qt=r(99722);const er=({libraryItem:e,shouldShowType:t})=>{const{uri:r,images:s,name:a,pinned:n,publisher:i,type:o}=e,{filter:c}=(0,l.useContext)(I.fo),{togglePlay:u}=(0,et.n)({uri:r},{featureIdentifier:"show",referrerIdentifier:"your_library"}),d=(0,l.useCallback)((()=>{u()}),[u]),p=(0,re.jsx)(jt,{title:a,type:o,images:s}),m=(0,re.jsx)(qt.M,{uri:r,isPinnable:!0,isPinned:e.pinned}),y=(0,re.jsx)(Ot,{uri:r,title:a,menu:m}),g=(0,re.jsx)(Dt,{leading:(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(mt,{pinned:n}),(0,re.jsx)($e.$,{uri:r,size:16,className:dt})]}),subtitle:(0,re.jsxs)(re.Fragment,{children:[t&&`${z.ag.get("web-player.your-library-x.type-show")} • `,(0,re.jsx)(Qe.o,{autoEscape:!0,searchWords:[c.trim()],textToHighlight:i})]})}),x=(0,re.jsx)(vt,{uri:r});return(0,re.jsx)(It,{uri:r,media:p,title:y,subtitle:g,trailing:x,alt:a,dragLabel:a,menu:m,onDoubleClick:d})},tr=({libraryItem:e})=>{const{user:t}=(0,i.v9)(Kt.Gg),r=(0,u.wG)(t?.id,"your-episodes").toURI(),s=r,a=r,n="spotify:collection:your-episodes",{togglePlay:o}=(0,et.n)({uri:s},{featureIdentifier:"episode",referrerIdentifier:"your_library"}),c=(0,l.useCallback)((()=>{o()}),[o]),{images:d,name:p,numberOfDownloadedEpisodes:m,pinned:y,type:x}=e,b=(0,l.useContext)(g.H),h=(0,l.useMemo)((()=>({[T.ON]:[u.JM.EPISODE]})),[]),f=(0,l.useCallback)((e=>{const{[u.JM.EPISODE]:t=[]}=e;t?.length&&b?.add(...t)}),[b]),I=(0,re.jsx)(jt,{title:p,type:x,images:d}),S=(0,re.jsx)(Jt,{uri:a,isPinned:e.pinned}),E=(0,re.jsx)(Ot,{uri:n,playbackUri:s,title:p,menu:S}),j=(0,re.jsx)(Dt,{leading:(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)(mt,{pinned:y}),m?(0,re.jsx)(Ht.E,{iconSize:16,className:dt,semanticColor:"textBrightAccent"}):null]}),subtitle:z.ag.get("web-player.your-library-x.subtitle-your-episodes")}),C=(0,re.jsx)(vt,{uri:s});return(0,re.jsx)(It,{uri:n,media:I,title:E,subtitle:j,trailing:C,alt:p,dragLabel:p,menu:S,allowedDropTargetURITypesByDropPosition:h,onDropTargetDrop:f,onDoubleClick:c})},rr=l.memo((function({libraryItem:e,primaryFilter:t}){switch(e.type){case Y.p.FOLDER:return(0,re.jsx)(Zt,{libraryItem:e});case Y.p.ALBUM:return(0,re.jsx)(_t,{libraryItem:e,shouldShowType:t!==Y.p.ALBUM});case Y.p.ARTIST:return(0,re.jsx)(Rt,{libraryItem:e,shouldShowType:t!==Y.p.ARTIST});case Y.p.AUDIOBOOK:return(0,re.jsx)(kt,{libraryItem:e,shouldShowType:t!==Y.p.AUDIOBOOK});case Y.p.SHOW:return(0,re.jsx)(er,{libraryItem:e,shouldShowType:t!==Y.p.SHOW});case Y.p.PLAYLIST:return(0,re.jsx)(Qt,{libraryItem:e,shouldShowType:t!==Y.p.PLAYLIST});case Y.p.LIKED_SONGS:return(0,re.jsx)(Yt,{libraryItem:e,shouldShowType:t!==Y.p.PLAYLIST});case Y.p.YOUR_EPISODES:return(0,re.jsx)(tr,{libraryItem:e});case Y.p.LOCAL_FILES:return(0,re.jsx)(Gt,{libraryItem:e,shouldShowType:t!==Y.p.PLAYLIST});default:return(0,Ge._)(e),null}})),lr=({height:e})=>(0,re.jsx)(We.E,{className:pt,style:{height:e}}),sr=({getItems:e,scrollNodeRef:t,primaryFilter:r,nrValidItems:s})=>{const a=(0,l.useCallback)((e=>(0,re.jsx)(rr,{libraryItem:e,primaryFilter:r},e.uri)),[r]),n=(0,l.useCallback)(((e,t)=>(0,re.jsx)(lr,{height:e},t)),[]),i=(0,l.useCallback)(((t,r)=>e(t,r).map(((e,r)=>e?a(e):n("64px",`${t+r}`)))),[e,a,n]);return(0,re.jsx)(We.A,{circular:!1,children:(0,re.jsx)(ze.V,{renderRows:i,nrRows:s,rowHeight:64,scrollNodeRef:t,renderPlaceholder:n})})};var ar=r(5405);const nr="RGofdOZulhL2p9MRA5hg",ir=({sortOrders:e,activeSortOrderId:t,setActiveSortOrderId:r})=>{const l=e.find((e=>e.id===t))??e?.at(0);return(0,re.jsx)("div",{className:nr,children:(0,re.jsx)(ar.A,{options:e.map((({id:e,name:t})=>({key:e,value:t}))),onSelect:r,selected:{key:l?.id??"",value:l?.name??""},heading:z.ag.get("web-player.your-library-x.sort_by")})})};var or=r(46980),cr=r(43001);const ur=({clearOnEscapeInElementRef:e,primaryFilter:t})=>{const r=(0,or.y)(),l=function(e){switch(e){case Y.p.ALBUM:return z.ag.get("web-player.your-library-x.text-filter.albums-placeholder");case Y.p.ARTIST:return z.ag.get("web-player.your-library-x.text-filter.artists-placeholder");case Y.p.PLAYLIST:return z.ag.get("web-player.your-library-x.text-filter.playlists-placeholder");case Y.p.SHOW:return z.ag.get("web-player.your-library-x.text-filter.shows-placeholder");case Y.p.AUDIOBOOK:return z.ag.get("web-player.your-library-x.text-filter.audiobooks-placeholder");case"downloaded":return z.ag.get("web-player.your-library-x.text-filter.downloaded-placeholder");case void 0:return z.ag.get("web-player.your-library-x.text-filter.generic-placeholder");default:return void(0,Ge._)(e)}}(t);return(0,re.jsx)(cr.K,{placeholder:l,clearOnEscapeInElementRef:e,debounceFilterChangeTimeout:r?.getCapabilities().canTextFilterContentsInRealtime?0:void 0})},dr="PpUTJL2NIYDUnmfzVIbE",pr="_0FuodatXU4_fToYAuYtY",mr="_K79lE9KrIAkl_bUSSUM",yr="ifVI2CEdOZGgMWIUN2Cw",gr="MLbFLVC33caOj3FgSQMC",xr={items:[],totalLength:0},br=[u.JM.TRACK,u.JM.ALBUM,u.JM.ARTIST,u.JM.PLAYLIST_V2,u.JM.SHOW,u.JM.EPISODE],hr=()=>{const{filter:e}=(0,l.useContext)(I.fo),{filtersPickedByUserRef:t,selectedFilterIds:r,resetFilterIds:s,toggleFilterId:i}=function(){const[e,t]=(0,F.z)("ylx-active-filter-ids",[]),r=(0,l.useRef)(!0),s=(0,l.useCallback)(((l,s=!0)=>{const a=new Set(e);a.has(l)?a.delete(l):a.add(l),r.current=s,t(Array.from(a))}),[e,t]),a=(0,l.useCallback)((()=>t([])),[t]);return{filtersPickedByUserRef:r,selectedFilterIds:e,resetFilterIds:a,toggleFilterId:s}}(),d=r?.[0],{selectedSortOrderId:p,setSelectedSortOrderId:b}=function(e){const[t,r]=(0,F.z)("ylx-active-sort-order-by-filter-id",{}),s=`${e}`;return{selectedSortOrderId:t[s],setSelectedSortOrderId:(0,l.useCallback)((e=>{r({...t,[s]:e})}),[s,t,r])}}(d),E=(0,l.useRef)(null),[j,C]=(0,l.useState)(null),{expandedFolders:v}=(0,l.useContext)(M),D=(0,x.I)(),L=(0,l.useContext)(g.H),[O,_]=(0,l.useState)(!1),{leftSidebarIsCollapsed:w,setSize:R}=(0,f.G)();!function(e=[],t=[],r){const s=(0,S.k)(),a=(0,l.useContext)(g.H).getContentsDownloadedFilterId(),n=(0,l.useRef)(e);n.current=e;const i=(0,l.useRef)(t);i.current=t;const o=(0,l.useRef)(r);o.current=r;const u=(0,l.useRef)(!1);(0,l.useEffect)((()=>{if(!a)return;const e=i.current.includes(a),t=n.current.includes(a),r=i.current.length>1,l=!s&&!r&&!e&&t,c=s&&e&&u.current;(l||c)&&(l&&(u.current=!0),o.current(a,!1))}),[a,s]);const d=(0,l.useRef)(t);(0,c.KW)((()=>{a&&(t.includes(a)&&!d.current.includes(a)&&u.current||(u.current=!1),d.current=t)}),[a,t])}(j?.availableFilters?.map((e=>e.id)),j?.selectedFilters?.map((e=>e.id)),i);const{dropPosition:A,className:k,...P}=N({allowedURITypesByDropPosition:{[T.ON]:br},onDrop:(0,l.useCallback)((e=>{const{[u.JM.TRACK]:t,[u.JM.ALBUM]:r,[u.JM.ARTIST]:l,[u.JM.EPISODE]:s,[u.JM.SHOW]:a,[u.JM.PLAYLIST_V2]:n=[]}=e;t?.length&&L?.add(...t),r?.length&&L?.add(...r),l?.length&&L?.add(...l),s?.length&&L?.add(...s),a?.length&&L?.add(...a),n.length&&L?.add(...n)}),[L]),onLongDragOver:(0,l.useCallback)((()=>{w&&R(f.R.DEFAULT)}),[w,R])}),Z=(0,l.useCallback)((async(l,a)=>{try{const s=await L.getContents({offset:l,limit:a,filters:r,sortOrder:p,textFilter:e,includeLocalFiles:D,includeYourEpisodes:!0,expandedFolders:w?[]:v,filtersPickedByUser:t.current}),{offset:i,limit:o,items:c,...u}=s;return C((e=>(0,n.J)(u,e)?e:u)),s}catch(e){if(_(!0),e instanceof y.Ik)return s(),xr;if(e instanceof y.j2)return b(void 0),xr;throw e}}),[L,r,p,e,D,w,v,s,b,t]),U=!1===j?.hasUnfilteredItems,B=j?.hasTextFilter&&0===j.totalLength&&""!==e,J=0===j?.totalLength&&j.selectedFilters.length>0&&!j?.hasTextFilter&&j?.hasUnfilteredItems;(0,c.KW)((()=>{const e=j?.selectedFilters.at(-1);J&&e&&i(e.id,!1)}),[J,j?.selectedFilters]);const{getItems:K,nrValidItems:Y,invalidateCache:H}=(0,m.Q)({nrItems:50,fetch:Z,limit:50}),W=(0,o.y1)(H,200,{leading:!0,trailing:!0,maxWait:1e3});V(j?.primaryFilter,W);const z=(0,l.useCallback)((()=>{H(),_(!1)}),[H]),G=(0,l.useRef)(null),X=(0,re.jsx)(sr,{getItems:K,scrollNodeRef:E,primaryFilter:j?.primaryFilter,nrValidItems:Y});let $;O?$=(0,re.jsx)(me,{onClick:z}):U?w||($=(0,re.jsx)(se,{className:k})):$=w?X:(0,re.jsxs)(re.Fragment,{children:[(0,re.jsxs)("div",{className:a()(pr,k),children:[(0,re.jsx)(ur,{clearOnEscapeInElementRef:G,primaryFilter:j?.primaryFilter}),(0,re.jsx)(ir,{sortOrders:j?.availableSortOrders??[],activeSortOrderId:j?.selectedSortOrder?.id,setActiveSortOrderId:b})]}),B&&(0,re.jsx)(ce,{query:e,className:k},"empty-search"),X]});const Q=O&&!j;return(0,re.jsxs)("div",{className:a()(dr,{[fe]:A===T.ON}),ref:G,...P,children:[(0,re.jsx)(Ve,{className:k,isLibraryCompletelyEmpty:U}),!w&&!Q&&(0,re.jsx)(_e,{selectedFilters:j?.selectedFilters,availableFilters:j?.availableFilters,toggleFilterId:i,resetFilterIds:s,className:a()(k,gr),scrollNodeRef:E}),(0,re.jsx)(h.U,{className:mr,ref:e=>{e&&!E.current&&(E.current=e.osInstance().getElements().viewport)},children:(0,re.jsx)("div",{className:yr,children:$})})]})},fr=()=>{const{isAnonymous:e}=(0,i.v9)((e=>e.session));return(0,re.jsx)(d.L,{onError:e=>{(0,b.vK)(e,"YourLibraryX")},children:(0,re.jsx)(I.hz,{uri:"spotify:collection",children:(0,re.jsxs)(ye,{children:[(0,re.jsx)(hr,{}),(0,re.jsx)(p.W,{isAnonymous:e})]})})})}},13991:(e,t,r)=>{r.d(t,{O:()=>E,K:()=>S});var l=r(59496),s=r(84875),a=r.n(s),n=r(97631),i=r(49351);const o="g3kBhX1E4EYEC2NFhhxG",c="O5_0cReFdHe81E0xFAD1",u="H71KtIrytVayf_dFofu7",d="SBpny8HrUTBzSjk7Vtk1",p="CxurIfvXVb_TqGF4q8Yf",m="OadpZJiOaGfX6Qp4j6n5",y="iJp40IxKg6emF6KYJ414",g="vreceNX3ABcxyddeS83B",x="Ozitxbqs1vcOukDz3GDw",b="AeEoI6ueagbJtaHl2cRd";var h=r(10616),f=r(4637);const I=({title:e,type:t,className:r})=>(0,f.jsx)("div",{"aria-label":e,className:a()(x,r),children:(0,f.jsx)(h.t,{type:t,className:b})});let S;!function(e){e[e.ROUNDED_CORNERS=0]="ROUNDED_CORNERS",e[e.CIRCLE=1]="CIRCLE",e[e.SQUARE=2]="SQUARE"}(S||(S={}));const E=(0,l.memo)((function({loadingMode:e="lazy",type:t,title:r,images:l=[],shape:s=S.SQUARE,size:x=i.m$.SIZE_56,className:b,onContextMenu:h=(()=>{}),onTouchStart:E=(()=>{}),onTouchEnd:j=(()=>{})}){const T=function(e=[]){const t=e.filter((e=>Boolean(e.width))),r=t.filter((e=>e.url&&e.width&&e.width>=i.eM[i.m$.SIZE_56])).sort(((e,t)=>e.width-t.width));return r.length?r:t}(l),C=T.length>0?T[0].url:"",v=T.map((({url:e,width:t})=>`${e} ${t/2}w, ${e} ${t}w`)).join(", "),D=()=>({[o]:i.pj.includes(x),[c]:i.wL.includes(x),[u]:i.VZ.includes(x),[d]:i.B_.includes(x)});return(0,f.jsx)("div",{className:a()(g,b),onContextMenu:h,onTouchStart:E,onTouchEnd:j,style:{width:`${i.eM[x]}px`,height:`${i.eM[x]}px`},children:(0,f.jsx)(n.E,{loading:e,src:C,alt:r,ariaHidden:!0,className:a()(y,{[m]:s===S.CIRCLE,[p]:s===S.SQUARE,...D()}),srcSet:v||void 0,testid:"entity-image",children:(0,f.jsx)(I,{title:r,type:t,className:a()({[m]:s===S.CIRCLE,[p]:s===S.SQUARE,...D()})})})})}))},49351:(e,t,r)=>{let l;r.d(t,{B_:()=>o,VZ:()=>i,eM:()=>s,m$:()=>l,pj:()=>a,wL:()=>n}),function(e){e[e.SIZE_48=0]="SIZE_48",e[e.SIZE_56=1]="SIZE_56",e[e.SIZE_64=2]="SIZE_64",e[e.SIZE_72=3]="SIZE_72",e[e.SIZE_80=4]="SIZE_80",e[e.SIZE_96=5]="SIZE_96",e[e.SIZE_104=6]="SIZE_104",e[e.SIZE_112=7]="SIZE_112",e[e.SIZE_120=8]="SIZE_120",e[e.SIZE_128=9]="SIZE_128",e[e.SIZE_136=10]="SIZE_136",e[e.SIZE_144=11]="SIZE_144",e[e.SIZE_152=12]="SIZE_152",e[e.SIZE_160=13]="SIZE_160",e[e.SIZE_168=14]="SIZE_168",e[e.SIZE_176=15]="SIZE_176",e[e.SIZE_184=16]="SIZE_184",e[e.SIZE_200=17]="SIZE_200",e[e.SIZE_232=18]="SIZE_232"}(l||(l={}));const s={[l.SIZE_48]:48,[l.SIZE_56]:56,[l.SIZE_64]:64,[l.SIZE_72]:72,[l.SIZE_80]:80,[l.SIZE_96]:96,[l.SIZE_104]:104,[l.SIZE_112]:112,[l.SIZE_120]:120,[l.SIZE_128]:128,[l.SIZE_136]:136,[l.SIZE_144]:144,[l.SIZE_152]:152,[l.SIZE_160]:160,[l.SIZE_168]:168,[l.SIZE_176]:176,[l.SIZE_184]:184,[l.SIZE_200]:200,[l.SIZE_232]:232},a=[l.SIZE_48,l.SIZE_56,l.SIZE_64],n=[l.SIZE_72,l.SIZE_80,l.SIZE_96,l.SIZE_104,l.SIZE_112,l.SIZE_120,l.SIZE_128],i=[l.SIZE_136,l.SIZE_144,l.SIZE_152,l.SIZE_160,l.SIZE_168,l.SIZE_176],o=[l.SIZE_184,l.SIZE_200,l.SIZE_232]},28010:(e,t,r)=>{r.d(t,{I:()=>s});var l=r(94887);function s(){return(0,l.S)()[0]}}}]);
//# sourceMappingURL=xpui-routes-your-library-x.js.map