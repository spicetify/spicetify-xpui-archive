"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[6025],{60821:(e,s,i)=>{i.r(s),i.d(s,{default:()=>re});var t=i(84875),a=i.n(t),n=i(77646),c=i(33951),r=i(98355),o=i(10154),l=i(97796),u=i(25875),d=i(8652),g=i(28791),m=i(39189),v=i(6191),x=i(47789),b=i(58754),f=i(63934),S=i(37223),h=i(59496),j=i(2592),p=i(30994),k=i(1740),y=i(25597),N=i(45462),L=i(34604),C=i(60029);const D="Q2RPoHcoxygOoPLXLMww",F="esRByMgBY3TiENAsbDHA",A="iq4cgi0YEKr6DGaTtzUj";var O=i(4637);const T=({trackUri:e,data:s})=>{const{spec:i,logger:t}=(0,L.fU)(p.createDesktopLyricsEventFactory,{data:{uri:e}}),a=(0,N.g)(),n=(0,h.useContext)(y.VX),c=(0,h.useCallback)(((e,s)=>{const n=i.lyricsLineFactory().hitSeekToTime({msToSeekTo:s});t.logInteraction(n);e.currentTarget.scrollIntoView({behavior:"smooth",block:"center",inline:"center"}),a.seekTo(s);const c=a.getState();c&&!c.isPaused||a.resume()}),[t,a,i]),r=(0,h.useCallback)((({lineRef:e,firstUpdate:s,isFirstLine:i,isActiveLine:t,activeLineIndex:a,hasSkipped:c})=>{if(e.current&&n.scrollNodeRef.current&&(t||i&&a<0)){const i=e.current.getBoundingClientRect().top,t=n.scrollNodeRef.current.getBoundingClientRect().height,r=t/4;if((i<r||i>t-r)&&!s&&!c&&a>=0)return;const o=s?"auto":"smooth";e.current?.scrollIntoView({behavior:o,block:"center",inline:"center"})}}),[n.scrollNodeRef]);return(0,O.jsx)("div",{className:D,children:(0,O.jsxs)("div",{className:F,children:[!s.isTimeSynced&&(0,O.jsx)(j.D,{as:"p",variant:"mesto",className:A,dir:"auto",children:k.ag.get("web-player.lyrics.unsynced")}),(0,O.jsx)(C.Z,{trackUri:e,data:s,format:"fullscreen",onLineClick:s.isTimeSynced?c:void 0,onActiveLineChange:r},e)]})})};var V=i(13533);const B="oNqyFdyc0Z01aWTF8qtF",G="C3pBU1DsOUJJOAv89ZFT",I=(0,h.memo)((function({version:e}){const{getMessage:s}=(0,V.X)();return(0,O.jsx)("div",{className:B,children:(0,O.jsx)("span",{className:G,children:s(e)})})}));var w=i(4609),E=i(47875),U=i(64819),_=i(80683),R=i(10606),J=i(34402),z=i(20156),q=i(71280),Z=i(19329),H=i(22946),P=i(78055);const Y="qnJd7AVNVGM33NxaibzG",W="tPJJwfJAQV0WDsE9Kfmd",K=[{volume:P.B.SING_ALONG_OFF,icon:(0,O.jsx)(w.D,{iconSize:16}),get label(){return k.ag.get("singalong.off")}},{volume:P.B.HIGH,icon:(0,O.jsx)(E.d,{iconSize:16}),get label(){return k.ag.get("singalong.more-vocal")}},{volume:P.B.LOW,icon:(0,O.jsx)(U.J,{iconSize:16}),get label(){return k.ag.get("singalong.less-vocal")}}],M=h.memo((function({currentTrackUri:e}){const{isSupported:s,volume:i,setVocalVolume:t}=(e=>{const s=(0,v.$)(),[i,t]=(0,h.useState)(P.B.SING_ALONG_OFF),{isSupported:a}=s.getCapabilities();return(0,h.useEffect)((()=>{s.setStatus(P.q.DISABLED).then((()=>{t(P.B.SING_ALONG_OFF)}))}),[e,s]),(0,h.useEffect)((()=>()=>{s.setStatus(P.q.DISABLED)}),[s]),{isSupported:a,volume:i,setVocalVolume:(0,h.useCallback)((async e=>{e===P.B.SING_ALONG_OFF?await s.setStatus(P.q.DISABLED):await s.setStatus(P.q.ENABLED),await s.setVocalVolume(e),t(e)}),[s])}})(e),n=(0,h.useCallback)((e=>{s&&t(e.volume)}),[s,t]);if(!s)return null;const c=K.find((e=>e.volume===i)),r=c?.volume===P.B.SING_ALONG_OFF;return(0,O.jsx)(z.yj,{menu:(0,O.jsxs)(q.v,{children:[(0,O.jsx)(Z.F,{children:k.ag.get("singalong.title")}),K.map((e=>(0,O.jsx)(H.s,{role:"menuitemradio","aria-checked":i===e.volume,"aria-label":e.label,onClick:()=>n(e),icon:e.icon,iconPosition:"leading",children:e.label},e.volume)))]}),children:(e,s,i)=>(0,O.jsxs)("button",{onClick:s,ref:i,type:"button",className:a()(Y,{[W]:r}),children:[r?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(_.r,{iconSize:16}),(0,O.jsx)(j.D,{variant:"mesto",children:k.ag.get("singalong.button")})]}):(0,O.jsxs)(O.Fragment,{children:[c.icon,(0,O.jsx)(j.D,{variant:"mesto",children:c.label})]}),e?(0,O.jsx)(R.U,{iconSize:16}):(0,O.jsx)(J.i,{iconSize:16})]})})})),X="tr8V5eHsUaIkOYVw7eSG",$="iKgf4UDhbRTHxmZSuAEc",Q="DADZePCqi2OVZpayspK_",ee="L9xhJOJnV2OL5Chm3Jew",se="SaEkeiyzAoXnWVSDiTR7",ie=(0,O.jsx)("div",{className:Q,children:(0,O.jsx)(f.H,{})}),te=(0,O.jsx)(I,{version:"error"}),ae=(0,O.jsx)(I,{version:"ad"}),ne=(0,O.jsx)(I,{version:"unavailable"}),ce={active:c.ixZ,inactive:c.Snx,passed:c.Snx,background:c.tGJ,messaging:c.ixZ},re=()=>{const e=(0,v.$)(),{isSupported:s}=e.getCapabilities(),i=(0,r.W6)(u.cp)&&s,t=(0,g.O)(),c=(0,m.Y)((e=>e?.item),((e,s)=>e?.uri===s?.uri)),f=c?.uri||"",h=(0,x.o)(c?.images||void 0,{desiredLabel:"large",desiredSize:600}),{data:j,loading:p,error:k}=(0,S.C)(f,h||c?.images?.[0]?.url||"",i);let y=ce;j?.hasLyrics&&(y={active:j.colors.activeText,inactive:j.colors.text,passed:d.I.fromCSS(j.colors.activeText,.7).toCSS(d.j.RGBA),background:j.colors.background,messaging:j.colors.text}),(0,l.Y)(y.background,ce.background);const N=(0,m.Y)((e=>e?.nextItems?.[0]),((e,s)=>e?.uri===s?.uri));(0,S.C)(N?.uri||"",N?.images?.[0]?.url||"",i);let L=ie,C=!1;if(f)if((0,o.mg)(f))L=ae;else if(k)L=te;else if(p)L=ie;else if(j)if(j.hasLyrics){const e=t.activeDevice?.isLocal??!1;C=i&&j.hasVocalRemoval&&e,L=(0,O.jsx)(T,{trackUri:f,data:j})}else L=ne;const D=(0,n.v9)((e=>e.ads.leaderboard.isEnabled)),F={"--lyrics-color-active":y.active,"--lyrics-color-inactive":y.inactive,"--lyrics-color-passed":y.passed,"--lyrics-color-background":y.background,"--lyrics-color-messaging":y.messaging};return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(b.$,{usePlayingItem:!0,children:"Spotify"}),(0,O.jsxs)("div",{className:a()(X,{[$]:D}),style:F,children:[(0,O.jsx)("div",{className:ee}),L,C?(0,O.jsx)("div",{className:se,children:(0,O.jsx)(M,{currentTrackUri:f})}):null]})]})}}}]);
//# sourceMappingURL=xpui-routes-lyrics.js.map