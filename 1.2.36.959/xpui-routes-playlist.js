"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[2355],{8878:(e,t,a)=>{a.d(t,{u:()=>p});var s=a(97500),i=a.n(s),r=a(98678),n=a(73956),l=a(14494),o=a(36471),c=a(54745),d=a(53206),u=a(18039),m=a(13274);const p=({uri:e,src:t,playAriaLabel:a,onClick:s,isPlaying:p,isActive:x,isLocked:h,isEpisode:g,isVideo:y,spec:b})=>{const f=(0,o.W)(),j=(0,l.s)(),R=(0,r.YQ)((t=>{let a;if(f({type:"click",intent:p?"pause":"play"}),b){const t=b.playbackButtonFactory();let s;s=x&&p?t.hitPause({itemToBePaused:e}):x&&!p?t.hitResume({itemToBeResumed:e}):t.hitPlay({itemToBePlayed:e}),a=j.logInteraction(s)}s(t,a)}),n.d,{leading:!0,trailing:!1});return(0,m.jsxs)("div",{className:u.A.rowImageWithPlay,children:[(0,m.jsx)(d.e,{src:t,isEpisode:g,isVideo:y}),(0,m.jsx)(c.x,{className:i()(u.A.rowPlayPauseButton,u.A.rowImagePlayPauseButton),iconClassName:u.A.rowPlayPauseIcon,onClick:R,isPlaying:p,isLocked:h,playAriaLabel:a})]})}},57282:(e,t,a)=>{a.r(t),a.d(t,{ThisIsTourCard:()=>u,default:()=>u,useThisisPlaylistExtensionQuery:()=>h});var s=a(98764),i=a(66675),r=a(14056),n=a(32371),l=a(14494),o=a(52792),c=a(86935),d=a(13274);const u=e=>{const{artistImageUrl:t,artistName:a,artistConcertsUri:u,spec:m}=e,p=(0,l.s)(),x=(0,o.t)(m.concertsCardFactory({identifier:a,uri:u,reason:"This is On Tour phase 1 MVP"}));return t&&a&&u?(0,d.jsxs)("section",{ref:x,className:"contentSpacing",children:[(0,d.jsx)(s.E,{as:"h1",variant:"bodyMediumBold",semanticColor:"textBase",children:r.Ru.get("concerts")}),(0,d.jsx)("div",{className:c.A.cards,children:(0,d.jsxs)("div",{className:c.A.tourCard,"data-testid":"on-tour-card",children:[(0,d.jsx)("img",{className:c.A.cardImage,src:t,alt:""}),(0,d.jsxs)("div",{className:c.A.cardContent,children:[(0,d.jsx)(s.E,{as:"p",variant:"bodySmall",semanticColor:"textSubdued",className:c.A.subtitle,children:r.Ru.get("concerts_on_tour")}),(0,d.jsx)(s.E,{as:"h1",variant:"bodyMediumBold",className:c.A.title,semanticColor:"textBase",children:a}),(0,d.jsx)(n.default,{to:u,className:c.A.cardLink,children:(0,d.jsx)(i.n,{as:"span",size:"small",onClick:()=>{const e=m.concertsCardFactory({identifier:a,uri:u,reason:"This is On Tour phase 1 MVP"}).hitUiNavigate({destination:u});p.logInteraction(e)},className:c.A.cardButton,children:r.Ru.get("concerts_see_all_events")})})]})]})})]}):null};var m=a(3775),p=a(16990);const x=new m.l("thisisPlaylistExtension","query","c3c3145aca9849ce8f4d742f9d4dc3be4d945717ce66347d1b3710b8a06749b6",null),h=(e,t)=>(0,p.I)(x,e,t)},26632:(e,t,a)=>{a.r(t),a.d(t,{default:()=>zr});a(36805),a(4563),a(79606),a(98211),a(24164),a(79499),a(49271);var s=a(79474),i=a(99754),r=a(83648),n=a(98764),l=a(22215),o=a(39178),c=a(83856),d=a(14056),u=a(41078),m=a(48840),p=a(13274);const x=(e,t,a)=>({event:e,app_startup_id:null,ad_playback_id:null,ad_id:String(t),lineitem_id:String(a),creative_id:String(t),ad_format:"sponsored playlist",slot:null,in_focus:null,username:null,jsondata:JSON.stringify({platform:"WebPlayer",revision:"1.0.0"})}),h=({clickTracking:e,clickThrough:t,thirdPartyImpression:a,impression:r,logoUrl:l,advertiserName:o,creativeId:c,lineItemId:u})=>{const h=(0,i.wA)(),[g,y]=(0,s.useState)(!1);return(0,s.useEffect)((()=>(h((0,m.tb)()),h((0,m.i2)(x("event_viewed",c,u))),()=>{h((0,m.zV)())})),[h,c,u]),(0,p.jsxs)("div",{className:"sponsor-container",children:[(0,p.jsx)(n.E,{variant:"marginal",className:"sponsor-text","data-ta-id":"sponsor-text",children:d.Ru.get("playlist.presented_by",o)}),(0,p.jsxs)("div",{className:"sponsor-logo",children:[(0,p.jsx)("a",{draggable:!1,className:"sponsor-logo__link",target:"_blank",href:t,onClick:()=>{h((0,m.i2)(x("event_clicked",c,u))),y(!0)},children:(0,p.jsx)("img",{draggable:!1,className:"sponsor-logo__image",src:l,alt:o,"data-ta-id":"sponsor-logo"})}),(0,p.jsx)("img",{className:"sponsor-logo__imp-pixel",src:r,alt:""}),a&&(0,p.jsx)("img",{className:"sponsor-logo__3p-imp-pixel",src:a,alt:""}),g&&(0,p.jsx)("img",{className:"sponsor-logo__click-img-pixel",src:e,alt:""})]})]})},g=({playlistUri:e})=>{const t=(0,i.wA)(),a=(0,i.d4)((t=>t.ads.sponsoredPlaylist.previewAd||t.ads.sponsoredPlaylist.sponsoredPlaylist.get(e)));return(0,s.useEffect)((()=>{a||t((0,m.uP)(e))}),[t,e,a]),a?(0,p.jsx)("div",{children:(0,p.jsx)(h,{...a})}):null},y=({playlistUri:e})=>{const t=(0,i.wA)(),a=(0,i.d4)((e=>e.ads.sponsoredPlaylist.sponsoredPlaylist.get("allSponsorships"))),r=(0,i.d4)((e=>e.ads.sponsoredPlaylist.previewAd));(0,s.useEffect)((()=>{a||t((0,m.uU)())}),[t,a]);const n=r||a&&((e,t)=>{const a=Date.now()/1e3,s=e.split(":"),i=s[s.length-1];return t.some((({playlistId:e,endTime:t,startTime:s})=>e===i&&a>=s&&a<(t||a+1)))})(e,a);return n?(0,p.jsx)(g,{playlistUri:e}):null};var b=a(61412),f=a(64647),j=a(38074),R=a(61080),A=a(33037);const C="hOOwEKqNuXrNvOCB1SgZ",v="csEdkIN9z2LjJIuZraqz",T=({uri:e})=>{const[t,a]=(0,A.A)(e),i=(0,r.Zp)(),l=(0,s.useCallback)((()=>{a(!1),i("/",{replace:!0})}),[i,a]);return(0,p.jsxs)("div",{className:C,children:[(0,p.jsx)(j.b,{size:"xxlarge"}),(0,p.jsxs)("div",{className:v,children:[(0,p.jsx)(n.E,{as:"p",variant:"titleSmall",children:d.Ru.get("forbidden-page.title")}),(0,p.jsx)(n.E,{as:"p",variant:"bodySmall",children:d.Ru.get("forbidden-page.description")})]}),t&&(0,p.jsx)(R.$,{colorSet:"invertedLight",onClick:l,children:d.Ru.get("remove_from_your_library")})]})};var k=a(82089),S=a(79055),I=a(18645),E=a(82372),N=a(98477),P=a(90661),w=a(33085),_=a(57282),L=a(70746),U=a(2092),O=a(36471),M=a(30939),D=a(82754),B=a(98678),F=a(24369),$=a(48431),z=a(80402),V=a(95147);const H=["meta+v"];var q=a(62166),W=a(19498),K=a(31350),Q=a(42360),G=a(8309),Y=a(88958),X=a(16990),J=a(26271),Z=a(34074),ee=a(60149),te=a(7009);const ae={[te.n.TITLE]:["title","original_index"],[te.n.ADDED_BY]:["added_by","original_index"],[te.n.ADDED_AT]:["added_at","album_title","album_artist_name","album_disc_number","album_track_number","original_index"],[te.n.ARTIST]:["artist_name","album_title","album_disc_number","album_track_number","original_index"],[te.n.ALBUM]:["album_title","album_disc_number","album_track_number","original_index"],[te.n.DURATION]:["duration","album_title","album_disc_number","album_track_number","original_index"]};function se(e,t){void 0!==t&&(e.metadata||={},e.metadata[Z.W.SORTING_CRITERIA]=function(e){const{field:t,order:a}=e,s=ae[t];if(void 0===s||a!==ee.x.ASC&&a!==ee.x.DESC)throw new Error("Invalid sort params!");return s.map(((e,t)=>a?`${e} ${t>0?ee.x.ASC:a}`:e)).join(",")}(t))}var ie=a(70602);const re={[ie.Hh.TEXT]:"text"},ne={[ie.tl.CONTAINS]:"=^#"};function le(e,t){void 0!==t?.value&&(e.metadata||={},e.metadata[Z.W.FILTERING_PREDICATE]=function(e){const{field:t,operator:a,value:s}=e;if(t!==ie.Hh.TEXT||a!==ie.tl.CONTAINS)throw new Error("Invalid filter params!");return`${re[t]} ${ne[a]} "${s}"`}(t))}var oe=a(42529),ce=a(92665),de=a(40643),ue=a(67302),me=a(82548),pe=a(80314),xe=a(59313);const he=[],ge=(e,t)=>{const a=[];let s=e,i=t;for(;s>0;){const t=Math.ceil(s/i);a.push({first:e-s,nrItems:t}),s-=t,i--}return a},ye=e=>{const{itemsInNode:t,renderItem:a,renderPlaceholder:s,estimatedHeight:i,scrollNodeRef:r,nrRowsOverscan:n=10,nrInitialInView:l=0,firstIndex:o,heights:c,fanOut:d=2}=e,{ref:u,inView:m,entry:x}=(0,xe.Wx)({root:r.current,rootMargin:n*i+"px 0px",initialInView:o<l}),h=`${o}-${t}`;c[h]??=i*t,x?.boundingClientRect?.height&&(c[h]=x.boundingClientRect.height);const g=c[h];return 0===t?null:m?1===t?(0,p.jsx)("div",{ref:u,role:"presentation",children:a(o,g)}):(0,p.jsx)("div",{ref:u,role:"presentation",children:ge(t,d).map((({first:t,nrItems:a},s)=>(0,p.jsx)(ye,{...e,itemsInNode:a,firstIndex:o+t},s)))}):(0,p.jsx)("div",{ref:u,role:"presentation",children:s(`${g}px`)})},be=e=>{const t=(e=>{const t=he.find((t=>t.key===e))?.heights||{},a=(0,s.useCallback)((t=>{if(!e)return;const a=he.findIndex((t=>t.key===e));-1===a?he.push({key:e,heights:t}):(he[a].heights=t,he.push(he.splice(a,1)[0])),he.length>10&&he.shift()}),[e]),i=(0,s.useRef)({...t});return(0,s.useEffect)((()=>()=>{a(i.current)}),[a]),i.current})(e.persistanceKey);return(0,p.jsx)(ye,{...e,itemsInNode:e.totalCount,firstIndex:0,heights:t,nrInitialInView:e.nrInitialInView})};var fe=a(11390),je=a(9440);function Re(e){return e.type===je.c.TRACK}function Ae(e){return e.type===je.c.EPISODE}function Ce(e){return e.type===je.c.AUDIOBOOK}var ve=a(76626),Te=a(71673),ke=a(59904),Se=a(97500),Ie=a.n(Se),Ee=a(28736),Ne=a(66675),Pe=a(48761),we=a(43505),_e=a(18389),Le=a(65325),Ue=a(88291),Oe=a(84749),Me=a(32371),De=a(35789),Be=a(11437),Fe=a(77564),$e=a(58452),ze=a(80964),Ve=a(28049),He=a(765),qe=a(30232),We=a(70974);var Ke=a(51326),Qe=a(14494),Ge=a(75024),Ye=a(32334);const Xe="dK79XxAEu3SEKJ2jS_Qy",Je="guiUbDD6Ga8Qpatq2jQ8",Ze=({isExplicit:e,children:t})=>(0,p.jsxs)("div",{className:Xe,children:[e&&(0,p.jsx)(Ye.g,{}),(0,p.jsx)(n.E,{variant:"bodySmall",className:Je,children:t})]});var et=a(2394),tt=a(11867),at=a(97247);const st="small",it="ci11tAmTK1LnxThQkXPy",rt="_2sJPwAAp1wY1Ftke6iFe",nt="yuNzasMLs7hvemHI4d8Q",lt="abYR6tZoE7BdzThmWTb0",ot="GOcKQxqNMhGzbGiAXBig",ct="yFQjuDAhri_egM1pwn70",dt=(0,s.memo)((function(e){const{breakpoint:t,className:a,showSeparator:s,...i}=e;return(0,p.jsx)(et.v,{className:Ie()(a,it,{[ct]:s}),hoverBackgroundColor:"backgroundTintedHighlight",activeBackgroundColor:"backgroundTintedBase",layout:t===st?"regular":"wide",hoverAnimationDuration:"0ms",horizontalGap:t===st?"12px":"16px",paddingBlockStart:"12px",paddingBlockEnd:"12px",...i})}));var ut=a(88395),mt=a(73068);const pt=({description:e,children:t})=>(0,p.jsxs)("div",{className:lt,children:[e&&(0,p.jsx)(ut.v,{lineClamp:2,as:"div",dir:"auto",children:(0,p.jsx)(mt.q,{asTextContent:!0,html:e})}),t]});var xt=a(263);const ht=({isPlaying:e,onClickPlay:t,name:a,authorName:s,isLocked:i,children:r})=>(0,p.jsxs)("div",{className:ot,children:[(0,p.jsx)("div",{className:rt,children:r}),(0,p.jsx)(xt.R,{size:"small",version:xt.H.secondary,onClick:t,isPlaying:e,ariaPlayLabel:d.Ru.get("tracklist.a11y.play",a,s),ariaPauseLabel:d.Ru.get("tracklist.a11y.pause",a,s),locked:i})]});var gt=a(61681),yt=a(94009),bt=a(4254);const ft=({images:e,breakpoint:t,type:a,name:s})=>{const i=(0,bt._)(),r=t===st?yt.Qe.SIZE_64:yt.Qe.SIZE_112;return(0,p.jsx)(gt.b,{fadeIn:!0,images:i(e,yt.BZ[r]),shape:gt.u.ROUNDED_CORNERS,size:r,iconSize:t===st?"medium":"xlarge",type:a,title:s,loadingMode:"eager"})};var jt=a(75783);const Rt=({children:e})=>(0,p.jsx)(jt.d,{lineClamp:2,as:"div",dir:"auto",children:e});var At=a(82924),Ct=a(77611),vt=a(96608),Tt=a(83925);const kt="WdYB8aMUe06dOu4TmYik",St="b1X4Ya4bp35IsN6tPGZw",It="aCdPMQVcvScaa22utIJM",Et=(0,s.memo)((function({book:e,contextUri:t,featureIdentifier:a,sharingInfo:i,uid:l,rating:o,isRecommendation:u=!1,canRemove:m=!1,showSeparator:x=!1,...h}){const{name:g,description:y,isLocked:b,isExplicit:f,images:j,type:R,uri:C,authorName:v,consumptionCapExplanation:T,durationMs:k,topics:S=[],signifierText:I}=e,E=(0,Qe.s)(),{spec:N}=(0,ue.r)(_e.m,{data:{position:0,uri:C}}),{isPlaying:P,isActive:w,togglePlay:_}=(0,J.P)({uri:C},{featureIdentifier:a}),L=(0,r.Zp)(),U=(0,c.o_)(C).toURLPath(!0),{addItems:O}=(0,$e.x)(t),M=(0,at.y)()===tt.E.SMALL?"small":"large",D=(e=>{const t=(0,He.L)(),a=(0,ze.jE)(),i=(0,s.useRef)(null),r=(0,s.useRef)(0),n=(0,qe.o)((t=>t?.context.uri===e?t?.item?.uri??null:null)),[l]=(0,We.S)(1e4,(e=>e?.item?.uri===n)),{data:o}=(0,Ve.I)({queryKey:["useShowPlayedState",e],queryFn:async()=>{const a=t.getShowPlayedState(e);return r.current=l,a},refetchOnWindowFocus:!1});return(0,s.useEffect)((()=>{i.current&&n!==i.current&&a.invalidateQueries({queryKey:["useShowPlayedState",e]}),i.current=n}),[n,a,e]),(0,s.useMemo)((()=>o&&t.capabilities.canGetShowPlayedState?{state:o.state,playPositionMilliseconds:o.playPositionMilliseconds+l-r.current}:null),[o,t,l])})(C),[B,F]=(0,A.A)(C),$=(0,Be.T)(C),z=M===st?"small":"medium",V=(0,s.useCallback)((()=>{E.logInteraction(N.addButtonFactory().hitAddToPlaylist({playlist:t,itemToBeAdded:C})),O([C],{after:"end"})}),[E,N,t,C,O]),H=(0,s.useCallback)((()=>{if(b&&!T)L(U);else{const e=(0,q.$I)({isPlaying:P,isActive:w,spec:N.playButtonFactory(),logger:E,uri:C});_({loggingParams:e})}}),[T,w,b,P,E,L,N,_,C,U]),W=(0,s.useCallback)((()=>{E.logInteraction(N.genreLinkFactory({uri:S[0].uri??""}).hitUiNavigate({destination:S[0].uri??""}))}),[E,N,S]),K=(0,p.jsx)(Rt,{children:g}),Q=(0,p.jsx)(pt,{description:y,children:(0,p.jsxs)(Ze,{isExplicit:!!f,children:[!0===o?.showAverage&&void 0!==o.average&&(0,p.jsxs)("span",{children:[(0,p.jsx)(Ee.j,{size:"xsmall",className:kt}),d.Ru.formatNumber(o.average,{maximumFractionDigits:1})]}),S.at(0)?.title&&(0,p.jsx)(Me.Link,{className:St,to:S[0].uri??"",onClick:W,children:S[0].title}),k&&(0,p.jsx)(Ge.j,{isPlaying:!1,fullyPlayed:D?.state===Ke.H7.Completed,durationMs:k,position:D?.playPositionMilliseconds})]})}),G=(0,p.jsx)(Oe.p,{uri:C,uid:l,contextUri:t,includeGoToAudiobook:!0,canBeRemovedFromPlaylist:m}),Y=!b&&!!!T,X=u?null:(0,p.jsxs)(ht,{isPlaying:P,onClickPlay:H,isLocked:b&&!T,name:g,authorName:v,children:[(0,p.jsx)(At.M,{className:Ie()({[nt]:B}),isAdded:B,onClick:()=>{B?E.logInteraction(N.saveToLibraryButtonFactory().hitRemoveLike({itemNoLongerLiked:C})):E.logInteraction(N.saveToLibraryButtonFactory().hitLike({itemToBeLiked:C})),F(!B)},size:z,isAudiobook:!0,condensedAll:!0}),(0,p.jsx)(Ct.I,{className:Ie()({[nt]:(0,De.X)($)}),uri:C,onClick:(e,t)=>{t===Fe.NV.ADD&&E.logInteraction(N.downloadButtonFactory().hitDownload({itemToDownload:C}))},size:z,canDownload:Y,condensedAll:!0}),(0,p.jsx)(Tt.w,{uri:C,sharingInfo:i??null,interactionData:{intent:"share",type:"click"},size:z,onClick:()=>{E.logInteraction(N.shareButtonFactory().hitShare({entityToBeShared:C,shareId:i?.shareId??""}))},condensedAll:!0}),(0,p.jsx)(Le.b,{menu:G,children:(0,p.jsx)(vt.e,{label:d.Ru.get("more.label.context",g),size:z,onClick:()=>{E.logInteraction(N.contextMenuButtonFactory().hitUiReveal())},condensedAll:!0})})]}),Z=(0,p.jsx)(ft,{images:j,name:g,type:R,breakpoint:M}),ee=I?(0,p.jsx)(n.E,{as:"div",variant:"bodySmall",semanticColor:"textBrightAccent",children:I}):null,te=u?(0,p.jsx)(Ne.n,{size:"small",onClick:V,children:d.Ru.get("playlist.extender.button.add")}):null,ae=(0,p.jsxs)(Pe.j,{hasTextSeparator:!0,children:[(0,p.jsxs)(p.Fragment,{children:[u&&b&&(0,p.jsx)(we.u,{semanticColor:"textSubdued",title:d.Ru.get("mwp.header.content.unavailable"),size:"xsmall",className:It}),d.Ru.get("card.tag.audiobook")]}),v]});return(0,p.jsx)(Ue.h,{menu:G,onShow:()=>{E.logInteraction(N.secondaryHitUiReveal())},children:(0,p.jsx)(dt,{breakpoint:M,id:`book-${C}`,media:Z,pretitle:ee,title:K,body:Q,subtitle:ae,footer:X,trailing:te,onClick:()=>{E.logInteraction(N.hitUiNavigate({destination:C})),L(U)},showSeparator:x,...h})})}));var Nt=a(20044),Pt=a(96537),wt=a(13411);const _t=(0,s.createContext)({getReference:()=>null,setReference:()=>{}}),Lt=({children:e})=>{const t=(0,s.useRef)(null),a=(0,s.useCallback)((()=>t.current),[]),i=(0,s.useCallback)((e=>{t.current=e}),[]);return(0,p.jsx)(_t.Provider,{value:{getReference:a,setReference:i},children:e})};const Ut=(e,t,a)=>{const{name:r,uri:n,uid:l}=e,{sortState:o}=(0,s.useContext)(N.cL),c=o.order!==wt.H.NONE,{draggable:d,onDragStart:m}=(0,U.P)({itemIds:[l],itemUris:[n],itemMimeTypes:[Nt.fl.AUDIOBOOKS],dragLabelText:r,contextUri:t}),{setReference:p,getReference:x}=(0,s.useContext)(_t),h=(0,s.useCallback)((e=>{p({uri:n,uid:l}),m(e)}),[m,p,l,n]),g=(0,i.wA)(),y=(0,s.useContext)(oe.w),b=(0,s.useCallback)(((e,a)=>{const s=e[Nt.fl.AUDIOBOOKS];if(!s)return;const i=x();i?a===ke.Nz.BEFORE?y.move(t,[i],{before:{uri:n,uid:l}}):y.move(t,[i],{after:{uri:n,uid:l}}):a===ke.Nz.BEFORE?g((0,u.io)(t,s,{before:{uri:n,uid:l}})):g((0,u.io)(t,s,{after:{uri:n,uid:l}})),p(null)}),[t,g,x,y,p,l,n]),f=a&&!c?[Nt.fl.AUDIOBOOKS]:[];return{...(0,Pt.A)({uri:n,id:l,allowedMimeTypesByDropPosition:{[ke.Nz.BEFORE]:f,[ke.Nz.AFTER]:f},onDrop:b}),onDragStart:h,draggable:d}},Ot="bg5inM_sdkHpYWiFf7Id",Mt="DyW2LAm9YDcCkcdM0eeP",Dt=()=>(0,p.jsx)("div",{className:Mt}),Bt=(0,s.memo)((function({item:e,contextUri:t,canEdit:a=!1,canRemove:s=!1,index:i}){const{className:r,dropPosition:n,draggable:l,...o}=Ut(e,t,a);return(0,p.jsxs)(Te.W,{className:r,"aria-posinset":i,reRunOnDOMUpdate:!0,children:[n===ke.Nz.BEFORE&&(0,p.jsx)(Dt,{}),(0,p.jsx)(Et,{book:e,contextUri:t,featureIdentifier:"playlist",sharingInfo:e.sharingInfo,uid:e.uid,rating:e.rating,canRemove:s,className:r,draggable:l,showSeparator:0!==i,...o}),n===ke.Nz.AFTER&&(0,p.jsx)(Dt,{})]})}));var Ft=a(43568);const $t=({contextUri:e,initialItems:t,nrItems:a,canEdit:i,canRemove:n,ariaLabel:l})=>{const o=(0,s.useContext)(oe.w),c=(0,Q.v7)(),{filter:d}=(0,s.useContext)(E.g),{sortState:u}=(0,s.useContext)(N.cL),{contentsOptions:m}=(0,Ft.$)(u,d),[,x]=(0,P.z1)(),h=(0,s.useCallback)((async(t,a)=>{const s=await o.getContents(e,{...m,offset:t,limit:a}),i=s.items.map((e=>null===e?null:Ce(e)?e:null));return{...s,items:i}}),[o,m,e]),{getItem:g,nrValidItems:y,invalidateCache:b}=(0,fe.E)({nrItems:a,fetch:h,limit:50,initialItems:t});(0,s.useLayoutEffect)((()=>{x(y)}),[y,x]),(0,ve.H)(e,b);const f=(0,s.useCallback)((e=>(0,p.jsx)("div",{style:{height:e}})),[]),j=(0,s.useCallback)(((t,a)=>{const s=g(t);return s?(0,p.jsx)(Bt,{contextUri:e,item:s,canEdit:i,canRemove:n,index:t},s.uri):f(`${a}px`)}),[i,n,e,g,f]),R="POP"===(0,r.wQ)()?0:10;return(0,p.jsx)("div",{className:Ot,children:(0,p.jsx)(pe.R,{firstInteractiveIsWrapper:!0,"aria-label":l,"aria-rowcount":y,"aria-colcount":6,children:(0,p.jsx)(Lt,{children:(0,p.jsx)(be,{totalCount:y,estimatedHeight:200,renderItem:j,renderPlaceholder:f,scrollNodeRef:c,nrRowsOverscan:10,persistanceKey:e,nrInitialInView:R})})})})};var zt=a(76816),Vt=a(35814),Ht=a(24885),qt=a(71781),Wt=a(15704),Kt=a(41791),Qt=a(13480),Gt=a(97374),Yt=a(95999),Xt=a(45640),Jt=a(26903),Zt=a(47469),ea=a(7283),ta=a(41955),aa=a(82390),sa=a(18836),ia=a(28078),ra=a(3265),na=a(55138),la=a(63393);let oa=function(e){return e.DOWN="DOWN",e.UP="UP",e.EQUAL="EQUAL",e.NEW="NEW",e}({});var ca=a(18039);const da={[oa.DOWN]:()=>(0,p.jsx)(ra.y,{size:"small",className:ca.A.statusChangeDown}),[oa.UP]:()=>(0,p.jsx)(na.J,{size:"small",className:ca.A.statusChangeUp}),[oa.NEW]:()=>(0,p.jsx)(la.Z,{className:ca.A.notificationDot}),[oa.EQUAL]:()=>null},ua=({status:e,number:t})=>{const a=da[e];return(0,p.jsxs)("div",{className:Ie()(ca.A.rowChartStatus),children:[(0,p.jsx)(n.E,{variant:"bodyMedium",children:t}),(0,p.jsx)(a,{})]})};var ma=a(16482),pa=a(53206),xa=a(64652),ha=a(66014),ga=a(43418),ya=a(49798),ba=a(91058),fa=a(96042),ja=a(20502),Ra=a(64606),Aa=a(38276),Ca=a(92633);const va=s.memo((function({uri:e,name:t,duration_ms:a,artists:s,album:i,isMOGEFRestricted:r,isExplicit:n,isPlayable:l,uid:o,index:c,contextUri:u,imgUrl:m,statusChange:x,playCount:h,usePlayContextItem:g,isCompactMode:y}){const{spec:b}=(0,ue.r)(Vt.i,{data:{position:c,reason:"",uri:e}}),f=(0,zt.w)(),j=(0,Kt.c)(),{isActive:R,isPlaying:A,triggerPlay:C,togglePlay:v}=g({uid:o,uri:e,index:c}),T=(0,Be.T)(e),k=(0,ea.g)(e,l),{badges:S,hasBadges:I}=(0,Jt.b)({downloadAvailability:T,isExplicit:n,isMOGEFRestricted:r}),E=s?.map((e=>e.name)).join(d.Ru.getSeparator())||"";return(0,p.jsx)(Yt.pZ,{value:"row",index:c,children:(0,p.jsx)(Ue.h,{menu:(0,p.jsx)(ta.P,{uri:e,albumUri:i?.uri,artists:s}),children:(0,p.jsx)(Ca.w,{uri:e,contextUri:u,index:c,onTriggerPlay:(e,t)=>{C({loggingParams:t})},isActive:R,ariaRowIndex:c+1,isPlayable:k,ageRestricted:r,dragMetadata:{name:t,createdBy:E},allowedDropTypes:[],spec:b,isCompactMode:y,children:f.map(((r,n)=>{const l=(0,qt.y)(n,r,f);return(0,p.jsx)(l,{ariaColIndex:n,children:(()=>{switch(r){case wt.$.INDEX:return(0,p.jsx)(ga.$,{uri:e,className:ca.A.rowMarkerChartStatus,playAriaLabel:d.Ru.get("tracklist.a11y.play",t,E),onClick:(e,t)=>{v({loggingParams:t})},isPlaying:A,isActive:R,spec:b,children:x?(0,p.jsx)(ua,{number:c+1,status:x}):(0,p.jsx)(ba.a,{children:c+1})});case wt.$.TITLE_AND_ARTIST:case wt.$.TITLE_AND_AUTHOR:return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(pa.e,{src:m}),(0,p.jsxs)(xa.l,{children:[(0,p.jsx)(Aa.p,{titleText:t,children:t}),I&&(0,p.jsxs)(ia.P,{children:[S.download&&(0,p.jsx)(Qt._,{}),S.explicit&&(0,p.jsx)(Ye.g,{}),S.nineteen&&(0,p.jsx)(Gt.q,{className:ca.A.nineteen,size:16})]}),(0,p.jsx)(ja.p,{children:(0,p.jsx)(sa.l,{artists:s,spec:b})})]})]});case wt.$.TITLE:return(0,p.jsxs)(ha.q,{children:[j?(0,p.jsx)(Me.default,{to:e,className:ca.A.rowTitle,"data-testid":"internal-track-link",children:(0,p.jsx)(Aa.p,{titleText:t,children:t})}):(0,p.jsx)(Aa.p,{titleText:t,children:t}),I&&(0,p.jsxs)(ia.P,{children:[S.download&&(0,p.jsx)(Qt._,{}),S.explicit&&(0,p.jsx)(Ye.g,{}),S.nineteen&&(0,p.jsx)(Gt.q,{className:ca.A.nineteen,size:16}),S.hasAssociatedVideo&&(0,p.jsx)(Wt.l,{})]})]});case wt.$.ARTIST:case wt.$.AUTHOR:return(0,p.jsx)(Ra.Y,{children:s&&(0,p.jsx)(Ht.E,{artists:s,spec:b})});case wt.$.PLAYS:return(0,p.jsx)(fa.Y,{playcount:h});case wt.$.ALBUM_OR_PODCAST:case wt.$.ALBUM:return(0,p.jsx)(aa.g,{uri:i.uri,name:i.name,creatorUri:s?.[0]?.uri,spec:b,children:i.name});case wt.$.DURATION:return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(Zt.d,{uri:e,spec:b}),(0,p.jsx)(ma.P,{duration:a}),(0,p.jsx)(ya.Y,{menu:(0,p.jsx)(ta.P,{uri:e,albumUri:i?.uri,artists:s}),label:d.Ru.get("more.label.track",t,E),spec:b})]});case wt.$.ADDED_BY:case wt.$.ADDED_AT:case wt.$.RELEASE_DATE:case wt.$.ACTIONS:case wt.$.ALBUM_OR_SHOW:case wt.$.EVENT_DATE:case wt.$.EVENT_INFO:case wt.$.CONCERT_DATE:case wt.$.CONCERT_VENUE:case wt.$.ADD:return null;default:(0,Xt.d)(r)}return null})()},`column-${n}`)}))})})})}),((e,t)=>e.uri===t.uri&&e.isCompactMode===t.isCompactMode));var Ta=a(94544),ka=a(24577);const Sa={column:null,order:wt.H.NONE},Ia=s.memo((function({ariaLabel:e,nrTracks:t,playlistUri:a,scrollToUid:i,usePlayContextItem:r,tracklistDomRef:n,sortableColumns:l,isCompactMode:o=!1}){const c=(0,s.useContext)(oe.w),{filter:d,setFilter:u}=(0,s.useContext)(E.g),m=(0,s.useRef)(null),x=(0,s.useCallback)((()=>{m.current&&m.current.update()}),[]);(0,ve.H)(a,x);const{sortState:h,setSortState:g}=(0,s.useContext)(N.cL),y=(0,s.useCallback)((e=>{g((0,I.So)(e,h))}),[h,g]);(0,s.useEffect)((()=>{g(Sa),u("")}),[a,u,g]),(0,s.useEffect)((()=>{m.current&&i&&m.current.scrollToItem({uid:i})}),[i]);const b=(0,s.useCallback)((async(e,t)=>{const s=await c.getContents(a,{offset:e,limit:t,sort:(0,I.Xt)(h),filter:d,decorateFormatListData:!0});return{items:s.items,totalLength:s.totalLength}}),[a,c,h,d]),f=(0,s.useCallback)(((e,t)=>{const s=(0,ka.g)(e.album?.images,{desiredSize:40,desiredLabel:"small"});return(0,p.jsx)(va,{index:t,contextUri:a,uri:e.uri,uid:e.uid||void 0,isPlayable:e.isPlayable,duration_ms:e.duration.milliseconds,name:e.name,artists:e.artists,album:e.album,isExplicit:e.isExplicit,isMOGEFRestricted:e.is19PlusOnly,type:e.type,imgUrl:s?.url||"",statusChange:e.formatListAttributes?.status,playCount:parseInt(e.formatListAttributes?.rank||"0",10),usePlayContextItem:r,isCompactMode:o},t+e.uri)}),[a,r,o]),j=(0,zt.w)(),R=(0,s.useCallback)((e=>({uri:e.uri,uid:e.uid})),[]);return(0,p.jsx)(Yt.pZ,{value:"chart-tracklist",children:(0,p.jsx)(Ta.S4,{ariaLabel:e,hasHeaderRow:!0,columns:j,sortableColumns:l,sortState:h,onSort:y,renderRow:f,resolveItem:R,nrTracks:t,fetchTracks:b,limit:100,canFetchAllTracks:c.getCapabilities().canFetchAllTracks,outerRef:m,outerDomRef:n,columnPersistenceKey:"chart-tracklist",isCompactMode:o,className:ca.A.chartTrackList},a)})}));var Ea=a(99426),Na=a(67447),Pa=a(88724),wa=a(96660);function _a(e,t){return e.build().withHost(Pa.QU).withPath("/views/recommendations-in-free-tier-playlist-source").withQueryParameters({signal:`playlistURI:${t}`,limit:"10"}).withEndpointIdentifier("/views/{viewId}").send()}var La=a(74938),Ua=a(82052);const Oa="BagEpNps_J8R2QuHRZMa",Ma="bjB8WZd0Ev30ZFbiScDm",Da=(0,s.memo)((({uri:e})=>{const{scrollNodeRef:t}=(0,s.useContext)(Q.bi),{ref:a,inView:i}=(0,xe.Wx)({initialInView:!1,rootMargin:"128px 100%",root:t.current}),r=function(e,t){const{data:a}=(0,wa.Z)(_a,[e],{enabled:t,staleTime:36e5,gcTime:72e5});return a?.body.content?.items}(e,i),n=(0,s.useRef)(null),l=function(e){const[t,a]=(0,Ua.x)("mlt-height",300),i=(0,s.useCallback)((()=>{const t=e.current?.getBoundingClientRect()?.height;t&&a(t)}),[e,a]);return(0,La.w)({refOrElement:e,observeOnly:"height",onResize:i,observeOnMount:!0}),t}(n);return 0===r?.length?null:(0,p.jsx)("div",{className:Oa,style:{"--last-height":`${l}px`},ref:a,children:r&&(0,p.jsx)(Na.p,{id:"0JQ5DAob0LgAOAm50K90Od",index:0,title:d.Ru.get("web-player.playlist.more-like-this.section-header-title"),total:r.length,elementRef:n,className:Ma,children:r.map(((e,t)=>(0,p.jsx)(Ea.B,{index:t,uri:e.uri,name:e.name,authorName:e.owner?.display_name??null,description:null,images:e.images},e.uri)))})})}));var Ba=a(97997),Fa=a(5513),$a=a(81643),za=a(35663),Va=a(65594),Ha=a(87465),qa=a(92585),Wa=a(95063),Ka=a(67976),Qa=a(36833),Ga=a(64658),Ya=a(11283),Xa=a(43702),Ja=a(88713),Za=a(12652),es=a(50705),ts=a(73787);const as={bottomEnd:ts.dw.topStart,top:ts.dw.bottom},ss=({visible:e,onHide:t,placement:a,children:s,label:i})=>{const r=(0,l.NC)(me.rW);return(0,p.jsx)(Za.W,{placement:a,withPortal:!0,overlay:e&&(0,p.jsx)("div",{className:Ie()({"circular-sp-vietnamese":r}),children:(0,p.jsx)(es.A,{arrow:as[a],colorSet:"announcement",onClose:t,children:i})}),children:s})};var is=a(70511),rs=a(31199);let ns=function(e){return e.xs="small",e.sm="medium",e.md="large",e}({});const ls=({uri:e,label:t,onClick:a,size:s=ns.md})=>{const{onCopyLink:i}=(0,rs.J)({uri:e,permissionLevel:"CONTRIBUTOR"}),{toggleActivationVisible:r,setToggleActivationVisible:n}=(0,is.R)();return(0,p.jsx)(ss,{visible:r,onHide:()=>n(!1),label:d.Ru.get("web-player.playlist.invite-collaborators.message"),placement:"bottomEnd",children:(0,p.jsx)(Ja.Zp,{label:t,children:(0,p.jsx)(Ya.H,{onClick:e=>{a?.(e),i?.()},iconOnly:Xa.h,size:s,"aria-hidden":"true","aria-label":t,condensed:!0})})})};var os=a(60347),cs=a(39950),ds=a(8092);const us=s.memo((({metadata:e,tracklistDomRef:t,sortableColumns:a})=>{const{hasSpotifyAudiobooks:i}=e,r=i||!1,{spec:n,logger:l}=(0,ue.r)(os.E,{}),o=(0,s.useCallback)((()=>{l.logInteraction(n.filterFieldFactory().keyStrokeFilter())}),[l,n]),c=(0,s.useCallback)((()=>{l.logInteraction(n.filterFieldFactory().hitClearFilter())}),[l,n]);return(0,p.jsxs)("div",{className:S.A.searchBoxContainer,children:[(0,p.jsx)(s.Suspense,{fallback:null,children:(0,p.jsx)(cs.S,{placeholder:d.Ru.get("playlist.search_in_playlist"),onFilter:o,onClear:c,clearOnEscapeInElementRef:t})}),(0,p.jsx)(ds.d,{columns:[...a],isBooklist:r})]})}));var ms=a(22259),ps=a(14251),xs=a(75995),hs=a(23689),gs=a(79851),ys=a(76817),bs=a(85786);const fs="Nsm1KW9VyG_x31bDxiMq",js="V1_cnG6xhITE0Os6pB4i",Rs="iAw7VGADtvSGMZLyi0Wt",As="gYMIRdtpzA8QoQIgqIj9",Cs="kaC0v1hLpJDsyxqsPnRO",vs="fiu9gop6aLcAOx8QlxoN",Ts="mKHUjShA8LA_igE7xfiy",ks="iOjCuds7jaCmIOiCq8WM",Ss="aJN1c0hu5pyBsOO42now",Is="cqvEEbkQ7gXyaPckyYSD",Es="XviSWepugitdeRtlmQPo",Ns="Cj6AoLN7MgoXN17BN8a_";function Ps(e){const t=(0,s.useRef)(null);return(0,p.jsx)(ps.z,{center:!0,onClose:e.onClose,ref:t,withPortal:!0,children:(0,p.jsx)(xs.j,{className:fs,"aria-label":"Example showing onClose property",body:(0,p.jsxs)("div",{className:Ss,children:[(0,p.jsx)(Ya.H,{size:"medium","aria-label":"IconX",iconOnly:hs.M,onClick:e.onClose,className:Es}),(0,p.jsx)(Ya.H,{size:"medium","aria-label":"IconArrowLeft",iconOnly:ys.G,className:Is}),(0,p.jsx)("div",{className:js,children:(0,p.jsxs)("div",{className:Rs,children:[(0,p.jsx)("div",{className:Cs,children:(0,p.jsxs)("div",{className:vs,children:[(0,p.jsx)(ms._,{className:Ts,src:"https://i.scdn.co/image/ab6761610000517469fd2e170a6d290939620b61",alt:"A headshot profile picture of Afrobeats artist Lojay",imageHeight:"150px",imageWidth:"150px",crop:!0,circle:!0}),(0,p.jsx)(ms._,{className:ks,src:"spotify:image:ab67706c0000da8465307c7864e1e9d53770a94e",alt:"Ginjapiano playlist profile picture",imageHeight:"150px",imageWidth:"150px",crop:!0,circle:!0})]})}),(0,p.jsxs)("div",{className:As,children:[(0,p.jsxs)(n.E,{as:"p",variant:"marginalBold",children:[(0,p.jsx)("span",{style:{color:"#dc744d"},children:"4M"})," STREAMED THIS WEEK"]}),(0,p.jsxs)(n.E,{as:"p",variant:"titleMedium",children:["IM IN THE ",(0,p.jsx)("span",{style:{color:"#dc744d"},children:"TOP 21% "}),"OF GINJAPIANO LISTENERS THIS WEEK."]})]}),(0,p.jsx)("div",{className:Cs,children:(0,p.jsx)(bs.D,{size:"xlarge"})})]})}),(0,p.jsx)("div",{className:Ns,children:(0,p.jsx)(R.$,{colorSet:"invertedLight",children:"Share"})})]})})})}const ws="cNbYN1A3elHf6vXhwuD6",_s="nrvvByi_TrwigAy7MqLq",Ls="_63iyIKya3S3JD1hEwrg",Us="jUMxsqWprU6Vb0EV8Qex",Os="rUg4NRUfX0D_VfkfITWX",Ms="fSoqdlQKqHOzB6z5xpHr",Ds=s.memo((function({setuserView:e}){const[t,a]=(0,s.useState)(!1);return(0,p.jsxs)(p.Fragment,{children:[t&&(0,p.jsx)(Ps,{onClose:()=>{a(!1)}}),(0,p.jsx)(ps.z,{center:!0,withPortal:!0,children:(0,p.jsx)(xs.j,{colorSet:"overMedia","aria-label":"Title",body:(0,p.jsx)("div",{children:(0,p.jsx)(n.E,{as:"p"})}),dialogTitle:(0,p.jsxs)("div",{className:ws,children:[(0,p.jsxs)("div",{className:Ls,children:[(0,p.jsxs)("div",{children:[(0,p.jsx)(ms._,{src:"https://i.scdn.co/image/54470e5e056b93d7022076960d3a6b2267ece226",alt:"A figure sits cross-legged but poised in front of their synthesizer",imageHeight:"20px",imageWidth:"20px",crop:!0,circle:!0}),(0,p.jsx)(ms._,{src:"https://i.scdn.co/image/54470e5e056b93d7022076960d3a6b2267ece226",alt:"A figure sits cross-legged but poised in front of their synthesizer",imageHeight:"30px",imageWidth:"30px",crop:!0,circle:!0})]}),(0,p.jsx)(n.E,{as:"h1",variant:"titleMedium",children:"Rap Caviar"})]}),(0,p.jsxs)("div",{className:_s,children:[(0,p.jsx)(Ya.H,{iconOnly:hs.M,onClick:()=>e(!1),className:Os}),(0,p.jsx)(Ya.H,{iconOnly:gs.y,className:Ms,onClick:()=>{a(!0)}})]}),(0,p.jsx)("div",{className:Us,children:(0,p.jsx)(n.E,{as:"p",variant:"bodyMedium",children:"Hello you made it to the top 10 percent"})})]}),id:"dialogAlert"})})]})})),Bs="_sIwRwAiYgThUKV4sDZv",Fs="Bhq_0EXvatjFMsPLUBc4",$s="jihntHb3VTrgKoI_EGjo",zs="eYnuUtUh5Y7KYWxgqL19";function Vs(){const[e,t]=(0,s.useState)(!1);return(0,p.jsxs)(p.Fragment,{children:[e&&(0,p.jsx)(Ds,{setuserView:t}),(0,p.jsxs)("button",{className:Bs,onClick:()=>t(!0),children:[(0,p.jsxs)("div",{className:Fs,children:[(0,p.jsx)(ms._,{className:$s,src:"https://i.scdn.co/image/54470e5e056b93d7022076960d3a6b2267ece226",alt:"A figure sits cross-legged but poised in front of their synthesizer",imageHeight:"30px",imageWidth:"30px",crop:!0,circle:!0}),(0,p.jsx)(ms._,{className:$s,src:"https://i.scdn.co/image/54470e5e056b93d7022076960d3a6b2267ece226",alt:"A figure sits cross-legged but poised in front of their synthesizer",imageHeight:"30px",imageWidth:"30px",crop:!0,circle:!0}),(0,p.jsx)(ms._,{className:$s,src:"https://i.scdn.co/image/54470e5e056b93d7022076960d3a6b2267ece226",alt:"A figure sits cross-legged but poised in front of their synthesizer",imageHeight:"30px",imageWidth:"30px",crop:!0,circle:!0})]}),(0,p.jsxs)("div",{className:zs,children:[(0,p.jsx)(n.E,{as:"p",variant:"bodySmallBold",children:"View employee leaderboard"}),(0,p.jsx)(n.E,{as:"p",variant:"bodySmall",children:"You're in the top 21% of listeners."})]})]})]})}var Hs=a(76267),qs=a(71132);const Ws=s.memo((function({playlist:e,capabilities:t,spec:a,isPlaying:i,isActive:r,togglePlay:n,isBooklist:o,isConcert:c=!1,backgroundColor:u,tracklistDomRef:m,sortableColumns:x}){const{metadata:{uri:h,name:g,unfilteredTotalLength:y,isOwnedBySelf:b,canPlay:f,isPublished:j,totalLength:R}}=e,C=(0,M.n)(),v=(0,Qe.s)(),T=(0,s.useMemo)((()=>a.shuffleButtonContainerFactory()),[a]),k=t.canFilter&&y>0,I=t.canSort&&y>0,E=y>0,N=(0,l.NC)(W.F6p),P=(0,l.NC)(W.McC,{loadingValue:!1}),w=(0,qs.X)(),[_,L]=(0,A.A)(h),U=(0,O.W)(),D=(0,s.useCallback)((async()=>{U({targetUri:h,intent:_?"unsave":"save",type:"click"});try{await L(!_)}catch{}}),[_,U,L,h]),B=(0,s.useCallback)((()=>{const e=a.shareButtonFactory().hitShare({entityToBeShared:h,shareId:""});v.logInteraction(e)}),[a,v,h]),F=(0,s.useCallback)((()=>{let e;const t=a.heartButtonFactory();e=_?t.hitUnfollow({itemToBeUnfollowed:h}):t.hitFollow({itemToBeFollowed:h}),v.logInteraction(e),D()}),[a,D,_,v,h]),$=(0,Qa.j)(),z=k&&I;return(0,p.jsxs)(Ba.E,{backgroundColor:u,children:[(0,p.jsxs)(Fa.S,{children:[f&&!o?(0,p.jsx)(qa.D,{onClick:n,isPlaying:i,size:$,uri:h,ariaPlayLabel:d.Ru.get("playlist.a11y.play",g),ariaPauseLabel:d.Ru.get("playlist.a11y.pause",g)}):null,w&&R>0&&!o&&(0,p.jsx)(Ga.r,{spec:T,children:(0,p.jsx)(Ka.Y,{shuffleContext:Hs.b.playlistActionBar,entityName:g,contextUri:h,isActive:r,activationPlacement:"bottomEnd",size:$})}),b?null:(0,p.jsx)(Va.e,{children:(0,p.jsx)(At.M,{isAdded:!!_,onClick:F,size:$})}),!o&&(0,p.jsx)($a.f,{uri:h,isFollowing:!!_,canDownload:E,onClick:(e,t)=>(0,q.Qv)(t,a.downloadButtonFactory(),v,h),onFollow:D,size:$}),(0,p.jsx)(Ha.u,{property:W.G6N,renderNewExperience:()=>e.metadata.permissions?.canAdministratePermissions&&C&&(!o||P)?(0,p.jsx)(ls,{onClick:B,label:d.Ru.get("permissions.invite-collaborators",g),uri:h,size:$}):null}),(c||o)&&(0,p.jsx)(Tt.w,{uri:h,sharingInfo:null,interactionData:{intent:"share",type:"click",itemIdSuffix:c?"concerts-near-you/share":"booklist/share"},onClick:B,size:$}),(0,p.jsx)(Le.b,{onShow:()=>(0,q.R2)(a,v),menu:(0,p.jsx)(za.W,{uri:h,isPublished:j}),children:(0,p.jsx)(vt.e,{label:d.Ru.get("more.label.context",g),size:$})}),z?(0,p.jsx)(Ga.r,{spec:a,children:(0,p.jsx)(us,{metadata:e.metadata,tracklistDomRef:m,sortableColumns:x})}):(0,p.jsx)("div",{className:S.A.leadingSlot,children:(0,p.jsx)(Ha.u,{property:W.mA2,renderNewExperience:()=>(0,p.jsx)(Wa.g,{options:[],onSelect:()=>{},selected:null,enableViewModeMenu:!0})})})]}),N&&(0,p.jsx)(Vs,{})]})}));var Ks=a(3498),Qs=a(52792);const Gs=e=>{const t=(0,Qe.s)(),a=(0,s.useMemo)((()=>e.spec.promoCardFactory()),[e.spec]),i=(0,Qs.t)(a);return(0,p.jsxs)("div",{className:S.A.concertsFooter,children:[(0,p.jsx)(Me.default,{to:"/concerts",className:S.A.ctaLink,onClick:()=>{const e=a.hitUiNavigate({destination:"spotify:app:concerts"});t.logInteraction(e)},children:(0,p.jsxs)("div",{className:S.A.promoRow,ref:i,children:[(0,p.jsx)(n.E,{as:"h2",variant:"bodyMediumBold",className:S.A.promoTitle,children:d.Ru.get("concerts.find_more")}),(0,p.jsx)(Ks.v,{as:"span",selected:!0,children:d.Ru.get("concerts.find_nearby")}),(0,p.jsx)("img",{className:S.A.promoImage,alt:"",src:"https://i.scdn.co/image/ab676d63000076a0dbdb7dc2499cbb9ef096518d"})]})}),(0,p.jsx)("div",{className:S.A.disclaimerContainer,children:(0,p.jsx)(n.E,{as:"div",variant:"marginal",semanticColor:"textSubdued",children:d.Ru.get("concerts_near_you.playlist_disclaimer")})})]})};var Ys=a(7964),Xs=a(68355),Js=a(93209);const Zs="multiUserAttributionDisplayNamesV2";function ei(e){return Re(e)||Ae(e)}function ti(e){return Re(e)||Ae(e)||Ce(e)}const ai=s.memo((function({ariaLabel:e,nrTracks:t,playlistUri:a,playlistName:r,isMixedMedia:n,isLive:o,isBlend:m,isConcert:x,isBooklist:h,canEdit:g,scrollToUid:y,feedbackPath:b,deleteFeedbackPath:f,usePlayContextItem:j,tracklistRef:R,tracklistDomRef:A,canRemove:C,spec:v,initialItems:T,isCompactMode:k=!1,sortableColumns:S,hasSpotifyAudiobooks:w}){const _=(0,Qe.s)(),L=(0,l.NC)(W.LX5),U=(0,s.useContext)(oe.w),{filter:O}=(0,s.useContext)(E.g),{sortState:M,setSortState:D}=(0,s.useContext)(N.cL),B=(0,s.useRef)((()=>{})),[F,$]=(0,s.useState)([]),z=(0,i.wA)(),V=(0,zt.w)(),H=(0,s.useCallback)((()=>{R?.current&&R.current.update()}),[R]);(0,ve.H)(a,H);const q=(0,s.useCallback)(((e,t)=>{D((0,I.So)(e,M)),_.logInteraction(v.columnHeaderFactory({identifier:e,position:t||0}).hitSort())}),[D,M,_,v]),K=(0,s.useCallback)((e=>{B.current(),U.remove(a,e)}),[U,a]),Q=(0,s.useCallback)(((e,t,a=!1)=>{C&&(B.current=t,e.length>1&&!a?$(e):K(e))}),[C,K]);(0,s.useEffect)((()=>{R?.current&&y&&R.current.scrollToItem({uid:y})}),[y,R]);const G=(0,s.useCallback)((async(e,t)=>{const s=await U.getContents(a,{offset:e,limit:t,sort:(0,I.Xt)(M),filter:O,decorateFormatListData:!!b||o||m});return{items:s.items,totalLength:s.totalLength}}),[a,U,M,O,b,o,m]),Y=(0,s.useCallback)(((e,t,s)=>{if(!R?.current)return;const i=R.current.getRows()[t];i&&(_.logInteraction(v.dragSort()),s===Ca.Y.Before?U.move(a,e,{before:i}):U.move(a,e,{after:i}))}),[R,_,v,U,a]),X=(0,s.useCallback)(((e,t,s)=>{if(!R?.current)return;const i=R.current.getRows()[t];i&&(_.logInteraction(v.dragAddToPlaylist({playlist:a,itemToBeAdded:e[0]})),s===Ca.Y.Before?z((0,u.io)(a,e,{before:{uri:i.uri,uid:i.uid}})):z((0,u.io)(a,e,{after:{uri:i.uri,uid:i.uid}})))}),[R,_,v,a,z]),J=(0,s.useCallback)((()=>{U.resync(a)}),[U,a]),Z=(0,s.useCallback)(((e,t)=>{let s,i=null;Ae(e)?(i=e.show,s=e.images.concat(e.show?.images||[])):Re(e)?(i=e.album,s=e.album?.images):Ce(e)&&(s=e.images);const l=(0,ka.g)(s,{desiredSize:40,desiredLabel:"small"});let o=[];g&&M.order===wt.H.NONE&&(o=h?[Nt.fl.AUDIOBOOKS]:[Nt.fl.TRACKS,Nt.fl.LOCAL_TRACKS,Nt.fl.EPISODES,...w?[Nt.fl.AUDIOBOOKS]:[]]);const d="1"===e?.formatListAttributes?.["dislike-feedback-selected"],u=!!Ae(e)&&e.podcastSubscription.isUserSubscribed;let y=!1;Ae(e)&&e.podcastSubscription.isPaywalled&&!u?y=!0:ei(e)?y=e.isPlayable&&!d:Ce(e)&&(y=!0);let R=!1;Ae(e)&&e.podcastSubscription.isPaywalled?R=!0:Ce(e)&&(R=e.isLocked&&!e.isOutOfMarket);const A=m&&((e,t)=>{const a=[];if(!t)return a;const s=t[Zs]?Zs:"multiUserAttributionDisplayNames",i=t?.[s]?.split(","),r=t?.multiUserAttributionImages?.split(",");if(!i||!r)return a;const n=t?.multiUserAttributionUsernamesV2?.split(",")||[],l=t?.multiUserAttributionType?.split(",")||[],o=i.length;for(let e=0;e<o;e++){const t=n[e],s=t&&(0,c.Qj)(t).toURI();a.push({username:t,uri:s,displayName:i[e],images:(d=r[e],d.length>1?[{url:d}]:[]),recsplanation:l[e]})}var d;return a.sort(((t,a)=>t.username?t.username===e?.username?-1:a.username===e?.username?1:0:0))})(e.addedBy,e?.formatListAttributes)||e.addedBy&&[e.addedBy]||[];let v=0;ei(e)?v=e.duration.milliseconds:Ce(e)&&(v=e.durationMs||0);let T="";return ti(e)&&(T=e.name),(0,p.jsx)(Js.W,{isCompactMode:k,index:t,playIndex:e.playIndex??void 0,contextUri:a,uri:e.uri,uid:e.uid,isPlayable:y,duration_ms:v,isPaywalled:R,isUserSubscribed:u,name:T,artists:Re(e)?e.artists:void 0,albumOrShow:i,isExplicit:(ti(e)&&e.isExplicit)??!1,hasAssociatedVideo:(Re(e)&&e.hasAssociatedVideo&&L)??!1,isMixedMedia:n,isLocal:Re(e)&&e.isLocal,addedBy:A,hasDecoratedAddedBy:U.getCapabilities().canDecorateAddedBy,dateAdded:e.addedAt,release_date:Ae(e)&&e.release.date||"",isMOGEFRestricted:(Re(e)||Ae(e))&&e.is19PlusOnly,type:e.type,imgUrl:l?.url||"",onMove:Y,onInsert:X,usePlayContextItem:j,allowedDropTypes:o,feedbackPath:b,feedbackUri:e?.formatListAttributes?.feedback_uri,deleteFeedbackPath:f,isDisliked:d,isBlend:m,ticketingSiteURL:e?.formatListAttributes?.ticketingSite,eventDate:e?.formatListAttributes?.eventDate,canRemove:C,onFeedbackClick:J,playlistName:r,isConcert:x,concertsCount:e.formatListAttributes?.concerts_count,concertURI:e.formatListAttributes?.target_uri,concertDate:e.formatListAttributes?.first_concert_date,concertVenue:e.formatListAttributes?.first_concert_venue,authorName:Ce(e)?e.authorName:"",isOutOfMarket:!!Ce(e)&&e.isOutOfMarket,consumptionCapExplanation:Ce(e)?e.consumptionCapExplanation:void 0,isOwnedBySelf:g},t+e.uri)}),[g,h,M.order,m,k,a,L,n,U,Y,X,j,b,f,C,J,r,x,w]),ee=(0,s.useCallback)((e=>({uri:e.uri,uid:e.uid,type:e.type})),[]),[,te]=(0,P.z1)();return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(Yt.pZ,{value:"playlist-tracklist",children:(0,p.jsx)(Ta.S4,{isCompactMode:k,testID:"playlist-tracklist",ariaLabel:e,hasHeaderRow:!0,columns:V,sortableColumns:S,sortState:M,onSort:q,onRemove:Q,renderRow:Z,resolveItem:ee,nrTracks:t,fetchTracks:G,limit:100,canFetchAllTracks:U.getCapabilities().canFetchAllTracks,outerRef:R,outerDomRef:A,tracks:T,isConcertPlaylist:x,onNrValidItemsChange:te,columnPersistenceKey:"playlist-tracklist"},a)}),(0,p.jsx)(Xs.F,{title:d.Ru.get("playlist.remove_from_playlist",r),isOpen:F.length>0,tracks:F,onClose:e=>{e.stopPropagation(),$([])},onRemove:K})]})}));var si=a(63204),ii=a(27500),ri=a(23659),ni=a(7079),li=a(15891),oi=a(3775);const ci=new oi.l("queryInlineCurationSearchV2","query","ba8322962d1da0bfea18fd0831d1af7936344c8b7401510608a272a23adad800",null),di=new oi.l("queryInlineCurationSearchV2Booklists","query","ba8322962d1da0bfea18fd0831d1af7936344c8b7401510608a272a23adad800",null),ui=new oi.l("queryInlineCurationSearchAlbum","query","74a97c6afa1c6c23e1d9b897756fc362ca7e5ed718ac59ba65ffa85f687f7113",null),mi=new oi.l("queryInlineCurationSearchArtist","query","657c07a8943ea6e49c61833dde16d8d51cb64e921dd80827255d6e2519621c34",null);var pi=a(8689);function xi(e){return{type:je.c.AUDIOBOOK,uri:e.uri,name:e.name,description:e.htmlDescriptionPlain??"",authorName:e.authors?.map((e=>e?.name)).join(d.Ru.getSeparator())||"",images:e.coverArt?.sources??[],isLocked:(0,pi.e$)(e.accessInfo),isExplicit:e.contentRating?.label===Ke.x7.Explicit,durationMs:e.duration?.totalMilliseconds??0,topics:e.genres?.map((e=>({uri:e.destinationUri,title:e.contextualName})))||[],signifierText:e.accessInfo?.signifier?.text??"",rating:{average:e.rating?.averageRating?.average??0,showAverage:!!e.rating?.averageRating?.showAverage},sharingInfo:e.sharingInfo,publishDate:null,isOutOfMarket:!1,consumptionCapExplanation:null,uid:"",playIndex:null,addedAt:null,addedBy:null,formatListAttributes:null}}var hi=a(35828),gi=a(67768),yi=a(92026),bi=a(87240);function fi(e){return{type:je.c.ALBUM,uri:e.uri,id:e.id,name:e.name,images:(0,yi.r)(e.coverArt)}}function ji(e){if("Album"!==e.data.__typename)return null;return fi(e.data)}function Ri(e){const t=e?.items.filter((e=>"AlbumResponseWrapper"===e.__typename));return(t??[]).map((e=>ji(e))).filter(bi.P)||[]}function Ai(e){if("Artist"!==e.data.__typename)return null;const t=e.data;return{type:je.c.ARTIST,uri:t.uri,id:t.id,name:t.profile.name,images:(0,yi.r)(t.visuals.avatarImage)}}function Ci(e){if("Episode"!==e.data.__typename)return null;const t=e.data,a=t.podcastV2.data;return"Podcast"!==a.__typename?null:{type:je.c.EPISODE,uri:t.uri,id:t.id,name:t.name,images:(0,yi.r)(t.coverArt),isExplicit:t.contentRating?.label===hi.x7.Explicit,is19PlusOnly:t.contentRating?.label===hi.x7.NineteenPlus,podcast:{id:a.id,uri:a.uri,name:a.name},isPlayable:t.playability.playable}}function vi(e){const t=(0,yi.r)(e.albumOfTrack?.coverArt||null);return{type:je.c.TRACK,uri:e.uri,id:e.id,name:e.name,album:{name:e.albumOfTrack?.name||"",uri:e.albumOfTrack?.uri||"",imgUrl:t.at(0)?.url||"",id:e.albumOfTrack?.id||""},artists:e.artists.items.map((e=>({id:e.id,name:e.profile.name,uri:e.uri}))),isPlayable:e.playability.playable,isExplicit:e.contentRating?.label===hi.x7.Explicit,is19PlusOnly:e.contentRating?.label===hi.x7.NineteenPlus}}function Ti(e){if("Track"!==e.data.__typename)return null;return vi(e.data)}function ki(e){return(e?.itemsV2??[]).map((e=>{const t=(0,gi.Jt)(e,"item");switch(t.__typename){case"AlbumResponseWrapper":return ji(t);case"ArtistResponseWrapper":return Ai(t);case"EpisodeResponseWrapper":return Ci(t);case"TrackResponseWrapper":return Ti(t);default:return(0,Xt.k)(t),null}})).filter(bi.P)||[]}function Si(e){return(e?.itemsV2??[]).map((e=>{const t=(0,gi.Jt)(e,"item");return"AudiobookResponseWrapper"===t.__typename&&"Audiobook"===t.data.__typename?xi(t.data):null})).filter(bi.P)||[]}const Ii=async(e,t,a,s=0,i=10,r=10)=>{const n={term:t,offset:s,limit:i,numberOfTopResults:r};if(a){const a=await e(di,n),s=a?.data?.searchV2;return s?(l=t,{albums:[],artists:[],episodes:[],tracks:[],topResults:Si(s.topResultsV2)??[],query:l}):null}var l;const o=await e(ci,n),c=o?.data?.searchV2;return c?function(e,t){return{albums:Ri(e.albumsV2)??[],artists:(i=e.artists,((i?.items??[]).map((e=>Ai(e))).filter(bi.P)||[])??[]),episodes:(s=e.episodes,((s?.items??[]).map((e=>Ci(e))).filter(bi.P)||[])??[]),tracks:(a=e.tracksV2,((a?.items??[]).map((e=>Ti(e.item))).filter(bi.P)||[])??[]),topResults:ki(e.topResultsV2)??[],query:t};var a,s,i}(c,t):null},Ei=async(e,t,a=50,s=0)=>{const i={uris:[t],limit:a,offset:s},r=await e(ui,i),n=r?.data?.albums;return n?function(e){const t=e.at(0);if(!t)return null;switch(t.__typename){case"Album":return{albums:[],artists:[],episodes:[],tracks:t.tracks.items.map((e=>vi(e.track)))||[],topResults:[]};case"GenericError":case"NotFound":return null;default:return(0,Xt.k)(t),null}}(n):null},Ni=async(e,t,a=50,s=0)=>{const i={uris:[t],limit:a,offset:s},r=await e(mi,i),n=r?.data?.artists;return n?function(e){const t=e.at(0);if(!t)return null;switch(t.__typename){case"Artist":return{albums:t.discography.popularReleasesAlbums.items.map((e=>fi(e)))||[],artists:[],episodes:[],tracks:t.discography.topTracks.items.map((e=>vi(e.track)))||[],topResults:[]};case"GenericError":case"NotFound":return null;default:return(0,Xt.k)(t),null}}(n):null};var Pi=a(26013);const wi="YAYCVnYpPvmYV4JyTmn5",_i="FeWwGSRANj36qpOBoxdx",Li="_h5mio6VqcL_fmiXAb1S",Ui="Hfgj4Zbb2ijt8g54MlCA",Oi="sgZ_MgcS1NlccH19fYsa",Mi="JzyZE2R09wq7xtjECDeR",Di=s.memo((function({placeholder:e,onChange:t=(()=>{}),onFocus:a=(()=>{})}){const[i,r]=(0,s.useState)(""),l=(0,s.useRef)(null),o=(0,B.YQ)((e=>{t(e)}),200),c=(0,s.useCallback)((e=>{const t=e.currentTarget.value;r(t),o(t)}),[r,o]),u=(0,s.useCallback)((()=>{l.current&&l.current.focus(),r(""),t("")}),[r,t]),m=(0,s.useCallback)((e=>{"Escape"===e.key&&i&&u()}),[i,u]);return(0,p.jsxs)("div",{className:wi,role:"search",children:[(0,p.jsx)(n.E,{as:"input",variant:"bodySmall",ref:l,className:Ie()(_i),role:"searchbox",maxLength:80,autoCorrect:"off",autoCapitalize:"off",spellCheck:!1,placeholder:e,onChange:c,onKeyDown:m,onFocus:a,value:i}),(0,p.jsxs)("div",{className:Li,children:[(0,p.jsx)("span",{className:Ui,children:(0,p.jsx)(Pi.C,{size:"small",className:Oi,"aria-hidden":"true"})}),i&&(0,p.jsx)("button",{className:Mi,onClick:u,"aria-label":d.Ru.get("search.a11y.clear-input"),children:(0,p.jsx)(hs.M,{size:"small"})})]})]})}));var Bi=a(24290);const Fi=({renderRow:e,searchResults:t})=>(0,p.jsx)(Ta.S4,{ariaLabel:d.Ru.get("search.title.top-results"),renderRow:e,rowPlaceholder:Bi.qq,nrTracks:t.length,tracks:t,resolveItem:e=>({uri:e.uri}),columns:[wt.$.TITLE_AND_ARTIST,wt.$.ALBUM,wt.$.ADD]}),$i=({renderRow:e,searchResults:t})=>{const a=t.filter((e=>e.type===je.c.TRACK)),s=t.filter((e=>e.type===je.c.ALBUM));return(0,p.jsxs)("div",{children:[(0,p.jsx)(n.E,{as:"p",variant:"bodyMediumBold",className:S.A.artistResultListTitle,children:d.Ru.get("playlist.curation.popular_songs")}),(0,p.jsx)(Ta.S4,{ariaLabel:d.Ru.get("playlist.curation.popular_songs"),renderRow:e,rowPlaceholder:Bi.qq,nrTracks:a.length,tracks:a,resolveItem:e=>({uri:e.uri}),columns:[wt.$.TITLE_AND_ARTIST,wt.$.ALBUM,wt.$.ADD]}),(0,p.jsx)(n.E,{as:"p",variant:"bodyMediumBold",className:S.A.artistResultListTitle,children:d.Ru.get("playlist.curation.albums")}),(0,p.jsx)(Ta.S4,{ariaLabel:d.Ru.get("playlist.curation.albums"),renderRow:e,rowPlaceholder:Bi.qq,nrTracks:s.length,tracks:s,resolveItem:e=>({uri:e.uri}),columns:[wt.$.TITLE_AND_ARTIST,wt.$.ALBUM,wt.$.ADD]})]})},zi=({renderRow:e,searchResults:t,renderSeeAllRow:a,seeAllXList:s})=>(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(Ta.S4,{ariaLabel:d.Ru.get("search.title.top-results"),renderRow:e,rowPlaceholder:Bi.qq,nrTracks:t.length,tracks:t,resolveItem:e=>({uri:e.uri}),columns:[wt.$.TITLE_AND_ARTIST,wt.$.ALBUM,wt.$.ADD],testID:"playlist-inline-curation-loaded-results"}),(0,p.jsx)(Ta.S4,{ariaLabel:d.Ru.get("search.title.all"),renderRow:a,rowPlaceholder:Bi.qq,nrTracks:s.length,tracks:s,resolveItem:e=>({uri:e.uri}),columns:[wt.$.TITLE_AND_ARTIST,wt.$.ALBUM,wt.$.ADD],testID:"playlist-inline-curation-see-all-options"})]}),Vi=({renderRow:e,searchResults:t})=>(0,p.jsx)(Ta.S4,{ariaLabel:d.Ru.get("search.title.top-results"),renderRow:e,rowPlaceholder:Bi.qq,nrTracks:t.length,tracks:t,resolveItem:e=>({uri:e.uri}),columns:[wt.$.TITLE_AND_ARTIST,wt.$.ALBUM,wt.$.ADD]}),Hi=({renderRow:e,searchResults:t})=>(0,p.jsx)(Ta.S4,{ariaLabel:d.Ru.get("search.title.top-results"),renderRow:e,rowPlaceholder:Bi.qq,nrTracks:t.length,tracks:t,resolveItem:e=>({uri:e.uri}),columns:[wt.$.TITLE_AND_ARTIST,wt.$.ALBUM,wt.$.ADD]}),qi=({renderRow:e,searchResults:t})=>(0,p.jsx)(Ta.S4,{ariaLabel:d.Ru.get("search.title.top-results"),renderRow:e,rowPlaceholder:Bi.qq,nrTracks:t.length,tracks:t,resolveItem:e=>({uri:e.uri}),columns:[wt.$.TITLE_AND_ARTIST,wt.$.ALBUM,wt.$.ADD]});var Wi=a(52612),Ki=a(96470);const Qi="G2t3w2AAeb5OXp0_GeWs",Gi="saVjTFMyWYUz975_tkQm",Yi="thi8fNCkEhutRkDC90c0",Xi="pHVlkChuJpEnBQyU3ADv",Ji="ENWs3JxcqtD98_8fbPz2",Zi="L8IUKEJL6JiTyE_qUVCc",er="XcyjdXgsNX0DBt72tfiD",tr="VhJnuS7UcUPfIlzD8dlU",ar="He29vQ5anFj_bJ5iEaI2",sr=({searchResult:e,index:t,isRTL:a,onClick:s})=>{const i=e.images.at(0)?.url;return(0,p.jsx)(Ki.$,{className:Ji,rowIndex:t,"aria-selected":!1,children:(0,p.jsxs)("div",{"aria-label":`${d.Ru.get("artist-page.tracks.seemore")} ${e.name}`,className:ar,onClick:s,children:[(0,p.jsxs)(Wi.T,{columnIndex:0,className:Zi,children:[void 0!==i?(0,p.jsx)("img",{className:Yi,src:i,alt:e.name}):null,(0,p.jsxs)("div",{className:er,children:[(0,p.jsx)(n.E,{as:"p",className:Xi,variant:"bodyMedium",children:e.name}),(0,p.jsx)(n.E,{as:"p",variant:"bodySmall",semanticColor:"textSubdued",children:d.Ru.get("album")})]})]}),(0,p.jsx)(Wi.T,{columnIndex:1}),(0,p.jsx)(Wi.T,{columnIndex:2,children:(0,p.jsx)("button",{"data-testid":"top-bar-forward-button","aria-label":`See more from ${e.name}`,className:tr,onClick:s,children:a?(0,p.jsx)(ri.g,{}):(0,p.jsx)(ii.V,{})})})]})})};var ir=a(41028);const rr=({size:e})=>(0,p.jsx)("div",{className:Gi,children:(0,p.jsx)(ir.r,{size:e})}),nr=({searchResult:e,index:t,isRTL:a,onClick:s})=>{const i=e.images.at(0)?.url;return(0,p.jsx)(Ki.$,{className:Ji,rowIndex:t,"aria-selected":!1,children:(0,p.jsxs)("div",{"aria-label":`${d.Ru.get("artist-page.tracks.seemore")} ${e.name}`,className:ar,onClick:s,"data-testid":"playlist-inline-curation-artist",children:[(0,p.jsxs)(Wi.T,{columnIndex:0,className:Zi,children:[void 0!==i?(0,p.jsx)("img",{className:Qi,src:i,alt:e.name}):(0,p.jsx)(rr,{size:"small"}),(0,p.jsxs)("div",{className:er,children:[(0,p.jsx)(n.E,{as:"p",className:Xi,variant:"bodyMedium",children:e.name}),(0,p.jsx)(n.E,{as:"p",variant:"bodySmall",semanticColor:"textSubdued",children:d.Ru.get("artist")})]})]}),(0,p.jsx)(Wi.T,{columnIndex:1}),(0,p.jsx)(Wi.T,{columnIndex:2,children:(0,p.jsx)("button",{"data-testid":"top-bar-forward-button","aria-label":`See more from ${e.name}`,className:tr,onClick:s,children:a?(0,p.jsx)(ri.g,{}):(0,p.jsx)(ii.V,{})})})]})})};var lr=a(47498),or=a(8878),cr=a(9138),dr=a(77962),ur=a(92758);const mr=s.memo((function({uid:e,uri:t,isPlayable:a,isMOGEFRestricted:i,isExplicit:r,contextUri:n,name:l,imgUrl:o,index:c,podcast:u,usePlayContextItem:m}){const x=(0,s.useMemo)((()=>n.replace("internal:recs:","")),[n]),h=(0,O.W)(),{addItems:g}=(0,$e.x)(x),{isActive:y,isPlaying:b,triggerPlay:f,togglePlay:j}=m({uid:e,uri:t,index:c}),R=(0,s.useCallback)((()=>{g([t],{after:"end"}),h({type:"click",intent:"add-to-playlist",itemIdSuffix:"playlist/add",targetUri:x})}),[g,t,h,x]),A=(0,Be.T)(t),C=(0,ea.g)(t,a),{badges:v,hasBadges:T}=(0,Jt.b)({downloadAvailability:A,isExplicit:r,isMOGEFRestricted:i});return(0,p.jsx)(Yt.pZ,{value:"row",index:c,children:(0,p.jsx)(Ue.h,{menu:(0,p.jsx)(lr.b,{uri:t,contextUri:n}),children:(0,p.jsxs)(Ca.w,{uri:t,contextUri:t,isPlayable:C,onTriggerPlay:()=>{f()},isActive:y,ageRestricted:i,index:c,ariaRowIndex:c,dragMetadata:{name:l,createdBy:u.name},children:[(0,p.jsxs)(dr.U,{ariaColIndex:0,children:[(0,p.jsx)(or.u,{uri:t,src:o,onClick:()=>{j()},isLocked:!1,isPlaying:b,isActive:y,isEpisode:!0,playAriaLabel:d.Ru.get("tracklist.a11y.play",l,u.name)}),(0,p.jsxs)(xa.l,{children:[(0,p.jsx)(Aa.p,{titleText:l,children:l}),T&&(0,p.jsxs)(ia.P,{children:[v.download&&(0,p.jsx)(Qt._,{}),v.explicit&&(0,p.jsx)(Ye.g,{}),v.nineteen&&(0,p.jsx)(Gt.q,{className:ca.A.nineteen,size:16})]})]})]}),(0,p.jsx)(ur.o,{ariaColIndex:1,children:(0,p.jsx)(aa.g,{uri:u.uri,name:u.name,children:u.name})}),(0,p.jsx)(cr.l,{ariaColIndex:2,children:(0,p.jsx)(Ne.n,{size:"small",onClick:R,children:d.Ru.get("playlist.extender.button.add")})})]})})})}),((e,t)=>e.uid===t.uid&&e.uri===t.uri&&e.index===t.index)),pr=({episode:e,contextUri:t,index:a,usePlayContextItem:s})=>(0,p.jsx)(mr,{uid:e.id,uri:e.uri,isPlayable:e.isPlayable,isMOGEFRestricted:e.is19PlusOnly,isExplicit:e.isExplicit,contextUri:t,name:e.name,imgUrl:e.images.at(0)?.url??"",index:a,podcast:e.podcast,usePlayContextItem:s}),xr=({label:e,index:t,isRTL:a,onClick:s})=>(0,p.jsx)(Ki.$,{className:Ji,rowIndex:t,"aria-selected":!1,children:(0,p.jsxs)("div",{"aria-label":e,className:ar,onClick:s,children:[(0,p.jsx)(Wi.T,{columnIndex:0,className:Zi,children:(0,p.jsx)(n.E,{as:"p",className:Xi,variant:"bodyMedium",children:e})}),(0,p.jsx)(Wi.T,{columnIndex:1}),(0,p.jsx)(Wi.T,{columnIndex:2,children:(0,p.jsx)("button",{"data-testid":"top-bar-forward-button","aria-label":e,className:tr,onClick:s,children:a?(0,p.jsx)(ri.g,{}):(0,p.jsx)(ii.V,{})})})]})}),hr=s.memo((function({uid:e,uri:t,name:a,imgUrl:i,artists:r,isExplicit:n,index:l,album:o,contextUri:c,isPlayable:u,isMOGEFRestricted:m,usePlayContextItem:x,durationMs:h,shouldRenderDuration:g,internalLink:y}){const{spec:b,logger:f}=(0,ue.r)(Vt.i,{data:{position:l,reason:"",uri:t}}),j=(0,s.useMemo)((()=>c.replace("internal:recs:","")),[c]),R=(0,O.W)(),{addItems:A}=(0,$e.x)(j),{isActive:C,isPlaying:v,triggerPlay:T,togglePlay:k}=x({uid:e,uri:t,index:l}),S=(0,s.useCallback)((()=>{f.logInteraction(b.addButtonFactory().hitAddToPlaylist({playlist:j,itemToBeAdded:t})),A([t],{after:"end"}),R({type:"click",intent:"add-to-playlist",itemIdSuffix:"playlist/add",targetUri:j})}),[f,b,j,t,A,R]),I=(0,Be.T)(t),E=(0,ea.g)(t,u),N=r.map((e=>e.name)).join(d.Ru.getSeparator()),{badges:P,hasBadges:w}=(0,Jt.b)({downloadAvailability:I,isExplicit:n,isMOGEFRestricted:m}),_=g&&h,L=r.map((e=>e.name)).join(d.Ru.getSeparator()),U=(0,Kt.c)();return(0,p.jsx)(Yt.pZ,{value:"row",index:l,children:(0,p.jsx)(Ue.h,{menu:(0,p.jsx)(ta.P,{uri:t,albumUri:o.uri,artists:r,contextUri:c}),children:(0,p.jsxs)(Ca.w,{uri:t,contextUri:c,isPlayable:E,onTriggerPlay:(e,t)=>{T({loggingParams:t})},isActive:C,ageRestricted:m,index:l,ariaRowIndex:l,dragMetadata:{name:a,createdBy:N},spec:b,className:ca.A.isRecommendedTrackListRow,children:[(0,p.jsxs)(dr.U,{ariaColIndex:0,children:[(0,p.jsx)(or.u,{uri:t,src:i,onClick:(e,t)=>{k({loggingParams:t})},isLocked:!1,isPlaying:v,isActive:C,playAriaLabel:d.Ru.get("tracklist.a11y.play",a,N),spec:b}),(0,p.jsxs)(xa.l,{children:[y&&U?(0,p.jsx)(Me.default,{to:t,className:ca.A.rowTitle,"data-testid":"internal-track-link",children:(0,p.jsx)(Aa.p,{titleText:a,children:a})}):(0,p.jsx)(Aa.p,{titleText:a,children:a}),w&&(0,p.jsxs)(ia.P,{children:[P.explicit&&(0,p.jsx)(Ye.g,{}),P.download&&(0,p.jsx)(Qt._,{}),P.nineteen&&(0,p.jsx)(Gt.q,{className:ca.A.nineteen,size:16})]}),(0,p.jsx)(ja.p,{children:(0,p.jsx)(sa.l,{artists:r,spec:b})})]})]}),(0,p.jsx)(ur.o,{ariaColIndex:1,children:(0,p.jsx)(aa.g,{uri:o.uri,name:o.name,creatorUri:r?.[0]?.uri,spec:b,children:o.name})}),(0,p.jsx)(ur.o,{ariaColIndex:2,children:(0,p.jsx)("span",{})}),(0,p.jsxs)(cr.l,{ariaColIndex:3,children:[_?(0,p.jsx)(Zt.d,{uri:t}):null,_?(0,p.jsx)(ma.P,{duration:h,dataTestId:"render-duration"}):(0,p.jsx)(Ne.n,{size:"small",onClick:S,"aria-label":d.Ru.get("addToPlaylist-icon.label"),"data-testid":"add-to-playlist-button",children:d.Ru.get("playlist.extender.button.add")}),_?(0,p.jsx)(ya.Y,{menu:(0,p.jsx)(ta.P,{uri:t,albumUri:o.uri,contextUri:c,artists:r}),label:d.Ru.get("more.label.track",a,L)}):null]})]})})})}),((e,t)=>e.uid===t.uid&&e.uri===t.uri&&e.index===t.index)),gr=({track:e,contextUri:t,index:a,usePlayContextItem:s})=>(0,p.jsx)(hr,{uid:e.id,uri:e.uri,isPlayable:e.isPlayable,isMOGEFRestricted:e.is19PlusOnly,isExplicit:e.isExplicit,contextUri:t,name:e.name,imgUrl:e.album.imgUrl,index:a,album:e.album,artists:e.artists,usePlayContextItem:s});let yr=function(e){return e[e.SEARCH=0]="SEARCH",e[e.ALBUM=1]="ALBUM",e[e.ARTIST=2]="ARTIST",e[e.PODCAST=3]="PODCAST",e[e.PLAYLIST=4]="PLAYLIST",e[e.ALBUMRESULTS=5]="ALBUMRESULTS",e[e.ARTISTRESULTS=6]="ARTISTRESULTS",e[e.PODCASTRESULTS=7]="PODCASTRESULTS",e[e.EPISODERESULTS=8]="EPISODERESULTS",e[e.TRACKRESULTS=9]="TRACKRESULTS",e}({});const br=(e,t)=>"GO_BACK"===t.type?1===e.breadcrumbs.length?e:e={...e,breadcrumbs:e.breadcrumbs.slice(0,e.breadcrumbs.length-1)}:"NAV_TO_ENTITY"===t.type?e={...e,breadcrumbs:[...e.breadcrumbs,t.level]}:("NAV_TO_RESULTS"===t.type?e={...e,breadcrumbs:[...e.breadcrumbs,t.level]}:"CHANGE_TERM"===t.type&&(e={term:t.term,breadcrumbs:[{navType:yr.SEARCH,term:t.term,title:""}]}),e),fr=({resultList:e,level:t,isRTL:a,playlistUri:i,navToResults:r,navToEntity:l,term:o,isBooklist:u})=>{let m=e;const x=(e=>e.map((e=>{if(e.type===je.c.TRACK||e.type===je.c.EPISODE){const{uri:t,id:a}=e;return{type:(0,c.U_)(t)?je.c.TRACK:je.c.EPISODE,uri:t,uid:a,provider:null}}return null})).filter(bi.P))(e),{draggable:h,onDragStart:g}=(0,U.P)(),{usePlayContextItem:y}=(0,J.P)({uri:`${i.replace("spotify:","spotify:internal:recs:")}:${encodeURIComponent(o)}:${t?.navType??0}`,pages:[{items:x}]},{featureIdentifier:"search"}),b=(0,s.useCallback)(((e,t)=>(0,p.jsx)(xr,{isRTL:a,index:t,label:e.label,onClick:()=>{r({navType:e.type,term:o,title:e.label})}},e.uri)),[a,r,o]),f=(0,s.useCallback)(((e,t)=>e.type===je.c.ARTIST?(0,p.jsx)(nr,{isRTL:a,index:t,searchResult:e,onClick:()=>{l({navType:yr.ARTIST,uri:e.uri,title:e.name})}},e.uri):e.type===je.c.EPISODE?(0,p.jsx)(pr,{index:t,episode:e,contextUri:i.replace("spotify:","spotify:internal:recs:"),usePlayContextItem:y},e.uri):e.type===je.c.TRACK?(0,p.jsx)(gr,{index:t,track:e,contextUri:i.replace("spotify:","spotify:internal:recs:"),usePlayContextItem:y},e.uri):e.type===je.c.ALBUM?(0,p.jsx)(sr,{index:t,isRTL:a,searchResult:e,onClick:()=>{l({navType:yr.ALBUM,uri:e.uri,title:e.name})}},e.uri):(0,p.jsx)(Et,{book:e,featureIdentifier:"playlist_recommendations",contextUri:i,isRecommendation:!0,showSeparator:0!==t},e.uri)),[a,l,i,y]);if(""===o)return(0,p.jsx)("div",{className:S.A.emptySearchTermContainer});if(!e||0===e?.length)return(0,p.jsxs)("div",{className:S.A.emptyStateContainer,children:[(0,p.jsx)(n.E,{as:"h1",variant:"titleSmall",children:d.Ru.get("search.empty-results-title",o)}),(0,p.jsx)(n.E,{as:"p",variant:"bodySmall",children:d.Ru.get("search.empty-results-text")})]});if(t?.navType===yr.SEARCH){const t=[{type:yr.ARTISTRESULTS,label:d.Ru.get("playlist.curation.see_all_artists"),uri:"spotify:internal:recs:see-all-artists"},{type:yr.ALBUMRESULTS,label:d.Ru.get("playlist.curation.see_all_album"),uri:"spotify:internal:recs:see-all-albums"},{type:yr.TRACKRESULTS,label:d.Ru.get("playlist.curation.see_all_songs"),uri:"spotify:internal:recs:see-all-songs"}];return m=e,u?(0,p.jsx)(p.Fragment,{children:m.map(((e,t)=>e&&e.type===je.c.AUDIOBOOK?(0,p.jsx)(Et,{contextUri:i,featureIdentifier:"playlist_recommendations",book:e,isRecommendation:!0,draggable:h,onDragStart:t=>{g(t,{itemUris:[e.uri],itemMimeTypes:[Nt.fl.AUDIOBOOKS],dragLabelText:e.name})},showSeparator:0!==t},t):null))}):(0,p.jsx)(zi,{renderRow:f,searchResults:m,renderSeeAllRow:b,seeAllXList:t})}return t?.navType===yr.ALBUM?(0,p.jsx)(Fi,{renderRow:f,searchResults:m}):t?.navType===yr.ARTIST?(0,p.jsx)($i,{renderRow:f,searchResults:m}):t?.navType===yr.ALBUMRESULTS?(0,p.jsx)(Vi,{renderRow:f,searchResults:m}):t?.navType===yr.TRACKRESULTS?(0,p.jsx)(qi,{renderRow:f,searchResults:m}):t?.navType===yr.ARTISTRESULTS?(0,p.jsx)(Hi,{renderRow:f,searchResults:m}):null},jr=({playlistUri:e,onCurationModeChange:t,isBooklist:a})=>{const[i,r]=(0,s.useState)([]),[l,o]=(0,s.useState)(),c=(0,ni.W)(),{level:u,changeTerm:m,goBack:x,navToEntity:h,navToResults:g,term:y}=(()=>{const[e,t]=(0,s.useReducer)(br,{term:"",breadcrumbs:[]}),{breadcrumbs:a,term:i}=e;return{changeTerm:e=>{t({type:"CHANGE_TERM",term:e})},level:a[a.length-1]||null,goBack:()=>{t({type:"GO_BACK"})},navToEntity:e=>{t({type:"NAV_TO_ENTITY",level:e})},navToResults:e=>{t({type:"NAV_TO_RESULTS",level:e})},term:i}})(),{request:b}=(0,s.useContext)(li.j);return(0,s.useEffect)((()=>{let e=!0;return(async()=>{if(u)switch(u.navType){case yr.SEARCH:try{if(!l||l.query!==y&&""!==y){const t=await Ii(b,y,a);e&&o(t)}else""===y&&r([])}catch{r([])}l&&r(l.topResults);break;case yr.ARTISTRESULTS:l&&r(l?.artists);break;case yr.ALBUMRESULTS:l&&r(l?.albums);break;case yr.TRACKRESULTS:l&&r(l?.tracks);break;case yr.EPISODERESULTS:l&&r(l?.episodes);break;case yr.ALBUM:try{const t=await Ei(b,u.uri,100,0);e&&t&&r(t.tracks)}catch{r([])}break;case yr.ARTIST:try{const t=await Ni(b,u.uri,100,0);e&&t&&r([...t.albums,...t.tracks])}catch{r([])}}})(),()=>{e=!1}}),[u,y,l,b,a]),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("section",{className:S.A.playlistInlineCurationSection,children:[(0,p.jsxs)("div",{className:S.A.playlistInlineCurationWrapper,children:[(0,p.jsx)(n.E,{as:"h1",className:S.A.playlistInlineCurationTitle,variant:"titleSmall",children:d.Ru.get("playlist.curation.title")}),(0,p.jsx)(s.Suspense,{fallback:null,children:(0,p.jsx)(Di,{placeholder:a?d.Ru.get("playlist.curation.search_placeholder-booklists"):d.Ru.get("playlist.curation.search_placeholder"),onFocus:()=>{t(!0)},onChange:e=>{m(e)}})})]}),(0,p.jsx)("button",{className:S.A.playlistInlineCurationCloseButton,onClick:()=>t(!1),children:(0,p.jsx)(hs.M,{"aria-label":d.Ru.get("close")})})]}),null!==u&&u.navType!==yr.SEARCH?(0,p.jsxs)("button",{className:S.A.playlistInlineCurationBackButton,onClick:()=>x(),children:[c?(0,p.jsx)(ii.V,{"aria-label":d.Ru.get("navbar.go-back"),className:S.A.icon}):(0,p.jsx)(ri.g,{"aria-label":d.Ru.get("navbar.go-back"),className:S.A.icon}),(0,p.jsx)(n.E,{as:"p",variant:"bodyMediumBold",children:u.title})]}):null,(0,p.jsx)("div",{className:S.A.searchResultListContainer,"data-testid":"playlist-inline-curation-results",children:(0,p.jsx)(fr,{playlistUri:e,term:y,level:u,resultList:i,navToEntity:h,navToResults:g,isRTL:c,isBooklist:a})})]})};var Rr=a(87571);const Ar={ARTIST:"artist",ALBUM:"album",PLAYLIST:"playlist",TRACK:"track",USER:"user"},Cr=e=>{const t=e.replace(/\+/g,"%20");return decodeURIComponent(t)},vr=e=>{const t=/^spotify:(.*)$/.exec(e);if(!t)return{type:null,id:null};const a=t[1],s=/([^:]+):([^:]+)/g;let i;const r=[],n=[];for(;i=s.exec(a);){const e=i[1];let t=i[2];e===Ar.USER&&(t=Cr(t)),r.push(e),n.push(t)}if(0===r.length)return{type:null,id:null};const l=r.reduce(((e,t,a)=>(e[r[a]]=n[a],e)),{});return{type:r[r.length-1],id:n[n.length-1],...l}};var Tr=a(54361),kr=a(96217);const Sr=new oi.l("getAudiobooksMetadata","query","e04c61a831b3e1861a5de961c520ddf7834127ef8e4b94724173a4c4a90e38fe",null),Ir=3e5;function Er(e,t){return["list-extender",e,t]}const Nr=(e,t,a=10,i)=>{const r=2*a,n=3*a,l=(0,ze.jE)(),c=(0,s.useRef)(0),[d,u]=(0,s.useState)(e),[m,p]=(0,s.useState)((()=>l.getQueriesData({queryKey:Er(e,t),stale:!1}).at(0)?.[1]??[])),x=(0,s.useRef)(m.map((e=>e.uri??""))),{spec:h,logger:g}=(0,ue.r)(o.K,{data:{uri:e}}),y=(0,s.useMemo)((()=>h.recommendedFactory()),[h]);(0,kr.e)(Tr.Lj.OPERATION_COMPLETE,(({data:a})=>{a.uri===e&&(a.operation===Tr.sP.ADD?p((e=>e.filter((e=>a.uris.every((t=>t!==e.uri)))))):a.operation===Tr.sP.REMOVE&&p((e=>e.filter((e=>a.items.every((t=>t.uri!==e.uri)))))),a.operation!==Tr.sP.ADD&&a.operation!==Tr.sP.REMOVE||l.invalidateQueries({queryKey:Er(e,t)}))}));const b=(0,s.useRef)(!0);(0,s.useEffect)((()=>(b.current||(p([]),u(e),x.current=[],c.current=c.current+1),b.current=!0,()=>{c.current=c.current+1})),[e]),(0,s.useEffect)((()=>{if(m.length<r){const e=Math.min(r,n-m.length),a=c.current,s=Er(d,t),o=b.current&&0===x.current.length;(o?l.fetchQuery({queryKey:s,queryFn:()=>i(d,[],e),staleTime:Ir,gcTime:Ir}):i(d,x.current,e)).then((t=>{if(a!==c.current||!t)return;const i=t.map((e=>e?.uri&&e.uri)).filter((e=>null!==e));t.length<e&&x.current.length?x.current=[]:x.current=[...x.current,...i],p((e=>[...e,...t])),o&&l.setQueryData(s,t)}))}b.current=!1}),[r,n,d,m.length,l,i,t]);const f=(0,s.useCallback)((()=>{if(h){const e=y.refreshButtonFactory().hitRefreshContent();g.logInteraction(e)}p((e=>e.slice(a)))}),[g,y,h,a]);return{recommendations:m.slice(0,a),_bufferedRecommendations:m.slice(a),refresh:f}},Pr=s.memo((function({uri:e}){const{recommendations:t,refresh:a}=((e,t=10)=>{const a=(0,s.useContext)(oe.w),{request:i}=(0,s.useContext)(li.j),r=(0,s.useCallback)((async(e,t,s)=>{const r=await a.getRecommendedBookUris(e,t,s),n=await i(Sr,{uris:r});return n?.data?.podcasts.map((e=>"Audiobook"===e.__typename?xi(e):null)).filter(bi.P)??[]}),[a,i]);return Nr(e,"book",t,r)})(e),{draggable:i,onDragStart:r}=(0,U.P)(),l=(0,Rr.p)();return l?t?.length&&t.length>0?(0,p.jsxs)("div",{className:S.A.recommendedTrackList,children:[(0,p.jsx)("div",{className:S.A.top,children:(0,p.jsxs)("div",{className:S.A.header,children:[(0,p.jsx)(n.E,{variant:"titleSmall",children:d.Ru.get("playlist.extender.recommended.title")}),(0,p.jsx)(n.E,{variant:"bodySmall",className:S.A.subtitle,children:d.Ru.get("playlist.extender.songs.in.playlist")})]})}),l&&(0,p.jsxs)(p.Fragment,{children:[t.map(((t,a)=>t?(0,p.jsx)(Et,{contextUri:e,featureIdentifier:"playlist_recommendations",book:t,sharingInfo:t.sharingInfo,isRecommendation:!0,draggable:i,onDragStart:e=>{r(e,{itemUris:[t.uri],itemMimeTypes:[Nt.fl.AUDIOBOOKS],dragLabelText:t.name})},showSeparator:0!==a},a):null)),(0,p.jsx)(Ya.H,{className:S.A.refreshButton,onClick:a,children:d.Ru.get("playlist.extender.refresh")})]})]}):null:(0,p.jsx)("div",{className:S.A.recommendedTrackList,children:(0,p.jsx)("div",{className:S.A.top,children:(0,p.jsxs)("div",{className:S.A.header,children:[(0,p.jsx)(n.E,{variant:"titleSmall",children:d.Ru.get("playlist.extender.recommended.title")}),(0,p.jsx)(n.E,{variant:"bodySmall",className:S.A.subtitle,children:d.Ru.get("web-player.playlist.recommender-dsa-message")})]})})})}));var wr=a(49397);const _r=s.memo((function({playlistUri:e,canEdit:t,tracks:a}){const i="1"===(0,wr.$)("filter-age-restricted-content"),{usePlayContextItem:r}=(0,J.P)({uri:e.replace("spotify:","spotify:internal:recs:"),pages:[{items:a.map((e=>({...e,provider:null,type:je.c.TRACK,uid:null})))}]},{featureIdentifier:"playlist_recommendations"}),n=(0,s.useCallback)(((a,s)=>{const n=a.duration;return(0,p.jsx)(hr,{index:s,imgUrl:a.album.imageUrl,contextUri:e.replace("spotify","spotify:internal:recs"),uri:a.uri,isPlayable:!(i&&a.isMOGEFRestricted),name:a.name,artists:a.artists,album:{...a.album,imgUrl:a.album.imageUrl},isExplicit:a.explicit,isMOGEFRestricted:a.isMOGEFRestricted,usePlayContextItem:r,durationMs:n,shouldRenderDuration:!t,internalLink:!0},`${s}-${a.uri}`)}),[e,i,r,t]),l=(0,s.useMemo)((()=>[wt.$.TITLE_AND_ARTIST,wt.$.ALBUM,wt.$.ADDED_AT,wt.$.ADD]),[]),o=(0,s.useCallback)((e=>({uri:e.uri,uid:e.id})),[]),c=(0,s.useMemo)((()=>a.slice(0,Math.min(a.length,10))),[a]);return(0,p.jsx)(Ta.S4,{ariaLabel:d.Ru.get("playlist.extender.recommended.header"),nrTracks:Math.min(a.length,10),rowPlaceholder:Bi.qq,tracks:c,renderRow:n,resolveItem:o,columns:l},`${e}-recommended`)})),Lr=s.memo((function({playlistUri:e,playlistLength:t,canEdit:a}){const{recommendations:i,refresh:r}=((e,t=10)=>{const a=(0,s.useContext)(oe.w),i=(0,s.useCallback)((async(e,t,s)=>{const i=t.map((e=>vr(e).id??""));return a.getRecommendedTracks(e,i,s)}),[a]);return Nr(e,"track",t,i)})(e),l=!t||0===t,o=(0,Rr.p)(),c=l?d.Ru.get("playlist.extender.title.in.playlist"):d.Ru.get("playlist.extender.songs.in.playlist");return o?i.length>0?(0,p.jsxs)("div",{className:S.A.recommendedTrackList,children:[(0,p.jsx)("div",{className:S.A.top,children:(0,p.jsxs)("div",{className:S.A.header,children:[(0,p.jsx)(n.E,{variant:"titleSmall",children:d.Ru.get("playlist.extender.recommended.title")}),(0,p.jsx)(n.E,{variant:"bodySmall",className:S.A.subtitle,children:c})]})}),o&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(_r,{playlistUri:e,canEdit:a,tracks:i}),(0,p.jsx)(Ya.H,{className:S.A.refreshButton,onClick:r,children:d.Ru.get("playlist.extender.refresh")})]})]}):null:(0,p.jsx)("div",{className:S.A.recommendedTrackList,children:(0,p.jsx)("div",{className:S.A.top,children:(0,p.jsxs)("div",{className:S.A.header,children:[(0,p.jsx)(n.E,{variant:"titleSmall",children:d.Ru.get("playlist.extender.recommended.title")}),(0,p.jsx)(n.E,{variant:"bodySmall",className:S.A.subtitle,children:d.Ru.get("web-player.playlist.recommender-dsa-message")})]})})})})),Ur=s.lazy((()=>a.e(4789).then(a.bind(a,87928)))),Or=s.lazy((()=>Promise.resolve().then(a.bind(a,57282)))),Mr=s.lazy((()=>a.e(3632).then(a.bind(a,16101)))),Dr=s.lazy((()=>a.e(9718).then(a.bind(a,5075)))),Br=new Set([]),Fr=s.memo((function({playlist:e,capabilities:t}){const{metadata:{uri:a,name:m,images:x,totalLength:h,unfilteredTotalLength:g,isOwnedBySelf:j,hasEpisodes:R,canAdd:A,canRemove:C,formatListData:v,hasDateAdded:T,collaborators:k,isPublished:G,hasSpotifyAudiobooks:Y,hasSpotifyTracks:Z},contents:{items:ee}}=e,{spec:te,logger:ae,UBIFragment:re}=(0,ue.r)(o.K,{data:{uri:a}}),ne=(0,M.n)(),ce=(0,l.NC)(me.Cf,{loadingValue:!1}),pe=(0,l.NC)(me.Mc,{loadingValue:!1}),xe=(0,l.NC)(W.FQE,{loadingValue:!1}),{isCompactMode:he}=(0,L.a)(),ge=s.useMemo((()=>te.headerFactory()),[te]),ye=s.useMemo((()=>te.tracklistFactory()),[te]),be=s.useMemo((()=>te.actionBarFactory()),[te]),fe="chart"===v?.type,je="concerts-near-you"===v?.type&&ce,Re="live-streams"===v?.type,Ae=["blend","celebrity-blend","friends-mix"].indexOf(v?.type||"")>-1,Ce=[Z,R,Y].filter(Boolean).length>1,ve=!Ce&&!!Y&&(0,si.R)(ee),Te="artistsets"===v?.type||"this-is"===v?.attributes["editorial.series"],ke=v?.attributes||{},Se=ke.header_image_url_desktop||ke.image_url||null,Ie=A&&C,{inlineCurationModeIsOn:Ee,handleInlineCurationModeChange:Ne}=((e,t)=>{const[a,i]=(0,s.useState)(e&&0===t),{scrollNodeChildRef:r}=(0,s.useContext)(Q.bi),n=(0,s.useRef)(a);return(0,s.useEffect)((()=>{const e=!n.current;r&&e&&a&&r.current?.scrollIntoView({block:"end",behavior:"smooth"}),n.current=a}),[r,a]),{inlineCurationModeIsOn:a,handleInlineCurationModeChange:e=>{i(e)}}})(Ie&&(!ve||pe&&xe),g),{productState:Pe}=(0,i.d4)(K.Ht),we=!!Pe&&parseInt(Pe.ads,10)>0,_e="spotify"===e.metadata.owner.username,Le=(0,i.wA)(),Ue=(0,r.wQ)(),Oe=(0,r.zy)(),Me=(0,l.NC)(W.$pS,{loadingValue:!1}),De=(0,l.NC)(W.vQ3,{loadingValue:!1}),Be=(0,l.NC)(W.UPi,{loadingValue:!1}),Fe=(0,_.useThisisPlaylistExtensionQuery)({uri:a},{gcTime:5*X.i,enabled:Te}).data?.playlistV2,$e="Playlist"===Fe?.__typename?Fe.artistsOnTour?.[0]:null,ze=Be&&"Playlist"===Fe?.__typename?Fe.concerts?.items.map((e=>e.data)):null,Ve=ze?.flatMap((e=>"ConcertV2"===e.__typename?[e]:[])).map((e=>{const t=[e.location.name,e.location.city].join(d.Ru.getSeparator()),a=e.artists.items.flatMap((e=>"Artist"===e.data.__typename?[e.data]:[]));return{venue:t,title:e.title,uri:e.uri,startDate:e.startDateIsoString,imageUrl:a[0]?.visuals.avatarImage?.sources[0]?.url}})),He="POP"!==Ue?new URLSearchParams(Oe.search).get("uid"):null,qe=(0,O.W)(),{filter:We}=(0,s.useContext)(E.g),{sortState:Ke}=(0,s.useContext)(N.cL),Qe=(0,s.useContext)(oe.w),Ge=(0,s.useRef)(null),Ye=(0,s.useRef)(null),[Xe]=x,Je=(0,D.H)(null!==Se?Se:Xe?.url||null),{isPlaying:Ze,isActive:et,togglePlay:tt,usePlayContextItem:at}=(0,J.P)(function(e,t,a){const s={uri:e};return se(s,t),le(s,(0,ie.HI)(a)),s}(a,(0,I.Xt)(Ke),We),{featureIdentifier:"playlist"}),st=(0,s.useCallback)((()=>{const e=(0,q.$I)({isPlaying:Ze,isActive:et,spec:be.playButtonFactory(),logger:ae,uri:a});tt({loggingParams:e})}),[Ze,et,tt,be,ae,a]);!function(e){const t=(0,s.useContext)($.A),a=(0,B.YQ)((()=>{t.paste().then((t=>e(t)))}),500,{leading:!0,trailing:!1});(0,F.f)(H,a),(0,V.x)(z.W.PASTE,a)}((0,s.useCallback)((e=>{const t=e.split(/[\r\n]+/g).map((e=>(0,c.o_)(e))).filter((e=>null!==e&&((0,c.U_)(e)||(0,c.gH)(e)||(0,c.Pk)(e))));if(t.length>0&&A){const e=t.map((e=>e.toURI())),s=Ge.current?.getSelected()?.slice(-1)?.[0],i={after:s??"end"};Le((0,u.io)(a,e,i))}}),[A,Le,a]));const it=(0,s.useCallback)(((e,t)=>{const s=[...t[U.O[c.NQ.TRACK]]||[],...t[U.O[c.NQ.LOCAL_TRACK]]||[],...t[U.O[c.NQ.EPISODE]]||[],...t[U.O[c.NQ.ALBUM]]||[]];s.length>0&&A&&(ae.logInteraction(te.dragAddToPlaylist({playlist:a,itemToBeAdded:s[0]})),Le((0,u.io)(a,s)),qe({targetUri:a,intent:"add",type:"drop"}))}),[A,ae,te,a,Le,qe]),rt=!_e&&0!==g,nt=!ve&&ne&&(Ie&&!Ee||rt),lt=ve&&pe&&xe&&ne&&(Ie&&!Ee||rt),ot=(!ve||pe&&xe)&&j&&ne,ct=!Ie&&!ve&&!rt&&ne,dt=k?.count??1,[ut]=(0,P.z1)(),mt="plays"===ke.rank_type,pt=(0,s.useMemo)((()=>(0,I.Ey)({isMixedMedia:Ce,hasEpisodes:R,hasSpotifyAudiobooks:Y,hasDateAdded:T,isLive:Re,isConcert:je,isBlend:Ae,nrCollaborators:dt,isBooklist:ve,isCompactMode:he,isChart:fe,showPlayCount:mt})),[Ce,R,Y,T,Re,je,Ae,dt,ve,he,fe,mt]),xt=(0,s.useMemo)((()=>{let e;return e=Qe.getCapabilities().canSort?ve?new Set(N.dh):new Set((0,I.zq)(pt)):Br,e}),[pt,ve,Qe]),ht=xe&&ve&&!he;return(0,p.jsxs)(s.Suspense,{fallback:null,children:[(0,p.jsx)(f.Q,{children:(0,de.Q2)({playlistName:m,userName:e.metadata.owner.displayName||"",isSpotifyOwned:_e})}),(0,p.jsx)(b.A,{types:A&&!ve?[U.O[c.NQ.TRACK],U.O[c.NQ.LOCAL_TRACK],U.O[c.NQ.EPISODE],U.O[c.NQ.ALBUM]]:[],onDrop:it,children:(0,p.jsxs)("section",{role:"presentation",className:S.A.playlist,"data-testid":"playlist-page","data-test-uri":a,children:[(0,p.jsx)(Ys.x,{metadata:e.metadata,isPlaying:Ze,isPublished:G,totalItems:ut,togglePlay:st,backgroundColor:Je,spec:ge}),(0,p.jsxs)("div",{className:S.A.playlistContent,children:[(0,p.jsx)(Ws,{playlist:e,capabilities:t,spec:be,isPlaying:Ze,isActive:et,togglePlay:st,isBooklist:ve,backgroundColor:Je,tracklistDomRef:Ye,isConcert:je,sortableColumns:xt}),(0,p.jsx)(s.Suspense,{fallback:null,children:(0,p.jsx)(Ur,{formatListData:e.metadata.formatListData})}),!Be&&$e?.upcomingEventsCount?(0,p.jsx)(Or,{artistConcertsUri:$e.uri||"",artistImageUrl:$e.imageUrl||"",artistName:$e.title||"",spec:te}):null,Be&&!!$e&&Ve&&Ve.length>0&&(0,p.jsx)(s.Suspense,{fallback:null,children:(0,p.jsx)(Mr,{liveEvents:Ve,artistConcertsUri:$e.uri||"",artistName:$e.title||"",spec:te})}),(0,p.jsxs)("div",{className:"contentSpacing",children:[we?(0,p.jsx)(y,{playlistUri:a}):null,Me&&we&&_e?(0,p.jsx)(Dr,{uri:a,playlistName:m}):null,e.metadata.hasSpotifyAudiobooks&&De&&(0,p.jsxs)("div",{className:S.A.noBooklistSupportContainer,children:[(0,p.jsx)(n.E,{variant:"bodyMediumBold",semanticColor:"textBase",children:d.Ru.get("web-player.playlist.booklist-not-supported-title")}),(0,p.jsx)(n.E,{variant:"bodyMedium",semanticColor:"textSubdued",children:d.Ru.get("web-player.playlist.booklist-not-supported.message")})]}),h>0&&(0,p.jsx)(s.Suspense,{fallback:null,children:ht?(0,p.jsx)($t,{initialItems:ee,contextUri:a,nrItems:h,canEdit:Ie,canRemove:C,ariaLabel:m}):(0,p.jsx)(re,{spec:ye,children:(0,p.jsx)(w.a,{columns:pt,children:fe?(0,p.jsx)(Ia,{ariaLabel:m,nrTracks:h,playlistUri:a,scrollToUid:He,usePlayContextItem:at,tracklistDomRef:Ye,sortableColumns:xt,isCompactMode:he},a):(0,p.jsx)(ai,{ariaLabel:m,nrTracks:h,playlistUri:a,playlistName:m,isMixedMedia:Ce,isLive:Re,isConcert:je,isBlend:Ae,isBooklist:ve,canEdit:Ie,scrollToUid:He,feedbackPath:ke["dislike-endpoint"],deleteFeedbackPath:ke["delete-endpoint"],usePlayContextItem:at,tracklistRef:Ge,tracklistDomRef:Ye,canRemove:C,spec:ye,initialItems:ee,isCompactMode:he,sortableColumns:xt,hasSpotifyAudiobooks:Y??!1},a)})})}),ot&&(0,p.jsx)(s.Suspense,{fallback:null,children:Ee?(0,p.jsx)(jr,{playlistUri:a,onCurationModeChange:Ne,isBooklist:ve}):(0,p.jsx)("button",{className:S.A.seeMore,onClick:()=>{Ne(!0)},children:(0,p.jsx)(n.E,{as:"div",variant:"bodySmallBold",children:d.Ru.get("playlist.curation.find_more")})})}),nt?(0,p.jsx)("div",{"data-testid":"recommended-track",children:(0,p.jsx)(Lr,{playlistUri:a,playlistLength:e.metadata.unfilteredTotalLength,canEdit:Ie})}):null,lt?(0,p.jsx)(Pr,{uri:a}):null,ct&&(0,p.jsx)(Da,{uri:a})]})]}),je&&(0,p.jsx)(Gs,{spec:te.footerSectionFactory()})]})})]})})),$r=s.memo((function({uri:e}){const t=(0,s.useContext)(oe.w).getCapabilities(),{filter:a}=(0,s.useContext)(E.g),{sortState:i}=(0,s.useContext)(N.cL),{metadataOptions:r,contentsOptions:n}=(0,Ft.$)(i,a),{data:l,isLoading:o,isError:c}=(0,ce.W)(e,r,n);return!l||o?(0,p.jsx)(k.A,{hasError:c,errorMessage:d.Ru.get("error.not_found.title.playlist"),loadOffline:t.canModifyOffline}):l.metadata.permissions&&!l.metadata.permissions.canView?(0,p.jsx)(T,{uri:e}):(0,p.jsx)(Fr,{playlist:l,capabilities:t})})),zr=()=>{const{playlistId:e}=(0,r.g)(),t=(0,c.Ps)((e||"").split("&")[0]).toURI();return(0,p.jsx)(Y.P,{surface:G.u.PLAYLIST,uris:[t],children:(0,p.jsx)(N.sn,{uri:t,children:(0,p.jsx)(E.s,{uri:t,children:(0,p.jsx)(P.S1,{children:(0,p.jsx)($r,{uri:t})})})})})}},86935:(e,t,a)=>{a.d(t,{A:()=>s});const s={cards:"TGW6mpr34dHAhhFh0pfw",tourCard:"pQmF4tvRpUeLWgPKUcW7",cardImage:"mGY3ER0iIvb1NbJ1d7X4",cardContent:"JHz_5gqDYpq9Lw3pIac_",subtitle:"oTFzEDWGQSLME1nHjJrt",title:"HPCUzqQRn7oae4vJa3y9",venue:"YxZlxyNx0MHxSVO51TVQ",cardLink:"_B5m05rOGq0BKdTa7al5",cardButton:"StPcf0AvSM0c18nwF4hJ",eventCard:"KhaSITGJnz5MH4qDsYkK",interestedIcon:"ERx0RCdRdFFmYdmZR1P5",concertsCarousel:"nX5e9EyU1GmU42OFVHwH",carouselContent:"MIgjuGue6dRaJWwfUX0K",allEventsCard:"C5dyMaEg91RyIp9YajnW",concertsCarouselControls:"himyaJTaj2PpeC7nuAH5",carouselControlPrev:"KfXbOs2l5lLjtz9R4DiW",carouselControlNext:"yy5akXrxTifXTssHWubJ"}}}]);
//# sourceMappingURL=xpui-routes-playlist.js.map