"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[7704],{81729:(e,t,n)=>{n.r(t),n.d(t,{SKELETON_CARDS_COUNT:()=>Et,SKELETON_SHELVES_COUNT:()=>kt,SKELETON_SHORTCUTS_COUNT:()=>Nt,default:()=>Bt});var r=n(46220),i=(n(47408),n(15970),n(93019),n(56110),n(59496)),o=n(84875),s=n.n(o),a=n(83055),c=n(36393),l=n(22056),u=n(86417),d=n(14942),m=(n(2840),n(24255)),f=n(54465),h=(n(25750),n(33208),n(3726),n(79075),n(26870),n(86978),n(98618),n(40905),n(79410),n(21105),n(72753),n(24896)),p=n(58032),v=n(76253),j=n(16020),x=n(62629),g=(n(95410),n(25356)),y=n(62563),b=n(95967),O=n(45891),P=n(47018),S=n(35407),w=n(33363),C=n(38649),N=n(54167),k=n(21322),E=n(69873),_=n(4899);const T="rPV8BmHZXaGIGT2HwvBB",B="nlOU1unbFAd7ZHyeSMTH",D="jb9xD5ECTqKFK02qe3HZ",L="Z35BWOA10YGn5uc9YgAp",I="g3f_cI5usQX7ZOQyDtA9",M="jvWzgRWM_y_9FFTYRCcB",U="zXwER4Lsqq_e7fVVaPkZ",Z="WWDxafTPs4AgThdcX5jN",A="Tzzq1pG_inwo_oSOdyjb",F="TbrIq3NG2VYFoAUMSmp9",H="JFDEiqT_8B5zeG_CDSdK",J="EzRmGRncgnv1zFgF4dqE",R="bPmmKmSPLKMhtJSaUJRX",z="vpQWUBWS_lXRLZMRJT7w",W="GSv7K805J9Jw7LB9tn2A",G="Kcb74zm1aMqGfPxTwO5s",q="s9c9x_mJq197U2hBzGtV";var Y=n(4637),K=(0,i.memo)((function(e){var t,n,r,i=e.item,o=(0,k._)(i.uri),s=null!==(t=i.duration_ms)&&void 0!==t?t:0,a=(0,_.$o)(i.uri),c=a.isPlaying,l=a.isActive,u=(0,E.z)(1e4,(function(e){var t;return(null===(t=e.item)||void 0===t?void 0:t.uri)===i.uri})),m=(0,d.Z)(u,1)[0],f=null!==(n=null===(r=i.resume_point)||void 0===r?void 0:r.resume_position_ms)&&void 0!==n?n:0,h=c||l?m:f,p=Math.round(100/(s/h)),v=o===N.Om.YES,j=s&&h>0;return v||j?(0,Y.jsxs)("div",{className:z,children:[v?(0,Y.jsx)(w.E,{iconSize:16,semanticColor:"textSubdued"}):null,j?(0,Y.jsx)(C.k,{className:W,value:p,semanticColor:"essentialBase"}):null]}):null})),V=n(92053),X=n(6042),Q=n(2292),$=n(12323),ee=n(64094),te=n(68765),ne=n(13034),re=n(71789),ie=n(20786),oe=(0,i.memo)((function(e){var t=e.images,n=void 0===t?[]:t,r=e.fallbackIcon,i=void 0===r?g.U:r,o=(0,ie.X)(n);return(0,Y.jsx)("div",{className:M,children:(0,Y.jsx)("div",{className:U,children:(0,Y.jsx)(re.E,{className:Z,src:null==o?void 0:o.url,loading:"lazy",testid:"shortcut-image",children:(0,Y.jsx)(i,{"aria-hidden":!0})})})})})),se=n(21586),ae=n(46596),ce=n(3777),le=i.memo((function(e){var t,n,r=e.index,o=e.item,a=e.fallbackIcon,c=e.showPlayButton,l=e.extraContent,u=e.onContextMenu,d=void 0===u?function(){}:u,f=e.onTouchStart,h=void 0===f?function(){}:f,p=e.onTouchEnd,v=void 0===p?function(){}:p,j=(0,V.s0)(),g=(0,ae.o)(),y=(0,x.WQ)(),b=y.setColorFromUri,O=y.resetColor,S=y.clearColor,w=(0,ee.G3)(o.uri,o.release_date,null===(t=o.resume_point)||void 0===t?void 0:t.resume_position_ms,null===(n=o.resume_point)||void 0===n?void 0:n.fully_played),C=(0,ne.fU)(Q.createDesktopShortcutsPlayNavCardEventFactory,{data:{position:r,uri:o.uri}}),N=C.spec,k=C.logger,E=(0,te.n)({uri:o.uri},{featureIdentifier:"home",referrerIdentifier:"home"}),_=E.isPlaying,T=E.isActive,B=E.togglePlay;var M=(0,i.useCallback)((function(){g({targetUri:o.uri,intent:"navigate",type:"click"});var e=N.hitUiNavigate({destination:o.uri});k.logInteraction(e),j((0,P.EC)(o.uri).toURLPath(!0))}),[o.uri,k,j,g,N]),U=(0,i.useCallback)((function(){b(o.uri)}),[o.uri,b]);(0,i.useEffect)((function(){return function(){S()}}),[S]);var Z=(0,ne.Wi)(N),z=(0,se.O1)([o.uri],o.name);return(0,Y.jsx)("div",{ref:Z,className:L,onContextMenu:d,onTouchStart:h,onTouchEnd:v,onMouseEnter:U,onMouseLeave:O,children:(0,Y.jsxs)("div",{className:I,onDragStart:z,children:[(0,Y.jsx)(oe,{images:o.images,fallbackIcon:a}),(0,Y.jsxs)("div",{className:A,children:[(0,Y.jsxs)("div",{className:F,children:[(0,Y.jsxs)("div",{className:H,children:[w&&(0,Y.jsx)(ee.Rd,{className:R}),(0,Y.jsx)(ce.Link,{to:o.uri,onClick:M,title:o.name,children:(0,Y.jsx)(X.D,{as:"p",variant:"balladBold",className:J,children:o.name})})]}),l||null]}),c&&(0,Y.jsx)("div",{className:s()(G,(0,m.Z)({},q,_)),children:(0,Y.jsx)($.f,{isPlaying:_,onClick:function(){g({targetUri:o.uri,intent:_?"pause":"play",type:"click"});var e,t=N.playButtonFactory();e=_?t.hitPause({itemToBePaused:o.uri}):T?t.hitResume({itemToBeResumed:o.uri}):t.hitPlay({itemToBePlayed:o.uri});var n=k.logInteraction(e);B({loggingParams:n})}})})]}),(0,Y.jsx)("div",{onClick:M,className:D})]})})})),ue=n(74964),de=n(41001),me=n(79459),fe=n(33639),he=n(56080);function pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(n),!0).forEach((function(t){(0,m.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var je=i.memo((function(e){return(0,P.zO)(e.item.uri)?(0,Y.jsx)(le,ve(ve({},e),{},{fallbackIcon:g.U})):(0,Y.jsx)(S._,{menu:(0,Y.jsx)(fe.X,{uri:e.item.uri}),children:(0,Y.jsx)(le,ve(ve({},e),{},{fallbackIcon:g.U}))})})),xe=i.memo((function(e){return(0,Y.jsx)(S._,{menu:(0,Y.jsx)(ue.Y,{uri:e.item.uri}),children:(0,Y.jsx)(le,ve(ve({},e),{},{fallbackIcon:y.c}))})})),ge=i.memo((function(e){return(0,Y.jsx)(S._,{menu:(0,Y.jsx)(de.m,{uri:e.item.uri}),children:(0,Y.jsx)(le,ve(ve({},e),{},{fallbackIcon:b.a}))})})),ye=i.memo((function(e){return(0,Y.jsx)(S._,{menu:(0,Y.jsx)(he.M,{uri:e.item.uri}),children:(0,Y.jsx)(le,ve(ve({},e),{},{fallbackIcon:O.J,showPlayButton:!1}))})})),be=i.memo((function(e){return e.item.podcast?(0,Y.jsx)(ye,{index:e.index,shouldSetBackgroundColor:e.shouldSetBackgroundColor,item:e.item.podcast,showPlayButton:e.showPlayButton}):(0,Y.jsx)(S._,{menu:(0,Y.jsx)(me.k,{uri:e.item.uri}),children:(0,Y.jsx)(le,ve(ve({},e),{},{fallbackIcon:O.J,extraContent:(0,Y.jsx)(K,ve({},e))}))})}));var Oe=n(60834),Pe=n(23742);const Se="J6UEDIqMSJhYlwGoeUZB",we="ZjFf4lVC48DSryAjP9qB";function Ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(n),!0).forEach((function(t){(0,m.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ke=i.memo((function(e){var t=(0,Pe.x)(),n=Ne(Ne({},e.item),t);return(0,Y.jsx)(le,Ne(Ne({},e),{},{item:n,fallbackIcon:function(){return(0,Y.jsx)("div",{className:Se,children:(0,Y.jsx)(Oe.P,{iconSize:32,className:we})})}}))})),Ee=n(32318),_e=n(67008);function Te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(n),!0).forEach((function(t){(0,m.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var De=24,Le=270;function Ie(e){if(null===e)return{cssProperties:{"--min-column-width":"".concat(Le,"px"),"--item-height":"".concat(80,"px"),"--column-gap":"".concat(De,"px"),"--row-gap":"".concat(16,"px")},showPlayButton:!0};var t=e.offsetWidth,n=t<600?200:Le,r=Math.min(Math.floor((t+De)/(n+De)),3),i=t>=858?80:64,o=64===i?12:16,s=(t-(r-1)*De)/r>=Le;return{cssProperties:{"--min-column-width":"".concat(n,"px"),"--item-height":"".concat(i,"px"),"--column-gap":"".concat(De,"px"),"--row-gap":"".concat(o,"px")},showPlayButton:s}}function Me(){var e=(0,i.useRef)(null),t=(0,i.useState)(Ie(null)),n=(0,d.Z)(t,2),r=n[0],o=n[1],s=(0,i.useCallback)((function(){null!==e.current&&o(Ie(e.current))}),[]),a=(0,i.useCallback)((function(t){e.current=t,s()}),[s]);return(0,p.a)((function(){return s()})),[r,a]}var Ue=function(e){if(null!==e&&"object"===(0,f.Z)(e)){var t=e,n=t.type,r=t.name;return n===j.p.YOUR_EPISODES&&"string"==typeof r}return!1},Ze=i.memo((function(e){var t,n,r=e.title,o=e.tagline,s=e.items,a=(0,x.WQ)().fetchMultipleColors,c=!(0,Ee.k)(),u=null!=r?r:(t=(new Date).getHours(),n=l.ag.get("home.evening"),t>=5&&t<12?n=l.ag.get("home.morning"):t>=12&&t<18&&(n=l.ag.get("home.afternoon")),n),m=Me(),f=(0,d.Z)(m,2),h=f[0],p=f[1];return(0,i.useEffect)((function(){var e=(null==s?void 0:s.map(x.lh))||[];a(e)}),[s,a]),c||null==s||!s.length?null:(0,Y.jsxs)("section",{className:T,"aria-label":u,ref:p,children:[(0,Y.jsx)(_e.r,{title:u,titleVariant:"alto",tagline:o}),(0,Y.jsx)("div",{className:B,style:h.cssProperties,children:s.filter((function(e,t){return Ue(e)||!e.error})).filter((function(e,t){return t<6})).map((function(e,t){if(Ue(e))return(0,Y.jsx)(ke,{index:t,item:e,showPlayButton:h.showPlayButton,shouldSetBackgroundColor:0===t},"".concat(t,"-").concat(e.uri));var n=function(e){var t=((0,P.EC)(e)||{}).type;switch(t){case P.JM.ARTIST:return ge;case P.JM.ALBUM:case P.JM.COLLECTION_ALBUM:return xe;case P.JM.PLAYLIST:case P.JM.PLAYLIST_V2:return je;case P.JM.SHOW:return ye;case P.JM.EPISODE:return be;case P.JM.COLLECTION:return je;default:return console.warn("Unable to resolve entity shortcut from ".concat(e,' of type "').concat(t||"unknown",'"')),ye}}(e.uri);return(0,Y.jsx)(n,{index:t,item:e,showPlayButton:h.showPlayButton,shouldSetBackgroundColor:0===t},"".concat(t,"-").concat(e.uri))}))})]})})),Ae=function(e){return(0,Y.jsx)(h.L,{onError:function(e){(0,v.vK)(e,"HomeShortcutsGrid")},children:(0,Y.jsx)(Ze,Be({},e))})},Fe=n(54151),He=n(74140);const Je="zUf7jtv9GPOKC1jYO5TO",Re="T8QLel3PoQTgJUpGYj7Q";var ze=(0,i.memo)((function(e){var t=e.isLoading,n=(0,Fe.h)("shimmer");return(0,Y.jsx)("div",{className:M,children:(0,Y.jsx)("div",{ref:n,className:s()(U,(0,m.Z)({},Re,t))})})})),We=(0,i.memo)((function(e){var t=e.isLoading;return(0,Y.jsx)("div",{className:s()(L,Je),"data-testid":"skeleton-shortcut",children:(0,Y.jsxs)("div",{className:I,children:[(0,Y.jsx)(ze,{isLoading:t}),(0,Y.jsx)("div",{className:A,children:(0,Y.jsx)(He.C,{as:"p",variant:"balladBold",className:J,isLoading:t})})]})})}));const Ge="v7dc5ekmeBiAYnLzV8oT";var qe=(0,i.memo)((function(e){var t=e.shortcutCount,n=Me(),i=(0,d.Z)(n,2),o=i[0],s=i[1];return(0,Y.jsxs)("section",{className:T,ref:s,children:[(0,Y.jsx)(He.C,{as:"h2",variant:"alto",className:Ge,charCount:25,isLoading:!0}),(0,Y.jsx)("div",{className:B,style:o.cssProperties,children:(0,r.Z)(new Array(t).keys()).slice(0,6).map((function(e,t){return(0,Y.jsx)(We,{isLoading:!0},t)}))})]})})),Ye=n(27293),Ke=n(66365),Ve=n(71379),Xe=n(99350),Qe=n(67505),$e=n(74977),et=n(6731),tt=n(3873),nt=n(88769),rt=n(26533),it=n.n(rt),ot=(n(84196),n(27586),n(76796)),st=n(23731),at=(n(66410),n(24355)),ct=n(47807),lt=n(85388),ut=n(37875);var dt=function(e){var t,n,r=e.spec,o=e.section,s=e.index,c=(0,a.W6)(lt.ty,{loadingValue:!1})?at.N:ct.q;return(0,i.useMemo)((function(){return o.sectionItems.items.some((function(e){return(0,ut.d)(e.content)}))}),[o.sectionItems])?(0,Y.jsx)(ne.Nh,{spec:r.shelvesFactory(),children:(0,Y.jsx)(c,{total:o.sectionItems.totalCount,seeAllUri:o.uri,pageId:o.uri,title:null!==(t=null===(n=o.data.title)||void 0===n?void 0:n.text)&&void 0!==t?t:"",index:s,id:o.uri,children:o.sectionItems.items.map(ut.x).filter((function(e){return!!e}))})}):null},mt=n(41009),ft=function(e){var t,n,r=e.spec,i=e.section,o=e.index;return(0,Y.jsx)(ne.Nh,{spec:r.shelvesFactory(),children:(0,Y.jsx)(mt.default,{title:null!==(t=null===(n=i.data.title)||void 0===n?void 0:n.text)&&void 0!==t?t:void 0,showAll:!1,index:o})})},ht=n(90457),pt=function(e){var t=e.spec,n=e.greeting,r=e.section;return(0,Y.jsx)(ne.Nh,{spec:t.shortcutsFactory(),children:(0,Y.jsx)(Ae,{items:r.sectionItems.items.map(ht.lh),title:null!=n?n:void 0})})},vt=n(67654),jt=(0,i.lazy)((0,nt.Z)(it().mark((function e(){var t,r;return it().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e(1814),n.e(8228)]).then(n.bind(n,37152));case 2:return t=e.sent,r=t.FeatureActivationShelf,e.abrupt("return",{default:r});case 5:case"end":return e.stop()}}),e)})))),xt=function(e){var t,n=e.spec,r=e.greeting,o=e.section,s=e.index;switch(null===(t=o.data)||void 0===t?void 0:t.__typename){case"HomeGenericSectionData":return(0,Y.jsx)(dt,{spec:n,section:(0,vt.f)(o,o.data),index:s});case"HomeFeatureActivationSectionData":return(0,ot.wW)()?(0,Y.jsx)(i.Suspense,{fallback:null,children:(0,Y.jsx)(jt,{})}):null;case"HomeShortsSectionData":return(0,Y.jsx)(pt,{spec:n,greeting:r,section:(0,vt.f)(o,o.data)});case"HomeRecentlyPlayedSectionData":return(0,Y.jsx)(ft,{spec:n,section:(0,vt.f)(o,o.data),index:s});case"HomeFeedBaselineSectionData":case"HomeNativeAdsSectionData":case"HomeOnboardingSectionData":case null:case void 0:return null;default:return(0,st._)(o.data),null}},gt=function(e){var t=e.spec,n=e.greeting,r=e.container,o=(0,ne.fU)(et.createDesktopHomeFeatureActivationShelfEventFactory,{}),s=o.spec,a=o.logger;return(0,i.useEffect)((function(){(0,tt.wW)()&&a.logImpression(s.impressionElementFactory().impression())}),[s,a]),(0,Y.jsx)(Y.Fragment,{children:r.sections.items.map((function(e,r){return(0,Y.jsx)(xt,{spec:t,greeting:n,section:e,index:r},"".concat(r,"-").concat(e.uri))}))})},yt=n(76027),bt=n(23940),Ot=(0,i.memo)((function(e){var t=e.cardCount;return(0,Y.jsx)(bt.X,{isLoading:!0,children:(0,r.Z)(new Array(t).keys()).map((function(e,t){return(0,Y.jsx)(yt.A,{isLoading:!0},t)}))})})),Pt=n(98668),St=n(60037),wt=function(){return(0,a.W6)(lt.Jw)===lt.pF.ONHOME?(0,Y.jsx)(St.w,{children:(0,Y.jsx)(Pt.M,{onSearch:!1})}):null},Ct=n(18237),Nt=6,kt=6,Et=6,_t=(0,i.memo)((function(e){var t=e.shortcutCount,n=e.shelfCount,i=e.cardCount;return(0,Y.jsx)("section",{"data-testid":"home-page",children:(0,Y.jsx)("div",{className:Ct.Z.home,children:(0,Y.jsxs)("div",{className:s()(Ct.Z.content,"contentSpacing"),children:[(0,Y.jsx)(qe,{shortcutCount:t}),(0,r.Z)(new Array(n).keys()).map((function(e,t){return(0,Y.jsx)(Ot,{cardCount:i},t)}))]})})})})),Tt=function(e){var t,n,r=e.spec;(0,Ke.z)("home");var i=(0,Qe.b3)({timeZone:(0,$e.L7)()},{cacheTime:$e.us,staleTime:$e.fS}),o=i.data,a=i.error;if(i.loading)return(0,Y.jsx)(_t,{shortcutCount:Nt,shelfCount:kt,cardCount:Et});if(null!==a)return(0,Y.jsx)(Ye.h,{hasError:!0,errorMessage:l.ag.get("error.generic")});var c=null==o?void 0:o.home;return"HomeResponsePayload"!==(null==c?void 0:c.__typename)||0===c.sectionContainer.sections.totalCount||0===c.sectionContainer.sections.items.length?(0,Y.jsx)(Ye.h,{hasError:!0,errorMessage:l.ag.get("error.generic")}):(0,Y.jsx)("section",{"data-testid":"home-page",children:(0,Y.jsx)("div",{className:Ct.Z.home,children:(0,Y.jsx)("div",{className:s()(Ct.Z.content,"contentSpacing"),children:(0,Y.jsx)(gt,{spec:r,greeting:null!==(t=null===(n=c.greeting)||void 0===n?void 0:n.text)&&void 0!==t?t:null,container:c.sectionContainer})})})})};const Bt=function(){var e=(0,ne.fU)(c.createDesktopHomeEventFactory,{data:{identifier:"home",uri:"spotify:home"}}).spec,t=(0,a.W6)(lt.yg),n=(0,Xe.S)(t);return(0,Y.jsx)(ne.Nh,{spec:e,children:(0,Y.jsxs)(Ve.q,{config:n,children:[(0,Y.jsx)(u.$,{children:l.ag.get("page.generic-title")}),(0,Y.jsx)(i.Suspense,{fallback:null,children:(0,Y.jsx)(wt,{})}),(0,Y.jsx)(Tt,{spec:e})]})})}}}]);
//# sourceMappingURL=home-v2.js.map