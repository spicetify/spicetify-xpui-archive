"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[9540],{48160:(e,n,i)=>{i.r(n),i.d(n,{AlbumPrerelease:()=>Ce});var a=i(80519),t=i(64641),l=i(76163),r=i(55740),d=i(33236),s=i(55207),o=i(37859),m=i(59496),u=i(2238);function k(e){const n=new Date;return(e instanceof Date?e:new Date(e)).getTime()-n.getTime()}var c=i(89120),v=i(4637);const p=({uri:e})=>{if(!e)return null;const n=(0,l._b)(e).toURLPath(!0);return(0,v.jsx)(c.D,{href:n,children:r.ag.get("web-player.album-prerelease.listen_now")})};var S=i(9348);const N=3e5,y=36e5;var b=i(69496);const g={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"preReleaseMutationPayload"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PreReleasePayload"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"preRelease"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PreRelease"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"preSaved"}}]}}]}}]}}]},f={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"AlbumPrereleasePreSavedState"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uri"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"lookup"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uris"},value:{kind:"ListValue",values:[{kind:"Variable",name:{kind:"Name",value:"uri"}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PreReleaseResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PreRelease"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"preSaved"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"NotFound"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}}]}}]}}]}}]}}]}}]},F={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"PreSaveAlbumPrerelease"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uri"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"preSavePreReleaseToLibrary"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uri"},value:{kind:"Variable",name:{kind:"Name",value:"uri"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"FragmentSpread",name:{kind:"Name",value:"preReleaseMutationPayload"}}]}}]}},...g.definitions]},x={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"RemovePreSaveAlbumPrerelease"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uri"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"removePreReleaseFromLibrary"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uri"},value:{kind:"Variable",name:{kind:"Name",value:"uri"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"FragmentSpread",name:{kind:"Name",value:"preReleaseMutationPayload"}}]}}]}},...g.definitions]},R=e=>{const{data:n,invalidate:i,loading:a}=(t={uri:e},l={staleTime:N,cacheTime:y},(0,b.a)(f,t,l));var t,l;return{isPreSaved:(0,m.useMemo)((()=>{if(!n)return!1;for(const i of n.lookup)if("PreReleaseResponseWrapper"===i.__typename&&"PreRelease"===i.data.__typename&&i.data.uri===e)return i.data.preSaved;return!1}),[n,e]),isLoading:a,invalidate:i}};var P=i(9102),h=i(99766),D=i(69539),T=i(49044),C=i(73320),_=i(18004);const j=(e,n)=>{const{request:i}=(0,m.useContext)(D.Ax),a=(0,h.I0)();return(0,P.useMutation)((async n=>{const a=n?F:x,t=await(0,T.J)(i,a,{uri:e}),l=t?.data;if(l)return function(e){let n;if("preSavePreReleaseToLibrary"in e&&"PreReleasePayload"===e.preSavePreReleaseToLibrary.__typename)n=e.preSavePreReleaseToLibrary.preRelease;else{if(!("removePreReleaseFromLibrary"in e)||"PreReleasePayload"!==e.removePreReleaseFromLibrary.__typename)return;n=e.removePreReleaseFromLibrary.preRelease}switch(n.__typename){case"PreRelease":return n.preSaved;case"NotFound":return!1;case"GenericError":return;default:return void(0,C._)(n)}}(l)}),{onSuccess:e=>{"boolean"==typeof e&&(e&&a((0,_.c)()),n(e))}})};const A=({uri:e})=>{const{isPreSaved:n,isLoading:i,addPresave:a,removePresave:t}=(e=>{const{isPreSaved:n,invalidate:i,isLoading:a}=R(e),{mutate:t,isLoading:l}=j(e,i);return{isPreSaved:n,isLoading:a||l,addPresave:(0,m.useCallback)((()=>t(!0)),[t]),removePresave:(0,m.useCallback)((()=>t(!1)),[t])}})(e);return n?(0,v.jsx)(S.P,{disabled:i,onClick:t,children:r.ag.get("web-player.album-prerelease.presaved")}):(0,v.jsx)(c.D,{disabled:i,onClick:a,children:r.ag.get("web-player.album-prerelease.presave")})};var I=i(57579),L=i(28725),w=i(65980),M=i(91560),V=i(91799),U=i(36010);const E=m.memo((function({uri:e,artistUri:n}){const{spec:i}=(0,V.T)(e);return(0,v.jsx)(M.ZP,{value:"album",children:(0,v.jsxs)(w.v,{children:[n&&(0,v.jsx)(U.Jh,{spec:i,divider:"after",uri:n,displayText:r.ag.get("contextmenu.go-to-artist-radio")}),(0,v.jsx)(U.Jx,{uri:e,spec:i,displayText:r.ag.get("context-menu.copy-album-link")}),(0,v.jsx)(U.h$,{spec:i,divider:"before",uri:e})]})})})),O=({prerelease:e,backgroundColor:n})=>{const i=function(e){const[n,i]=(0,m.useState)((()=>!!e&&k(e)<=0));return(0,m.useEffect)((()=>{if(!e)return;const n=k(e);if(n<=0)return void i(!0);if(n>=36e5)return void i(!1);const a=setTimeout((()=>{i(!0)}),n);return()=>{clearTimeout(a)}}),[e]),n}(e.releaseDate);return(0,v.jsx)(I.o,{backgroundColor:n,children:(0,v.jsxs)(I.F,{children:[i?(0,v.jsx)(p,{uri:e.content?.uri}):(0,v.jsx)(A,{uri:e.uri}),(0,v.jsx)(u.ClickToggleContextMenu,{menu:(0,v.jsx)(E,{uri:e.uri,artistUri:e.content?.artists[0].uri}),children:(0,v.jsx)(L.MoreButton,{label:r.ag.get("more.label.context",e.content?.name)})})]})})};var W=i(33334),B=i(84875),q=i.n(B),H=i(97045);const Q="J9GZWbcqWAQBbj0mGgBp",G="MnacN8FHHYBeSU8hx4U8",J="HBgE42egR1M0MoBZt7MA",Y="l5yLFFUEplqPqkpdgn2z",Z="g0_tYvLXcZhPQLQuecrg",K=({value:e,label:n,hasDivider:i=!1})=>(0,v.jsxs)("div",{className:J,children:[(0,v.jsx)(t.D,{variant:"canon",className:q()({[Z]:i}),children:e}),(0,v.jsx)(t.D,{variant:"finale",semanticColor:"textSubdued",children:n})]});var z=i(120);const X=1e3,$=60*X,ee=60*$,ne=24*ee;const ie={days:0,hours:0,minutes:0,seconds:0};function ae(e){return e>0?function(e){const n=Math.abs(e);return{days:Math.floor(n/ne),hours:Math.floor(n%ne/ee),minutes:Math.floor(n%ee/$),seconds:Math.floor(n%$/X)}}(e):ie}const te=({targetDate:e,className:n,onComplete:i,images:a,imageTitle:t})=>{const{days:l,hours:d,minutes:s,seconds:u}=((e,n)=>{const i=(0,m.useRef)(n);i.current=n;const[a,t]=(0,m.useState)((()=>ae(k(e))));return(0,z.Y)((n=>{const a=k(e),l=ae(a);t(l),a<=0&&(n(),i.current?.())}),1e3),a})(e,i),c=void 0!==a&&a.length>0&&t;return(0,v.jsxs)("div",{className:q()(Q,n,{[G]:c}),children:[c&&(0,v.jsx)(H.O,{images:a,type:o.p.ALBUM,shape:H.K.ROUNDED_CORNERS,className:Y,title:t}),(0,v.jsx)(K,{value:l,label:r.ag.get("web-player.album-prerelease.days",l),hasDivider:!0}),(0,v.jsx)(K,{value:d,label:r.ag.get("web-player.album-prerelease.hours",d),hasDivider:!0}),(0,v.jsx)(K,{value:s,label:r.ag.get("web-player.album-prerelease.minutes",s),hasDivider:!0}),(0,v.jsx)(K,{value:u,label:r.ag.get("web-player.album-prerelease.seconds",u)})]})};var le=i(85583),re=i(59476),de=i(86739);const se="xjbmV4vvBCu7c5U6nAgL",oe=({prerelease:e,children:n})=>(0,v.jsx)(u._,{menu:(0,v.jsx)(E,{uri:e.uri,artistUri:e.content?.artists[0].uri}),children:n}),me=({prerelease:e,backgroundColor:n})=>{const{content:i,releaseDate:a}=e,l=(0,d.jh)(),r=i,s=(0,m.useMemo)((()=>a?new Date(a):void 0),[a]);return(0,v.jsxs)(le.gF,{backgroundColor:n,children:[(0,v.jsx)(re.W,{children:r.name?(0,v.jsx)(de.i,{text:r.name}):null}),l===d.Uo.LARGE&&(0,v.jsx)(oe,{prerelease:e,children:(0,v.jsx)(le.Oz,{images:r.coverArt.sources,name:r.name??"",placeholderType:"album"})}),(0,v.jsxs)(le.sP,{children:[(0,v.jsx)(t.D,{variant:"mestoBold",children:(0,W.R)(r.type)}),(0,v.jsx)(oe,{prerelease:e,children:(0,v.jsx)(le.xd,{children:r.name})}),(0,v.jsx)(le.QS,{creators:r.artists,releaseDate:a}),s&&r.name?(0,v.jsx)(te,{images:l===d.Uo.MEDIUM?r.coverArt.sources:[],className:se,imageTitle:r.name,targetDate:s}):null]})]})};var ue=i(99703),ke=i(58069);const ce={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"albumPreReleaseTrackArtistItem"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ArtistResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Artist"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"profile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}}]}}]}}]}}]},ve={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"albumPreReleaseTracks"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uri"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"offset"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"lookup"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uris"},value:{kind:"ListValue",values:[{kind:"Variable",name:{kind:"Name",value:"uri"}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PreReleaseResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"FragmentSpread",name:{kind:"Name",value:"albumPreReleaseTracksData"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"NotFound"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}}]}}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"albumPreReleaseTracksData"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PreRelease"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"preReleaseContent"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"tracks"},arguments:[{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"offset"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"albumPreReleaseTrack"}}]}},{kind:"Field",name:{kind:"Name",value:"totalCount"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"albumPreReleaseTrack"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PreReleaseAlbumTrack"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"artists"},arguments:[{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"IntValue",value:"0"}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"20"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"albumPreReleaseTrackArtistItem"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"duration"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalMilliseconds"}}]}},{kind:"Field",name:{kind:"Name",value:"playability"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playable"}}]}},{kind:"Field",name:{kind:"Name",value:"contentRating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"}}]}}]}},...ce.definitions]},pe={totalLength:0,items:[]};function Se(e){const n=e.preReleaseContent,i=[];if(n?.tracks)for(const e of n.tracks.items)i.push({uri:e.uri,name:e.name?e.name:"",isPlayable:e.playability.playable,durationMs:e.duration?.totalMilliseconds??0,artists:Ne(e.artists.items),isExplicit:e.contentRating?.label===ke.KS.Explicit,is19PlusOnly:e.contentRating?.label===ke.KS.NineteenPlus});return{totalLength:n?.tracks.totalCount??0,items:i}}function Ne(e){const n=[];for(const i of e)"Artist"===i.data.__typename&&n.push({name:i.data.profile.name,uri:i.data.uri});return n}const ye=m.memo((function({ariaLabel:e,nrTracks:n,prereleaseUri:i,highlightUri:a,scrollToIndex:t,usePlayContextItem:l,hasHeaderRow:r=!0,initalTracks:d}){const s=(e=>{const{request:n}=(0,m.useContext)(D.Ax);return(0,m.useCallback)((async(i,a)=>{const t=await n(ve,{uri:e,offset:i,limit:a});for(const n of t?.data?.lookup||[])if("PreReleaseResponseWrapper"===n.__typename&&"PreRelease"===n.data.__typename&&n.data.uri===e)return Se(n.data);return pe}),[n,e])})(i),o=(0,m.useRef)(!1),u=(0,m.useRef)(null),[k,c]=(0,m.useState)(null),p=(0,m.useCallback)((e=>e.uri),[]);(0,m.useEffect)((()=>{u.current&&(k?u.current.scrollToIndex(k):t&&u.current.scrollToIndex(t))}),[k,t]);const S=(0,m.useCallback)((async(e,n)=>{const i=await s(e,n);if(a&&!k){const e=i.items.findIndex((e=>e?.uri===a));c(e||-1)}return i}),[s,a,k]),N=(0,m.useCallback)(((e,n)=>{const t=!o.current&&!!a&&a===e.uri;return t&&(o.current=!0),(0,v.jsx)(ue.Ym,{uri:e.uri,isPlayable:e.isPlayable,name:e.name,trackNumber:n+1,index:n,artists:e.artists,playcount:0,contextUri:i,duration_ms:e.durationMs,shouldRenderPlayCount:!1,usePlayContextItem:l,isMOGEFRestricted:e.is19PlusOnly,isExplicit:e.isExplicit,shouldHighLight:t,isReleased:e.isPlayable},n+e.uri)}),[a,i,l]);return(0,v.jsx)(ue.Pv,{ariaLabel:e,hasHeaderRow:r,rowPlaceholder:ue.uD,columns:[ue.QD.INDEX,ue.QD.TITLE,ue.QD.DURATION],renderRow:N,resolveUri:p,nrTracks:n,fetchTracks:S,limit:300,tracks:d,outerRef:u},i)}));var be=i(56398),ge=i(17286),fe=i(9205);const Fe={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"albumPreRelease"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uri"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"lookup"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uris"},value:{kind:"ListValue",values:[{kind:"Variable",name:{kind:"Name",value:"uri"}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PreReleaseResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"FragmentSpread",name:{kind:"Name",value:"albumPreReleaseData"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"NotFound"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}}]}}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"albumPreReleaseData"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PreRelease"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"preReleaseContent"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"artists"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"albumPreReleaseArtistItem"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"extractedColors"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"colorRaw"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hex"}},{kind:"Field",name:{kind:"Name",value:"isFallback"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"tracks"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"albumPreReleaseTrack"}}]}},{kind:"Field",name:{kind:"Name",value:"totalCount"}}]}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"uri"}}]}},{kind:"Field",name:{kind:"Name",value:"releaseDate"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isoString"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"albumPreReleaseArtistItem"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ArtistResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Artist"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"profile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"visuals"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarImage"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"height"}},{kind:"Field",name:{kind:"Name",value:"width"}}]}}]}}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"albumPreReleaseTrack"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PreReleaseAlbumTrack"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"artists"},arguments:[{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"IntValue",value:"0"}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"20"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"albumPreReleaseTrackArtistItem"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"duration"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalMilliseconds"}}]}},{kind:"Field",name:{kind:"Name",value:"playability"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playable"}}]}},{kind:"Field",name:{kind:"Name",value:"contentRating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"}}]}}]}},...ce.definitions]},xe=(e,n)=>(0,b.a)(Fe,e,n),Re=(e,n=xe)=>{const{data:i,loading:a,error:t}=n({uri:e},{staleTime:N,cacheTime:y});return{loading:a,error:!!t,prerelease:(0,m.useMemo)((()=>{if(!i)return null;for(const n of i.lookup)if("PreReleaseResponseWrapper"===n.__typename&&"PreRelease"===n.data.__typename&&n.data.uri===e)return Pe(n.data);return null}),[i,e])}};function Pe(e){const n=e.preReleaseContent;let i;if(n){const a=Se(e);i={artists:he(n.artists.items),name:n.name??void 0,uri:n.uri,coverArt:{extractedColors:n.coverArt?.extractedColors?.colorRaw,sources:n.coverArt?.sources??[]},type:n.type,tracks:a}}return{uri:e.uri,releaseDate:e.releaseDate?.isoString,content:i}}function he(e){const n=[];for(const i of e)"Artist"===i.data.__typename&&n.push({name:i.data.profile.name,id:i.data.id,uri:i.data.uri,images:i.data.visuals.avatarImage?.sources??[]});return n}var De=i(71597);const Te="H2kQJCtEGTjIDaPPniwb",Ce=e=>{const{uri:n}=e,{prerelease:i,loading:m,error:u}=Re(n),c=(e=>{let n;return e?.content?.coverArt.extractedColors&&(n=e.content.coverArt.extractedColors.isFallback?void 0:e.content.coverArt.extractedColors.hex),(0,De.Y)(n),n})(i),{ref:p,breakpoint:S}=(0,d.Db)({[d.Uo.MEDIUM]:0,[d.Uo.LARGE]:600}),N=parseInt(new URLSearchParams((0,a.TH)().search).get("index")||"0",10),{usePlayContextItem:y}=(0,s.n)({uri:n,pages:[{items:(b=i?.content?.tracks.items||[],b.filter((e=>e.isPlayable)).map((e=>({uri:e.uri,uid:null,type:o.p.TRACK,provider:null}))))}]},{featureIdentifier:"album_prerelease"});var b;if(m||u||!i)return(0,v.jsx)(ge.h,{hasError:!!u,errorMessage:r.ag.get("error.not_found.title.album")});if(i?.content?.uri&&function(e,n){if(!e.content?.uri||!e.releaseDate)return!1;const i=k(e.releaseDate);if(i>0)return!1;return i<=-1*n}(i,1728e5)){const e=(0,l._b)(i?.content?.uri);if(e)return(0,v.jsx)(fe.InstrumentedRedirect,{to:e.toURLPath(!0)})}return(0,v.jsx)(d.ZU.Provider,{value:S,children:(0,v.jsxs)("section",{ref:p,className:Te,children:[(0,v.jsx)(be.$,{children:r.ag.get("album.page-title",i.content?.name??"")}),(0,v.jsx)(me,{prerelease:i,backgroundColor:c}),(0,v.jsx)(O,{prerelease:i,backgroundColor:c}),i.content?.tracks.totalLength?(0,v.jsxs)("div",{className:"contentSpacing",children:[(0,v.jsx)(t.D,{as:"h2",variant:"canon",semanticColor:"textBase",children:r.ag.get("web-player.album-prerelease.tracklist_preview")}),(0,v.jsx)(ye,{prereleaseUri:n,ariaLabel:i.content?.name??r.ag.get("error.not_found.title.album"),nrTracks:i.content?.tracks.totalLength??0,scrollToIndex:N,usePlayContextItem:y,initalTracks:i.content?.tracks.items,albumUri:i.content?.uri})]}):null]})})}}}]);
//# sourceMappingURL=xpui-routes-album-prerelease.js.map