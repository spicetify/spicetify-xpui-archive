"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[4924],{94924:(e,s,o)=>{o.r(s),o.d(s,{EPISODE_SPONSORS_SHELF_TESTID:()=>E,EpisodeSponsorsWrapper:()=>m,SEE_ALL_EPISODE_SPONSORS_TESTID:()=>v,default:()=>D});var n=o(59496),r=o(99577);var t=o(4637);const i=(0,n.lazy)((()=>o.e(3611).then(o.bind(o,23611))));function a({fetchedEpisodeSponsorsData:e,fireTrackingEvent:s,numberOfSponsorsToDisplay:o,firedViewedEvents:a,version:d,reason:p,uri:c}){const{displayedEpisodeSponsorsData:u}=function({fetchedEpisodeSponsorsData:e,numberOfSponsorsToDisplay:s}){return(0,n.useMemo)((()=>({displayedEpisodeSponsorsData:e.slice(0,s)})),[e,s])}({fetchedEpisodeSponsorsData:e,numberOfSponsorsToDisplay:o}),f=(0,r.X)({displayedEpisodeSponsorsData:u,uri:c,reason:p}),l=(0,n.useMemo)((()=>u.map(((e,o)=>(0,t.jsx)(i,{fireTrackingEvent:s,firedViewedEvents:a,version:d,onClick:()=>f({ui_navigate:u.map((({clickthrough:e},s)=>o===s?e:"")),navigate_to_external_uri:u.map(((...[,e])=>o===e))}),...e},`${e.metadata.lineitem_id}-${o}`)))),[u,s,a,d,f]);return{displayedEpisodeSponsorsData:u,displayedSponsors:l}}var d=o(39428),p=o(88585),c=o.n(p);var u=o(74112);function f({firedViewedEvents:e}){const s=(0,n.useRef)();return{firedViewedEvents:s.current=e??s.current??new Set}}function l({uri:e,getEpisodeSponsors:s,fireTrackingEvent:o,numberOfSponsorsToDisplay:r,version:t,reason:i}){const{state:p}=(0,d.b)(),l=function({uri:e,episodeBase62Id:s}){return(0,n.useMemo)((()=>{const o=c().from(e),n=s||o?.getBase62Id();return{uri:c().episodeURI(n).toURI(),episodeBase62Id:n}}),[e,s])}({...p?.[d.H],uri:e}),{fetchedEpisodeSponsorsData:S}=(0,u.m)({...p,...l,getEpisodeSponsors:s,version:t}),{firedViewedEvents:E}=f({...p?.[d.H]}),v=a({fetchedEpisodeSponsorsData:S,fireTrackingEvent:o,numberOfSponsorsToDisplay:r,firedViewedEvents:E,version:t,reason:i,...l});return{...l,fetchedEpisodeSponsorsData:S,...v,firedViewedEvents:E,reason:i}}const S=(0,n.lazy)((()=>o.e(5942).then(o.bind(o,25942)))),E="episode-sponsors-shelf",v="see-all-episode-sponsors";function m(e){const{numberOfSponsorsToDisplay:s}=function({numberOfSponsorsToDisplay:e=3}){return{numberOfSponsorsToDisplay:e}}(e),o=l({...e,numberOfSponsorsToDisplay:s});return o.episodeBase62Id&&o.displayedSponsors.length?(0,t.jsx)(n.Suspense,{fallback:!0,children:(0,t.jsx)(S,{...e,numberOfSponsorsToDisplay:s,state:o})}):null}const D=m},74112:(e,s,o)=>{o.d(s,{F:()=>i,m:()=>a});var n=o(59496),r=o(54329),t=o(36269);const i=420;function a({episodeBase62Id:e,getEpisodeSponsors:s,fetchedEpisodeSponsorsData:a=[],version:d}){const[p,c]=(0,n.useState)(a),u=(0,n.useCallback)((async()=>{try{if(!e)throw new Error("episodeBase62Id is required to fetch episode sponsors");const n=s??(await Promise.resolve().then(o.bind(o,23214))).getEpisodeSponsors;c(await n(e,{version:d}))}catch(e){c([])}}),[e,s,d]),f=(0,r.y1)(u,i);(0,n.useEffect)((function(){a.length||f()}),[f,a.length]);const l=(0,n.useCallback)((()=>({effectCallback:f})),[f]);return(0,t.H)(l),{fetchedEpisodeSponsorsData:p}}},99577:(e,s,o)=>{o.d(s,{X:()=>t});var n=o(59496),r=o(85690);function t({uri:e,reason:s,displayedEpisodeSponsorsData:t}){const i=(0,r.s4)(),a=(0,n.useCallback)((async n=>{const{createPodcastAdCtaCardEvent:r}=await o.e(1814).then(o.bind(o,56869));return i.send(r({uri:e,reason:s,lineitem_id:t.map((e=>e.metadata.lineitemId)),...n}))}),[e,t,s,i]);return(0,n.useEffect)((function(){a()}),[a]),a}},36269:(e,s,o)=>{o.d(s,{H:()=>p});var n=o(59496),r=o(45947),t=o(85400),i=o(30971),a=o(80323),d=o(56805);function p(e){const s=(0,r.W6)(t.oF),o=(0,a.Y)((e=>{const s=e?.item??void 0;return(0,d.k6)(s)&&s.isPodcastAd?s.id??void 0:void 0})),p=(0,i.D)(o);(0,n.useEffect)((function(){const{effectCallback:n,destructor:r}=e();return o!==p&&Boolean(o)&&setTimeout(n,s),r}),[e,o,p,s])}}}]);
//# sourceMappingURL=4924.js.map