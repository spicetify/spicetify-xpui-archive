"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[7704],{30959:(e,t,s)=>{s.r(t),s.d(t,{SKELETON_CARDS_COUNT:()=>ft,SKELETON_SHELVES_COUNT:()=>pt,SKELETON_SHORTCUTS_COUNT:()=>jt,default:()=>Ct});var n=s(59496),i=s(84875),a=s.n(i),o=s(45947),r=s(84660),c=s(28669),l=s(63165),u=s(46638),m=s(20403),d=s(53525),h=s(14953),x=s(1452),g=s(20430),j=s(79882),p=s(14095),f=s(88585),y=s.n(f),v=s(28981),C=s(93809),S=s(67688),N=s(24543),T=s(42551),k=s(91442),P=s(66223),_=s(70745),w=s(92463),E=s(16543),b=s(33815),B=s(22484),L=s(15655),I=s(63660),U=s(89647),O=s(10687);const A="rPV8BmHZXaGIGT2HwvBB",F="nlOU1unbFAd7ZHyeSMTH",D="jb9xD5ECTqKFK02qe3HZ",M="Z35BWOA10YGn5uc9YgAp",H="g3f_cI5usQX7ZOQyDtA9",R="jvWzgRWM_y_9FFTYRCcB",z="zXwER4Lsqq_e7fVVaPkZ",W="WWDxafTPs4AgThdcX5jN",G="Tzzq1pG_inwo_oSOdyjb",q="TbrIq3NG2VYFoAUMSmp9",Z="JFDEiqT_8B5zeG_CDSdK",J="EzRmGRncgnv1zFgF4dqE",Y="bPmmKmSPLKMhtJSaUJRX",$="vpQWUBWS_lXRLZMRJT7w",K="GSv7K805J9Jw7LB9tn2A",V="Kcb74zm1aMqGfPxTwO5s",X="s9c9x_mJq197U2hBzGtV";var Q=s(4637);const ee=(0,n.memo)((function({item:e}){const t=(0,I._)(e.uri),s=e.duration_ms??0,{isPlaying:n,isActive:i}=(0,O.$o)(e.uri),[a]=(0,U.z)(1e4,(t=>t.item?.uri===e.uri)),o=e.resume_point?.resume_position_ms??0,r=n||i?a:o,c=Math.round(100/(s/r)),l=t===L.Om.YES,u=s&&r>0;return l||u?(0,Q.jsxs)("div",{className:$,children:[l?(0,Q.jsx)(b.E,{iconSize:16,semanticColor:"textSubdued"}):null,u?(0,Q.jsx)(B.k,{className:K,value:c,semanticColor:"essentialBase"}):null]}):null}));var te=s(92053),se=s(652),ne=s(78240),ie=s(55964),ae=s(36939),oe=s(71834),re=s(4147),ce=s(37796),le=s(63390),ue=s(42856),me=s(38696),de=s(49643),he=s(70812);const xe=(0,n.memo)((function({images:e=[],fallbackIcon:t=v.U}){const s=(0,he.X)(e);return(0,Q.jsx)("div",{className:R,children:(0,Q.jsx)("div",{className:z,children:(0,Q.jsx)(de.E,{className:W,src:s?.url,loading:"lazy",testid:"shortcut-image",children:(0,Q.jsx)(t,{"aria-hidden":!0})})})})})),ge=n.memo((function({index:e,item:t,fallbackIcon:s,showPlayButton:i,extraContent:o,onContextMenu:r=(()=>{}),onTouchStart:c=(()=>{}),onTouchEnd:l=(()=>{})}){const u=(0,te.s0)(),m=(0,ue.o)(),{setColorFromUri:d,resetColor:h,clearColor:x}=(0,p.WQ)(),g=(0,oe.G3)(t.uri,t.release_date,t.resume_point?.resume_position_ms,t.resume_point?.fully_played),{spec:j,logger:f}=(0,ce.fU)(ne.createDesktopShortcutsPlayNavCardEventFactory,{data:{position:e,uri:t.uri}}),{isPlaying:y,isActive:v,togglePlay:C}=(0,re.n)({uri:t.uri},{featureIdentifier:"home",referrerIdentifier:"home"});const S=(0,n.useCallback)((()=>{m({targetUri:t.uri,intent:"navigate",type:"click"});const e=j.hitUiNavigate({destination:t.uri});f.logInteraction(e),u((0,ie.EC)(t.uri).toURLPath(!0))}),[t.uri,f,u,m,j]),N=(0,n.useCallback)((()=>{d(t.uri)}),[t.uri,d]);(0,n.useEffect)((()=>()=>{x()}),[x]);const T=(0,ce.Wi)(j),k=(0,le.O1)([t.uri],t.name);return(0,Q.jsx)("div",{ref:T,className:M,onContextMenu:r,onTouchStart:c,onTouchEnd:l,onMouseEnter:N,onMouseLeave:h,children:(0,Q.jsxs)("div",{className:H,onDragStart:k,children:[(0,Q.jsx)(xe,{images:t.images,fallbackIcon:s}),(0,Q.jsxs)("div",{className:G,children:[(0,Q.jsxs)("div",{className:q,children:[(0,Q.jsxs)("div",{className:Z,children:[g&&(0,Q.jsx)(oe.Rd,{className:Y}),(0,Q.jsx)(me.Link,{to:t.uri,onClick:S,title:t.name,children:(0,Q.jsx)(se.D,{as:"p",variant:"balladBold",className:J,children:t.name})})]}),o||null]}),i&&(0,Q.jsx)("div",{className:a()(V,{[X]:y}),children:(0,Q.jsx)(ae.f,{isPlaying:y,onClick:function(){m({targetUri:t.uri,intent:y?"pause":"play",type:"click"});const e=j.playButtonFactory();let s;s=y?e.hitPause({itemToBePaused:t.uri}):v?e.hitResume({itemToBeResumed:t.uri}):e.hitPlay({itemToBePlayed:t.uri});const n=f.logInteraction(s);C({loggingParams:n})}})})]}),(0,Q.jsx)("div",{onClick:S,className:D})]})})})),je=n.memo((function(e){return y().isCollection(e.item.uri)?(0,Q.jsx)(ge,{...e,fallbackIcon:v.U}):(0,Q.jsx)(T._,{menu:(0,Q.jsx)(w.X,{uri:e.item.uri}),children:(0,Q.jsx)(ge,{...e,fallbackIcon:v.U})})})),pe=n.memo((function(e){return(0,Q.jsx)(T._,{menu:(0,Q.jsx)(k.Y,{uri:e.item.uri}),children:(0,Q.jsx)(ge,{...e,fallbackIcon:C.c})})})),fe=n.memo((function(e){return(0,Q.jsx)(T._,{menu:(0,Q.jsx)(P.m,{uri:e.item.uri}),children:(0,Q.jsx)(ge,{...e,fallbackIcon:S.a})})})),ye=n.memo((function(e){return(0,Q.jsx)(T._,{menu:(0,Q.jsx)(E.M,{uri:e.item.uri}),children:(0,Q.jsx)(ge,{...e,fallbackIcon:N.J,showPlayButton:!1})})})),ve=n.memo((function(e){return e.item.podcast?(0,Q.jsx)(ye,{index:e.index,shouldSetBackgroundColor:e.shouldSetBackgroundColor,item:e.item.podcast,showPlayButton:e.showPlayButton}):(0,Q.jsx)(T._,{menu:(0,Q.jsx)(_.k,{uri:e.item.uri}),children:(0,Q.jsx)(ge,{...e,fallbackIcon:N.J,extraContent:(0,Q.jsx)(ee,{...e})})})}));var Ce=s(7837),Se=s(37141);const Ne="J6UEDIqMSJhYlwGoeUZB",Te="ZjFf4lVC48DSryAjP9qB",ke=n.memo((function(e){const t=(0,Se.x)(),s={...e.item,...t};return(0,Q.jsx)(ge,{...e,item:s,fallbackIcon:()=>(0,Q.jsx)("div",{className:Ne,children:(0,Q.jsx)(Ce.P,{iconSize:32,className:Te})})})})),Pe=24,_e=270;function we(e){if(null===e)return{cssProperties:{"--min-column-width":"270px","--item-height":"80px","--column-gap":"24px","--row-gap":"16px"},showPlayButton:!0};const t=e.offsetWidth,s=t<600?200:_e;const n=Math.min(Math.floor((t+Pe)/(s+Pe)),3),i=t>=858?80:64;return{cssProperties:{"--min-column-width":`${s}px`,"--item-height":`${i}px`,"--column-gap":"24px","--row-gap":`${64===i?12:16}px`},showPlayButton:(t-(n-1)*Pe)/n>=_e}}function Ee(){const e=(0,n.useRef)(null),[t,s]=(0,n.useState)(we(null)),i=(0,n.useCallback)((()=>{null!==e.current&&s(we(e.current))}),[]),a=(0,n.useCallback)((t=>{e.current=t,i()}),[i]);return(0,d.a)((()=>i())),[t,a]}const be=e=>{if(null!==e&&"object"==typeof e){const{type:t,name:s}=e;return t===x.p.YOUR_EPISODES&&"string"==typeof s}return!1},Be=n.memo((function({title:e,tagline:t,items:s}){const{fetchMultipleColors:i}=(0,p.WQ)(),a=!(0,g.k)(),o=e??(()=>{const e=(new Date).getHours();let t=c.ag.get("home.evening");return e>=5&&e<12?t=c.ag.get("home.morning"):e>=12&&e<18&&(t=c.ag.get("home.afternoon")),t})(),[r,l]=Ee();return(0,n.useEffect)((()=>{const e=s?.map(p.lh)||[];i(e)}),[s,i]),a||!s?.length?null:(0,Q.jsxs)("section",{className:A,"aria-label":o,ref:l,children:[(0,Q.jsx)(j.r,{title:o,titleVariant:"alto",tagline:t}),(0,Q.jsx)("div",{className:F,style:r.cssProperties,children:s.filter(((e,t)=>be(e)||!e.error)).filter(((e,t)=>t<6)).map(((e,t)=>{if(be(e))return(0,Q.jsx)(ke,{index:t,item:e,showPlayButton:r.showPlayButton,shouldSetBackgroundColor:0===t},`${t}-${e.uri}`);const s=function(e){const t=(y().from(e)||{}).type;switch(t){case y().Type.ARTIST:return fe;case y().Type.ALBUM:case y().Type.COLLECTION_ALBUM:return pe;case y().Type.PLAYLIST:case y().Type.PLAYLIST_V2:return je;case y().Type.SHOW:return ye;case y().Type.EPISODE:return ve;case y().Type.COLLECTION:return je;default:return console.warn(`Unable to resolve entity shortcut from ${e} of type "${t||"unknown"}"`),ye}}(e.uri);return(0,Q.jsx)(s,{index:t,item:e,showPlayButton:r.showPlayButton,shouldSetBackgroundColor:0===t},`${t}-${e.uri}`)}))})]})})),Le=e=>(0,Q.jsx)(m.L,{onError:e=>{(0,h.vK)(e,"HomeShortcutsGrid")},children:(0,Q.jsx)(Be,{...e})});var Ie=s(76966);const Ue="zUf7jtv9GPOKC1jYO5TO",Oe="T8QLel3PoQTgJUpGYj7Q",Ae=(0,n.memo)((({isLoading:e})=>{const t=(0,Ie.h)("shimmer");return(0,Q.jsx)("div",{className:R,children:(0,Q.jsx)("div",{ref:t,className:a()(z,{[Oe]:e})})})})),Fe=(0,n.memo)((({isLoading:e})=>(0,Q.jsx)("div",{className:a()(M,Ue),"data-testid":"skeleton-shortcut",children:(0,Q.jsxs)("div",{className:H,children:[(0,Q.jsx)(Ae,{isLoading:e}),(0,Q.jsx)("div",{className:G,children:(0,Q.jsx)(u.C,{as:"p",variant:"balladBold",className:J,isLoading:e})})]})}))),De="v7dc5ekmeBiAYnLzV8oT",Me=(0,n.memo)((({shortcutCount:e})=>{const[t,s]=Ee();return(0,Q.jsxs)("section",{className:A,ref:s,children:[(0,Q.jsx)(u.C,{as:"h2",variant:"alto",className:De,charCount:25,isLoading:!0}),(0,Q.jsx)("div",{className:F,style:t.cssProperties,children:[...new Array(e).keys()].slice(0,6).map(((e,t)=>(0,Q.jsx)(Fe,{isLoading:!0},t)))})]})}));var He=s(27521),Re=s(55179),ze=s(90361),We=s(4439),Ge=s(85400),qe=s(73827),Ze=s(62988);const Je=()=>(0,o.W6)(Ge.Jw)===Ge.pF.ONHOME?(0,Q.jsx)(qe.w,{children:(0,Q.jsx)(Ze.M,{onSearch:!1})}):null;var Ye=s(4980),$e=s(96723),Ke=s(56733),Ve=s(37723),Xe=s(10420),Qe=s(7741),et=s(32440),tt=s(88386),st=s(6620),nt=s(14091);const it=({spec:e,section:t,index:s})=>{const i=(0,o.W6)(Ge.ty,{loadingValue:!1})?tt.N:st.q;return(0,n.useMemo)((()=>t.sectionItems.items.some((e=>(0,nt.d)(e.content)))),[t.sectionItems])?(0,Q.jsx)(ce.Nh,{spec:e.shelvesFactory(),children:(0,Q.jsx)(i,{total:t.sectionItems.totalCount,seeAllUri:t.uri,pageId:t.uri,title:t.data.title?.text??"",index:s,id:t.uri,children:t.sectionItems.items.map(nt.x).filter((e=>!!e))})}):null};var at=s(60137);const ot=({spec:e,section:t,index:s})=>(0,Q.jsx)(ce.Nh,{spec:e.shelvesFactory(),children:(0,Q.jsx)(at.default,{title:t.data.title?.text??void 0,showAll:!1,index:s})});var rt=s(13980);const ct=({spec:e,greeting:t,section:s})=>(0,Q.jsx)(ce.Nh,{spec:e.shortcutsFactory(),children:(0,Q.jsx)(Le,{items:s.sectionItems.items.map(rt.lh),title:t??void 0})}),lt=(0,n.lazy)((async()=>{const{FeatureActivationShelf:e}=await Promise.all([s.e(1814),s.e(8228)]).then(s.bind(s,73362));return{default:e}})),ut=({spec:e,greeting:t,section:s,index:i})=>{switch(s.data?.__typename){case"HomeGenericSectionData":return(0,Q.jsx)(it,{spec:e,section:(0,et.f)(s,s.data),index:i});case"HomeFeatureActivationSectionData":return(0,Xe.wW)()?(0,Q.jsx)(n.Suspense,{fallback:null,children:(0,Q.jsx)(lt,{})}):null;case"HomeShortsSectionData":return(0,Q.jsx)(ct,{spec:e,greeting:t,section:(0,et.f)(s,s.data)});case"HomeRecentlyPlayedSectionData":return(0,Q.jsx)(ot,{spec:e,section:(0,et.f)(s,s.data),index:i});case"HomeFeedBaselineSectionData":case"HomeNativeAdsSectionData":case"HomeOnboardingSectionData":case null:case void 0:return null;default:return(0,Qe._)(s.data),null}},mt=({spec:e,greeting:t,container:s})=>{const{spec:i,logger:a}=(0,ce.fU)(Ke.createDesktopHomeFeatureActivationShelfEventFactory,{});return(0,n.useEffect)((()=>{(0,Ve.wW)()&&a.logImpression(i.impressionElementFactory().impression())}),[i,a]),(0,Q.jsx)(Q.Fragment,{children:s.sections.items.map(((s,n)=>(0,Q.jsx)(ut,{spec:e,greeting:t,section:s,index:n},`${n}-${s.uri}`)))})};var dt=s(55478),ht=s(19026);const xt=(0,n.memo)((({cardCount:e})=>(0,Q.jsx)(ht.X,{isLoading:!0,children:[...new Array(e).keys()].map(((e,t)=>(0,Q.jsx)(dt.A,{isLoading:!0},t)))})));var gt=s(23601);const jt=6,pt=6,ft=6,yt=(0,n.memo)((({shortcutCount:e,shelfCount:t,cardCount:s})=>(0,Q.jsx)("section",{"data-testid":"home-page",children:(0,Q.jsx)("div",{className:gt.Z.home,children:(0,Q.jsxs)("div",{className:a()(gt.Z.content,"contentSpacing"),children:[(0,Q.jsx)(Me,{shortcutCount:e}),[...new Array(t).keys()].map(((e,t)=>(0,Q.jsx)(xt,{cardCount:s},t)))]})})}))),vt=({spec:e})=>{(0,Re.z)("home");const{data:t,error:s,loading:n}=(0,Ye.b3)({timeZone:(0,$e.L7)()},{cacheTime:$e.us,staleTime:$e.fS});if(n)return(0,Q.jsx)(yt,{shortcutCount:jt,shelfCount:pt,cardCount:ft});if(null!==s)return(0,Q.jsx)(He.h,{hasError:!0,errorMessage:c.ag.get("error.generic")});const i=t?.home;return"HomeResponsePayload"!==i?.__typename||0===i.sectionContainer.sections.totalCount||0===i.sectionContainer.sections.items.length?(0,Q.jsx)(He.h,{hasError:!0,errorMessage:c.ag.get("error.generic")}):(0,Q.jsx)("section",{"data-testid":"home-page",children:(0,Q.jsx)("div",{className:gt.Z.home,children:(0,Q.jsx)("div",{className:a()(gt.Z.content,"contentSpacing"),children:(0,Q.jsx)(mt,{spec:e,greeting:i.greeting?.text??null,container:i.sectionContainer})})})})},Ct=()=>{const{spec:e}=(0,ce.fU)(r.createDesktopHomeEventFactory,{data:{identifier:"home",uri:"spotify:home"}}),t=(0,o.W6)(Ge.yg),s=(0,We.S)(t);return(0,Q.jsx)(ce.Nh,{spec:e,children:(0,Q.jsxs)(ze.q,{config:s,children:[(0,Q.jsx)(l.$,{children:c.ag.get("page.generic-title")}),(0,Q.jsx)(n.Suspense,{fallback:null,children:(0,Q.jsx)(Je,{})}),(0,Q.jsx)(vt,{spec:e})]})})}}}]);
//# sourceMappingURL=home-v2.js.map