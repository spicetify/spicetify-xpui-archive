"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[5457],{4111:(e,s,l)=>{l.r(s),l.d(s,{default:()=>_});var t=l(59496),a=l(99766),i=l(9134),n=l(76163),r=l(21729),d=l(45037),c=l(74591),u=l(22711),o=l(55740),p=l(6002),v=l(4637);const f=({leavebehinds:e,surface:s,playlistUri:l,playlistId:t})=>{const a=(0,r.s4)(),n=`${o.ag.get("view.see-all")} (${e.length<=p.fz?o.ag.formatNumber(e.length):o.ag.formatNumber(p.fz)})`;return(0,v.jsx)(c.rU,{to:`/playlist/${t}/see-all-ads`,state:{playlistUri:l},children:(0,v.jsx)(u.o,{"data-testid":"leavebehinds-see-all",buttonSize:"sm",onClick:()=>{a.send((0,i.a)({leavebehind_request_id:e[0].requestId,event:"event_clicked",event_reason:"cta_see_all",surface:s,uri:l}))},children:n})})};var h=l(55095),b=l(35278),y=l(68061);var g=l(8975),m=l(93557);const _=({playlistUri:e,playlistName:s})=>{const l=(0,n.EC)(e)?.id,c=(0,a.v9)(m.N),u=c?.some((e=>e.playlistId===l)),o=(0,b.OO)(b.Tg.PLAYLIST),_=(0,a.I0)(),I=(0,r.s4)(),w=(0,a.v9)((e=>e.ads?.musicLeavebehinds?.playlistId)),N=(0,a.v9)((e=>e.ads.musicLeavebehinds.fetchingState)),U=(0,a.v9)(m.v);(0,t.useEffect)((()=>{const t=async()=>{if(l&&!u){_((0,g.ZN)(l));try{const l=await(({uri:e,playlistName:s})=>y.adsCosmos.post("https://spclient.wg.spotify.com/podcast-ap4p/leavebehinds/ads",{surface:(0,b.OO)(b.Tg.PLAYLIST),uri:e,playlistTitle:s}))({uri:e,playlistName:s});_((0,g.Gr)((0,p.D7)({requestId:l.requestId,leavebehindAds:l.leavebehindAds},e)))}catch(s){_((0,g.tD)()),I.send((0,i.a)({event:"event_error",event_reason:"error_fetching_leavebehinds",surface:o,uri:e}))}}};w!==l&&t()}),[_,I,u,w,N,l,s,e,o]);const k=(0,t.useMemo)((()=>U.slice(0,p.aV)),[U]);return N===h.I.FETCHED&&U.length>0&&l&&e===U[0].playlistUri?(0,v.jsx)(d._,{surface:o,playlistUri:e,leavebehinds:k,seeAllButton:U.length>p.aV?(0,v.jsx)(f,{leavebehinds:U,surface:o,playlistId:l,playlistUri:e}):null}):null}}}]);
//# sourceMappingURL=playlist-leavebehinds.js.map