"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[5835],{92763:(e,t,a)=>{a.d(t,{Z:()=>D});var n=a(59496),s=a(81902),o=a(61030),r=a(55740),i=a(93399),c=a(69565),l=a(72407),d=a(57949),m=a(5710),g=a(40727);const u="MUiWCNTfb6FcSwVPvQ1V",h="UAk3bMhekwJTV_wIyfsT",p="X9w6LPfKsZHMCs38sVIQ",v="NXn5KjeUOjLGlAfS1Gao",f="N0wgFMDDvCiby4QB5kLJ",x="nloNe2BLRHjz9dxlwfLU",j="FyD0hF1e2PKzRxQ6sYDQ",y="JzXND83mXvcEuntCNR34",N="GR08E4L_rOGljyQQX30R";var _=a(4637);const D=(0,n.memo)((e=>{const{concert:t,isVirtual:a,enableFirstPartyBadge:n,onClick:D}=e,{venue:b,location:w}=t,C=t.artists[0],k=(0,m.CH)(t.startDate.localDate);return(0,_.jsxs)(i.Link,{to:`/concert/${t.id}`,className:u,"data-testid":"concert-card",onClick:D,children:[C.imageUri&&(0,_.jsx)(c.Z,{children:(0,_.jsx)("div",{role:"img",className:N,style:{backgroundImage:`linear-gradient(180deg, rgba(18, 18, 18, 0) 0%, rgba(6, 6, 6, 0.6) 60%, rgba(0, 0, 0, 0.7) 100%), url(${C.imageUri})`}})}),(0,_.jsx)("time",{className:h,dateTime:t.startDate.localDate,children:(0,_.jsx)(s.D,{as:"div",variant:"mestoBold",children:(0,m.jx)(k)})}),(0,_.jsxs)("div",{className:p,dir:"auto",children:[(0,_.jsxs)(s.D,{as:"p",className:y,variant:"mesto",children:[(0,l.FO)(k)," • ",(0,m.hK)(k)]}),(0,_.jsx)(s.D,{as:"h2",variant:"cello",weight:"bold",className:v,children:(0,g.ij)(t)}),(0,_.jsxs)("div",{className:f,children:[n&&(0,d.$R)(t)&&(0,_.jsx)("span",{className:j,children:(0,_.jsx)(o.V,{iconSize:16})}),(0,_.jsx)(s.D,{as:"span",className:x,variant:"mesto","data-testid":"location-name",children:a?b:[b,w].join(r.ag.getSeparator())})]})]})]})}))},57949:(e,t,a)=>{a.d(t,{$R:()=>c,DF:()=>g,Vv:()=>d,ie:()=>u,k9:()=>i,pm:()=>m,sk:()=>l,yI:()=>o});var n=a(85487),s=a(67898);const o=(e,t)=>{if(!e)return"/concerts";const a=t?.normalize().replaceAll(/\W+/g,"-");return a?`/concerts/location/${e}-${a}`:`/concerts/location/${e}`},r=10;function i(e){if(0===e.length)return[];if(0===e[0].events.length)return[];const t=[];let a={date:e[0].events[0].openingDate.slice(0,r),events:[]};for(const n of e)for(const e of n.events){const n=e.openingDate.slice(0,r);a.date!==n&&(t.push(a),a={date:n,events:[]}),a.events.push(e)}return t.push(a),t}const c=e=>e.ticketers.some((e=>"spotify"===e.partnerDisplayName.toLowerCase())),l=e=>e.concerts.some((({concert:e})=>c(e))),d=e=>{const t=new Date(e);t.setDate(e.getDate()+(6-e.getDay()));const a=new Date(t);return a.setDate(t.getDate()+1),{from:t,to:a}},m=e=>{const t=new Date(e);t.setDate(e.getDate()+(6-e.getDay()));const a=new Date(t);a.setDate(t.getDate()+7);const n=new Date(a);return n.setDate(a.getDate()+1),{from:a,to:n}},g=(e,t)=>!!(e?.from&&e?.to&&t?.from&&t?.to)&&((0,n.Z)(e.from,t.from)&&(0,n.Z)(e.to,t.to)),u=e=>(0,s.Z)(e,{representation:"date"})},62023:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Pa});var n=a(59496),s=a(99766),o=a(80519),r=a(74591),i=a(86831),c=a(50511),l=a(39649),d=a(11493),m=a(22711),g=a(9109),u=a(2842),h=a(97653),p=a(28568),v=a(55740),f=a(79786),x=a(85583),j=a(59476),y=a(86739),N=a(44893),_=a(57115),D=a(38442),b=a(85487),w=a(81902),C=a(51471),k=a(12499),I=a(95115),S=a(42673),F=a(72962),E=a(17286),L=a(99034),O=a(53232),U=a(99108),M=a(61030),P=a(50281),A=a(710),$=a(69129),B=a(93399),G=a(57949),W=a(5710),R=a(40727);const z="cELOd04or4B6BbTbNWA7",H="CHJYbX33oDik9u4n4ohH",T="woQ0wEe6FL4lsGW05bsb",V="KTDREr8pDWjrmnzXzZ2z",Q="UUTvdEOH2v_rejoXdl9Z",K="cBbTozR921ppaoNZP0Uh",Z="SNyyQ0t_VvlWzzB9li7v",J="lwO4iko6mhCUgZN1s9AW",X="akvZI06vqHOow1pOL29J",q="WWZp3WM0maWJzl2qWEHE",Y="YdkAHxbDekz9SiAxHG6M",ee="AK37djOBJ2BuJOGuG1kQ",te="JfYURQbEA_ntMsMZV6tK",ae="du0mOGaZfHg3hsHwRMIu",ne="Rvzy4ltiiHIp9mvlxf0c",se="uEXt8BtfJCONUNVYrAHn";var oe=a(4637);const re=(0,n.memo)((e=>{const{concert:t,position:a,enableFirstPartyBadge:s,modalSpec:o}=e,{id:r,venue:i,location:c}=t,l=t.startDate.localDate,d=(0,W.CH)(l),m="ONLINE"===t.category,g=(0,n.useMemo)((()=>o?.eventRowFactory({position:a,uri:`spotify:concert:${t.id}`})),[o,a,t]),u=(0,_.$P)();return(0,oe.jsxs)(B.Link,{to:`/concert/${t.id}`,className:J,onClick:()=>{g&&u.logInteraction(g.hitUiNavigate({destination:`/concert/${r}`}))},children:[(0,oe.jsxs)("div",{className:X,"aria-hidden":!0,children:[(0,oe.jsx)(w.D,{as:"div",variant:"finaleBold",className:q,children:(0,W.jw)(d)}),(0,oe.jsx)(w.D,{as:"div",variant:"cello",className:Y,children:(0,W.wf)(d)})]}),(0,oe.jsxs)("div",{className:ee,children:[(0,oe.jsx)(w.D,{as:"div",variant:"violaBold",className:te,"data-testid":"event-title",children:(0,R.Yl)(t)}),(0,oe.jsx)(U.T,{children:(0,W.jx)(d)}),(0,oe.jsxs)(w.D,{as:"div",variant:"viola",className:ae,children:[(0,W.FO)(d)," • ",(0,W.hK)(d)]}),(0,oe.jsx)("span",{className:se,children:s&&(0,G.$R)(t)&&(0,oe.jsx)(M.V,{iconSize:16})}),(0,oe.jsx)(w.D,{as:"div",variant:"viola",className:ne,"data-testid":"event-venue",children:m?i:[i,c].join(v.ag.getSeparator())})]})]},t.id)})),ie=(0,n.memo)((e=>{const{event:t,locationName:a,onClose:s,feedSpec:o}=e,r=t?.concerts[0]?.concert,i=r?.artists[0],c=(0,h.W6)(D.J_),l=(0,n.useMemo)((()=>o?.groupedEventModalFactory({uri:i?.uri||""})),[o,i]),d=(0,_.$P)(),m=(0,_.Wi)(l);if(!t||!r||!i)return null;const g=()=>{l&&d.logInteraction(l.closeButtonFactory().hitUiHide()),s()};return(0,oe.jsx)($.Z,{contentLabel:v.ag.get("live_events.label"),isOpen:!0,className:z,onRequestClose:g,children:(0,oe.jsxs)("section",{className:H,ref:m,children:[(0,oe.jsx)("div",{className:T,children:(0,oe.jsx)(ce,{"aria-label":v.ag.get("close"),iconOnly:P.k,buttonSize:"sm",onClick:g})}),(0,oe.jsxs)("div",{className:V,children:[(0,oe.jsx)(A.E,{height:"48",width:"48",className:Q,src:i.imageUri}),(0,oe.jsxs)("div",{className:K,children:[(0,oe.jsx)(w.D,{as:"h3",variant:"cello",className:Z,"data-testid":"event-venue",children:i.name}),(0,oe.jsx)(w.D,{as:"h3",variant:"mesto","data-testid":"event-venue",children:`${v.ag.get("concerts.count_near_location",t.concerts.length,a)}`})]})]}),t.concerts.map(((e,t)=>(0,oe.jsx)(re,{concert:e.concert,position:t,enableFirstPartyBadge:c,modalSpec:l},e.concert.id)))]})})}));var ce=(0,O.ZP)(m.o).withConfig({displayName:"ConcertFeedGroupedModal___StyledButtonTertiary",componentId:"sc-1o845wh-0"})({color:"#FFFFFF",backgroundColor:"#000000",cursor:"pointer"}),le=a(9102),de=a(20620),me=a(73233);const ge=async()=>(await(0,me.rD)(de.b.getInstance())).body,ue=e=>{const[,{geonameId:t}]=e.queryKey;return(async e=>(await(0,me.$0)(de.b.getInstance(),e)).body)(t)},he=e=>{const[,,t]=e.queryKey;return(async(e=1,t)=>{const{geonameId:a,startDate:n,endDate:s}=t;return(await(0,me.ij)(de.b.getInstance(),{page:e,geonameId:a,startDate:n,endDate:s})).body})(e.pageParam,t)},pe=e=>{const[,,{geonameId:t}]=e.queryKey;return(async e=>(await(0,me.YA)(de.b.getInstance(),void 0,e)).body)(t)},ve=e=>{const[,,{geonameId:t}]=e.queryKey;return(async e=>(await(0,me.wr)(de.b.getInstance(),e)).body)(t)},fe=6e5,xe=/^(\d+)/,je=e=>{const t=e?.match(/(202\d)-([01]\d)-([0-3]\d)/);if(!t)return;const[,a,n,s]=t;return new Date(parseInt(a,10),parseInt(n,10)-1,parseInt(s,10))},ye=e=>{const t=(()=>{const{location:e}=(0,o.UO)(),[,t]=e?.match(xe)||[];if(t)try{return parseInt(t,10)}catch(e){return}})(),[a]=(0,r.lr)(),n=a.get("filter")?.trim();return e.isAnonymous&&!n||"all"===n?{type:"all",geonameId:t}:e.isInterestedEnabled&&"saved"===n?{type:"saved"}:e.isSoldBySpotifyEnabled&&"spotify"===n?{type:"spotify",geonameId:t}:{type:"foryou",geonameId:t}};var Ne=a(31211),_e=a(57265),De=a(98474);const be="MVPegsivznZB6gdkcnkH",we="MlK79hskRbFrN2OBjMkl",Ce="VxaXFH9Uq1NU0LtsVhIu",ke="UDVDNa40iTSPS9uHCG7Q",Ie="vktIWsUczavLRrl4SkRt",Se="Y1JeRPqrmHKXI1KcstYN",Fe="ofURwIKv0qEXJGTraIis",Ee="fN_lJHkYih9H3j9YSEzS",Le="LOJZO2MnGW5dCIawF767",Oe="tyc7QRlEJigVFIAeLGOB",Ue="PoljWhTLU3MKqIx2gSPY",Me="ajxCNAuBJSgYfKUUBWBT",Pe="WR2h2Li5XTrBn_Rdme_k",Ae="WNhsvOyu4doInF525pLE",$e="qSR4imCvzdznIQ4F2kBO",Be="BCDMgFFqzEyzC1UqkW3t",Ge="jFxUCv1gagc6erXmpgYw",We="XOS1JS9iDK8dgeF3GeL5",Re="LNAJMvRlTPqWsmZvV7Kg",ze="jP10ZUl0Jn2Ijue3fZux",He="ncN9bwTgIRk6xruAt5T8",Te="hKG8XDR5S00bjBAibgbI",Ve="XMhrCtHCVSPsNW67vM1m",Qe=(0,n.memo)((e=>{const{geonameId:t,locationName:a}=e,[s,o]=(0,n.useState)(!1),r=`https://concerts.spotifycdn.com/feed_city_images_1/${t}.jpg`;return(0,n.useEffect)((()=>{const e=()=>{o(!0)},t=()=>{o(!1)},a=new Image;return a.addEventListener("load",e),a.addEventListener("error",t),a.src=r,()=>{a.removeEventListener("load",e),a.removeEventListener("error",t)}}),[r]),(0,oe.jsx)(oe.Fragment,{children:(0,oe.jsxs)("div",{className:Te,children:[s&&(0,oe.jsx)(A.E,{src:r,className:Ve,circle:!0,imageHeight:"56px",imageWidth:"56px"}),(0,oe.jsxs)("div",{children:[(0,oe.jsx)(w.D,{variant:"ballad",semanticColor:"textSubdued",as:"p",children:v.ag.get("live_events.city_info_find_tickets",a)}),(0,oe.jsx)(w.D,{variant:"ballad",semanticColor:"textSubdued",as:"p",children:v.ag.get("live_events.city_info_view_details")})]})]})})}));var Ke=a(99243),Ze=(a(23299),a(73455)),Je=a(53908);const Xe="eFIu3aQJuKmf6H4Lb18K",qe="LPNL3DZ89Iisp8TMArD3",Ye="moVCbo9Ao5YJ5PsH4Qdz",et="URXDMjhb8pQWIDaBrCPC",tt="a3oYct1knu9af60A0v6g",at="qbIrubbolsixlgVkhO5r",nt="xHihsEV_0W6kpm0wHsXA",st="T8po_YH39Q9dhAsLAhec",ot={formatCaption:e=>v.ag.formatDate(e,{month:"long",year:"numeric"}),formatDay:e=>v.ag.formatDate(e,{day:"numeric"}),formatWeekdayName:e=>v.ag.formatDate(e,{weekday:"short"})},rt=(0,n.memo)((e=>{const{onDone:t,onClose:a}=e,[s,o]=(0,n.useState)(e.dateRange),r=(0,Je.S)(),i=new Date,c=(0,G.Vv)(i),l=(0,G.pm)(i),d=(0,G.DF)(s,c),g=(0,G.DF)(s,l);return(0,oe.jsx)(oe.Fragment,{children:(0,oe.jsx)($.Z,{isOpen:!0,children:(0,oe.jsxs)("section",{className:Xe,children:[(0,oe.jsx)(m.o,{className:qe,iconOnly:P.k,size:"small",onClick:a,"aria-label":v.ag.get("close_button_action")}),(0,oe.jsxs)("div",{className:Ye,children:[(0,oe.jsx)(w.D,{as:"h3",variant:"cello",children:v.ag.get("live_events.date_picker_dialog_title")}),(0,oe.jsxs)("div",{className:et,children:[(0,oe.jsx)(I.A,{className:tt,size:"md",selectedColorSet:"brightAccent",selected:d,onClick:()=>{o(d?void 0:c)},children:v.ag.get("live_events.this_weekend_preset")}),(0,oe.jsx)(I.A,{className:tt,size:"md",selectedColorSet:"brightAccent",selected:g,onClick:()=>{o(g?void 0:l)},children:v.ag.get("live_events.next_weekend_preset")})]})]}),(0,oe.jsx)(Ke._W,{mode:"range",selected:s,onSelect:o,numberOfMonths:2,defaultMonth:e.dateRange?.from,fromDate:new Date,formatters:ot,dir:r?"rtl":"ltr",modifiersClassNames:{today:at}}),(0,oe.jsxs)("div",{className:nt,children:[(0,oe.jsx)(m.o,{className:st,size:"small",onClick:()=>{o(void 0)},disabled:!s?.from,children:v.ag.get("live_events.date_picker_dialog_clear")}),(0,oe.jsx)(Ze.D,{size:"small",onClick:()=>{if(s?.from){const{from:e,to:a}=s;t({from:e,to:a||e})}else t()},children:v.ag.get("live_events.date_picker_dialog_done")})]})]})})})}));var it=a(76163),ct=a(92763),lt=a(69565);const dt="pU4WoqT8T6PmtjPbFtK0",mt="FC5Y_KFJ9rJyTpydqtOW",gt="AAYLcavkBdCuebn9AQxT",ut="lYHCmxpdReachiOORWGo",ht="JtKEdtTtcK7s6EpGecaC",pt="XuH9DoZCf0aVJ2BxQkTB",vt="myHDa69cI5CHC8fhIhkG",ft=(0,n.memo)((e=>{const{event:t,enableFirstPartyBadge:a,onClick:s}=e,o=(0,n.useCallback)((()=>s(t)),[t,s]),r=(0,W.CH)(t.openingDate),i=(0,W.CH)(t.closingDate),c=t.concerts[0].concert,l=c.artists[0];return(0,oe.jsxs)(m.o,{onClick:o,className:dt,component:"div","data-testid":"concert-card",role:"button",children:[l.imageUri&&(0,oe.jsx)(lt.Z,{children:(0,oe.jsx)("div",{role:"img",className:vt,style:{backgroundImage:`linear-gradient(180deg, rgba(18, 18, 18, 0) 0%, rgba(6, 6, 6, 0.6) 60%, rgba(0, 0, 0, 0.7) 100%), url(${l.imageUri})`}})}),(0,oe.jsx)("time",{className:mt,dateTime:r.toISOString(),children:(0,oe.jsx)(w.D,{as:"p",variant:"mestoBold",children:(0,W.Bc)(r,i)})}),(0,oe.jsxs)("div",{className:gt,dir:"auto",children:[(0,oe.jsx)(w.D,{as:"h2",variant:"cello",weight:"bold",className:ut,children:(0,R.ij)(c)}),(0,oe.jsxs)("div",{className:ht,children:[a&&(0,G.sk)(t)&&(0,oe.jsx)("span",{className:pt,children:(0,oe.jsx)(M.V,{iconSize:16})}),(0,oe.jsx)(w.D,{as:"span",variant:"mesto","data-testid":"concerts-count",children:v.ag.get("concerts.count",t.concerts.length)})]})]})]})})),xt=(0,n.memo)((e=>{const{event:t,position:a,sectionSpec:s,onOpenGroupedEvent:o}=e,r=t.concerts[0]?.concert,i=r?.id,c=r&&(0,it.g3)(r.id).toURI(),l=(0,h.W6)(D.J_),d=(0,_.$P)(),m=(0,n.useMemo)((()=>s?.eventCardFactory({identifier:i??"",position:a,uri:c??""})),[s,i,c,a]),g=(0,_.Wi)(m),u=e=>{o(e),m&&d.logInteraction(m.hitUiReveal())};if(t.concerts.length>1)return(0,oe.jsx)("div",{ref:g,children:(0,oe.jsx)(ft,{event:t,enableFirstPartyBadge:l,onClick:u})});return(0,oe.jsx)("div",{ref:g,children:(0,oe.jsx)(ct.Z,{concert:r,isVirtual:"online"===t.source,enableFirstPartyBadge:l,onClick:()=>{m&&d.logInteraction(m.hitUiNavigate({destination:c}))}})})})),jt="yLIDHkmBrjsAVNMCcFM_",yt="qr_9NXyk7D0t6wclM5R0",Nt="mDxkFuOd3TBAQI2gXatq",_t="AQ8ZFs5U45GPiyJnqEvt",Dt="E8DcbdVmmoGfC8R8S1Vw",bt="wzS5PwxEhferQEdjumt0",wt="E0zwnbwA3HzqNi2BV4eq",Ct=(0,n.memo)((e=>{const{event:t,enableFirstPartyBadge:a,onClick:s}=e,o=(0,n.useCallback)((()=>s(t)),[t,s]),r=(0,W.CH)(t.openingDate),i=(0,W.CH)(t.closingDate),c=t.concerts[0].concert,l=c.artists[0];return(0,oe.jsxs)("div",{className:bt,onClick:o,onKeyPress:o,role:"link",tabIndex:0,children:[(0,oe.jsx)(A.E,{src:l?.imageUri,alt:"",role:"presentation",className:jt}),(0,oe.jsxs)("div",{className:yt,children:[(0,oe.jsx)(w.D.span,{variant:"cello",className:Nt,"data-testid":"event-title",children:(0,R.ij)(c)}),(0,oe.jsx)(w.D.span,{variant:"ballad",className:_t,children:(0,W.Bc)(r,i)}),(0,oe.jsxs)(w.D.span,{variant:"ballad",className:Dt,"data-testid":"event-venue",children:[a&&(0,G.sk)(t)&&(0,oe.jsx)(M.V,{iconSize:16,className:wt}),v.ag.get("concerts.count",t.concerts.length)]})]})]})})),kt=(0,n.memo)((e=>{const{concert:t,isVirtual:a,enableFirstPartyBadge:n,onClick:s}=e,{venue:o,location:r}=t,i=t.artists[0],c=(0,W.CH)(t.startDate.localDate);return(0,oe.jsxs)(B.Link,{to:`/concert/${t?.id}`,className:bt,"data-testid":"concert-row",onClick:s,children:[(0,oe.jsx)(A.E,{src:i?.imageUri,alt:"",role:"presentation",className:jt}),(0,oe.jsxs)("div",{className:yt,children:[(0,oe.jsx)(w.D.span,{variant:"cello",className:Nt,"data-testid":"event-title",children:(0,R.ij)(t)}),(0,oe.jsxs)(w.D.span,{variant:"ballad",className:_t,children:[(0,W.xE)(c)," • ",(0,W.hK)(c)]}),(0,oe.jsxs)(w.D.span,{variant:"ballad",className:Dt,"data-testid":"event-venue",children:[n&&(0,G.$R)(t)&&(0,oe.jsx)(M.V,{iconSize:16,className:wt}),a?o:[o,r].join(v.ag.getSeparator())]})]})]})})),It=(0,n.memo)((e=>{const{event:t,position:a,sectionSpec:s,onOpenGroupedEvent:o}=e,r=t.concerts[0]?.concert,i=r?.id,c=r&&(0,it.g3)(r.id).toURI(),l=(0,h.W6)(D.J_),d=(0,_.$P)(),m=(0,n.useMemo)((()=>s?.eventRowFactory({identifier:i??"",position:a,uri:c??""})),[s,i,c,a]),g=(0,_.Wi)(m),u=e=>{o(e)};if(t.concerts.length>1)return(0,oe.jsx)("div",{ref:g,children:(0,oe.jsx)(Ct,{event:t,enableFirstPartyBadge:l,onClick:u})});return(0,oe.jsx)("div",{ref:g,children:(0,oe.jsx)(kt,{concert:r,isVirtual:"online"===t.source,enableFirstPartyBadge:l,onClick:()=>{m&&d.logInteraction(m.hitUiNavigate({destination:c??""}))}})})})),St=(0,n.memo)((e=>{const{eventGroups:t,locationName:a,isLoading:s,feedSpec:o,onOpenGroupedEvent:r,layout:i}=e,c=(0,n.useMemo)((()=>o?.eventSectionFactory({identifier:"all",position:0})),[o]),l=(0,_.Wi)(c);return s?(0,oe.jsx)(E.h,{hasError:!1,errorMessage:""}):t?0===t.length||0===t[0].events.length?(0,oe.jsx)(F.u,{title:v.ag.get("concerts.error.no_concerts_found_title"),message:v.ag.get("concerts.error.no_concerts_found_message",a),renderInline:!0}):(0,oe.jsx)("div",{ref:l,children:t.map((e=>(0,oe.jsxs)("div",{className:Ae,children:["grid"===i&&(0,oe.jsx)(L.P,{total:e.events.length,title:v.ag.formatDate(new Date(`${e.date}T00:00:00`),{weekday:"long",day:"numeric",month:"long",year:"numeric"}),showAll:!0,children:e.events.map(((e,t)=>{const a=e.concerts[0]?.concert;return(0,oe.jsx)(xt,{event:e,position:t,sectionSpec:c,onOpenGroupedEvent:r},a?.id)}))}),"list"===i&&(0,oe.jsxs)("div",{children:[(0,oe.jsx)(w.D,{as:"h2",variant:"canon",semanticColor:"textBase",className:Ie,children:v.ag.formatDate(new Date(`${e.date}T00:00:00`),{weekday:"long",day:"numeric",month:"long",year:"numeric"})}),e.events.map(((e,t)=>{const a=e.concerts[0]?.concert;return(0,oe.jsx)(It,{event:e,position:t,sectionSpec:c,onOpenGroupedEvent:r},a?.id)}))]})]},e.date)))}):null})),Ft={month:"short",day:"numeric"},Et=e=>{if((0,b.Z)(e.from,e.to))return v.ag.formatDate(e.from,Ft);return`${v.ag.formatDate(e.from,Ft)} - ${v.ag.formatDate(e.to,Ft)}`},Lt=(0,n.memo)((e=>{const{geonameId:t,spec:a,layout:s}=e,i=(()=>{const[e]=(0,r.lr)(),t=e.get("startDate")?.trim(),a=e.get("endDate")?.trim(),n=je(t),s=je(a);return n&&s&&{from:n,to:s}})(),c=(0,o.s0)(),[,l]=(0,r.lr)(),[d]=(0,r.lr)(),[m,g]=(0,n.useState)(),[u,p]=(0,n.useState)(!1),f=(0,_e.o)(),x=(0,n.useMemo)((()=>a?.headerFactory()),[a]),{data:j,isLoading:y,hasNextPage:N,isFetchingNextPage:_,fetchNextPage:D}=(b={geonameId:t,startDate:i&&(0,G.ie)(i.from),endDate:i&&(0,G.ie)(i.to)},(0,le.useInfiniteQuery)(["concerts","all",b],he,{staleTime:fe,keepPreviousData:!0,getNextPageParam:(e,t)=>{if(!(t.length>=50)&&0!==e.events.length)return t.length+1}}));var b;const F=(0,n.useMemo)((()=>(0,G.k9)(j?.pages??[])),[j?.pages]),E=j?.pages[0]?.userLocation||v.ag.get("concerts.default_location"),L=(0,h.W6)(De.HE5),O=(0,G.Vv)(new Date),U=(0,G.pm)(new Date),M=(0,n.useCallback)((e=>{const t={filter:"all"};e&&(t.startDate=(0,G.ie)(e.from),t.endDate=(0,G.ie)(e.to)),p(!1),l(t)}),[l]),P=(0,n.useCallback)((e=>{const t={filter:"all"};(0,G.DF)(i,e)||(t.startDate=(0,G.ie)(e.from),t.endDate=(0,G.ie)(e.to)),l(t)}),[i,l]);return(0,oe.jsxs)("div",{children:[(0,oe.jsx)(S.$,{children:`${v.ag.get("concerts_shows_in")} ${E}`}),(0,oe.jsxs)("div",{className:Ge,children:[(0,oe.jsx)(Ne.Z,{handleLocationChange:e=>{f({type:"click",intent:"change-live-events-location"}),e?.geonameId&&c({pathname:(0,G.yI)(e.geonameId,e.location),search:`?${d.toString()}`})},locationStr:E,headerSpec:x}),L&&(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(C.P,{className:Be,iconLeading:k.a,onClick:()=>p(!0),size:"small",children:i?Et(i):v.ag.get("live_events.date_picker_button_text")}),u&&(0,oe.jsx)(rt,{onClose:()=>p(!1),onDone:M,dateRange:i}),(0,oe.jsx)(I.A,{className:We,size:"sm",selectedColorSet:"brightAccent",selected:(0,G.DF)(i,O),onClick:()=>P(O),children:v.ag.get("live_events.this_weekend_preset")}),(0,oe.jsx)(I.A,{className:We,size:"sm",selectedColorSet:"brightAccent",selected:(0,G.DF)(i,U),onClick:()=>P(U),children:v.ag.get("live_events.next_weekend_preset")})]})]}),(0,oe.jsx)(St,{isLoading:y,locationName:E,eventGroups:F,onOpenGroupedEvent:e=>{g(e);const t=e.concerts[0]?.concert.artistUris[0];f({type:"click",intent:"open-grouped-live-event",targetUri:t})},feedSpec:a,layout:s}),N&&(0,oe.jsx)("div",{className:$e,children:(0,oe.jsx)(C.P,{disabled:_,onClick:()=>{D()},children:v.ag.get("concerts.load_more")})}),(0,oe.jsx)(ie,{event:m,locationName:E,feedSpec:a,onClose:()=>g(void 0)}),(0,oe.jsx)(w.D,{variant:"finale",semanticColor:"textSubdued",children:v.ag.get("live_events.disclaimer")}),j&&j.pages[0]&&j.pages[0].userLocationGeonameId&&(0,oe.jsx)(Qe,{geonameId:j.pages[0].userLocationGeonameId,locationName:E})]})}));var Ot=a(18505),Ut=a(54738),Mt=a(91560);const Pt=(0,n.memo)((e=>{const{title:t="",identifier:a,position:s,events:o,feedSpec:r,onOpenGroupedEvent:i,layout:c}=e,l=(0,n.useMemo)((()=>r?.eventSectionFactory({identifier:a,position:s})),[r,a,s]),d=(0,_.Wi)(l);return 0===o.length?null:(0,oe.jsxs)("div",{className:be,ref:d,children:["grid"===c&&(0,oe.jsx)(Mt.ZP,{value:"headered-grid",index:s,children:(0,oe.jsx)(L.P,{total:o.length,title:t,showAll:!0,children:o.map(((e,t)=>{const a=e.concerts[0]?.concert;return(0,oe.jsx)(xt,{event:e,position:t,sectionSpec:l,onOpenGroupedEvent:i},a?.id)}))})}),"list"===c&&(0,oe.jsxs)("div",{children:[(0,oe.jsx)(w.D,{as:"h2",variant:"canon",semanticColor:"textBase",className:Ie,children:t}),o.map(((e,t)=>{const a=e.concerts[0]?.concert;return(0,oe.jsx)(It,{event:e,position:t,sectionSpec:l,onOpenGroupedEvent:i},a?.id)}))]})]})})),At=(0,n.memo)((e=>{const{spec:t,layout:a}=e,[s,i]=(0,n.useState)(),[c]=(0,r.lr)(),l=(d=e.geonameId,(0,le.useQuery)(["concerts","popular",{geonameId:d}],pe,{staleTime:fe,keepPreviousData:!0}));var d;const m=l.data?.userLocation||v.ag.get("concerts.default_location"),g=(0,n.useMemo)((()=>t?.headerFactory()),[t]),u=(0,o.s0)();return(0,oe.jsxs)("div",{children:[(0,oe.jsx)(S.$,{children:`${v.ag.get("concerts_shows_in")} ${m}`}),(0,oe.jsx)("div",{className:Ge,"data-testid":"location-selector",children:(0,oe.jsx)(Ne.Z,{handleLocationChange:e=>{(0,Ot._)({type:"click",intent:"change-live-events-location"}),e?.geonameId&&u({pathname:(0,G.yI)(e.geonameId,e.location),search:`?${c.toString()}`})},locationStr:m,headerSpec:g})}),(0,oe.jsxs)("div",{className:Re,children:[(0,oe.jsx)(w.D,{variant:"celloCanon",semanticColor:"textBase",children:v.ag.get("live_events.for_you_anonymous_heading")}),(0,oe.jsx)(w.D,{variant:"ballad",className:ze,semanticColor:"textSubdued",children:v.ag.get("live_events.for_you_anonymous_subheading")}),(0,oe.jsx)(Ze.D,{colorSet:"invertedLight",className:He,onClick:()=>(0,Ut.L6)(),children:v.ag.get("live_events.sign_up_free")})]}),l.data&&(0,oe.jsx)(Pt,{title:v.ag.get("concerts_popular_near_you"),identifier:"popular",position:0,events:l.data.events,onOpenGroupedEvent:e=>{i(e);const t=e.concerts[0]?.concert.artistUris[0];(0,Ot._)({type:"click",intent:"open-grouped-live-event",targetUri:t})},feedSpec:t,layout:a}),(0,oe.jsx)(ie,{event:s,locationName:m,feedSpec:t,onClose:()=>i(void 0)}),(0,oe.jsx)(w.D,{variant:"finale",semanticColor:"textSubdued",children:v.ag.get("live_events.disclaimer")}),l.data&&l.data.userLocationGeonameId&&(0,oe.jsx)(Qe,{geonameId:l.data.userLocationGeonameId,locationName:m})]})}));var $t=a(78193),Bt=a(95316),Gt=a(72407);const Wt=e=>24===e.length?new Date(e.substring(0,19)):22===e.length?new Date(e.substring(0,16)):new Date(e),Rt=e=>v.ag.formatDate(e,{month:"short",day:"numeric"}),zt=e=>v.ag.formatDate(e,{hour:"numeric",minute:"numeric"}),Ht=(e,t)=>{if(e.toDateString()===t.toDateString())return(e=>v.ag.formatDate(e,{weekday:"short",month:"short",day:"numeric"}))(e);if(e.getMonth()===t.getMonth()){return`${v.ag.formatDate(e,{day:"numeric",month:"short"})}–${v.ag.formatDate(t,{day:"numeric"})}`}return`${v.ag.formatDate(e,{day:"numeric",month:"short"})}–${v.ag.formatDate(t,{day:"numeric",month:"short"})}`};var Tt=a(60177),Vt=a(53201);const Qt="QYX01DsOaw_MzJWWRL2R",Kt="wpTjIgQz7QkLGlEM2SbD",Zt="nfOfj83N2J77AhkT4NNC",Jt="RVBcsEWqZBqE8LlyMmmT",Xt="M5l3yVBFFsTeGr0FCQ53",qt="pYZtdiW_JXpCpEpUNBl3",Yt="smnK8C6twajPDjNeIZpu",ea="yEPFml56fHXdbEaxMRxQ",ta="VJN_K93zj5zcQWuKpudd",aa="YvO7J4oC8u1QqRMBY4pg",na=(0,n.memo)((e=>{const{concert:t,isVirtual:a,spec:s,position:o}=e,r=t?.id,i=(0,it.g3)(t.id).toURI(),{venue:c,location:l}=t,d=t.artists[0],m=Wt(t.startDate.localDate),g=(0,_.$P)(),u=(0,n.useMemo)((()=>(0,Tt.FV)(e.followers)),[e.followers]),h=(0,n.useMemo)((()=>s.concertCardFactory({identifier:r,position:o,uri:i})),[s,i,r,o]),p=(0,n.useMemo)((()=>(0,Bt.w)()),[]),f=(0,_.Wi)(h);return(0,oe.jsxs)(B.Link,{to:`/concert/${t.id}`,className:Qt,onClick:()=>{g.logInteraction(h.hitUiNavigate({destination:i}))},ref:f,children:[d.imageUri&&(0,oe.jsx)(lt.Z,{children:(0,oe.jsx)("div",{role:"img",className:ea,style:{backgroundImage:`linear-gradient(180deg, rgba(18, 18, 18, 0) 0%, rgba(6, 6, 6, 0.6) 60%, rgba(0, 0, 0, 0.7) 100%), url(${d.imageUri})`}})}),(0,oe.jsx)("time",{className:Kt,dateTime:t.startDate.localDate,children:(0,oe.jsx)(w.D,{as:"h5",variant:"mestoBold",children:Rt(m)})}),(0,oe.jsxs)("div",{className:Zt,dir:"auto",children:[(0,oe.jsxs)(w.D,{as:"h2",className:Yt,variant:"mesto",children:[(0,Gt.FO)(m)," • ",zt(m)]}),(0,oe.jsx)(w.D,{as:"h2",variant:"cello",weight:"bold",className:Jt,children:(0,Tt.ij)(t)}),(0,oe.jsx)("div",{className:Xt,children:(0,oe.jsx)(w.D,{as:"h2",className:qt,variant:"mesto","data-testid":"location-name",children:a?c:[c,l].join(v.ag.getSeparator())})})]}),(0,oe.jsxs)("div",{className:ta,onClick:()=>{g.logInteraction(p.hitNoAction())},children:[(0,oe.jsx)(Vt.D,{followers:e.followers,spec:p}),(0,oe.jsx)(w.D,{as:"p",variant:"mesto",className:aa,children:u})]})]})})),sa=(0,n.memo)((e=>{const{event:t,onClick:a,spec:s,position:o}=e,r=t.concerts[0].concert?.id,i=(0,it.g3)(r).toURI(),c=(0,_.$P)(),l=(0,n.useMemo)((()=>s.concertCardFactory({identifier:r,position:o,uri:i})),[s,i,r,o]),d=(0,n.useMemo)((()=>(0,Bt.w)()),[]),m=(0,n.useCallback)((()=>{c.logInteraction(l.hitUiReveal()),a(t)}),[t,a,l,c]),g=(0,_.Wi)(l),u=Wt(t.openingDate),h=Wt(t.closingDate),p=t.concerts[0].concert,f=p.artists[0],x=(0,n.useMemo)((()=>(0,Tt.FV)(e.followers)),[e.followers]),j=(0,n.useCallback)((()=>{c.logInteraction(d.hitNoAction())}),[c,d]);return(0,oe.jsxs)("div",{onClick:m,className:Qt,role:"button",tabIndex:0,onKeyDown:e=>{"Enter"===e.key&&m()},ref:g,children:[f.imageUri&&(0,oe.jsx)(lt.Z,{children:(0,oe.jsx)("div",{role:"img",className:ea,style:{backgroundImage:`linear-gradient(180deg, rgba(18, 18, 18, 0) 0%, rgba(6, 6, 6, 0.6) 60%, rgba(0, 0, 0, 0.7) 100%), url(${f.imageUri})`}})}),(0,oe.jsx)("time",{className:Kt,dateTime:u.toISOString(),children:(0,oe.jsx)(w.D,{as:"h5",variant:"mestoBold",children:Ht(u,h)})}),(0,oe.jsxs)("div",{className:Zt,dir:"auto",children:[(0,oe.jsx)(w.D,{as:"h2",variant:"cello",weight:"bold",className:Jt,children:(0,Tt.ij)(p)}),(0,oe.jsx)("div",{className:Xt,children:(0,oe.jsx)(w.D,{as:"h2",variant:"mesto","data-testid":"concerts-count",children:v.ag.get("concerts.count",t.concerts.length)})})]}),(0,oe.jsxs)("div",{className:ta,onClick:j,children:[(0,oe.jsx)(Vt.D,{followers:e.followers,spec:d}),(0,oe.jsx)(w.D,{as:"p",variant:"mesto",className:aa,children:x})]})]})}));var oa=a(84875),ra=a.n(oa);const ia="LN9pdza5hvbdl1QB8dKo",ca="P6SpMz_j_hH6lfVNSO2w",la="axY_3UzUiQCQ2Asp0mQt",da="CVhxc8GXvAXDO7De7zal",ma="IXXvh3b5U_b8xjeKorvb",ga=n.memo((function({headline:e,className:t,spec:a}){const n=(0,_.Wi)(a.welcomeCardFactory()),s=(0,_.$P)();return(0,oe.jsx)("div",{className:ra()(ia,t),ref:n,onClick:()=>{s.logInteraction(a.welcomeCardFactory().hitNoAction())},children:(0,oe.jsx)("div",{className:ra()(ma),children:(0,oe.jsx)(w.D,{as:"p",variant:"cello",className:ra()(da),children:e})})})})),ua=({spec:e})=>(0,oe.jsx)(ga,{spec:e,headline:v.ag.get("web-player.family-duo-concerts-shelf.main-card-family"),className:ca}),ha=({spec:e})=>(0,oe.jsx)(ga,{spec:e,headline:v.ag.get("web-player.family-duo-concerts-shelf.main-card-duo"),className:la});var pa=a(80608),va=a(37355),fa=a(89687),xa=a(13870),ja=a(1938);const ya="pSD8FAzxnwWRFeP817di",Na=n.memo(n.forwardRef((function(e,t){const{className:a,render:s,numberOfElements:o}=e,r=(0,n.useRef)(null),[i,c]=(0,n.useState)({columnCount:-1});(0,n.useImperativeHandle)(t,(()=>r.current));const l=(0,n.useCallback)((()=>{const e=r.current;if(!e||!e.parentElement)return;const t=((e,t)=>{const a=e;return a/t<196?Math.floor((a-24)/196):t})(e.parentElement.offsetWidth,o);c({columnCount:t})}),[o]);(0,ja.y)({refOrElement:r,observeOnly:"width",onResize:()=>{l()}}),(0,n.useLayoutEffect)((()=>{l()}),[l]);const d={"--column-count":`${i.columnCount}`,"--responsive-column-count":""+(i.columnCount-1)};return(0,oe.jsx)("div",{ref:r,className:ra()(ya,a),style:d,children:s(i)})})));Na.displayName="GridContainer";const _a="J16VxLN1EwiAF59N0j9C",Da="_1F6U2s5XM0jZxxOSpm4f",ba="Nafv5vKVkay8bxmKRw05",wa=n.memo((function({title:e,children:t,seeAllUri:a,className:s="",testId:o="component",seeAllLabel:r,onClickShelfTitle:i,onClickShelfSeeAll:c,elementRef:l}){const d=(0,n.useCallback)((({columnCount:e})=>{if(!Array.isArray(t))return(0,oe.jsx)(oe.Fragment,{});const a=n.Children.toArray(t);return(0,oe.jsx)(oe.Fragment,{children:a.filter(((t,a)=>a<e))})}),[t]);return Array.isArray(t)&&0===t.length?null:(0,oe.jsxs)("section",{ref:l,className:ra()(s,_a),"data-testid":`${o}-shelf`,"aria-label":e,children:[(0,oe.jsx)("div",{className:Da,children:(0,oe.jsx)(fa.r,{title:e,seeAllUri:a,seeAllLabel:r,onClickTitle:i,onClickSeeAll:c})}),(0,oe.jsx)(Na,{className:ra()(ba),render:d,numberOfElements:n.Children.count(t)})]})}));wa.displayName="BaseShelf";const Ca=e=>(0,oe.jsx)(va.L,{onError:e=>{(0,xa.vK)(e,"Shelf")},children:(0,oe.jsx)(wa,{...e})});const ka=e=>{const{spec:t}=(0,pa.f)($t.u,{}),a=(0,n.useMemo)((()=>t.concertsShelfContainerFactory({position:e.position})),[t,e.position]),s=(0,_.Wi)(a);return(0,oe.jsx)("div",{"data-testid":"family-duo-concerts-shelf",ref:s,children:(0,oe.jsxs)(Ca,{title:"family"===e.shelfData.planType?v.ag.get("web-player.family-duo-concerts-shelf.shelf-title-family"):v.ag.get("web-player.family-duo-concerts-shelf.shelf-title-duo"),children:["family"===e.shelfData.planType?(0,oe.jsx)(ua,{spec:a}):(0,oe.jsx)(ha,{spec:a}),e.shelfData.concerts.map(((n,s)=>function(e,t,a,n,s){const{concert:o,members:r}=e;return 1===o.concerts.length?(0,oe.jsx)(_.Nh,{spec:n,children:(0,oe.jsx)(na,{concert:o.concerts[0].concert,followers:r,spec:a,position:s},`concert-card-${o.concerts[0].concert.id}`)}):(0,oe.jsx)(_.Nh,{spec:n,children:(0,oe.jsx)(sa,{event:o,onClick:t,followers:r,spec:a,position:s},`concert-grouped-card-${o.location}-${o.artists.join()}`)})}(n,e.onOpenGroupedEvent,a,t,s)))]})})},Ia=(0,n.memo)((e=>{const{isLoading:t,events:a,locationName:n,spec:s,layout:o,onOpenGroupedEvent:r,familyDuoShelfData:i}=e;if(t)return(0,oe.jsx)(E.h,{hasError:!1,errorMessage:""});if(0===a.length)return(0,oe.jsx)(F.u,{title:v.ag.get("concerts.error.no_concerts_found_title"),message:v.ag.get("concerts.error.no_concerts_found_message",n),renderInline:!0});const c=(e=>{const t={popular:[],recommended:[],online:[]};return e.forEach((e=>{switch(e.source){case"recommendation":t.recommended.push(e);break;case"popular":t.popular.push(e);break;case"online":t.online.push(e)}})),t})(a);return(0,oe.jsxs)(oe.Fragment,{children:[i&&(0,oe.jsx)(ka,{shelfData:i,onOpenGroupedEvent:r,position:0}),(0,oe.jsx)(Pt,{title:v.ag.get("concerts_upcoming_virtual_events"),identifier:"online",position:i?1:0,events:c.online,onOpenGroupedEvent:r,feedSpec:s,layout:o}),(0,oe.jsx)(Pt,{title:v.ag.get("concerts_recommended_for_you"),identifier:"recommended",position:i?2:1,events:c.recommended,onOpenGroupedEvent:r,feedSpec:s,layout:o}),(0,oe.jsx)(Pt,{title:v.ag.get("concerts_popular_near_you"),identifier:"popular",position:i?3:2,events:c.popular,onOpenGroupedEvent:r,feedSpec:s,layout:o})]})}));var Sa=a(87005);const Fa=(0,n.memo)((e=>{const{geonameId:t,spec:a,layout:s}=e,r=(0,o.s0)(),[i,c]=(0,n.useState)(),l=(0,_e.o)(),d=(0,n.useMemo)((()=>a.headerFactory()),[a]),{data:m,isLoading:g}=(e=>{const t=(0,le.useQueryClient)();return(0,le.useQuery)(["concerts",e],ue,{staleTime:fe,keepPreviousData:!0,onSuccess(a){if(e.geonameId||!a.userLocationGeonameId)return;const n=parseInt(a.userLocationGeonameId,10),s=["concerts",{...e,geonameId:n}];t.setQueryData(s,(()=>a))}})})({geonameId:t}),u=m?.userLocation||v.ag.get("concerts.default_location");((e={})=>{(0,le.useQuery)(["family-duo-concert-recommendations-aa-test",e],Sa.P,{enabled:(0,h.W6)(De.hjm)})})({geonameId:e.geonameId});const{data:p,isFetched:f,isLoading:x}=((e={})=>(0,le.useQuery)(["family-duo-concert-recommendations",e],Sa.P,{enabled:(0,h.W6)(De.YCf),retry:!1}))({geonameId:e.geonameId}),j=p&&f,y=(p?.concerts??[]).length>0;return(0,oe.jsxs)("div",{children:[(0,oe.jsx)(S.$,{children:`${v.ag.get("concerts_shows_in")} ${u}`}),(0,oe.jsx)("div",{className:Ge,"data-testid":"location-selector",children:(0,oe.jsx)(Ne.Z,{handleLocationChange:e=>{l({type:"click",intent:"change-live-events-location"}),e?.geonameId&&r((0,G.yI)(e.geonameId,e.location))},locationStr:u,headerSpec:d})}),(0,oe.jsx)(Ia,{isLoading:g||x,familyDuoShelfData:j&&y?p:void 0,events:m?.events||[],locationName:u,spec:a,onOpenGroupedEvent:e=>{c(e);const t=e.concerts[0]?.concert.artistUris[0];l({type:"click",intent:"open-grouped-live-event",targetUri:t})},layout:s}),(0,oe.jsx)(ie,{event:i,locationName:u,feedSpec:a,onClose:()=>c(void 0)}),(0,oe.jsx)(w.D,{variant:"finale",semanticColor:"textSubdued",children:v.ag.get("live_events.disclaimer")}),m&&m.userLocationGeonameId&&(0,oe.jsx)(Qe,{geonameId:m.userLocationGeonameId,locationName:u})]})})),Ea=(0,n.memo)((e=>{const{spec:t,layout:a}=e,n=(0,le.useQuery)("savedConcerts",ge,{keepPreviousData:!1});return(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(S.$,{children:`${v.ag.get("live_events.label")}`}),n.data?.events.length?(0,oe.jsx)(oe.Fragment,{children:(0,oe.jsx)(Pt,{title:v.ag.get("concerts_upcoming"),identifier:"saved",position:0,events:n.data?.events,feedSpec:t,onOpenGroupedEvent:()=>{},layout:a})}):(0,oe.jsxs)("div",{className:Le,children:[(0,oe.jsx)(w.D,{as:"h2",variant:"canon",semanticColor:"textBase",className:Me,children:v.ag.get("concerts_interested_in_live_events")}),(0,oe.jsx)(w.D,{as:"p",className:Pe,children:v.ag.get("concerts_no_events_description")}),(0,oe.jsx)(B.default,{to:"/concerts",className:Oe,children:(0,oe.jsx)(C.P,{as:"span",className:Ue,children:v.ag.get("concerts_browse_more_events")})})]}),(0,oe.jsx)(w.D,{variant:"finale",semanticColor:"textSubdued",children:v.ag.get("live_events.disclaimer")})]})})),La=(0,n.memo)((e=>{const{spec:t,isLoading:a,data:n,onOpenGroupedEvent:s,layout:o}=e;if(a)return(0,oe.jsx)(E.h,{hasError:!1,errorMessage:""});if(!n||0===n.events.length)return(0,oe.jsxs)("div",{className:Le,children:[(0,oe.jsx)(w.D,{as:"h2",variant:"canon",semanticColor:"textBase",className:Me,children:v.ag.get("concerts.no_spotify_results_title")}),(0,oe.jsx)(w.D,{as:"p",className:Pe,children:v.ag.get("concerts.no_spotify_results_description")})]});const r=(e=>{const t={near:[],other:[]};return e.forEach((e=>{switch(e.source){case"near_first_party":t.near.push(e);break;case"other_first_party":t.other.push(e)}})),t})(n.events);return(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(Pt,{title:v.ag.get("concerts.header.near"),identifier:"spotify_near",position:0,events:r.near,feedSpec:t,onOpenGroupedEvent:s,layout:o}),(0,oe.jsx)(Pt,{title:v.ag.get("concerts.header.other"),identifier:"spotify_other",position:1,events:r.other,feedSpec:t,onOpenGroupedEvent:s,layout:o})]})})),Oa=(0,n.memo)((e=>{const{geonameId:t,spec:a,layout:s}=e,i=(0,o.s0)(),[c]=(0,r.lr)(),l=(0,_e.o)(),{data:d,isLoading:m}=(e=>(0,le.useQuery)(["concerts","spotify",{geonameId:e}],ve,{staleTime:fe,keepPreviousData:!0}))(t),[g,u]=(0,n.useState)(),h=(0,n.useMemo)((()=>a.headerFactory()),[a]),p=d?.userLocation||v.ag.get("concerts.default_location");return(0,oe.jsxs)("div",{children:[(0,oe.jsx)(S.$,{children:`${v.ag.get("live_events.label")}`}),(0,oe.jsx)("div",{className:Ge,"data-testid":"location-selector",children:(0,oe.jsx)(Ne.Z,{handleLocationChange:e=>{l({type:"click",intent:"change-live-events-location"}),e?.geonameId&&i({pathname:(0,G.yI)(e.geonameId,e.location),search:`?${c}`})},locationStr:p,headerSpec:h})}),(0,oe.jsx)(La,{spec:a,data:d,isLoading:m,onOpenGroupedEvent:e=>{u(e);const t=e.concerts[0]?.concert.artistUris[0];l({type:"click",intent:"open-grouped-live-event",targetUri:t})},layout:s}),(0,oe.jsx)(ie,{event:g,locationName:p,feedSpec:a,onClose:()=>u(void 0)}),(0,oe.jsx)(w.D,{variant:"finale",semanticColor:"textSubdued",children:v.ag.get("live_events.disclaimer")}),d&&d.userLocationGeonameId&&(0,oe.jsx)(Qe,{geonameId:d.userLocationGeonameId,locationName:p})]})})),Ua=i.vI0,Ma={url:"https://tickets.spotifycdn.com/partner-assets/Hub%20header%20image/Desktop%20header%20IMG.png",width:2736,height:720},Pa=()=>{const{isAnonymous:e}=(0,s.v9)(N.Gg),t=(0,o.TH)(),a=t.pathname+t.search,i=(0,_.$P)(),b=(0,h.W6)(D.tp),w=(0,h.W6)(D.J_),C=(0,h.W6)(D.kK),[k,I]=(0,n.useState)(C?"list":"grid"),{spec:S}=(0,_.fU)(p.y,{}),F=ye({isAnonymous:e,isInterestedEnabled:b,isSoldBySpotifyEnabled:w}),E=(0,n.useMemo)((()=>S.headerFactory().liveEventsNavbarFactory({uri:a,reason:F.type})),[S,F,a]),L=(0,_.Wi)(E),O=e=>{const a=`${t.pathname}?filter=${e}`,n=S.headerFactory().liveEventsNavbarFactory({uri:a,reason:e}).hitUiNavigate({destination:a});i.logInteraction(n)},U=()=>{const e=S.headerFactory().layoutToggleFactory().hitToggleState({stateBeforeToggle:k,stateAfterToggle:"grid"===k?"list":"grid"});i.logInteraction(e),I("grid"===k?"list":"grid")};return(0,oe.jsxs)("section",{className:we,children:[(0,oe.jsxs)(x.gF,{size:x.fR.SMALL,backgroundColor:Ua,backgroundImages:[Ma],children:[(0,oe.jsx)(x.sP,{children:(0,oe.jsx)(x.xd,{children:v.ag.get("live_events.label")})}),(0,oe.jsx)(j.W,{children:(0,oe.jsx)(y.i,{text:v.ag.get("live_events.label")})})]}),(0,oe.jsxs)("div",{className:Ce,children:[(0,oe.jsx)(f.I,{backgroundColor:Ua}),(0,oe.jsxs)("div",{className:Fe,ref:L,children:[(0,oe.jsx)(c.l,{list:(0,oe.jsx)("nav",{"aria-label":"live events navbar",children:(0,oe.jsxs)(l.F,{children:[(0,oe.jsx)(d.c,{id:"for_you_link",label:v.ag.get("live_events.for_you_tab"),active:"foryou"===F.type,className:Ee,component:r.rU,onClick:()=>O("foryou"),sentenceCase:!0,to:{search:"filter=foryou"}},"foryou"),(0,oe.jsx)(d.c,{id:"concerts_all_link",label:v.ag.get("live_events.all_events_tab"),active:"all"===F.type,className:Ee,component:r.rU,onClick:()=>O("all"),sentenceCase:!0,to:{search:"filter=all"}},"all"),w&&(0,oe.jsx)(d.c,{id:"concerts_spotify_link",label:v.ag.get("live_events.spotify_tab"),active:"spotify"===F.type,className:Ee,component:r.rU,onClick:()=>O("spotify"),sentenceCase:!0,to:{search:"filter=spotify"}},"spotify"),!e&&b&&(0,oe.jsx)(d.c,{id:"concerts_interested_link",label:v.ag.get("concerts_interested"),active:"saved"===F.type,className:Ee,component:r.rU,onClick:()=>O("saved"),sentenceCase:!0,to:{search:"filter=saved"}},"saved")]})})}),C&&"grid"===k&&(0,oe.jsx)(m.o,{"aria-label":v.ag.get("concerts.feed_list_layout"),iconOnly:g.d,className:Se,onClick:U,size:"small"}),C&&"list"===k&&(0,oe.jsx)(m.o,{"aria-label":v.ag.get("concerts.feed_grid_layout"),iconOnly:u.z,className:Se,onClick:U,size:"small"})]}),(0,oe.jsxs)("div",{className:ke,children:[e&&"foryou"===F.type&&(0,oe.jsx)(At,{geonameId:F.geonameId,spec:S,layout:k}),!e&&"foryou"===F.type&&(0,oe.jsx)(Fa,{geonameId:F.geonameId,spec:S,layout:k}),"all"===F.type&&(0,oe.jsx)(Lt,{geonameId:F.geonameId,spec:S,layout:k}),"spotify"===F.type&&(0,oe.jsx)(Oa,{geonameId:F.geonameId,spec:S,layout:k}),"saved"===F.type&&(0,oe.jsx)(Ea,{spec:S,layout:k})]})]})]})}},87005:(e,t,a)=>{a.d(t,{g:()=>r,P:()=>o});var n=a(20620),s=a(35895);const o=async e=>{const[t,{geonameId:a}]=e.queryKey,o=await((e,t)=>e.build().withMethod("GET").withHost(s.gH).withPath("/concerts/").withEndpointIdentifier("/cooper/concerts").withQueryParameters({...t&&{geonameId:t}}).withoutMarket().send())(n.b.getInstance(),a);return o.body},r=async e=>{const[t,{artists:a}]=e.queryKey,o=await((e,t)=>e.build().withMethod("POST").withHost(s.gH).withPath("/followers/").withEndpointIdentifier("/cooper/followers").withHeaders([{key:"content-type",value:"application/json"},{key:"accept",value:"application/json"}]).withBody(JSON.stringify({artists:t})).withoutMarket().send())(n.b.getInstance(),a);return o.body}},53201:(e,t,a)=>{a.d(t,{D:()=>d});var n=a(59496),s=a(57115);const o="g4AhdK8faqTe7v8VqC3x";var r=a(4637);const i=(0,n.memo)((({alt:e})=>(0,r.jsxs)("svg",{height:8,width:8,"aria-hidden":"true",viewBox:"-8 -8 32 32",className:o,children:[(0,r.jsx)("title",{children:e}),(0,r.jsx)("path",{d:"M6.233.371a4.388 4.388 0 0 1 5.002 1.052c.421.459.713.992.904 1.554.143.421.263 1.173.22 1.894-.078 1.322-.638 2.408-1.399 3.316l-.127.152a.75.75 0 0 0 .201 1.13l2.209 1.275a4.75 4.75 0 0 1 2.375 4.114V16H.382v-1.143a4.75 4.75 0 0 1 2.375-4.113l2.209-1.275a.75.75 0 0 0 .201-1.13l-.126-.152c-.761-.908-1.322-1.994-1.4-3.316-.043-.721.077-1.473.22-1.894a4.346 4.346 0 0 1 .904-1.554c.411-.448.91-.807 1.468-1.052zM8 1.5a2.888 2.888 0 0 0-2.13.937 2.85 2.85 0 0 0-.588 1.022c-.077.226-.175.783-.143 1.323.054.921.44 1.712 1.051 2.442l.002.001.127.153a2.25 2.25 0 0 1-.603 3.39l-2.209 1.275A3.25 3.25 0 0 0 1.902 14.5h12.196a3.25 3.25 0 0 0-1.605-2.457l-2.209-1.275a2.25 2.25 0 0 1-.603-3.39l.127-.153.002-.001c.612-.73.997-1.52 1.052-2.442.032-.54-.067-1.097-.144-1.323a2.85 2.85 0 0 0-.588-1.022A2.888 2.888 0 0 0 8 1.5z"})]}))),c="WCQhjx2ZwtN1mwka_4wj",l=e=>{const t=(0,s.$P)(),a=`spotify:user:${e.follower.username}`;return(0,n.useEffect)((()=>{t.logImpression(e.spec.planMemberFactory({identifier:e.follower.memberId,uri:a}).impression())})),e.follower.profileImageUrl?(0,r.jsx)("img",{src:e.follower.profileImageUrl,alt:e.follower.displayName??e.follower.username},`follower-${e.follower.displayName??e.follower.username}`):(0,r.jsx)(i,{alt:e.follower.displayName},`follower-${e.follower.displayName}`)},d=(0,n.memo)((e=>(0,r.jsx)("div",{className:c,children:e.followers.map(((t,a)=>(0,r.jsx)(l,{follower:t,spec:e.spec},`follower-${a}`)))})))},60177:(e,t,a)=>{a.d(t,{FV:()=>r,a4:()=>i,ij:()=>o});var n=a(55740),s=a(4637);const o=e=>{if((e=>!!e.title&&(e.festival||!e.artists.length))(e))return e.title;const t=(e=>e.artists.map((e=>e.name)))(e);return 1===t.length?n.ag.get("concert.header.upcoming_concert_title_1",...t):2===t.length?n.ag.get("concert.header.upcoming_concert_title_2",...t):3===t.length?n.ag.get("concert.header.upcoming_concert_title_3",...t):4===t.length?n.ag.get("concert.header.upcoming_concert_title_4",...t):t.length>4?n.ag.get("concert.header.upcoming_concert_title_more",...t):""},r=e=>1===e.length?n.ag.get("web-player.family-duo-concerts-shelf.X-follows",e[0].displayName??e[0].username):n.ag.get("web-player.family-duo-concerts-shelf.X-of-your-family-follow",e.length),i=(e,t)=>{const a=e.map(((e,a)=>{const n=`spotify:user:${e.username}`;return(0,s.jsx)("a",{onClick:()=>t(n,e.memberId),href:n,children:e.displayName??e.username},`follower-name-${a}`)}));return 1===e.length?n.ag.get("web-player.family-duo-concerts-shelf.X-follows",a[0]):2===e.length?n.ag.get("web-player.family-duo-concerts-shelf.2-follow",...a):3===e.length?n.ag.get("web-player.family-duo-concerts-shelf.3-follow",...a):4===e.length?n.ag.get("web-player.family-duo-concerts-shelf.4-follow",...a):n.ag.get("web-player.family-duo-concerts-shelf.5-follow",...a)}}}]);
//# sourceMappingURL=xpui-routes-collection-concerts.js.map