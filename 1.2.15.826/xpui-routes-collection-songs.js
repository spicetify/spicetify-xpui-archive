"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[7553],{35842:(e,t,a)=>{a.r(t),a.d(t,{default:()=>J});var l=a(59496),r=a(99766),n=a(80519),o=a(79279),s=a(97653),i=a(85355),c=a(76163),u=a(55740),d=a(57579),g=a(94942),m=a(42673),f=a(72962),h=a(17286),y=a(6123),p=a(45243),x=a(9864),k=a(99703),j=a(53018),b=a(93321),D=a(17354),F=a(19158),C=a(67033),E=a(71063),I=a(87754),S=a(12636),T=a(55207),w=a(57115),P=a(61335),v=a(76218),L=a(52535),A=a(99668),R=a(4637);const U=l.memo((({tracklistDomRef:e})=>{const{spec:t,logger:a}=(0,w.fU)(v.createDesktopSearchBarEventFactory,{}),r=(0,l.useCallback)((()=>{a.logInteraction(t.filterFieldFactory().keyStrokeFilter())}),[a,t]),n=(0,l.useCallback)((()=>{a.logInteraction(t.filterFieldFactory().hitClearFilter())}),[a,t]),o=(0,l.useCallback)((()=>{a.logInteraction(t.sortButtonFactory().hitSort())}),[a,t]);return(0,R.jsxs)("div",{className:p.Z.searchBoxContainer,children:[(0,R.jsx)(l.Suspense,{fallback:null,children:(0,R.jsx)(L.K,{placeholder:u.ag.get("playlist.search_in_playlist"),clearOnEscapeInElementRef:e,onFilter:r,onClear:n})}),(0,R.jsx)(A.l,{columns:j.P0,onSort:o})]})}));var N=a(80381),O=a(2651),_=a(98474),B=a(44893),Q=a(24569),M=a(53753),z=a(9102),G=a(72102),K=a(11433),H=a(28084),V=a(16216),W=a(85069);const $=l.lazy((()=>Promise.all([a.e(1814),a.e(7680),a.e(682)]).then(a.bind(a,37680)))),q=[k.QD.INDEX,k.QD.TITLE,k.QD.ALBUM,k.QD.ADDED_AT,k.QD.DURATION],Z="your_library",X=({data:e,canFilter:t,canSort:a})=>{const{uri:r,name:c,totalLength:D}=e.metadata,I=(0,l.useRef)(null),v=D>0,L=D>0,A=(0,C.Y5)("#5038a0"),{filter:B}=(0,l.useContext)(x.fo),{sortState:z,setSortState:G}=(0,l.useContext)(j.Gb),{spec:K,logger:H}=(0,w.fU)(i.createDesktopLikedSongsEventFactory,{data:{uri:r}}),V=l.useMemo((()=>K.headerFactory()),[K]),W=l.useMemo((()=>K.tracklistFactory()),[K]);(0,l.useEffect)((()=>{null===z.column&&G({column:k.QD.ADDED_AT,order:k.kn.DESC})}),[z,G]);const $=(0,s.W6)(_.eKc,{loadingValue:!1}),X=(0,n.ur)(),Y=(0,n.TH)(),J="POP"!==X?new URLSearchParams(Y.search).get("uri"):null,{isPlaying:ee,togglePlay:te,usePlayContextItem:ae,isActive:le}=(0,T.n)((0,E.I)(r,(0,P.w)(z),B),{featureIdentifier:Z,referrerIdentifier:"your_library"}),re=()=>{const e=(0,O.aK)({isPlaying:ee,isActive:le,spec:K.actionBarFactory().playButtonFactory(),logger:H,uri:r});te({loggingParams:e})},ne=(0,l.useCallback)(((e,t)=>{const a=K.actionBarFactory().downloadButtonFactory();t===S.mc.ADD?H.logInteraction(a.hitDownload({itemToDownload:r})):t===S.mc.REMOVE?H.logInteraction(a.hitRemoveDownload({itemToRemoveFromDownloads:r})):t===S.mc.NO_PERMISSION&&H.logInteraction(a.hitUiReveal())}),[H,K,r]);return(0,R.jsxs)("section",{role:"presentation",className:p.Z.playlist,"data-testid":"playlist-page",children:[(0,R.jsx)(m.$,{children:u.ag.get("playlist.page-title",c)}),(0,R.jsx)(F.s,{metadata:e.metadata,isPlaying:ee,togglePlay:re,backgroundColor:A,specLikedSongs:V}),(0,R.jsx)(d.o,{backgroundColor:A,children:(0,R.jsxs)(d.F,{children:[L?(0,R.jsx)(y.$,{onClick:re,isPlaying:ee,size:"lg",uri:r,ariaPauseLabel:u.ag.get("playlist.a11y.pause",c),ariaPlayLabel:u.ag.get("playlist.a11y.play",c)}):null,$&&(0,R.jsx)(M.K,{entityName:c,contextUri:r}),e.metadata.totalLength>0&&(0,R.jsx)(Q.v,{uri:r,renderEnabled:()=>(0,R.jsx)(b.v,{uri:r})}),(0,R.jsx)(g.o,{uri:r,canDownload:v,isFollowing:!0,onFollow:()=>{},size:g.q.md,onClick:ne}),t&&a&&(0,R.jsx)(w.Nh,{spec:K.actionBarFactory(),children:(0,R.jsx)(U,{tracklistDomRef:I})})]})}),(0,R.jsx)("div",{className:"contentSpacing",children:D>0?(0,R.jsx)(l.Suspense,{fallback:(0,R.jsx)(h.h,{hasError:!1,errorMessage:u.ag.get("error.request-collection-tracks-failure")}),children:(0,R.jsx)(w.Nh,{spec:W,children:(0,R.jsx)(N.p,{nrTracks:D,columns:q,collectionUri:r,scrollToUri:J,usePlayContextItem:ae,outerDomRef:I,spec:W,initialItems:e.contents.items})})}):(0,R.jsx)(f.u,{message:u.ag.get("collection.empty-page.songs-subtitle"),title:u.ag.get("collection.empty-page.songs-title"),linkTo:"/search",linkTitle:u.ag.get("collection.empty-page.songs-cta"),renderInline:!0,children:(0,R.jsx)(o.F,{"aria-hidden":"true"})})})]})},Y=l.memo((function({user:e,uri:t}){const{filter:a}=(0,l.useContext)(x.fo),{sortState:n}=(0,l.useContext)(j.Gb),o=function(e,t,a){const r=(0,l.useContext)(I.H),n=(0,z.useQueryClient)(),o=(0,G.jP)((()=>["useLikedSongs",e,a]),[e,a]),{data:s}=(0,z.useQuery)(o(),(()=>r.getTracks(a)),{cacheTime:18e5,keepPreviousData:!0,refetchOnWindowFocus:!1}),i=(0,l.useCallback)((()=>{n.invalidateQueries(o())}),[n,o]);(0,H.b)(K.EW.UPDATE,i);const c=(0,W.I2)(t.id);return c&&s?{metadata:{uri:e,name:c.name,images:c.images,totalLength:s?.totalLength,unfilteredTotalLength:s.unfilteredTotalLength,owner:(0,V.V)(t)},contents:s}:null}(t,e,{offset:0,limit:25,sort:(0,P.w)(n),filter:a}),s=(0,l.useContext)(I.H).getCapabilities(),i=(0,r.v9)(B.n5),{isEnhanced:c}=(0,D.U)(`spotify:user:${i}:collection`);if(o){const e=(0,R.jsx)(X,{data:o,canFilter:s.canFilterTracksAndEpisodes&&o.metadata.unfilteredTotalLength>0,canSort:s.canSortTracksAndEpisodes&&o.metadata.unfilteredTotalLength>0});return(0,R.jsx)(Q.v,{uri:o.metadata.uri,renderEnabled:()=>c?(0,R.jsx)(l.Suspense,{fallback:null,children:(0,R.jsx)(j.kz,{uri:o.metadata.uri,children:(0,R.jsx)($,{metadata:{...o.metadata,collaborators:{count:1,items:[{isOwner:!0,user:o.metadata.owner,tracksAdded:o.metadata.totalLength}]}},capabilities:s,featureIdentifier:Z})})}):e,renderDisabled:()=>e})}return(0,R.jsx)(h.h,{hasError:!1,errorMessage:u.ag.get("error.not_found.title.playlist"),loadOffline:s.canModifyOffline})})),J=()=>{const{user:e}=(0,r.v9)(B.Gg);if(null===e)return null;const t=(0,c.wG)(e.id).toURI();return(0,R.jsx)(j.kz,{uri:t,children:(0,R.jsx)(x.hz,{uri:t,children:(0,R.jsx)(Y,{uri:t,user:e})})})}},19158:(e,t,a)=>{a.d(t,{s:()=>l.s});var l=a(68381)}}]);
//# sourceMappingURL=xpui-routes-collection-songs.js.map