"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[2355],{96932:(e,t,a)=>{a.r(t),a.d(t,{ThisIsTourCard:()=>u,default:()=>u,useThisisPlaylistExtensionQuery:()=>x});var s=a(43029),i=a(11520),r=a(37298),n=a(35195),l=a(39974),o=a(68256),c=a(69223),d=a(13274);const u=e=>{const{artistImageUrl:t,artistName:a,artistConcertsUri:u,spec:m}=e,p=(0,l.s)(),h=(0,o.t)(m.concertsCardFactory({identifier:a,uri:u,reason:"This is On Tour phase 1 MVP"}));return t&&a&&u?(0,d.jsxs)("section",{ref:h,className:"contentSpacing",children:[(0,d.jsx)(s.E,{as:"h1",variant:"bodyMediumBold",semanticColor:"textBase",children:r.R.get("concerts")}),(0,d.jsx)("div",{className:c.A.cards,children:(0,d.jsxs)("div",{className:c.A.tourCard,"data-testid":"on-tour-card",children:[(0,d.jsx)("img",{className:c.A.cardImage,src:t,alt:""}),(0,d.jsxs)("div",{className:c.A.cardContent,children:[(0,d.jsx)(s.E,{as:"p",variant:"bodySmall",semanticColor:"textSubdued",className:c.A.subtitle,children:r.R.get("concerts_on_tour")}),(0,d.jsx)(s.E,{as:"h1",variant:"bodyMediumBold",className:c.A.title,semanticColor:"textBase",children:a}),(0,d.jsx)(n.default,{to:u,className:c.A.cardLink,children:(0,d.jsx)(i.n,{as:"span",size:"small",onClick:()=>{const e=m.concertsCardFactory({identifier:a,uri:u,reason:"This is On Tour phase 1 MVP"}).hitUiNavigate({destination:u});p.logInteraction(e)},className:c.A.cardButton,children:r.R.get("concerts_see_all_events")})})]})]})})]}):null};var m=a(82871),p=a(17094);const h=new m.l("thisisPlaylistExtension","query","c3c3145aca9849ce8f4d742f9d4dc3be4d945717ce66347d1b3710b8a06749b6",null),x=(e,t)=>(0,p.I)(h,e,t)},91681:(e,t,a)=>{a.r(t),a.d(t,{default:()=>dr});a(62355),a(48117),a(83367),a(1137),a(1342),a(87992),a(20081),a(49480),a(24055),a(19292),a(15702);var s=a(79474),i=a(85980),r=a(61343),n=a(43029),l=a(56260),o=a(49704),c=a(48762),d=a(37298),u=a(563),m=(a(68607),a(33856)),p=a(13274);const h=(e,t,a)=>({event:e,app_startup_id:null,ad_playback_id:null,ad_id:String(t),lineitem_id:String(a),creative_id:String(t),ad_format:"sponsored playlist",slot:null,in_focus:null,username:null,jsondata:JSON.stringify({platform:"WebPlayer",revision:"1.0.0"})}),x=({clickTracking:e,clickThrough:t,thirdPartyImpression:a,impression:r,logoUrl:l,advertiserName:o,creativeId:c,lineItemId:u})=>{const x=(0,i.wA)(),[g,y]=(0,s.useState)(!1);return(0,s.useEffect)((()=>(x((0,m.tb)()),x((0,m.i2)(h("event_viewed",c,u))),()=>{x((0,m.zV)())})),[x,c,u]),(0,p.jsxs)("div",{className:"sponsor-container",children:[(0,p.jsx)(n.E,{variant:"marginal",className:"sponsor-text","data-ta-id":"sponsor-text",children:d.R.get("playlist.presented_by",o)}),(0,p.jsxs)("div",{className:"sponsor-logo",children:[(0,p.jsx)("a",{draggable:!1,className:"sponsor-logo__link",target:"_blank",href:t,onClick:()=>{x((0,m.i2)(h("event_clicked",c,u))),y(!0)},children:(0,p.jsx)("img",{draggable:!1,className:"sponsor-logo__image",src:l,alt:o,"data-ta-id":"sponsor-logo"})}),(0,p.jsx)("img",{className:"sponsor-logo__imp-pixel",src:r,alt:""}),a&&(0,p.jsx)("img",{className:"sponsor-logo__3p-imp-pixel",src:a,alt:""}),g&&(0,p.jsx)("img",{className:"sponsor-logo__click-img-pixel",src:e,alt:""})]})]})},g=({playlistUri:e})=>{const t=(0,i.wA)(),a=(0,i.d4)((t=>t.ads.sponsoredPlaylist.previewAd||t.ads.sponsoredPlaylist.sponsoredPlaylist.get(e)));return(0,s.useEffect)((()=>{a||t((0,m.uP)(e))}),[t,e,a]),a?(0,p.jsx)("div",{children:(0,p.jsx)(x,{...a})}):null},y=({playlistUri:e})=>{const t=(0,i.wA)(),a=(0,i.d4)((e=>e.ads.sponsoredPlaylist.sponsoredPlaylist.get("allSponsorships"))),r=(0,i.d4)((e=>e.ads.sponsoredPlaylist.previewAd));(0,s.useEffect)((()=>{a||t((0,m.uU)())}),[t,a]);const n=r||a&&((e,t)=>{const a=Date.now()/1e3,s=e.split(":"),i=s[s.length-1];return t.some((({playlistId:e,endTime:t,startTime:s})=>e===i&&a>=s&&a<(t||a+1)))})(e,a);return n?(0,p.jsx)(g,{playlistUri:e}):null};var b=a(71468),f=a(96590),C=a(15766),j=a(12793),R=a(23790);const v="hOOwEKqNuXrNvOCB1SgZ",A="csEdkIN9z2LjJIuZraqz",k=({uri:e})=>{const[t,a]=(0,R.A)(e),i=(0,r.Zp)(),l=(0,s.useCallback)((()=>{a(!1),i("/",{replace:!0})}),[i,a]);return(0,p.jsxs)("div",{className:v,children:[(0,p.jsx)(C.b,{size:"xxlarge"}),(0,p.jsxs)("div",{className:A,children:[(0,p.jsx)(n.E,{as:"p",variant:"titleSmall",children:d.R.get("forbidden-page.title")}),(0,p.jsx)(n.E,{as:"p",variant:"bodySmall",children:d.R.get("forbidden-page.description")})]}),t&&(0,p.jsx)(j.$,{colorSet:"invertedLight",onClick:l,children:d.R.get("remove_from_your_library")})]})};var T=a(12441),S=a(21919),I=a(72861),E=a(57443),N=a(87349),_=a(9123),L=a(20115),w=a(96932),P=a(35599),U=a(59866),M=a(56707),O=a(91530),B=a(42551),D=a(23e3);const F=e=>e.seoExperiment,z=(0,B.Mz)(F,(e=>e?.uri)),H=((0,B.Mz)(F,(e=>e?.[D.c.TRACK])),(0,B.Mz)(F,(e=>e?.[D.c.ALBUM])),(0,B.Mz)(F,(e=>({...e?.[D.c.PLAYLISTV2],...e?.[D.c.PLAYLIST]}))));var V=a(65948),$=a(2346),K=a(70915),q=a(47458),Q=a(53600),W=a(3106),G=a(17737),Y=a(48885),J=a(73534),X=a(23760),Z=a(5838);const ee=({context:e,shouldFire:t})=>{const a=(0,W.V)(),r=(0,i.d4)(Z.F6),n=(0,i.d4)(X.JJ),o=(0,l.NC)(J.k4p),c=(0,G.vh)(),d=(0,s.useCallback)((()=>{const t={category:"rpp_exposures",action:"playlist_page_visit",variant:o,label:"dwp",os:(0,Y.f)(),context:e,country:r?n:"",sp_t:(0,Q.v8)("sp_t")};a?c.send((0,q.r)(t)):c.send((0,K._)(t))}),[o,e,r,n,a,c]);(0,s.useEffect)((()=>{t&&d()}),[d,t])};var te=a(4122),ae=a(15672),se=a(49245),ie=a(5549),re=a(1821),ne=a(89675),le=a(17094),oe=a(13031),ce=a(37669),de=a(78051),ue=a(33486),me=a(31614);const pe={[me.n.TITLE]:["title","original_index"],[me.n.ADDED_BY]:["added_by","original_index"],[me.n.ADDED_AT]:["added_at","album_title","album_artist_name","album_disc_number","album_track_number","original_index"],[me.n.ARTIST]:["artist_name","album_title","album_disc_number","album_track_number","original_index"],[me.n.ALBUM]:["album_title","album_disc_number","album_track_number","original_index"],[me.n.DURATION]:["duration","album_title","album_disc_number","album_track_number","original_index"]};function he(e,t){void 0!==t&&(e.metadata||={},e.metadata[de.Wi.SORTING_CRITERIA]=function(e){const{field:t,order:a}=e,s=pe[t];if(void 0===s||a!==ue.x.ASC&&a!==ue.x.DESC)throw new Error("Invalid sort params!");return s.map(((e,t)=>a?`${e} ${t>0?ue.x.ASC:a}`:e)).join(",")}(t))}var xe=a(36850);const ge={[xe.Hh.TEXT]:"text"},ye={[xe.tl.CONTAINS]:"=^#"};function be(e,t){void 0!==t?.value&&(e.metadata||={},e.metadata[de.Wi.FILTERING_PREDICATE]=function(e){const{field:t,operator:a,value:s}=e;if(t!==xe.Hh.TEXT||a!==xe.tl.CONTAINS)throw new Error("Invalid filter params!");return`${ge[t]} ${ye[a]} "${s}"`}(t))}var fe=a(73496),Ce=a(15463),je=a(80427),Re=a(15486),ve=a(37112),Ae=a(92395);a(63512);let ke=function(e){return e.RPP="rich-playlist-pages-2",e.TEST="test",e}({}),Te=function(e){return e.CONTROL="0",e.VARIANT="1",e}({});var Se=a(50925),Ie=a(26972);const Ee=[],Ne=(e,t)=>{const a=[];let s=e,i=t;for(;s>0;){const t=Math.ceil(s/i);a.push({first:e-s,nrItems:t}),s-=t,i--}return a},_e=e=>{const{itemsInNode:t,renderItem:a,renderPlaceholder:s,estimatedHeight:i,scrollNodeRef:r,nrRowsOverscan:n=10,nrInitialInView:l=0,firstIndex:o,heights:c,fanOut:d=2}=e,{ref:u,inView:m,entry:h}=(0,Ie.Wx)({root:r.current,rootMargin:n*i+"px 0px",initialInView:o<l}),x=`${o}-${t}`;c[x]??=i*t,h?.boundingClientRect?.height&&(c[x]=h.boundingClientRect.height);const g=c[x];return 0===t?null:m?1===t?(0,p.jsx)("div",{ref:u,role:"presentation",children:a(o,g)}):(0,p.jsx)("div",{ref:u,role:"presentation",children:Ne(t,d).map((({first:t,nrItems:a},s)=>(0,p.jsx)(_e,{...e,itemsInNode:a,firstIndex:o+t},s)))}):(0,p.jsx)("div",{ref:u,role:"presentation",children:s(`${g}px`)})},Le=e=>{const t=(e=>{const t=Ee.find((t=>t.key===e))?.heights||{},a=(0,s.useCallback)((t=>{if(!e)return;const a=Ee.findIndex((t=>t.key===e));-1===a?Ee.push({key:e,heights:t}):(Ee[a].heights=t,Ee.push(Ee.splice(a,1)[0])),Ee.length>10&&Ee.shift()}),[e]),i=(0,s.useRef)({...t});return(0,s.useEffect)((()=>()=>{a(i.current)}),[a]),i.current})(e.persistanceKey);return(0,p.jsx)(_e,{...e,itemsInNode:e.totalCount,firstIndex:0,heights:t,nrInitialInView:e.nrInitialInView})};var we=a(55814);function Pe(e){return e.type===D.c.TRACK}function Ue(e){return e.type===D.c.EPISODE}function Me(e){return e.type===D.c.AUDIOBOOK}var Oe=a(74322),Be=a(97500),De=a.n(Be),Fe=a(42212),ze=a(11520),He=a(38485),Ve=a(1485),$e=a(18687),Ke=a(12764),qe=a(2574),Qe=a(35195),We=a(49032),Ge=a(87762),Ye=a(10629),Je=a(58703),Xe=a(49036),Ze=a(65381),et=a(95616),tt=a(15094);var at=a(97894),st=a(39974),it=a(68692),rt=a(75206);const nt="JgxVj0lHUDTf9MS1jJpk",lt="m5NcxNs6qkNbc9Wdxed7",ot=({isExplicit:e,children:t})=>(0,p.jsxs)("div",{className:nt,children:[e&&(0,p.jsx)(rt.g,{}),(0,p.jsx)(n.E,{variant:"bodySmall",className:lt,children:t})]});var ct=a(88644),dt=a(70163),ut=a(97799);const mt="small",pt="ci11tAmTK1LnxThQkXPy",ht="_2sJPwAAp1wY1Ftke6iFe",xt="yuNzasMLs7hvemHI4d8Q",gt="abYR6tZoE7BdzThmWTb0",yt="GOcKQxqNMhGzbGiAXBig",bt="yFQjuDAhri_egM1pwn70",ft=(0,s.memo)((function(e){const{breakpoint:t,className:a,showSeparator:s,...i}=e;return(0,p.jsx)(ct.v,{className:De()(a,pt,{[bt]:s}),hoverBackgroundColor:"backgroundTintedHighlight",activeBackgroundColor:"backgroundTintedBase",layout:t===mt?"regular":"wide",hoverAnimationDuration:"0ms",horizontalGap:t===mt?"12px":"16px",paddingBlockStart:"12px",paddingBlockEnd:"12px",...i})}));var Ct=a(98903),jt=a(29303);const Rt=({description:e,children:t})=>(0,p.jsxs)("div",{className:gt,children:[e&&(0,p.jsx)(Ct.v,{lineClamp:2,as:"div",dir:"auto",children:(0,p.jsx)(jt.q,{asTextContent:!0,html:e})}),t]});var vt=a(72226);const At=({isPlaying:e,onClickPlay:t,name:a,authorName:s,isLocked:i,children:r})=>(0,p.jsxs)("div",{className:yt,children:[(0,p.jsx)("div",{className:ht,children:r}),(0,p.jsx)(vt.R,{size:"small",version:vt.H.secondary,onClick:t,isPlaying:e,ariaPlayLabel:d.R.get("tracklist.a11y.play",a,s),ariaPauseLabel:d.R.get("tracklist.a11y.pause",a,s),locked:i})]});var kt=a(4658),Tt=a(96721),St=a(38582);const It=({images:e,breakpoint:t,type:a,name:s})=>{const i=(0,St._)(),r=t===mt?Tt.Qe.SIZE_64:Tt.Qe.SIZE_112;return(0,p.jsx)(kt.b,{fadeIn:!0,images:i(e,Tt.BZ[r]),shape:kt.u.ROUNDED_CORNERS,size:r,iconSize:t===mt?"medium":"xlarge",type:a,title:s,loadingMode:"eager"})};var Et=a(36307);const Nt=({children:e})=>(0,p.jsx)(Et.d,{lineClamp:2,as:"div",dir:"auto",children:e});var _t=a(29528),Lt=a(45507),wt=a(33032),Pt=a(21268);const Ut="WdYB8aMUe06dOu4TmYik",Mt="b1X4Ya4bp35IsN6tPGZw",Ot="aCdPMQVcvScaa22utIJM",Bt=(0,s.memo)((function({book:e,contextUri:t,featureIdentifier:a,sharingInfo:i,uid:l,rating:o,isRecommendation:u=!1,canRemove:m=!1,showSeparator:h=!1,...x}){const{name:g,description:y,isLocked:b,isExplicit:f,images:C,type:j,uri:v,authorName:A,consumptionCapExplanation:k,durationMs:T,topics:S=[],signifierText:I}=e,E=(0,st.s)(),{spec:N}=(0,Re.r)($e.m,{data:{position:0,uri:v}}),{isPlaying:_,isActive:L,togglePlay:w}=(0,oe.P)({uri:v},{featureIdentifier:a}),P=(0,r.Zp)(),U=(0,c.o_)(v).toURLPath(!0),{addItems:M}=(0,ce.xt)(t),O=(0,ut.y)()===dt.E.SMALL?"small":"large",B=(e=>{const t=(0,Ze.L)(),a=(0,Je.jE)(),i=(0,s.useRef)(null),r=(0,s.useRef)(0),n=(0,et.o)((t=>t?.context.uri===e?t?.item?.uri??null:null)),[l]=(0,tt.S)(1e4,(e=>e?.item?.uri===n)),{data:o}=(0,Xe.I)({queryKey:["useShowPlayedState",e],queryFn:async()=>{const a=t.getShowPlayedState(e);return r.current=l,a},refetchOnWindowFocus:!1});return(0,s.useEffect)((()=>{i.current&&n!==i.current&&a.invalidateQueries({queryKey:["useShowPlayedState",e]}),i.current=n}),[n,a,e]),(0,s.useMemo)((()=>o&&t.capabilities.canGetShowPlayedState?{state:o.state,playPositionMilliseconds:o.playPositionMilliseconds+l-r.current}:null),[o,t,l])})(v),[D,F]=(0,R.A)(v),z=(0,Ye.T)(v),H=O===mt?"small":"medium",V=(0,s.useCallback)((()=>{E.logInteraction(N.addButtonFactory().hitAddToPlaylist({playlist:t,itemToBeAdded:v})),M([v],{after:"end"})}),[E,N,t,v,M]),$=(0,s.useCallback)((()=>{if(b&&!k)P(U);else{const e=(0,se.$I)({isPlaying:_,isActive:L,spec:N.playButtonFactory(),logger:E,uri:v});w({loggingParams:e})}}),[k,L,b,_,E,P,N,w,v,U]),K=(0,s.useCallback)((()=>{E.logInteraction(N.genreLinkFactory({uri:S[0].uri??""}).hitUiNavigate({destination:S[0].uri??""}))}),[E,N,S]),q=(0,p.jsx)(Nt,{children:g}),Q=(0,p.jsx)(Rt,{description:y,children:(0,p.jsxs)(ot,{isExplicit:!!f,children:[!0===o?.showAverage&&void 0!==o.average&&(0,p.jsxs)("span",{children:[(0,p.jsx)(Fe.j,{size:"xsmall",className:Ut}),d.R.formatNumber(o.average,{maximumFractionDigits:1})]}),S.at(0)?.title&&(0,p.jsx)(Qe.Link,{className:Mt,to:S[0].uri??"",onClick:K,children:S[0].title}),T&&(0,p.jsx)(it.j,{isPlaying:!1,fullyPlayed:B?.state===at.H7.Completed,durationMs:T,position:B?.playPositionMilliseconds})]})}),W=(0,p.jsx)(qe.p,{uri:v,uid:l,contextUri:t,includeGoToAudiobook:!0,canBeRemovedFromPlaylist:m}),G=!b&&!!!k,Y=u?null:(0,p.jsxs)(At,{isPlaying:_,onClickPlay:$,isLocked:b&&!k,name:g,authorName:A,children:[(0,p.jsx)(_t.M,{className:De()({[xt]:D}),isAdded:D,onClick:()=>{D?E.logInteraction(N.saveToLibraryButtonFactory().hitRemoveLike({itemNoLongerLiked:v})):E.logInteraction(N.saveToLibraryButtonFactory().hitLike({itemToBeLiked:v})),F(!D)},size:H,isAudiobook:!0,condensedAll:!0}),(0,p.jsx)(Lt.I,{className:De()({[xt]:(0,Ge.X)(z)}),uri:v,onClick:(e,t)=>{t===We.NV.ADD&&E.logInteraction(N.downloadButtonFactory().hitDownload({itemToDownload:v}))},size:H,canDownload:G,condensedAll:!0}),(0,p.jsx)(Pt.w,{uri:v,sharingInfo:i??null,interactionData:{intent:"share",type:"click"},size:H,onClick:()=>{E.logInteraction(N.shareButtonFactory().hitShare({entityToBeShared:v,shareId:i?.shareId??""}))},condensedAll:!0}),(0,p.jsx)(Ke.bz,{menu:W,children:(0,p.jsx)(wt.e,{label:d.R.get("more.label.context",g),size:H,onClick:()=>{E.logInteraction(N.contextMenuButtonFactory().hitUiReveal())},condensedAll:!0})})]}),J=(0,p.jsx)(It,{images:C,name:g,type:j,breakpoint:O}),X=I?(0,p.jsx)(n.E,{as:"div",variant:"bodySmall",semanticColor:"textBrightAccent",children:I}):null,Z=u?(0,p.jsx)(ze.n,{size:"small",onClick:V,children:d.R.get("playlist.extender.button.add")}):null,ee=(0,p.jsxs)(He.j,{hasTextSeparator:!0,children:[(0,p.jsxs)(p.Fragment,{children:[u&&b&&(0,p.jsx)(Ve.u,{semanticColor:"textSubdued",title:d.R.get("mwp.header.content.unavailable"),size:"xsmall",className:Ot}),d.R.get("card.tag.audiobook")]}),A]});return(0,p.jsx)(Ke.hy,{menu:W,onShow:()=>{E.logInteraction(N.secondaryHitUiReveal())},children:(0,p.jsx)(ft,{breakpoint:O,id:`book-${v}`,media:J,pretitle:X,title:q,body:Q,subtitle:ee,footer:Y,trailing:Z,onClick:()=>{E.logInteraction(N.hitUiNavigate({destination:v})),P(U)},showSeparator:h,...x})})}));var Dt=a(63044),Ft=a(51773);const zt=(0,s.createContext)({getReference:()=>null,setReference:()=>{}}),Ht=({children:e})=>{const t=(0,s.useRef)(null),a=(0,s.useCallback)((()=>t.current),[]),i=(0,s.useCallback)((e=>{t.current=e}),[]);return(0,p.jsx)(zt.Provider,{value:{getReference:a,setReference:i},children:e})};const Vt=(e,t,a)=>{const{name:r,uri:n,uid:l}=e,{sortState:o}=(0,s.useContext)(N.cL),c=o.order!==Ft.Ht.NONE,{draggable:d,onDragStart:m}=(0,U.P)({itemIds:[l],itemUris:[n],itemMimeTypes:[Dt.fl.AUDIOBOOKS],dragLabelText:r,contextUri:t}),{setReference:p,getReference:h}=(0,s.useContext)(zt),x=(0,s.useCallback)((e=>{p({uri:n,uid:l}),m(e)}),[m,p,l,n]),g=(0,i.wA)(),y=(0,s.useContext)(ce.wO),b=(0,s.useCallback)(((e,a)=>{const s=e[Dt.fl.AUDIOBOOKS];if(!s)return;const i=h();i?a===Oe.Nz.BEFORE?y.move(t,[i],{before:{uri:n,uid:l}}):y.move(t,[i],{after:{uri:n,uid:l}}):a===Oe.Nz.BEFORE?g((0,u.io)(t,s,{before:{uri:n,uid:l}})):g((0,u.io)(t,s,{after:{uri:n,uid:l}})),p(null)}),[t,g,h,y,p,l,n]),f=a&&!c?[Dt.fl.AUDIOBOOKS]:[];return{...(0,Oe.Al)({uri:n,id:l,allowedMimeTypesByDropPosition:{[Oe.Nz.BEFORE]:f,[Oe.Nz.AFTER]:f},onDrop:b}),onDragStart:x,draggable:d}},$t="bg5inM_sdkHpYWiFf7Id",Kt="DyW2LAm9YDcCkcdM0eeP",qt=()=>(0,p.jsx)("div",{className:Kt}),Qt=(0,s.memo)((function({item:e,contextUri:t,canEdit:a=!1,canRemove:s=!1,index:i}){const{className:r,dropPosition:n,draggable:l,...o}=Vt(e,t,a);return(0,p.jsxs)(Se.W,{className:r,"aria-posinset":i,reRunOnDOMUpdate:!0,children:[n===Oe.Nz.BEFORE&&(0,p.jsx)(qt,{}),(0,p.jsx)(Bt,{book:e,contextUri:t,featureIdentifier:"playlist",sharingInfo:e.sharingInfo,uid:e.uid,rating:e.rating,canRemove:s,className:r,draggable:l,showSeparator:0!==i,...o}),n===Oe.Nz.AFTER&&(0,p.jsx)(qt,{})]})}));var Wt=a(74987);const Gt=({contextUri:e,initialItems:t,nrItems:a,canEdit:i,canRemove:n,ariaLabel:l})=>{const o=(0,s.useContext)(ce.wO),c=(0,ie.v7)(),{filter:d}=(0,s.useContext)(E.gM),{sortState:u}=(0,s.useContext)(N.cL),{contentsOptions:m}=(0,Wt.$)(u,d),[,h]=(0,_.z1)(),x=(0,s.useCallback)((async(t,a)=>{const s=await o.getContents(e,{...m,offset:t,limit:a}),i=s.items.map((e=>null===e?null:Me(e)?e:null));return{...s,items:i}}),[o,m,e]),{getItem:g,nrValidItems:y,invalidateCache:b}=(0,we.E)({nrItems:a,fetch:x,limit:50,initialItems:t});(0,s.useLayoutEffect)((()=>{h(y)}),[y,h]),(0,ce.HB)(e,b);const f=(0,s.useCallback)((e=>(0,p.jsx)("div",{style:{height:e}})),[]),C=(0,s.useCallback)(((t,a)=>{const s=g(t);return s?(0,p.jsx)(Qt,{contextUri:e,item:s,canEdit:i,canRemove:n,index:t},s.uri):f(`${a}px`)}),[i,n,e,g,f]),j="POP"===(0,r.wQ)()?0:10;return(0,p.jsx)("div",{className:$t,children:(0,p.jsx)(Se.R,{firstInteractiveIsWrapper:!0,"aria-label":l,"aria-rowcount":y,"aria-colcount":6,children:(0,p.jsx)(Ht,{children:(0,p.jsx)(Le,{totalCount:y,estimatedHeight:200,renderItem:C,renderPlaceholder:f,scrollNodeRef:c,nrRowsOverscan:10,persistanceKey:e,nrInitialInView:j})})})})};var Yt=a(72890),Jt=a(77163),Xt=a(39431),Zt=a(58970),ea=a(466);const ta={column:null,order:Ft.Ht.NONE},aa=s.memo((function({ariaLabel:e,nrTracks:t,playlistUri:a,scrollToUid:i,usePlayContextItem:r,tracklistDomRef:n,sortableColumns:l,isCompactMode:o=!1}){const c=(0,s.useContext)(ce.wO),{filter:d,setFilter:u}=(0,s.useContext)(E.gM),m=(0,s.useRef)(null),h=(0,s.useCallback)((()=>{m.current&&m.current.update()}),[]);(0,Zt.H)(a,h);const{sortState:x,setSortState:g}=(0,s.useContext)(N.cL),y=(0,s.useCallback)((e=>{g((0,I.So)(e,x))}),[x,g]);(0,s.useEffect)((()=>{g(ta),u("")}),[a,u,g]),(0,s.useEffect)((()=>{m.current&&i&&m.current.scrollToItem({uid:i})}),[i]);const b=(0,s.useCallback)((async(e,t)=>{const s=await c.getContents(a,{offset:e,limit:t,sort:(0,I.Xt)(x),filter:d,decorateFormatListData:!0});return{items:s.items,totalLength:s.totalLength}}),[a,c,x,d]),f=(0,s.useCallback)(((e,t)=>{const s=(0,ea.g)(e.album?.images,{desiredSize:40,desiredLabel:"small"});return(0,p.jsx)(Ft.SB,{index:t,contextUri:a,uri:e.uri,uid:e.uid||void 0,isPlayable:e.isPlayable,duration_ms:e.duration.milliseconds,name:e.name,artists:e.artists,album:e.album,isExplicit:e.isExplicit,isMOGEFRestricted:e.is19PlusOnly,type:e.type,imgUrl:s?.url||"",statusChange:e.formatListAttributes?.status,playCount:parseInt(e.formatListAttributes?.rank||"0",10),usePlayContextItem:r,isCompactMode:o},t+e.uri)}),[a,r,o]),C=(0,Yt.w)(),j=(0,s.useCallback)((e=>({uri:e.uri,uid:e.uid})),[]);return(0,p.jsx)(Xt.pZ,{value:"chart-tracklist",children:(0,p.jsx)(Ft.S4,{ariaLabel:e,hasHeaderRow:!0,columns:C,sortableColumns:l,sortState:x,onSort:y,renderRow:f,resolveItem:j,nrTracks:t,fetchTracks:b,limit:100,canFetchAllTracks:c.getCapabilities().canFetchAllTracks,outerRef:m,outerDomRef:n,columnPersistenceKey:"chart-tracklist",isCompactMode:o,className:Jt.A.chartTrackList},a)})}));var sa=a(29965),ia=a(59734),ra=a(75212),na=a(14428);function la(e,t){return e.build().withHost(ra.QU).withPath("/views/recommendations-in-free-tier-playlist-source").withQueryParameters({signal:`playlistURI:${t}`,limit:"10"}).withEndpointIdentifier("/views/{viewId}").send()}var oa=a(16133),ca=a(96380);const da="BagEpNps_J8R2QuHRZMa",ua="bjB8WZd0Ev30ZFbiScDm",ma=(0,s.memo)((({uri:e})=>{const{scrollNodeRef:t}=(0,s.useContext)(ie.bi),{ref:a,inView:i}=(0,Ie.Wx)({initialInView:!1,rootMargin:"128px 100%",root:t.current}),r=function(e,t){const{data:a}=(0,na.Z)(la,[e],{enabled:t,staleTime:36e5,gcTime:72e5});return a?.body.content?.items}(e,i),n=(0,s.useRef)(null),l=function(e){const[t,a]=(0,ca.x)("mlt-height",300),i=(0,s.useCallback)((()=>{const t=e.current?.getBoundingClientRect()?.height;t&&a(t)}),[e,a]);return(0,oa.w)({refOrElement:e,observeOnly:"height",onResize:i,observeOnMount:!0}),t}(n);return 0===r?.length?null:(0,p.jsx)("div",{className:da,style:{"--last-height":`${l}px`},ref:a,children:r&&(0,p.jsx)(ia.p,{id:"0JQ5DAob0LgAOAm50K90Od",index:0,title:d.R.get("web-player.playlist.more-like-this.section-header-title"),total:r.length,elementRef:n,className:ua,children:r.map(((e,t)=>(0,p.jsx)(sa.B,{index:t,uri:e.uri,name:e.name,authorName:e.owner?.display_name??null,description:null,images:e.images},e.uri)))})})}));var pa=a(20533),ha=a(63441),xa=a(35583),ga=a(98805),ya=a(31995),ba=a(68274),fa=a(90604),Ca=a(4405),ja=a(70451),Ra=a(42958),va=a(43608),Aa=a(49882),ka=a(16768),Ta=a(22314),Sa=a(84245),Ia=a(36123),Ea=a(26080),Na=a(27939);const _a={bottomEnd:Na.dw.topStart,top:Na.dw.bottom},La=({visible:e,onHide:t,placement:a,children:s,label:i})=>{const r=(0,l.NC)(ve.PH);return(0,p.jsx)(Ia.W,{placement:a,withPortal:!0,overlay:e&&(0,p.jsx)("div",{className:De()({"vertical-metrics":r}),children:(0,p.jsx)(Ea.A,{arrow:_a[a],colorSet:"announcement",onClose:t,children:i})}),children:s})};var wa=a(60823),Pa=a(22903);let Ua=function(e){return e.xs="small",e.sm="medium",e.md="large",e}({});const Ma=({uri:e,label:t,onClick:a,size:s=Ua.md})=>{const{onCopyLink:i}=(0,Pa.J)({uri:e,permissionLevel:"CONTRIBUTOR"}),{toggleActivationVisible:r,setToggleActivationVisible:n}=(0,wa.R)();return(0,p.jsx)(La,{visible:r,onHide:()=>n(!1),label:d.R.get("web-player.playlist.invite-collaborators.message"),placement:"bottomEnd",children:(0,p.jsx)(Sa.Zp,{label:t,children:(0,p.jsx)(ka.H,{onClick:e=>{a?.(e),i?.()},iconOnly:Ta.h,size:s,"aria-hidden":"true","aria-label":t,condensed:!0})})})};var Oa=a(15339),Ba=a(81879),Da=a(66551);const Fa=s.memo((({metadata:e,tracklistDomRef:t,sortableColumns:a})=>{const{hasSpotifyAudiobooks:i}=e,r=i||!1,{spec:n,logger:l}=(0,Re.r)(Oa.createDesktopSearchBarEventFactory,{}),o=(0,s.useCallback)((()=>{l.logInteraction(n.filterFieldFactory().keyStrokeFilter())}),[l,n]),c=(0,s.useCallback)((()=>{l.logInteraction(n.filterFieldFactory().hitClearFilter())}),[l,n]);return(0,p.jsxs)("div",{className:S.A.searchBoxContainer,children:[(0,p.jsx)(s.Suspense,{fallback:null,children:(0,p.jsx)(Ba.S,{placeholder:d.R.get("playlist.search_in_playlist"),onFilter:o,onClear:c,clearOnEscapeInElementRef:t})}),(0,p.jsx)(Da.d,{columns:[...a],isBooklist:r})]})}));var za=a(79012),Ha=a(42955),Va=a(67115),$a=a(62725),Ka=a(7015),qa=a(53901),Qa=a(44014);const Wa="Uw4gqTFuHRLn4VKga_bJ",Ga="SdECNwBCnmkKl0Q0mJff",Ya="HLkGXLclDq_7guCiD1Xq",Ja="vWR6alsFpTlgXUckErqF",Xa="EbHQLci0cfLjHmS0AKp2",Za="HzYFPEbZdd6fQW4jfcz4",es="SQEgwtR2aj51qFj6cMNZ",ts="aaNtMSjjJ4cClWoe6K0k",as="BhtBJTnsM9AotmyN0MPr",ss="FwoyMQocCMLEafLlvAk5",is="xcn0geYcJliTHbvcds12",rs="KptBBI16DBjQBjvPQtlH";function ns(e){const t=(0,s.useRef)(null);return(0,p.jsx)(Ha.z,{center:!0,onClose:e.onClose,ref:t,withPortal:!0,children:(0,p.jsx)(Va.j,{className:Wa,"aria-label":"Example showing onClose property",body:(0,p.jsxs)("div",{className:as,children:[(0,p.jsx)(ka.H,{size:"medium","aria-label":"IconX",iconOnly:$a.M,onClick:e.onClose,className:is}),(0,p.jsx)(ka.H,{size:"medium","aria-label":"IconArrowLeft",iconOnly:qa.G,className:ss}),(0,p.jsx)("div",{className:Ga,children:(0,p.jsxs)("div",{className:Ya,children:[(0,p.jsx)("div",{className:Xa,children:(0,p.jsxs)("div",{className:Za,children:[(0,p.jsx)(za._,{className:es,src:"https://i.scdn.co/image/ab6761610000517469fd2e170a6d290939620b61",alt:"A headshot profile picture of Afrobeats artist Lojay",imageHeight:"150px",imageWidth:"150px",crop:!0,circle:!0}),(0,p.jsx)(za._,{className:ts,src:"spotify:image:ab67706c0000da8465307c7864e1e9d53770a94e",alt:"Ginjapiano playlist profile picture",imageHeight:"150px",imageWidth:"150px",crop:!0,circle:!0})]})}),(0,p.jsxs)("div",{className:Ja,children:[(0,p.jsxs)(n.E,{as:"p",variant:"marginalBold",children:[(0,p.jsx)("span",{style:{color:"#dc744d"},children:"4M"})," STREAMED THIS WEEK"]}),(0,p.jsxs)(n.E,{as:"p",variant:"titleMedium",children:["IM IN THE ",(0,p.jsx)("span",{style:{color:"#dc744d"},children:"TOP 21% "}),"OF GINJAPIANO LISTENERS THIS WEEK."]})]}),(0,p.jsx)("div",{className:Xa,children:(0,p.jsx)(Qa.D,{size:"xlarge"})})]})}),(0,p.jsx)("div",{className:rs,children:(0,p.jsx)(j.$,{colorSet:"invertedLight",children:"Share"})})]})})})}const ls="nTTPGZGk721M6gfldG43",os="BFYSUcA4ifYvgDzOQX5Q",cs="el9_37CCpYKxCRKDDyww",ds="FB376b7R1M_0YQZ_SahS",us="srPBn9_CV0NzQEEzW9f6",ms="te8Z8OuKxZx1gbjb7_ua",ps=s.memo((function({setuserView:e}){const[t,a]=(0,s.useState)(!1);return(0,p.jsxs)(p.Fragment,{children:[t&&(0,p.jsx)(ns,{onClose:()=>{a(!1)}}),(0,p.jsx)(Ha.z,{center:!0,withPortal:!0,children:(0,p.jsx)(Va.j,{colorSet:"overMedia","aria-label":"Title",body:(0,p.jsx)("div",{children:(0,p.jsx)(n.E,{as:"p"})}),dialogTitle:(0,p.jsxs)("div",{className:ls,children:[(0,p.jsxs)("div",{className:cs,children:[(0,p.jsxs)("div",{children:[(0,p.jsx)(za._,{src:"https://i.scdn.co/image/54470e5e056b93d7022076960d3a6b2267ece226",alt:"A figure sits cross-legged but poised in front of their synthesizer",imageHeight:"20px",imageWidth:"20px",crop:!0,circle:!0}),(0,p.jsx)(za._,{src:"https://i.scdn.co/image/54470e5e056b93d7022076960d3a6b2267ece226",alt:"A figure sits cross-legged but poised in front of their synthesizer",imageHeight:"30px",imageWidth:"30px",crop:!0,circle:!0})]}),(0,p.jsx)(n.E,{as:"h1",variant:"titleMedium",children:"Rap Caviar"})]}),(0,p.jsxs)("div",{className:os,children:[(0,p.jsx)(ka.H,{iconOnly:$a.M,onClick:()=>e(!1),className:us}),(0,p.jsx)(ka.H,{iconOnly:Ka.y,className:ms,onClick:()=>{a(!0)}})]}),(0,p.jsx)("div",{className:ds,children:(0,p.jsx)(n.E,{as:"p",variant:"bodyMedium",children:"Hello you made it to the top 10 percent"})})]}),id:"dialogAlert"})})]})})),hs="__97AKHEfxNtqFsLai1b",xs="pzFwHV7jvPlWTI6cG5TV",gs="iZu1aH8cr2cw98gqmTeo",ys="JRvbfJh7eAZ_1FrQukej";function bs(){const[e,t]=(0,s.useState)(!1);return(0,p.jsxs)(p.Fragment,{children:[e&&(0,p.jsx)(ps,{setuserView:t}),(0,p.jsxs)("button",{className:hs,onClick:()=>t(!0),children:[(0,p.jsxs)("div",{className:xs,children:[(0,p.jsx)(za._,{className:gs,src:"https://i.scdn.co/image/54470e5e056b93d7022076960d3a6b2267ece226",alt:"A figure sits cross-legged but poised in front of their synthesizer",imageHeight:"30px",imageWidth:"30px",crop:!0,circle:!0}),(0,p.jsx)(za._,{className:gs,src:"https://i.scdn.co/image/54470e5e056b93d7022076960d3a6b2267ece226",alt:"A figure sits cross-legged but poised in front of their synthesizer",imageHeight:"30px",imageWidth:"30px",crop:!0,circle:!0}),(0,p.jsx)(za._,{className:gs,src:"https://i.scdn.co/image/54470e5e056b93d7022076960d3a6b2267ece226",alt:"A figure sits cross-legged but poised in front of their synthesizer",imageHeight:"30px",imageWidth:"30px",crop:!0,circle:!0})]}),(0,p.jsxs)("div",{className:ys,children:[(0,p.jsx)(n.E,{as:"p",variant:"bodySmallBold",children:"View employee leaderboard"}),(0,p.jsx)(n.E,{as:"p",variant:"bodySmall",children:"You're in the top 21% of listeners."})]})]})]})}var fs=a(23418),Cs=a(64541);const js=s.memo((function({playlist:e,capabilities:t,spec:a,isPlaying:i,isActive:r,togglePlay:n,isBooklist:o,isConcert:c=!1,backgroundColor:u,tracklistDomRef:m,sortableColumns:h}){const{metadata:{uri:x,name:g,unfilteredTotalLength:y,isOwnedBySelf:b,canPlay:f,isPublished:C,totalLength:j}}=e,v=(0,$.n)(),A=(0,st.s)(),k=(0,s.useMemo)((()=>a.shuffleButtonContainerFactory()),[a]),T=t.canFilter&&y>0,I=t.canSort&&y>0,E=y>0,N=(0,l.NC)(J.F6p),_=(0,l.NC)(J.McC,{loadingValue:!1}),L=(0,Cs.X)(),[w,P]=(0,R.A)(x),U=(0,V.W)(),M=(0,s.useCallback)((async()=>{U({targetUri:x,intent:w?"unsave":"save",type:"click"});try{await P(!w)}catch{}}),[w,U,P,x]),O=(0,s.useCallback)((()=>{const e=a.shareButtonFactory().hitShare({entityToBeShared:x,shareId:""});A.logInteraction(e)}),[a,A,x]),B=(0,s.useCallback)((()=>{let e;const t=a.heartButtonFactory();e=w?t.hitUnfollow({itemToBeUnfollowed:x}):t.hitFollow({itemToBeFollowed:x}),A.logInteraction(e),M()}),[a,M,w,A,x]),D=(0,va.j)(),F=T&&I;return(0,p.jsxs)(pa.E,{backgroundColor:u,children:[(0,p.jsxs)(ha.S,{children:[f&&!o?(0,p.jsx)(Ca.D,{onClick:n,isPlaying:i,size:D,uri:x,ariaPlayLabel:d.R.get("playlist.a11y.play",g),ariaPauseLabel:d.R.get("playlist.a11y.pause",g)}):null,L&&j>0&&!o&&(0,p.jsx)(Aa.r,{spec:k,children:(0,p.jsx)(Ra.Y,{shuffleContext:fs.b.playlistActionBar,entityName:g,contextUri:x,isActive:r,activationPlacement:"bottomEnd",size:D})}),b?null:(0,p.jsx)(ba.e,{children:(0,p.jsx)(_t.M,{isAdded:!!w,onClick:B,size:D})}),!o&&(0,p.jsx)(xa.f,{uri:x,isFollowing:!!w,canDownload:E,onClick:(e,t)=>(0,se.Qv)(t,a.downloadButtonFactory(),A,x),onFollow:M,size:D}),(0,p.jsx)(fa.u,{property:J.G6N,renderNewExperience:()=>e.metadata.permissions?.canAdministratePermissions&&v&&(!o||_)?(0,p.jsx)(Ma,{onClick:O,label:d.R.get("permissions.invite-collaborators",g),uri:x,size:D}):null}),(c||o)&&(0,p.jsx)(Pt.w,{uri:x,sharingInfo:null,interactionData:{intent:"share",type:"click",itemIdSuffix:c?"concerts-near-you/share":"booklist/share"},onClick:O,size:D}),(0,p.jsx)(ga.b,{onShow:()=>(0,se.R2)(a,A),menu:(0,p.jsx)(ya.W,{uri:x,isPublished:C}),children:(0,p.jsx)(wt.e,{label:d.R.get("more.label.context",g),size:D})}),F?(0,p.jsx)(Aa.r,{spec:a,children:(0,p.jsx)(Fa,{metadata:e.metadata,tracklistDomRef:m,sortableColumns:h})}):(0,p.jsx)("div",{className:S.A.leadingSlot,children:(0,p.jsx)(fa.u,{property:J.mA2,renderNewExperience:()=>(0,p.jsx)(ja.g,{options:[],onSelect:()=>{},selected:null,enableViewModeMenu:!0})})})]}),N&&(0,p.jsx)(bs,{})]})}));var Rs=a(25908),vs=a(68256);const As=e=>{const t=(0,st.s)(),a=(0,s.useMemo)((()=>e.spec.promoCardFactory()),[e.spec]),i=(0,vs.t)(a);return(0,p.jsxs)("div",{className:S.A.concertsFooter,children:[(0,p.jsx)(Qe.default,{to:"/concerts",className:S.A.ctaLink,onClick:()=>{const e=a.hitUiNavigate({destination:"spotify:app:concerts"});t.logInteraction(e)},children:(0,p.jsxs)("div",{className:S.A.promoRow,ref:i,children:[(0,p.jsx)(n.E,{as:"h2",variant:"bodyMediumBold",className:S.A.promoTitle,children:d.R.get("concerts.find_more")}),(0,p.jsx)(Rs.v,{as:"span",selected:!0,children:d.R.get("concerts.find_nearby")}),(0,p.jsx)("img",{className:S.A.promoImage,alt:"",src:"https://i.scdn.co/image/ab676d63000076a0dbdb7dc2499cbb9ef096518d"})]})}),(0,p.jsx)("div",{className:S.A.disclaimerContainer,children:(0,p.jsx)(n.E,{as:"div",variant:"marginal",semanticColor:"textSubdued",children:d.R.get("concerts_near_you.playlist_disclaimer")})})]})};var ks=a(68548),Ts=a(86987),Ss=a(85989);const Is="multiUserAttributionDisplayNamesV2";function Es(e){return Pe(e)||Ue(e)}function Ns(e){return Pe(e)||Ue(e)||Me(e)}const _s=s.memo((function({ariaLabel:e,nrTracks:t,playlistUri:a,playlistName:r,isMixedMedia:n,isLive:o,isBlend:m,isConcert:h,isBooklist:x,canEdit:g,scrollToUid:y,feedbackPath:b,deleteFeedbackPath:f,usePlayContextItem:C,tracklistRef:j,tracklistDomRef:R,canRemove:v,spec:A,initialItems:k,isCompactMode:T=!1,sortableColumns:S,hasSpotifyAudiobooks:L}){const w=(0,st.s)(),P=(0,l.NC)(J.LX5),U=(0,s.useContext)(ce.wO),{filter:M}=(0,s.useContext)(E.gM),{sortState:O,setSortState:B}=(0,s.useContext)(N.cL),D=(0,s.useRef)((()=>{})),[F,z]=(0,s.useState)([]),H=(0,i.wA)(),V=(0,Yt.w)(),$=(0,s.useCallback)((()=>{j?.current&&j.current.update()}),[j]);(0,ce.HB)(a,$);const K=(0,s.useCallback)(((e,t)=>{B((0,I.So)(e,O)),w.logInteraction(A.columnHeaderFactory({identifier:e,position:t||0}).hitSort())}),[B,O,w,A]),q=(0,s.useCallback)((e=>{D.current(),U.remove(a,e)}),[U,a]),Q=(0,s.useCallback)(((e,t,a=!1)=>{v&&(D.current=t,e.length>1&&!a?z(e):q(e))}),[v,q]);(0,s.useEffect)((()=>{j?.current&&y&&j.current.scrollToItem({uid:y})}),[y,j]);const W=(0,s.useCallback)((async(e,t)=>{const s=await U.getContents(a,{offset:e,limit:t,sort:(0,I.Xt)(O),filter:M,decorateFormatListData:!!b||o||m});return{items:s.items,totalLength:s.totalLength}}),[a,U,O,M,b,o,m]),G=(0,s.useCallback)(((e,t,s)=>{if(!j?.current)return;const i=j.current.getRows()[t];i&&(w.logInteraction(A.dragSort()),s===Ss.Y.Before?U.move(a,e,{before:i}):U.move(a,e,{after:i}))}),[j,w,A,U,a]),Y=(0,s.useCallback)(((e,t,s)=>{if(!j?.current)return;const i=j.current.getRows()[t];i&&(w.logInteraction(A.dragAddToPlaylist({playlist:a,itemToBeAdded:e[0]})),s===Ss.Y.Before?H((0,u.io)(a,e,{before:{uri:i.uri,uid:i.uid}})):H((0,u.io)(a,e,{after:{uri:i.uri,uid:i.uid}})))}),[j,w,A,a,H]),X=(0,s.useCallback)((()=>{U.resync(a)}),[U,a]),Z=(0,s.useCallback)(((e,t)=>{let s,i=null;Ue(e)?(i=e.show,s=e.images.concat(e.show?.images||[])):Pe(e)?(i=e.album,s=e.album?.images):Me(e)&&(s=e.images);const l=(0,ea.g)(s,{desiredSize:40,desiredLabel:"small"});let o=[];g&&O.order===Ft.Ht.NONE&&(o=x?[Dt.fl.AUDIOBOOKS]:[Dt.fl.TRACKS,Dt.fl.LOCAL_TRACKS,Dt.fl.EPISODES,...L?[Dt.fl.AUDIOBOOKS]:[]]);const d="1"===e?.formatListAttributes?.["dislike-feedback-selected"],u=!!Ue(e)&&e.podcastSubscription.isUserSubscribed;let y=!1;Ue(e)&&e.podcastSubscription.isPaywalled&&!u?y=!0:Es(e)?y=e.isPlayable&&!d:Me(e)&&(y=!0);let j=!1;Ue(e)&&e.podcastSubscription.isPaywalled?j=!0:Me(e)&&(j=e.isLocked&&!e.isOutOfMarket);const R=m&&((e,t)=>{const a=[];if(!t)return a;const s=t[Is]?Is:"multiUserAttributionDisplayNames",i=t?.[s]?.split(","),r=t?.multiUserAttributionImages?.split(",");if(!i||!r)return a;const n=t?.multiUserAttributionUsernamesV2?.split(",")||[],l=t?.multiUserAttributionType?.split(",")||[],o=i.length;for(let e=0;e<o;e++){const t=n[e],s=t&&(0,c.Qj)(t).toURI();a.push({username:t,uri:s,displayName:i[e],images:(d=r[e],d.length>1?[{url:d}]:[]),recsplanation:l[e]})}var d;return a.sort(((t,a)=>t.username?t.username===e?.username?-1:a.username===e?.username?1:0:0))})(e.addedBy,e?.formatListAttributes)||e.addedBy&&[e.addedBy]||[];let A=0;Es(e)?A=e.duration.milliseconds:Me(e)&&(A=e.durationMs||0);let k="";return Ns(e)&&(k=e.name),(0,p.jsx)(Ft.Wf,{isCompactMode:T,index:t,playIndex:e.playIndex??void 0,contextUri:a,uri:e.uri,uid:e.uid,isPlayable:y,duration_ms:A,isPaywalled:j,isUserSubscribed:u,name:k,artists:Pe(e)?e.artists:void 0,albumOrShow:i,isExplicit:(Ns(e)&&e.isExplicit)??!1,hasAssociatedVideo:(Pe(e)&&e.hasAssociatedVideo&&P)??!1,isMixedMedia:n,isLocal:Pe(e)&&e.isLocal,addedBy:R,hasDecoratedAddedBy:U.getCapabilities().canDecorateAddedBy,dateAdded:e.addedAt,release_date:Ue(e)&&e.release.date||"",isMOGEFRestricted:(Pe(e)||Ue(e))&&e.is19PlusOnly,type:e.type,imgUrl:l?.url||"",onMove:G,onInsert:Y,usePlayContextItem:C,allowedDropTypes:o,feedbackPath:b,feedbackUri:e?.formatListAttributes?.feedback_uri,deleteFeedbackPath:f,isDisliked:d,isBlend:m,ticketingSiteURL:e?.formatListAttributes?.ticketingSite,eventDate:e?.formatListAttributes?.eventDate,canRemove:v,onFeedbackClick:X,playlistName:r,isConcert:h,concertsCount:e.formatListAttributes?.concerts_count,concertURI:e.formatListAttributes?.target_uri,concertDate:e.formatListAttributes?.first_concert_date,concertVenue:e.formatListAttributes?.first_concert_venue,authorName:Me(e)?e.authorName:"",isOutOfMarket:!!Me(e)&&e.isOutOfMarket,consumptionCapExplanation:Me(e)?e.consumptionCapExplanation:void 0,isOwnedBySelf:g},t+e.uri)}),[g,x,O.order,m,T,a,P,n,U,G,Y,C,b,f,v,X,r,h,L]),ee=(0,s.useCallback)((e=>({uri:e.uri,uid:e.uid,type:e.type})),[]),[,te]=(0,_.z1)();return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(Xt.pZ,{value:"playlist-tracklist",children:(0,p.jsx)(Ft.S4,{isCompactMode:T,testID:"playlist-tracklist",ariaLabel:e,hasHeaderRow:!0,columns:V,sortableColumns:S,sortState:O,onSort:K,onRemove:Q,renderRow:Z,resolveItem:ee,nrTracks:t,fetchTracks:W,limit:100,canFetchAllTracks:U.getCapabilities().canFetchAllTracks,outerRef:j,outerDomRef:R,tracks:k,isConcertPlaylist:h,onNrValidItemsChange:te,columnPersistenceKey:"playlist-tracklist"},a)}),(0,p.jsx)(Ts.F,{title:d.R.get("playlist.remove_from_playlist",r),isOpen:F.length>0,tracks:F,onClose:e=>{e.stopPropagation(),z([])},onRemove:q})]})}));var Ls=a(73167),ws=a(72176),Ps=a(31927),Us=a(7485),Ms=a(23138),Os=a(82871);const Bs=new Os.l("queryInlineCurationSearchV2","query","ba8322962d1da0bfea18fd0831d1af7936344c8b7401510608a272a23adad800",null),Ds=new Os.l("queryInlineCurationSearchV2Booklists","query","ba8322962d1da0bfea18fd0831d1af7936344c8b7401510608a272a23adad800",null),Fs=new Os.l("queryInlineCurationSearchAlbum","query","74a97c6afa1c6c23e1d9b897756fc362ca7e5ed718ac59ba65ffa85f687f7113",null),zs=new Os.l("queryInlineCurationSearchArtist","query","657c07a8943ea6e49c61833dde16d8d51cb64e921dd80827255d6e2519621c34",null);var Hs=a(22596);function Vs(e){return{type:D.c.AUDIOBOOK,uri:e.uri,name:e.name,description:e.htmlDescriptionPlain??"",authorName:e.authors?.map((e=>e?.name)).join(d.R.getSeparator())||"",images:e.coverArt?.sources??[],isLocked:(0,Hs.e$)(e.accessInfo),isExplicit:e.contentRating?.label===at.x7.Explicit,durationMs:e.duration?.totalMilliseconds??0,topics:e.genres?.map((e=>({uri:e.destinationUri,title:e.contextualName})))||[],signifierText:e.accessInfo?.signifier?.text??"",rating:{average:e.rating?.averageRating?.average??0,showAverage:!!e.rating?.averageRating?.showAverage},sharingInfo:e.sharingInfo,publishDate:null,isOutOfMarket:!1,consumptionCapExplanation:null,uid:"",playIndex:null,addedAt:null,addedBy:null,formatListAttributes:null}}var $s=a(34092),Ks=a(55459),qs=a(58781),Qs=a(51424),Ws=a(88879);function Gs(e){return{type:D.c.ALBUM,uri:e.uri,id:e.id,name:e.name,images:(0,qs.r)(e.coverArt)}}function Ys(e){if("Album"!==e.data.__typename)return null;return Gs(e.data)}function Js(e){const t=e?.items.filter((e=>"AlbumResponseWrapper"===e.__typename));return(t??[]).map((e=>Ys(e))).filter(Qs.P)||[]}function Xs(e){if("Artist"!==e.data.__typename)return null;const t=e.data;return{type:D.c.ARTIST,uri:t.uri,id:t.id,name:t.profile.name,images:(0,qs.r)(t.visuals.avatarImage)}}function Zs(e){if("Episode"!==e.data.__typename)return null;const t=e.data,a=t.podcastV2.data;return"Podcast"!==a.__typename?null:{type:D.c.EPISODE,uri:t.uri,id:t.id,name:t.name,images:(0,qs.r)(t.coverArt),isExplicit:t.contentRating?.label===$s.x7.Explicit,is19PlusOnly:t.contentRating?.label===$s.x7.NineteenPlus,podcast:{id:a.id,uri:a.uri,name:a.name},isPlayable:t.playability.playable}}function ei(e){const t=(0,qs.r)(e.albumOfTrack?.coverArt||null);return{type:D.c.TRACK,uri:e.uri,id:e.id,name:e.name,album:{name:e.albumOfTrack?.name||"",uri:e.albumOfTrack?.uri||"",imgUrl:t.at(0)?.url||"",id:e.albumOfTrack?.id||""},artists:e.artists.items.map((e=>({id:e.id,name:e.profile.name,uri:e.uri}))),isPlayable:e.playability.playable,isExplicit:e.contentRating?.label===$s.x7.Explicit,is19PlusOnly:e.contentRating?.label===$s.x7.NineteenPlus}}function ti(e){if("Track"!==e.data.__typename)return null;return ei(e.data)}function ai(e){return(e?.itemsV2??[]).map((e=>{const t=(0,Ks.Jt)(e,"item");switch(t.__typename){case"AlbumResponseWrapper":return Ys(t);case"ArtistResponseWrapper":return Xs(t);case"EpisodeResponseWrapper":return Zs(t);case"TrackResponseWrapper":return ti(t);default:return(0,Ws.k)(t),null}})).filter(Qs.P)||[]}function si(e){return(e?.itemsV2??[]).map((e=>{const t=(0,Ks.Jt)(e,"item");return"AudiobookResponseWrapper"===t.__typename&&"Audiobook"===t.data.__typename?Vs(t.data):null})).filter(Qs.P)||[]}const ii=async(e,t,a,s=0,i=10,r=10)=>{const n={term:t,offset:s,limit:i,numberOfTopResults:r};if(a){const a=await e(Ds,n),s=a?.data?.searchV2;return s?(l=t,{albums:[],artists:[],episodes:[],tracks:[],topResults:si(s.topResultsV2)??[],query:l}):null}var l;const o=await e(Bs,n),c=o?.data?.searchV2;return c?function(e,t){return{albums:Js(e.albumsV2)??[],artists:(i=e.artists,((i?.items??[]).map((e=>Xs(e))).filter(Qs.P)||[])??[]),episodes:(s=e.episodes,((s?.items??[]).map((e=>Zs(e))).filter(Qs.P)||[])??[]),tracks:(a=e.tracksV2,((a?.items??[]).map((e=>ti(e.item))).filter(Qs.P)||[])??[]),topResults:ai(e.topResultsV2)??[],query:t};var a,s,i}(c,t):null},ri=async(e,t,a=50,s=0)=>{const i={uris:[t],limit:a,offset:s},r=await e(Fs,i),n=r?.data?.albums;return n?function(e){const t=e.at(0);if(!t)return null;switch(t.__typename){case"Album":return{albums:[],artists:[],episodes:[],tracks:t.tracks.items.map((e=>ei(e.track)))||[],topResults:[]};case"GenericError":case"NotFound":return null;default:return(0,Ws.k)(t),null}}(n):null},ni=async(e,t,a=50,s=0)=>{const i={uris:[t],limit:a,offset:s},r=await e(zs,i),n=r?.data?.artists;return n?function(e){const t=e.at(0);if(!t)return null;switch(t.__typename){case"Artist":return{albums:t.discography.popularReleasesAlbums.items.map((e=>Gs(e)))||[],artists:[],episodes:[],tracks:t.discography.topTracks.items.map((e=>ei(e.track)))||[],topResults:[]};case"GenericError":case"NotFound":return null;default:return(0,Ws.k)(t),null}}(n):null};var li=a(98678),oi=a(11353);const ci="YAYCVnYpPvmYV4JyTmn5",di="FeWwGSRANj36qpOBoxdx",ui="_h5mio6VqcL_fmiXAb1S",mi="Hfgj4Zbb2ijt8g54MlCA",pi="sgZ_MgcS1NlccH19fYsa",hi="JzyZE2R09wq7xtjECDeR",xi=s.memo((function({placeholder:e,onChange:t=(()=>{}),onFocus:a=(()=>{})}){const[i,r]=(0,s.useState)(""),l=(0,s.useRef)(null),o=(0,li.YQ)((e=>{t(e)}),200),c=(0,s.useCallback)((e=>{const t=e.currentTarget.value;r(t),o(t)}),[r,o]),u=(0,s.useCallback)((()=>{l.current&&l.current.focus(),r(""),t("")}),[r,t]),m=(0,s.useCallback)((e=>{"Escape"===e.key&&i&&u()}),[i,u]);return(0,p.jsxs)("div",{className:ci,role:"search",children:[(0,p.jsx)(n.E,{as:"input",variant:"bodySmall",ref:l,className:De()(di),role:"searchbox",maxLength:80,autoCorrect:"off",autoCapitalize:"off",spellCheck:!1,placeholder:e,onChange:c,onKeyDown:m,onFocus:a,value:i}),(0,p.jsxs)("div",{className:ui,children:[(0,p.jsx)("span",{className:mi,children:(0,p.jsx)(oi.C,{size:"small",className:pi,"aria-hidden":"true"})}),i&&(0,p.jsx)("button",{className:hi,onClick:u,"aria-label":d.R.get("search.a11y.clear-input"),children:(0,p.jsx)($a.M,{size:"small"})})]})]})})),gi=({renderRow:e,searchResults:t,renderSeeAllRow:a,seeAllXList:s})=>(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(Ft.S4,{ariaLabel:d.R.get("search.title.top-results"),renderRow:e,rowPlaceholder:Ft.qq,nrTracks:t.length,tracks:t,resolveItem:e=>({uri:e.uri}),columns:[Ft.$C.TITLE_AND_ARTIST,Ft.$C.ALBUM,Ft.$C.ADD],testID:"playlist-inline-curation-loaded-results"}),(0,p.jsx)(Ft.S4,{ariaLabel:d.R.get("search.title.all"),renderRow:a,rowPlaceholder:Ft.qq,nrTracks:s.length,tracks:s,resolveItem:e=>({uri:e.uri}),columns:[Ft.$C.TITLE_AND_ARTIST,Ft.$C.ALBUM,Ft.$C.ADD],testID:"playlist-inline-curation-see-all-options"})]}),yi=({renderRow:e,searchResults:t})=>(0,p.jsx)(Ft.S4,{ariaLabel:d.R.get("search.title.top-results"),renderRow:e,rowPlaceholder:Ft.qq,nrTracks:t.length,tracks:t,resolveItem:e=>({uri:e.uri}),columns:[Ft.$C.TITLE_AND_ARTIST,Ft.$C.ALBUM,Ft.$C.ADD]}),bi=({renderRow:e,searchResults:t})=>{const a=t.filter((e=>e.type===D.c.TRACK)),s=t.filter((e=>e.type===D.c.ALBUM));return(0,p.jsxs)("div",{children:[(0,p.jsx)(n.E,{as:"p",variant:"bodyMediumBold",className:S.A.artistResultListTitle,children:d.R.get("playlist.curation.popular_songs")}),(0,p.jsx)(Ft.S4,{ariaLabel:d.R.get("playlist.curation.popular_songs"),renderRow:e,rowPlaceholder:Ft.qq,nrTracks:a.length,tracks:a,resolveItem:e=>({uri:e.uri}),columns:[Ft.$C.TITLE_AND_ARTIST,Ft.$C.ALBUM,Ft.$C.ADD]}),(0,p.jsx)(n.E,{as:"p",variant:"bodyMediumBold",className:S.A.artistResultListTitle,children:d.R.get("playlist.curation.albums")}),(0,p.jsx)(Ft.S4,{ariaLabel:d.R.get("playlist.curation.albums"),renderRow:e,rowPlaceholder:Ft.qq,nrTracks:s.length,tracks:s,resolveItem:e=>({uri:e.uri}),columns:[Ft.$C.TITLE_AND_ARTIST,Ft.$C.ALBUM,Ft.$C.ADD]})]})},fi=({renderRow:e,searchResults:t})=>(0,p.jsx)(Ft.S4,{ariaLabel:d.R.get("search.title.top-results"),renderRow:e,rowPlaceholder:Ft.qq,nrTracks:t.length,tracks:t,resolveItem:e=>({uri:e.uri}),columns:[Ft.$C.TITLE_AND_ARTIST,Ft.$C.ALBUM,Ft.$C.ADD]}),Ci=({renderRow:e,searchResults:t})=>(0,p.jsx)(Ft.S4,{ariaLabel:d.R.get("search.title.top-results"),renderRow:e,rowPlaceholder:Ft.qq,nrTracks:t.length,tracks:t,resolveItem:e=>({uri:e.uri}),columns:[Ft.$C.TITLE_AND_ARTIST,Ft.$C.ALBUM,Ft.$C.ADD]}),ji=({renderRow:e,searchResults:t})=>(0,p.jsx)(Ft.S4,{ariaLabel:d.R.get("search.title.top-results"),renderRow:e,rowPlaceholder:Ft.qq,nrTracks:t.length,tracks:t,resolveItem:e=>({uri:e.uri}),columns:[Ft.$C.TITLE_AND_ARTIST,Ft.$C.ALBUM,Ft.$C.ADD]});var Ri=a(2810);const vi="G2t3w2AAeb5OXp0_GeWs",Ai="saVjTFMyWYUz975_tkQm",ki="thi8fNCkEhutRkDC90c0",Ti="pHVlkChuJpEnBQyU3ADv",Si="ENWs3JxcqtD98_8fbPz2",Ii="L8IUKEJL6JiTyE_qUVCc",Ei="XcyjdXgsNX0DBt72tfiD",Ni="VhJnuS7UcUPfIlzD8dlU",_i="He29vQ5anFj_bJ5iEaI2",Li=({searchResult:e,index:t,isRTL:a,onClick:s})=>{const i=e.images.at(0)?.url;return(0,p.jsx)(Ri.$F,{className:Si,rowIndex:t,"aria-selected":!1,children:(0,p.jsxs)("div",{"aria-label":`${d.R.get("artist-page.tracks.seemore")} ${e.name}`,className:_i,onClick:s,children:[(0,p.jsxs)(Ri.TU,{columnIndex:0,className:Ii,children:[void 0!==i?(0,p.jsx)("img",{className:ki,src:i,alt:e.name}):null,(0,p.jsxs)("div",{className:Ei,children:[(0,p.jsx)(n.E,{as:"p",className:Ti,variant:"bodyMedium",children:e.name}),(0,p.jsx)(n.E,{as:"p",variant:"bodySmall",semanticColor:"textSubdued",children:d.R.get("album")})]})]}),(0,p.jsx)(Ri.TU,{columnIndex:1}),(0,p.jsx)(Ri.TU,{columnIndex:2,children:(0,p.jsx)("button",{"data-testid":"top-bar-forward-button","aria-label":`See more from ${e.name}`,className:Ni,onClick:s,children:a?(0,p.jsx)(Ps.g,{}):(0,p.jsx)(ws.V,{})})})]})})};var wi=a(57272);const Pi=({size:e})=>(0,p.jsx)("div",{className:Ai,children:(0,p.jsx)(wi.r,{size:e})}),Ui=({searchResult:e,index:t,isRTL:a,onClick:s})=>{const i=e.images.at(0)?.url;return(0,p.jsx)(Ri.$F,{className:Si,rowIndex:t,"aria-selected":!1,children:(0,p.jsxs)("div",{"aria-label":`${d.R.get("artist-page.tracks.seemore")} ${e.name}`,className:_i,onClick:s,"data-testid":"playlist-inline-curation-artist",children:[(0,p.jsxs)(Ri.TU,{columnIndex:0,className:Ii,children:[void 0!==i?(0,p.jsx)("img",{className:vi,src:i,alt:e.name}):(0,p.jsx)(Pi,{size:"small"}),(0,p.jsxs)("div",{className:Ei,children:[(0,p.jsx)(n.E,{as:"p",className:Ti,variant:"bodyMedium",children:e.name}),(0,p.jsx)(n.E,{as:"p",variant:"bodySmall",semanticColor:"textSubdued",children:d.R.get("artist")})]})]}),(0,p.jsx)(Ri.TU,{columnIndex:1}),(0,p.jsx)(Ri.TU,{columnIndex:2,children:(0,p.jsx)("button",{"data-testid":"top-bar-forward-button","aria-label":`See more from ${e.name}`,className:Ni,onClick:s,children:a?(0,p.jsx)(Ps.g,{}):(0,p.jsx)(ws.V,{})})})]})})},Mi=({episode:e,contextUri:t,index:a,usePlayContextItem:s})=>(0,p.jsx)(Ft.xn,{uid:e.id,uri:e.uri,isPlayable:e.isPlayable,isMOGEFRestricted:e.is19PlusOnly,isExplicit:e.isExplicit,contextUri:t,name:e.name,imgUrl:e.images.at(0)?.url??"",index:a,podcast:e.podcast,usePlayContextItem:s}),Oi=({label:e,index:t,isRTL:a,onClick:s})=>(0,p.jsx)(Ri.$F,{className:Si,rowIndex:t,"aria-selected":!1,children:(0,p.jsxs)("div",{"aria-label":e,className:_i,onClick:s,children:[(0,p.jsx)(Ri.TU,{columnIndex:0,className:Ii,children:(0,p.jsx)(n.E,{as:"p",className:Ti,variant:"bodyMedium",children:e})}),(0,p.jsx)(Ri.TU,{columnIndex:1}),(0,p.jsx)(Ri.TU,{columnIndex:2,children:(0,p.jsx)("button",{"data-testid":"top-bar-forward-button","aria-label":e,className:Ni,onClick:s,children:a?(0,p.jsx)(Ps.g,{}):(0,p.jsx)(ws.V,{})})})]})}),Bi=({track:e,contextUri:t,index:a,usePlayContextItem:s})=>(0,p.jsx)(Ft.$T,{uid:e.id,uri:e.uri,isPlayable:e.isPlayable,isMOGEFRestricted:e.is19PlusOnly,isExplicit:e.isExplicit,contextUri:t,name:e.name,imgUrl:e.album.imgUrl,index:a,album:e.album,artists:e.artists,usePlayContextItem:s});let Di=function(e){return e[e.SEARCH=0]="SEARCH",e[e.ALBUM=1]="ALBUM",e[e.ARTIST=2]="ARTIST",e[e.PODCAST=3]="PODCAST",e[e.PLAYLIST=4]="PLAYLIST",e[e.ALBUMRESULTS=5]="ALBUMRESULTS",e[e.ARTISTRESULTS=6]="ARTISTRESULTS",e[e.PODCASTRESULTS=7]="PODCASTRESULTS",e[e.EPISODERESULTS=8]="EPISODERESULTS",e[e.TRACKRESULTS=9]="TRACKRESULTS",e}({});const Fi=(e,t)=>"GO_BACK"===t.type?1===e.breadcrumbs.length?e:e={...e,breadcrumbs:e.breadcrumbs.slice(0,e.breadcrumbs.length-1)}:"NAV_TO_ENTITY"===t.type?e={...e,breadcrumbs:[...e.breadcrumbs,t.level]}:("NAV_TO_RESULTS"===t.type?e={...e,breadcrumbs:[...e.breadcrumbs,t.level]}:"CHANGE_TERM"===t.type&&(e={term:t.term,breadcrumbs:[{navType:Di.SEARCH,term:t.term,title:""}]}),e),zi=({resultList:e,level:t,isRTL:a,playlistUri:i,navToResults:r,navToEntity:l,term:o,isBooklist:u})=>{let m=e;const h=(e=>e.map((e=>{if(e.type===D.c.TRACK||e.type===D.c.EPISODE){const{uri:t,id:a}=e;return{type:(0,c.U_)(t)?D.c.TRACK:D.c.EPISODE,uri:t,uid:a,provider:null}}return null})).filter(Qs.P))(e),{draggable:x,onDragStart:g}=(0,U.P)(),{usePlayContextItem:y}=(0,oe.P)({uri:`${i.replace("spotify:","spotify:internal:recs:")}:${encodeURIComponent(o)}:${t?.navType??0}`,pages:[{items:h}]},{featureIdentifier:"search"}),b=(0,s.useCallback)(((e,t)=>(0,p.jsx)(Oi,{isRTL:a,index:t,label:e.label,onClick:()=>{r({navType:e.type,term:o,title:e.label})}},e.uri)),[a,r,o]),f=(0,s.useCallback)(((e,t)=>e.type===D.c.ARTIST?(0,p.jsx)(Ui,{isRTL:a,index:t,searchResult:e,onClick:()=>{l({navType:Di.ARTIST,uri:e.uri,title:e.name})}},e.uri):e.type===D.c.EPISODE?(0,p.jsx)(Mi,{index:t,episode:e,contextUri:i.replace("spotify:","spotify:internal:recs:"),usePlayContextItem:y},e.uri):e.type===D.c.TRACK?(0,p.jsx)(Bi,{index:t,track:e,contextUri:i.replace("spotify:","spotify:internal:recs:"),usePlayContextItem:y},e.uri):e.type===D.c.ALBUM?(0,p.jsx)(Li,{index:t,isRTL:a,searchResult:e,onClick:()=>{l({navType:Di.ALBUM,uri:e.uri,title:e.name})}},e.uri):(0,p.jsx)(Bt,{book:e,featureIdentifier:"playlist_recommendations",contextUri:i,isRecommendation:!0,showSeparator:0!==t},e.uri)),[a,l,i,y]);if(""===o)return(0,p.jsx)("div",{className:S.A.emptySearchTermContainer});if(!e||0===e?.length)return(0,p.jsxs)("div",{className:S.A.emptyStateContainer,children:[(0,p.jsx)(n.E,{as:"h1",variant:"titleSmall",children:d.R.get("search.empty-results-title",o)}),(0,p.jsx)(n.E,{as:"p",variant:"bodySmall",children:d.R.get("search.empty-results-text")})]});if(t?.navType===Di.SEARCH){const t=[{type:Di.ARTISTRESULTS,label:d.R.get("playlist.curation.see_all_artists"),uri:"spotify:internal:recs:see-all-artists"},{type:Di.ALBUMRESULTS,label:d.R.get("playlist.curation.see_all_album"),uri:"spotify:internal:recs:see-all-albums"},{type:Di.TRACKRESULTS,label:d.R.get("playlist.curation.see_all_songs"),uri:"spotify:internal:recs:see-all-songs"}];return m=e,u?(0,p.jsx)(p.Fragment,{children:m.map(((e,t)=>e&&e.type===D.c.AUDIOBOOK?(0,p.jsx)(Bt,{contextUri:i,featureIdentifier:"playlist_recommendations",book:e,isRecommendation:!0,draggable:x,onDragStart:t=>{g(t,{itemUris:[e.uri],itemMimeTypes:[Dt.fl.AUDIOBOOKS],dragLabelText:e.name})},showSeparator:0!==t},t):null))}):(0,p.jsx)(gi,{renderRow:f,searchResults:m,renderSeeAllRow:b,seeAllXList:t})}return t?.navType===Di.ALBUM?(0,p.jsx)(yi,{renderRow:f,searchResults:m}):t?.navType===Di.ARTIST?(0,p.jsx)(bi,{renderRow:f,searchResults:m}):t?.navType===Di.ALBUMRESULTS?(0,p.jsx)(fi,{renderRow:f,searchResults:m}):t?.navType===Di.TRACKRESULTS?(0,p.jsx)(Ci,{renderRow:f,searchResults:m}):t?.navType===Di.ARTISTRESULTS?(0,p.jsx)(ji,{renderRow:f,searchResults:m}):null},Hi=({playlistUri:e,onCurationModeChange:t,isBooklist:a})=>{const[i,r]=(0,s.useState)([]),[l,o]=(0,s.useState)(),c=(0,Us.W)(),{level:u,changeTerm:m,goBack:h,navToEntity:x,navToResults:g,term:y}=(()=>{const[e,t]=(0,s.useReducer)(Fi,{term:"",breadcrumbs:[]}),{breadcrumbs:a,term:i}=e;return{changeTerm:e=>{t({type:"CHANGE_TERM",term:e})},level:a[a.length-1]||null,goBack:()=>{t({type:"GO_BACK"})},navToEntity:e=>{t({type:"NAV_TO_ENTITY",level:e})},navToResults:e=>{t({type:"NAV_TO_RESULTS",level:e})},term:i}})(),{request:b}=(0,s.useContext)(Ms.jH);return(0,s.useEffect)((()=>{let e=!0;return(async()=>{if(u)switch(u.navType){case Di.SEARCH:try{if(!l||l.query!==y&&""!==y){const t=await ii(b,y,a);e&&o(t)}else""===y&&r([])}catch{r([])}l&&r(l.topResults);break;case Di.ARTISTRESULTS:l&&r(l?.artists);break;case Di.ALBUMRESULTS:l&&r(l?.albums);break;case Di.TRACKRESULTS:l&&r(l?.tracks);break;case Di.EPISODERESULTS:l&&r(l?.episodes);break;case Di.ALBUM:try{const t=await ri(b,u.uri,100,0);e&&t&&r(t.tracks)}catch{r([])}break;case Di.ARTIST:try{const t=await ni(b,u.uri,100,0);e&&t&&r([...t.albums,...t.tracks])}catch{r([])}}})(),()=>{e=!1}}),[u,y,l,b,a]),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("section",{className:S.A.playlistInlineCurationSection,children:[(0,p.jsxs)("div",{className:S.A.playlistInlineCurationWrapper,children:[(0,p.jsx)(n.E,{as:"h1",className:S.A.playlistInlineCurationTitle,variant:"titleSmall",children:d.R.get("playlist.curation.title")}),(0,p.jsx)(s.Suspense,{fallback:null,children:(0,p.jsx)(xi,{placeholder:a?d.R.get("playlist.curation.search_placeholder-booklists"):d.R.get("playlist.curation.search_placeholder"),onFocus:()=>{t(!0)},onChange:e=>{m(e)}})})]}),(0,p.jsx)("button",{className:S.A.playlistInlineCurationCloseButton,onClick:()=>t(!1),children:(0,p.jsx)($a.M,{"aria-label":d.R.get("close")})})]}),null!==u&&u.navType!==Di.SEARCH?(0,p.jsxs)("button",{className:S.A.playlistInlineCurationBackButton,onClick:()=>h(),children:[c?(0,p.jsx)(ws.V,{"aria-label":d.R.get("navbar.go-back"),className:S.A.icon}):(0,p.jsx)(Ps.g,{"aria-label":d.R.get("navbar.go-back"),className:S.A.icon}),(0,p.jsx)(n.E,{as:"p",variant:"bodyMediumBold",children:u.title})]}):null,(0,p.jsx)("div",{className:S.A.searchResultListContainer,"data-testid":"playlist-inline-curation-results",children:(0,p.jsx)(zi,{playlistUri:e,term:y,level:u,resultList:i,navToEntity:x,navToResults:g,isRTL:c,isBooklist:a})})]})};var Vi=a(12868),$i=(a(84856),a(30649));const Ki={ARTIST:"artist",ALBUM:"album",PLAYLIST:"playlist",TRACK:"track",USER:"user"},qi=e=>{const t=e.replace(/\+/g,"%20");return decodeURIComponent(t)},Qi=e=>{const t=/^spotify:(.*)$/.exec(e);if(!t)return{type:null,id:null};const a=t[1],s=/([^:]+):([^:]+)/g;let i;const r=[],n=[];for(;i=s.exec(a);){const e=i[1];let t=i[2];e===Ki.USER&&(t=qi(t)),r.push(e),n.push(t)}if(0===r.length)return{type:null,id:null};const l=r.reduce(((e,t,a)=>(e[r[a]]=n[a],e)),{});return{type:r[r.length-1],id:n[n.length-1],...l}};var Wi=a(51889),Gi=a(4257);const Yi=new Os.l("getAudiobooksMetadata","query","e04c61a831b3e1861a5de961c520ddf7834127ef8e4b94724173a4c4a90e38fe",null),Ji=3e5;function Xi(e,t){return["list-extender",e,t]}const Zi=(e,t,a=10,i)=>{const r=2*a,n=3*a,l=(0,Je.jE)(),c=(0,s.useRef)(0),[d,u]=(0,s.useState)(e),[m,p]=(0,s.useState)((()=>l.getQueriesData({queryKey:Xi(e,t),stale:!1}).at(0)?.[1]??[])),h=(0,s.useRef)(m.map((e=>e.uri??""))),{spec:x,logger:g}=(0,Re.r)(o.K,{data:{uri:e}}),y=(0,s.useMemo)((()=>x.recommendedFactory()),[x]);(0,Gi.e)(Wi.Lj.OPERATION_COMPLETE,(({data:a})=>{a.uri===e&&(a.operation===Wi.sP.ADD?p((e=>e.filter((e=>a.uris.every((t=>t!==e.uri)))))):a.operation===Wi.sP.REMOVE&&p((e=>e.filter((e=>a.items.every((t=>t.uri!==e.uri)))))),a.operation!==Wi.sP.ADD&&a.operation!==Wi.sP.REMOVE||l.invalidateQueries({queryKey:Xi(e,t)}))}));const b=(0,s.useRef)(!0);(0,s.useEffect)((()=>(b.current||(p([]),u(e),h.current=[],c.current=c.current+1),b.current=!0,()=>{c.current=c.current+1})),[e]),(0,s.useEffect)((()=>{if(m.length<r){const e=Math.min(r,n-m.length),a=c.current,s=Xi(d,t),o=b.current&&0===h.current.length;(o?l.fetchQuery({queryKey:s,queryFn:()=>i(d,[],e),staleTime:Ji,gcTime:Ji}):i(d,h.current,e)).then((t=>{if(a!==c.current||!t)return;const i=t.map((e=>e?.uri&&e.uri)).filter((e=>null!==e));t.length<e&&h.current.length?h.current=[]:h.current=[...h.current,...i],p((e=>[...e,...t])),o&&l.setQueryData(s,t)}))}b.current=!1}),[r,n,d,m.length,l,i,t]);const f=(0,s.useCallback)((()=>{if(x){const e=y.refreshButtonFactory().hitRefreshContent();g.logInteraction(e)}p((e=>e.slice(a)))}),[g,y,x,a]);return{recommendations:m.slice(0,a),_bufferedRecommendations:m.slice(a),refresh:f}},er=s.memo((function({uri:e}){const{recommendations:t,refresh:a}=((e,t=10)=>{const a=(0,s.useContext)($i.w),{request:i}=(0,s.useContext)(Ms.jH),r=(0,s.useCallback)((async(e,t,s)=>{const r=await a.getRecommendedBookUris(e,t,s),n=await i(Yi,{uris:r});return n?.data?.podcasts.map((e=>"Audiobook"===e.__typename?Vs(e):null)).filter(Qs.P)??[]}),[a,i]);return Zi(e,"book",t,r)})(e),{draggable:i,onDragStart:r}=(0,U.P)(),l=(0,Vi.p)();return l?t?.length&&t.length>0?(0,p.jsxs)("div",{className:S.A.recommendedTrackList,children:[(0,p.jsx)("div",{className:S.A.top,children:(0,p.jsxs)("div",{className:S.A.header,children:[(0,p.jsx)(n.E,{variant:"titleSmall",children:d.R.get("playlist.extender.recommended.title")}),(0,p.jsx)(n.E,{variant:"bodySmall",className:S.A.subtitle,children:d.R.get("playlist.extender.songs.in.playlist")})]})}),l&&(0,p.jsxs)(p.Fragment,{children:[t.map(((t,a)=>t?(0,p.jsx)(Bt,{contextUri:e,featureIdentifier:"playlist_recommendations",book:t,sharingInfo:t.sharingInfo,isRecommendation:!0,draggable:i,onDragStart:e=>{r(e,{itemUris:[t.uri],itemMimeTypes:[Dt.fl.AUDIOBOOKS],dragLabelText:t.name})},showSeparator:0!==a},a):null)),(0,p.jsx)(ka.H,{className:S.A.refreshButton,onClick:a,children:d.R.get("playlist.extender.refresh")})]})]}):null:(0,p.jsx)("div",{className:S.A.recommendedTrackList,children:(0,p.jsx)("div",{className:S.A.top,children:(0,p.jsxs)("div",{className:S.A.header,children:[(0,p.jsx)(n.E,{variant:"titleSmall",children:d.R.get("playlist.extender.recommended.title")}),(0,p.jsx)(n.E,{variant:"bodySmall",className:S.A.subtitle,children:d.R.get("web-player.playlist.recommender-dsa-message")})]})})})})),tr=s.memo((function({playlistUri:e,canEdit:t,tracks:a}){const{usePlayContextItem:i}=(0,oe.P)({uri:e.replace("spotify:","spotify:internal:recs:"),pages:[{items:a.map((e=>({...e,provider:null,type:D.c.TRACK,uid:null})))}]},{featureIdentifier:"playlist_recommendations"}),r=(0,s.useCallback)(((a,s)=>{const r=a.duration;return(0,p.jsx)(Ft.$T,{index:s,imgUrl:a.album.imageUrl,contextUri:e.replace("spotify","spotify:internal:recs"),uri:a.uri,isPlayable:!a.isMOGEFRestricted,name:a.name,artists:a.artists,album:{...a.album,imgUrl:a.album.imageUrl},isExplicit:a.explicit,isMOGEFRestricted:a.isMOGEFRestricted,usePlayContextItem:i,durationMs:r,shouldRenderDuration:!t,internalLink:!0},`${s}-${a.uri}`)}),[e,i,t]),n=(0,s.useMemo)((()=>[Ft.$C.TITLE_AND_ARTIST,Ft.$C.ALBUM,Ft.$C.ADDED_AT,Ft.$C.ADD]),[]),l=(0,s.useCallback)((e=>({uri:e.uri,uid:e.id})),[]),o=(0,s.useMemo)((()=>a.slice(0,Math.min(a.length,10))),[a]);return(0,p.jsx)(Ft.S4,{ariaLabel:d.R.get("playlist.extender.recommended.header"),nrTracks:Math.min(a.length,10),rowPlaceholder:Ft.qq,tracks:o,renderRow:r,resolveItem:l,columns:n},`${e}-recommended`)})),ar=s.memo((function({playlistUri:e,playlistLength:t,canEdit:a}){const{recommendations:i,refresh:r}=((e,t=10)=>{const a=(0,s.useContext)($i.w),i=(0,s.useCallback)((async(e,t,s)=>{const i=t.map((e=>Qi(e).id??""));return a.getRecommendedTracks(e,i,s)}),[a]);return Zi(e,"track",t,i)})(e),l=!t||0===t,o=(0,Vi.p)(),c=`${e}|${u=i,u?u.map((e=>e.uri)):[]}`;var u;ee({context:c,shouldFire:!!i.length});const m=l?d.R.get("playlist.extender.title.in.playlist"):d.R.get("playlist.extender.songs.in.playlist");return o?i.length>0?(0,p.jsxs)("div",{className:S.A.recommendedTrackList,children:[(0,p.jsx)("div",{className:S.A.top,children:(0,p.jsxs)("div",{className:S.A.header,children:[(0,p.jsx)(n.E,{variant:"titleSmall",children:d.R.get("playlist.extender.recommended.title")}),(0,p.jsx)(n.E,{variant:"bodySmall",className:S.A.subtitle,children:m})]})}),o&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(tr,{playlistUri:e,canEdit:a,tracks:i}),(0,p.jsx)(ka.H,{className:S.A.refreshButton,onClick:r,children:d.R.get("playlist.extender.refresh")})]})]}):null:(0,p.jsx)("div",{className:S.A.recommendedTrackList,children:(0,p.jsx)("div",{className:S.A.top,children:(0,p.jsxs)("div",{className:S.A.header,children:[(0,p.jsx)(n.E,{variant:"titleSmall",children:d.R.get("playlist.extender.recommended.title")}),(0,p.jsx)(n.E,{variant:"bodySmall",className:S.A.subtitle,children:d.R.get("web-player.playlist.recommender-dsa-message")})]})})})})),sr=s.lazy((()=>a.e(4789).then(a.bind(a,4926)))),ir=s.lazy((()=>Promise.resolve().then(a.bind(a,96932)))),rr=s.lazy((()=>a.e(3632).then(a.bind(a,11451)))),nr=s.lazy((()=>a.e(9718).then(a.bind(a,27006)))),lr=new Set([]),or=s.memo((function({playlist:e,capabilities:t}){const{metadata:{uri:a,name:m,images:h,totalLength:x,unfilteredTotalLength:g,isOwnedBySelf:C,hasEpisodes:j,canAdd:R,canRemove:v,formatListData:A,hasDateAdded:k,collaborators:T,isPublished:B,hasSpotifyAudiobooks:D,hasSpotifyTracks:F},contents:{items:K}}=e,{spec:q,logger:Q,UBIFragment:W}=(0,Re.r)(o.K,{data:{uri:a}}),G=(0,$.n)(),Y=(0,l.NC)(ve.Cf,{loadingValue:!1}),X=(0,l.NC)(ve.Mc,{loadingValue:!1}),re=(0,l.NC)(J.FQE,{loadingValue:!1}),{isCompactMode:ne}=(0,P.an)(),de=s.useMemo((()=>q.headerFactory()),[q]),ue=s.useMemo((()=>q.tracklistFactory()),[q]),me=s.useMemo((()=>q.actionBarFactory()),[q]),pe="chart"===A?.type,ge="concerts-near-you"===A?.type&&Y,ye="live-streams"===A?.type,fe=["blend","celebrity-blend","friends-mix"].indexOf(A?.type||"")>-1,Se=[F,j,D].filter(Boolean).length>1,Ie=!Se&&!!D&&(0,Ls.R)(K),Ee="artistsets"===A?.type||"this-is"===A?.attributes["editorial.series"],Ne=A?.attributes||{},_e=Ne.header_image_url_desktop||Ne.image_url||null,Le=R&&v,{inlineCurationModeIsOn:we,handleInlineCurationModeChange:Pe}=((e,t)=>{const[a,i]=(0,s.useState)(e&&0===t),{scrollNodeChildRef:r}=(0,s.useContext)(ie.bi),n=(0,s.useRef)(a);return(0,s.useEffect)((()=>{const e=!n.current;r&&e&&a&&r.current?.scrollIntoView({block:"end",behavior:"smooth"}),n.current=a}),[r,a]),{inlineCurationModeIsOn:a,handleInlineCurationModeChange:e=>{i(e)}}})(Le&&(!Ie||X&&re),g),{productState:Ue}=(0,i.d4)(Z.Ht),Me=!!Ue&&parseInt(Ue.ads,10)>0,Oe="spotify"===e.metadata.owner.username,Be=(0,i.wA)(),De=(0,r.wQ)(),Fe=(0,r.zy)(),ze=(0,l.NC)(J.$pS,{loadingValue:!1}),He=(0,l.NC)(J.vQ3,{loadingValue:!1}),Ve=(0,l.NC)(J.UPi,{loadingValue:!1}),$e=(0,w.useThisisPlaylistExtensionQuery)({uri:a},{gcTime:5*le.i,enabled:Ee}).data?.playlistV2,Ke="Playlist"===$e?.__typename?$e.artistsOnTour?.[0]:null,qe=Ve&&"Playlist"===$e?.__typename?$e.concerts?.items.map((e=>e.data)):null,Qe=qe?.flatMap((e=>"ConcertV2"===e.__typename?[e]:[])).map((e=>{const t=[e.location.name,e.location.city].join(d.R.getSeparator()),a=e.artists.items.flatMap((e=>"Artist"===e.data.__typename?[e.data]:[]));return{venue:t,title:e.title,uri:e.uri,startDate:e.startDateIsoString,imageUrl:a[0]?.visuals.avatarImage?.sources[0]?.url}})),We="POP"!==De?new URLSearchParams(Fe.search).get("uid"):null,Ge=(0,V.W)(),{filter:Ye}=(0,s.useContext)(E.gM),{sortState:Je}=(0,s.useContext)(N.cL),Xe=(0,s.useContext)(ce.wO),Ze=(0,s.useRef)(null),et=(0,s.useRef)(null),[tt]=h,at=(0,te.H)(null!==_e?_e:tt?.url||null),{isPlaying:st,isActive:it,togglePlay:rt,usePlayContextItem:nt}=(0,oe.P)(function(e,t,a){const s={uri:e};return he(s,t),be(s,(0,xe.HI)(a)),s}(a,(0,I.Xt)(Je),Ye),{featureIdentifier:"playlist"}),lt=(0,s.useCallback)((()=>{const e=(0,se.$I)({isPlaying:st,isActive:it,spec:me.playButtonFactory(),logger:Q,uri:a});rt({loggingParams:e})}),[st,it,rt,me,Q,a]),ot=(0,s.useCallback)((e=>{const t=e.split(/[\r\n]+/g).map((e=>(0,c.o_)(e))).filter((e=>null!==e&&((0,c.U_)(e)||(0,c.gH)(e)||(0,c.Pk)(e))));if(t.length>0&&R){const e=t.map((e=>e.toURI())),s=Ze.current?.getSelected()?.slice(-1)?.[0],i={after:s??"end"};Be((0,u.io)(a,e,i))}}),[R,Be,a]);(0,ae.xC)(ot);const ct=(0,s.useCallback)(((e,t)=>{const s=[...t[U.O[c.NQ.TRACK]]||[],...t[U.O[c.NQ.LOCAL_TRACK]]||[],...t[U.O[c.NQ.EPISODE]]||[],...t[U.O[c.NQ.ALBUM]]||[]];s.length>0&&R&&(Q.logInteraction(q.dragAddToPlaylist({playlist:a,itemToBeAdded:s[0]})),Be((0,u.io)(a,s)),Ge({targetUri:a,intent:"add",type:"drop"}))}),[R,Q,q,a,Be,Ge]),dt=(0,Ce.oC)(Ae.P.RichPlaylistPages,Fe),ut=(0,c.o_)(a)?.id;(e=>{const t=(0,i.wA)(),a=(0,M.c)(),r=(0,i.d4)(z);(0,s.useEffect)((()=>{a&&e!==r&&t((0,O.SC)(e))}),[e,r,t,a])})(a);const mt=(0,i.d4)(H),pt=(({treatment:e,entityId:t,experimentId:a,treatmentVariation:s})=>{if(e&&e[t]){const i=e[t].find((e=>e.experimentId===a));return i?.treatment===s}return!1})({treatment:mt||{},entityId:ut||"",experimentId:ke.RPP,treatmentVariation:Te.VARIANT});const ht=!Oe&&(dt||pt)&&0!==g,xt=!Ie&&G&&(Le&&!we||ht),gt=Ie&&X&&re&&G&&(Le&&!we||ht),yt=(!Ie||X&&re)&&C&&G,bt=!Le&&!Ie&&!ht&&G;ee({context:a,shouldFire:!xt});const ft=T?.count??1,[Ct]=(0,_.z1)(),jt="plays"===Ne.rank_type,Rt=(0,s.useMemo)((()=>(0,I.Ey)({isMixedMedia:Se,hasEpisodes:j,hasSpotifyAudiobooks:D,hasDateAdded:k,isLive:ye,isConcert:ge,isBlend:fe,nrCollaborators:ft,isBooklist:Ie,isCompactMode:ne,isChart:pe,showPlayCount:jt})),[Se,j,D,k,ye,ge,fe,ft,Ie,ne,pe,jt]),vt=(0,s.useMemo)((()=>{let e;return e=Xe.getCapabilities().canSort?Ie?new Set(N.dh):new Set((0,I.zq)(Rt)):lr,e}),[Rt,Ie,Xe]),At=re&&Ie&&!ne;return(0,p.jsxs)(s.Suspense,{fallback:null,children:[(0,p.jsx)(f.Q,{children:(0,je.Q2)({playlistName:m,userName:e.metadata.owner.displayName||"",isSpotifyOwned:Oe})}),(0,p.jsx)(b.A,{types:R&&!Ie?[U.O[c.NQ.TRACK],U.O[c.NQ.LOCAL_TRACK],U.O[c.NQ.EPISODE],U.O[c.NQ.ALBUM]]:[],onDrop:ct,children:(0,p.jsxs)("section",{role:"presentation",className:S.A.playlist,"data-testid":"playlist-page","data-test-uri":a,children:[(0,p.jsx)(ks.x,{metadata:e.metadata,isPlaying:st,isPublished:B,totalItems:Ct,togglePlay:lt,backgroundColor:at,spec:de}),(0,p.jsxs)("div",{className:S.A.playlistContent,children:[(0,p.jsx)(js,{playlist:e,capabilities:t,spec:me,isPlaying:st,isActive:it,togglePlay:lt,isBooklist:Ie,backgroundColor:at,tracklistDomRef:et,isConcert:ge,sortableColumns:vt}),(0,p.jsx)(s.Suspense,{fallback:null,children:(0,p.jsx)(sr,{formatListData:e.metadata.formatListData})}),!Ve&&Ke?.upcomingEventsCount?(0,p.jsx)(ir,{artistConcertsUri:Ke.uri||"",artistImageUrl:Ke.imageUrl||"",artistName:Ke.title||"",spec:q}):null,Ve&&!!Ke&&Qe&&Qe.length>0&&(0,p.jsx)(s.Suspense,{fallback:null,children:(0,p.jsx)(rr,{liveEvents:Qe,artistConcertsUri:Ke.uri||"",artistName:Ke.title||"",spec:q})}),(0,p.jsxs)("div",{className:"contentSpacing",children:[Me?(0,p.jsx)(y,{playlistUri:a}):null,ze&&Me&&Oe?(0,p.jsx)(nr,{uri:a,playlistName:m}):null,e.metadata.hasSpotifyAudiobooks&&He&&(0,p.jsxs)("div",{className:S.A.noBooklistSupportContainer,children:[(0,p.jsx)(n.E,{variant:"bodyMediumBold",semanticColor:"textBase",children:d.R.get("web-player.playlist.booklist-not-supported-title")}),(0,p.jsx)(n.E,{variant:"bodyMedium",semanticColor:"textSubdued",children:d.R.get("web-player.playlist.booklist-not-supported.message")})]}),x>0&&(0,p.jsx)(s.Suspense,{fallback:null,children:At?(0,p.jsx)(Gt,{initialItems:K,contextUri:a,nrItems:x,canEdit:Le,canRemove:v,ariaLabel:m}):(0,p.jsx)(W,{spec:ue,children:(0,p.jsx)(L.a,{columns:Rt,children:pe?(0,p.jsx)(aa,{ariaLabel:m,nrTracks:x,playlistUri:a,scrollToUid:We,usePlayContextItem:nt,tracklistDomRef:et,sortableColumns:vt,isCompactMode:ne},a):(0,p.jsx)(_s,{ariaLabel:m,nrTracks:x,playlistUri:a,playlistName:m,isMixedMedia:Se,isLive:ye,isConcert:ge,isBlend:fe,isBooklist:Ie,canEdit:Le,scrollToUid:We,feedbackPath:Ne["dislike-endpoint"],deleteFeedbackPath:Ne["delete-endpoint"],usePlayContextItem:nt,tracklistRef:Ze,tracklistDomRef:et,canRemove:v,spec:ue,initialItems:K,isCompactMode:ne,sortableColumns:vt,hasSpotifyAudiobooks:D??!1},a)})})}),yt&&(0,p.jsx)(s.Suspense,{fallback:null,children:we?(0,p.jsx)(Hi,{playlistUri:a,onCurationModeChange:Pe,isBooklist:Ie}):(0,p.jsx)("button",{className:S.A.seeMore,onClick:()=>{Pe(!0)},children:(0,p.jsx)(n.E,{as:"div",variant:"bodySmallBold",children:d.R.get("playlist.curation.find_more")})})}),xt?(0,p.jsx)("div",{"data-testid":"recommended-track",children:(0,p.jsx)(ar,{playlistUri:a,playlistLength:e.metadata.unfilteredTotalLength,canEdit:Le})}):null,gt?(0,p.jsx)(er,{uri:a}):null,bt&&(0,p.jsx)(ma,{uri:a})]})]}),ge&&(0,p.jsx)(As,{spec:q.footerSectionFactory()})]})})]})})),cr=s.memo((function({uri:e}){const t=(0,s.useContext)(ce.wO).getCapabilities(),{filter:a}=(0,s.useContext)(E.gM),{sortState:i}=(0,s.useContext)(N.cL),{metadataOptions:r,contentsOptions:n}=(0,Wt.$)(i,a),{data:l,isLoading:o,isError:c}=(0,fe.W)(e,r,n);return!l||o?(0,p.jsx)(T.A,{hasError:c,errorMessage:d.R.get("error.not_found.title.playlist"),loadOffline:t.canModifyOffline}):l.metadata.permissions&&!l.metadata.permissions.canView?(0,p.jsx)(k,{uri:e}):(0,p.jsx)(or,{playlist:l,capabilities:t})})),dr=()=>{const{playlistId:e}=(0,r.g)(),t=(0,c.Ps)((e||"").split("&")[0]).toURI();return(0,p.jsx)(ne.P,{surface:re.u.PLAYLIST,uris:[t],children:(0,p.jsx)(N.sn,{uri:t,children:(0,p.jsx)(E.si,{uri:t,children:(0,p.jsx)(_.S1,{children:(0,p.jsx)(cr,{uri:t})})})})})}},69223:(e,t,a)=>{a.d(t,{A:()=>s});const s={cards:"TGW6mpr34dHAhhFh0pfw",tourCard:"pQmF4tvRpUeLWgPKUcW7",cardImage:"mGY3ER0iIvb1NbJ1d7X4",cardContent:"JHz_5gqDYpq9Lw3pIac_",subtitle:"oTFzEDWGQSLME1nHjJrt",title:"HPCUzqQRn7oae4vJa3y9",venue:"YxZlxyNx0MHxSVO51TVQ",cardLink:"_B5m05rOGq0BKdTa7al5",cardButton:"StPcf0AvSM0c18nwF4hJ",eventCard:"KhaSITGJnz5MH4qDsYkK",interestedIcon:"ERx0RCdRdFFmYdmZR1P5",concertsCarousel:"nX5e9EyU1GmU42OFVHwH",carouselContent:"MIgjuGue6dRaJWwfUX0K",allEventsCard:"C5dyMaEg91RyIp9YajnW",concertsCarouselControls:"himyaJTaj2PpeC7nuAH5",carouselControlPrev:"KfXbOs2l5lLjtz9R4DiW",carouselControlNext:"yy5akXrxTifXTssHWubJ"}}}]);
//# sourceMappingURL=xpui-routes-playlist.js.map