"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[5962],{16201:(e,a,s)=>{s.r(a),s.d(a,{default:()=>Ve});s(1137);var i=s(79474),r=s(85980),l=s(61343),t=s(43029),n=s(56718),o=s(57157),c=s(56260),d=s(14993),u=s(37298),m=s(75435),h=s(12764),g=s(86778),x=s(96590),b=s(34015),j=s(94315),p=s(86597),y=s(12441),f=s(4405),k=s(20115),v=s(12624),C=s(82871),w=s(17094);const R=new C.l("queryAlbumMerch","query","7b258651f4a220aeab4a0573edbd5cf7edd0acfa4d35de2f18b72235e3300ac4",null);var M=s(2685),U=s(73719),I=s(13274);const P=({albumName:e,albumURI:a})=>{const{data:s}=(i={uri:a},r={gcTime:5*w.i},(0,w.I)(R,i,r));var i,r;const l=s?.albumUnion&&"merch"in s.albumUnion?s?.albumUnion?.merch?.items:[];return l&&l?.length>0?(0,I.jsx)("div",{className:"contentSpacing",children:(0,I.jsx)("div",{className:U.A.albumMerch,children:(0,I.jsx)(M.q,{id:e,uri:a,merchItems:l,merchVariant:"Album page merch items"})})}):null};var A=s(35599),N=s(60214),z=s(53846),L=s(25005),S=s(1821),T=s(89675),B=s(13031),_=s(80427),E=s(15486),F=s(17672),D=s(90604),O=s(70451),V=s(23790),q=s(49882),Q=s(37112),H=s(20533),W=s(63441),Z=s(29528),$=s(35583),J=s(33032),X=s(68759),K=s(43608),Y=s(65948),G=s(2346),ee=s(49245),ae=s(71138),se=s(42958),ie=s(64541);const re="n8Bz0c0v17whD3KfMdOk",le="zddjxV2lX9ukNM5QXloA",te="lVqlPjQLuQhK2flsxB78",ne="O_EguRjsZ4uI1hHamkOA",oe="jcaQQxoVnuuhtVwDJU1R",ce="fLS8v3_EfBadEerbGVoR",de="in4OjUTflcsoj9RUpf05",ue="vveb4Rn0dK_r8YUM7L_n",me=i.memo((function({uri:e,togglePlay:a,isPlaying:s,isActive:r,spec:l,logger:t,backgroundColor:n,name:o,artists:c,isPlayable:d,sharingInfo:m}){const x=(0,Y.W)(),b=(0,G.n)(),j=(0,V.t)(),p=(0,i.useMemo)((()=>l.actionBarFactory()),[l]),[y,k]=(0,V.A)(e),v=(0,i.useCallback)((()=>{const i=(0,ee.$I)({isPlaying:s,isActive:r,spec:p.playButtonFactory(),logger:t,uri:e});a({loggingParams:i})}),[s,r,a,p,t,e]),C=(0,i.useCallback)((async()=>{let a;const s=p.saveButtonFactory();a=y?s.hitDislike({itemToBeDisliked:e}):s.hitLike({itemToBeLiked:e}),t.logInteraction(a),x({targetUri:e,intent:y?"unsave":"save",type:"click"});try{await k(!y)}catch{}}),[x,e,y,k,p,t]),w=(0,ie.X)(),R=(0,K.j)();return(0,I.jsx)(H.E,{backgroundColor:n,children:(0,I.jsxs)(W.S,{children:[(0,I.jsx)(f.D,{onClick:v,disabled:!d,isPlaying:s,size:R,uri:e}),w&&(0,I.jsx)(q.r,{spec:p,children:(0,I.jsx)(se.Y,{entityName:o,contextUri:e,activationPlacement:"bottomEnd",size:R})}),(0,I.jsx)(X.h,{uri:e,action:ae.no.SAVE_ALBUM,children:(0,I.jsx)(Z.M,{isAdded:!!y,onClick:C,disabled:!b&&!j?.getCapabilities().canModifyOffline,size:R})}),(0,I.jsx)($.f,{uri:e,isFollowing:!!y,onClick:(a,s)=>(0,ee.Qv)(s,p.downloadButtonFactory(),t,e),onFollow:C,size:R}),(0,I.jsx)(h.bz,{onShow:()=>(0,ee.R2)(p,t),menu:(0,I.jsx)(g.h,{uri:e,artistUri:c?.[0]?.uri,sharingInfo:m}),children:(0,I.jsx)(J.e,{label:u.R.get("more.label.context",o),size:R})}),(0,I.jsx)("div",{className:ue,children:(0,I.jsx)(D.u,{property:Q.mA,renderNewExperience:()=>(0,I.jsx)(O.g,{options:[],onSelect:()=>{},selected:null,enableViewModeMenu:!0})})})]})})}));var he=s(77412);const ge=864e5,xe=365.25*ge;var be=s(66031),je=s(59734),pe=s(25341),ye=s(73534),fe=s(5838),ke=s(16768),ve=s(65474),Ce=s(71310),we=s(466);const Re="TCmZzqInstJMZjkHgnw3",Me="PeNI572tTpqsN23o3QhJ",Ue="oUsSfFiifMPXqW0kHjR6",Ie="XKvEMQZlPfPncTqiitM5",Pe="GdbPVlmUCW0Q6ZZ0z0wh",Ae="Hu7O5y7x5c7wUYFbnIoS",Ne=i.memo((function(e){const{images:a,title:s,isOpen:r,onClose:l}=e,t=(0,i.useMemo)((()=>(0,we.g)(a,{desiredSize:1e4})),[a]);return t?(0,I.jsx)(ve.A,{className:Re,isOpen:r,onRequestClose:l,animation:{modal:{base:Ie,afterOpen:Pe,beforeClose:Ae}},animated:!0,children:(0,I.jsxs)("div",{style:{"--image-width":`${t.width}px`,"--image-height":`${t.height}px`},className:Me,children:[(0,I.jsx)(Ce._,{loading:"eager",alt:s,src:t.url,className:Ue}),(0,I.jsx)(ke.H,{onClick:l,semanticColor:"textBase",children:u.R.get("web-player.cover-art-modal.close")})]})}):null}));var ze=s(48762),Le=s(48507),Se=s(90394);const Te=({releases:e})=>(0,I.jsx)(Le.W,{children:e.map((e=>(0,I.jsx)(Se.D,{role:"menuitem",to:(0,ze.o_)(e.uri).toURLPath(!0),children:e.name},e.uri)))});var Be=s(77737),_e=s(41650),Ee=s(43388);const Fe=i.lazy((()=>s.e(3600).then(s.bind(s,63600))));function De(e){switch(e){case _e._.Single:return u.R.get("single");case _e._.Ep:return u.R.get("ep");case _e._.Compilation:return u.R.get("compilation");case _e._.Audiobook:return u.R.get("card.tag.audiobook");case _e._.Album:default:return u.R.get("album")}}const Oe=({uri:e,album:a})=>{const s=(0,l.zy)(),{spec:y,logger:C,UBIFragment:w}=(0,E.r)(d.E,{data:{uri:e}}),R=(0,i.useMemo)((()=>y.trackListFactory()),[y]),M=(0,i.useMemo)((()=>y.moreByArtistShelfFactory()),[y]),U=a.moreAlbumsByArtist,S=parseInt(new URLSearchParams((0,l.zy)().search).get("index")||"0",10),T=(0,N.J)(e),{usePlayContextItem:D,togglePlay:O,isPlaying:V,isActive:q}=(0,B.P)({uri:T},{featureIdentifier:"album"}),Q=(0,i.useCallback)(((e,a)=>{if(y){const e=y.headerFactory().artistNameFactory().hitUiNavigate({destination:a.creator.uri});C.logInteraction(e)}}),[C,y]),{isOpen:H,openModal:W,closeModal:Z}=(()=>{const[e,a]=(0,i.useState)(!1);return{isOpen:e,openModal:(0,i.useCallback)((()=>a(!0)),[]),closeModal:(0,i.useCallback)((()=>a(!1)),[])}})(),$=(0,c.NC)(ye.WJ1,{loadingValue:!1})?{onClick:W,ariaLabel:u.R.get("web-player.album.open_coverart_modal")}:{},J=(0,i.useCallback)((()=>new URLSearchParams(s.search.slice(1)).get("highlight")||""),[s.search]),X=a.uri,K=a.name,Y=a.albumType,G=a.release?.date,ee=a.release?.precision,ae=a.nrTracks,se=a.images,ie=a.extractedColors?.colorRaw.hex,ue=a.artists,ke=a.isPlayable,ve=a.isCatalogueRestricted,Ce=a.copyright.items,we=a.courtesyLine,Re=a.duration.durationMs,Me=a.duration.isEstimate,Ue=J(),Ie=(0,r.d4)(fe.Ht),Pe=Ie.overrides?.locale??u.R.getLocaleForTranslation(),Ae=(0,pe.W)({uri:e,type:"locale"}),ze=(0,_.qc)({albumName:K,albumType:Y,albumArtists:ue.map((e=>e.name)).join(u.R.getSeparator()),shouldLocalize:Ae,i18n:u.R});(0,z.z6)(ie||null);const Le=function(e){return(0,i.useMemo)((()=>{if(!e?.date)return null;if("day"===e.precision){const a=new Date(e.date),s=(new Date).getTime()-a.getTime(),i=s%xe;return i<3.5*ge||i>312552e5?Math.round(s/xe):null}return null}),[e])}(a.release),{isCompactMode:Se}=(0,A.an)(),Be=(0,v.t)();return(0,I.jsxs)("section",{className:re,"data-testid":"album-page",children:[(0,I.jsx)(x.Q,{children:ze}),null!==Le?(0,I.jsx)(i.Suspense,{fallback:null,children:(0,I.jsx)(Fe,{colorLight:a?.extractedColors?.colorLight.hex,colorDark:a?.extractedColors?.colorDark.hex,name:K,years:Le})}):null,(0,I.jsxs)(b.z4,{backgroundColor:ie,children:[(0,I.jsxs)(j.h,{children:[(0,I.jsx)(f.D,{size:"medium",onClick:()=>O(),disabled:!ke,isPlaying:V,uri:e}),(0,I.jsx)(p.X,{text:K,dragUri:e,dragLabel:K})]}),(0,I.jsx)(h.hy,{menu:(0,I.jsx)(g.h,{uri:a.uri,artistUri:ue?.[0]?.uri,sharingInfo:a.sharingInfo}),children:(0,I.jsx)(b.KU,{dragUri:X,images:se,name:K,placeholderType:"album",...$})}),(0,I.jsxs)(b.Y$,{children:[(0,I.jsx)(be.B,{children:De(Y)}),(0,I.jsx)(h.hy,{menu:(0,I.jsx)(g.h,{uri:a.uri,artistUri:ue?.[0]?.uri,sharingInfo:a.sharingInfo}),children:(0,I.jsx)(b.mm,{dragUri:a.uri,dragLabel:a.name,scaleAtMinWidth:b.tw,children:K})}),(0,I.jsx)(b.tV,{creators:ue,onCreatorClick:Q,releaseDate:G,releaseDatePrecision:ee,totalItems:ae,durationMilliseconds:Re,isEstimatedDuration:Me,hasTracks:!0})]})]}),(0,I.jsx)(me,{backgroundColor:ie,uri:e,togglePlay:O,isPlaying:V,isActive:q,spec:y,logger:C,sharingInfo:a.sharingInfo,name:a.name,artists:a.artists,isPlayable:a.isPlayable}),ve?(0,I.jsxs)("div",{className:le,children:[(0,I.jsx)(t.E,{as:"h2",variant:"bodyMediumBold",className:te,children:u.R.get("windowed.product-album-header")}),(0,I.jsx)("div",{className:ne,children:u.R.get("windowed.product-album-description")})]}):null,(0,I.jsxs)("div",{className:"contentSpacing",children:[(0,I.jsx)(w,{spec:R,children:(0,I.jsx)(k.a,{columns:Be,children:(0,I.jsx)(he.F,{ariaLabel:K,nrTracks:(0,Ee.Y)(a.discs)?a.discs.totalCount+ae:ae,discs:a.discs,albumUri:X,highlightUri:Ue,scrollToIndex:S,usePlayContextItem:D,initalTracks:a.items,isCompactMode:Se})})}),(0,I.jsxs)("div",{className:de,children:[(0,I.jsxs)("div",{children:[G&&(0,I.jsx)(t.E,{as:"p",variant:"bodySmall",children:(0,F.rh)((0,F.ad)(G),Pe,{year:"numeric",month:"long",day:"numeric"},ee)}),(0,I.jsx)(L.Z,{copyrights:Ce,courtesyLine:we})]}),a.releases.items.length>0&&(0,I.jsx)(h.tz,{menu:(0,I.jsx)(Te,{releases:a.releases.items}),children:(e,s,i)=>(0,I.jsxs)("button",{ref:i,className:ce,type:"button",onClick:s,children:[(0,I.jsx)(t.E,{variant:"bodySmall",children:u.R.get("album-page.more-releases",a.releases.items.length)}),e?(0,I.jsx)(n.J,{size:"small"}):(0,I.jsx)(o.y,{size:"small"})]})})]})]}),(0,I.jsx)(P,{albumName:K,albumURI:X}),(0,I.jsx)(I.Fragment,{children:U?.length>0&&(0,I.jsx)("div",{className:"contentSpacing",children:(0,I.jsx)(w,{spec:M,children:(0,I.jsx)(je.p,{index:0,id:"more-albums",className:oe,title:u.R.get("album-page.more-by-artist",ue?.[0]?.name),total:U.length,seeAllUri:`${ue?.[0]?.uri.replace("artist","app:artist")}:discography`,seeAllLabel:u.R.get("artist-page.show-discography"),alwaysShowSeeAll:!0,children:U.map(((e,a)=>(0,I.jsx)(m.R,{index:a,artists:ue,images:e.images||[],name:e.name,uri:e.uri,year:e.year,type:e.albumType,sharingInfo:e.sharingInfo},e.uri)))})})})}),(0,I.jsx)(Ne,{title:ze,isOpen:H,onClose:Z,images:se})]})},Ve=i.memo((function(){const{albumId:e}=(0,l.g)(),a=`spotify:album:${e}`,{loading:s,error:i,data:r,canLoadOffline:t}=(0,Be.$)(a);return s||!r?(0,I.jsx)(y.A,{hasError:null!==i,loadOffline:t,errorMessage:u.R.get("error.not_found.title.album")}):(0,I.jsx)(T.P,{surface:S.u.ALBUM,uris:[a],children:(0,I.jsx)(Oe,{uri:a,album:r})})}))},53846:(e,a,s)=>{s.d(a,{Hk:()=>r.H,z6:()=>i.z});s(2272);var i=s(79730),r=s(4122)}}]);
//# sourceMappingURL=xpui-routes-album.js.map