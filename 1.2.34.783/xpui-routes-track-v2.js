"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[6863],{43659:(e,a,s)=>{s.r(a),s.d(a,{default:()=>Ns});s(1137);var i=s(79474),t=s(97500),r=s.n(t),l=s(61343),n=s(43029),c=s(73189),o=s(16768),d=s(61372),u=s(48762),m=s(37298),h=s(12764),y=s(75450),g=s(34015),p=s(94315),x=s(86597),b=s(12441),j=s(4405),v=s(49245),k=s(25005),L=s(21626);const R="o2TlnuNKxRO5RnB9BpHB",f="q0Ke_aAvTcc4dO4wCHQt",C="UlKUfS_GcROZmofuafOW",I="I5LORTI1u3A6VoUvRCBf",w="TS85Qkpioa31wR0p4kzT",A="yL1DLXBc05CR_ACv_NhA",N="k5kRkUyoz9znqg_SGOVQ";var P=s(80664),U=s(4658),T=s(23e3),E=s(96721),S=s(94135),O=s(22920),D=s(13274);let M=function(e){return e.SMALL="small",e.LARGE="large",e}({});const B=({art:e,disabled:a=!1,LinkComponent:s,name:i,size:t=M.SMALL,type:n,uri:c})=>{const o=e?[e]:[],d=t===M.SMALL?(0,P.C)(n):function(e){switch(e){case O.s.SINGLE:return m.R.get("track-page.from-the-single");case O.s.EP:return m.R.get("track-page.from-the-ep");case O.s.COMPILATION:return m.R.get("track-page.from-the-compilation");case O.s.ALBUM:default:return m.R.get("track-page.from-the-album")}}(n),h=(0,l.Zp)();return(0,D.jsxs)("div",{className:r()(R,{[C]:t===M.SMALL,[f]:a}),children:[(0,D.jsx)("div",{className:I,children:(0,D.jsx)(U.b,{images:o,size:E.Qe.SIZE_80,title:i,type:T.c.ALBUM})}),(0,D.jsxs)("div",{className:w,children:[(0,D.jsx)(S.Z,{variant:t===M.SMALL?"mestoBold":"finale",children:d}),(0,D.jsx)(s,{to:c,children:(0,D.jsx)(S.Z,{as:"div",className:A,variant:"balladBold",dir:"auto",children:i})})]}),(0,D.jsx)("div",{onClick:()=>{h((0,u.o_)(c).toURLPath(!0))},className:N})]})};var F=s(1821),_=s(89675),q=s(13031),z=s(80427),G=s(88879);let Y=function(e){return e.LOADING="LOADING",e.LOADED="LOADED",e.UNAVAILABLE="UNAVAILABLE",e}({});const $=(e,a)=>{switch(a.type){case"LYRICS_LOADING":return{...e,[a.uri]:{status:Y.LOADING}};case"LYRICS_LOADED":return{...e,[a.uri]:{status:Y.LOADED,data:a.response}};case"LYRICS_ERROR":return{...e,[a.uri]:{status:Y.UNAVAILABLE}};default:return(0,G.d)(a,`Unhandled lyrics action with type: ${a.type}`)}};var Z=s(93129),V=s(75212);var W=s(30197);const K=async({trackUri:e,api:a,imageForLyricsRequest:s,isPlayable:i})=>{if(!i)return{hasLyrics:!1};const t=(0,u.o_)(e);try{const e=await(async(e,a,s)=>(await e.build().withHost(V.Hj).withPath(`/track/${encodeURIComponent(a)}/image/${encodeURIComponent(s)}`).withHeaders([{key:"App-Platform",value:"WebPlayer"}]).withQueryParameters({format:"json",vocalRemoval:!1}).withEndpointIdentifier("/track/{trackId}").send()).body)(a||Z.n.getInstance(),t.id,s||"");return{hasLyrics:!0,syncType:e.lyrics.syncType,lyrics:e.lyrics.lines,provider:e.lyrics.provider,providerDisplayName:e.lyrics.providerDisplayName,providerLyricsId:e.lyrics.providerLyricsId,isRtlLanguage:e.lyrics.isRtlLanguage}}catch(e){if(e instanceof W.O&&404===e.status)return{hasLyrics:!1};throw e}},H={status:Y.LOADING},J={status:Y.UNAVAILABLE},Q=i.createContext(void 0),X=({children:e,initialState:a={}})=>{const s=i.useReducer($,a);return(0,D.jsx)(Q.Provider,{value:s,children:e})},ee=({uri:e,isAnonymous:a,imageForLyricsRequest:s,isPlayable:t})=>{const r=i.useContext(Q);if(void 0===r)throw new Error("useTrackEntityLyrics must be used within a TrackEntityLyricsProvider");const[l,n]=r,c=e?l[e]:null;return(0,i.useEffect)((()=>{!c&&e&&(n({type:"LYRICS_LOADING",uri:e}),K({trackUri:e,imageForLyricsRequest:s,isPlayable:t}).then((a=>{n({type:"LYRICS_LOADED",uri:e,response:a})})).catch((()=>{n({type:"LYRICS_ERROR",uri:e})})))}),[n,s,t,c,e]),e&&(0,u.U_)(e)&&!a&&t?c||H:J};var ae=s(15486),se=s(7491),ie=s(59870),te=s(17672),re=s(20115),le=s(12624),ne=s(75991),ce=s(60214),oe=s(44901);const de="oTRKhYD0MZlNPm66W3Tw",ue="sc95MwPalcHwYGZ7j3xN",me="zrCZCfYv4zZiB1HYv9i8",he="RnlxIDmWcYTbbwNSJNjA",ye="SHkxfN1vy0wpRMP1hK7I",ge="COXBS6zLyyxKNYuEAzjZ",pe="sR5IpdOUvoUGYKlC9Dk1",xe="FHMr3WxshoYjZ7jd3YwI",be="Evcwc4KM2tf9xrLbfB8B",je="x4_dsi31Cx2SO1L0uYIj",ve="euPDqfFEBILj9KHDNLC1",ke="x6FPRUKK40oDCPP7g6Ls",Le="k3SPcfaKewjfdYumDcGw",Re="t9C7vRiN1OSC9uWfJEr0",fe="Onv6dO4lntCzKUqYa8PE",Ce="vHNIIDpwcSLuHumlKDbY",Ie=({richTrack:e})=>{const{search:a}=(0,l.zy)(),s=(0,i.useCallback)((()=>new URLSearchParams(a.slice(1)).get("highlight")||""),[a])(),{tracklistRef:t}=(0,oe.h)(),r=e.albumOfTrack,n=(0,ce.J)(r?.uri||""),{usePlayContextItem:c}=(0,q.P)({uri:n},{featureIdentifier:"album"}),o=(0,i.useMemo)((()=>({items:[],totalCount:0})),[]),d=(0,le.t)();return r?(0,D.jsx)("div",{ref:t,className:pe,children:(0,D.jsx)(re.a,{columns:d,children:(0,D.jsx)(ne.F,{ariaLabel:r.name,nrTracks:r.tracks.totalCount,albumUri:r.uri,highlightUri:s,discs:o,usePlayContextItem:c,hasHeaderRow:!1})})}):null};var we=s(29528),Ae=s(35583),Ne=s(33032),Pe=s(23790),Ue=s(20533),Te=s(63441),Ee=s(43608),Se=s(65948),Oe=s(2346);const De=i.memo((function({uri:e,togglePlay:a,isPlaying:s,isActive:t,spec:r,logger:l,backgroundColor:n,name:c,isPlayable:o,albumUri:d,artists:u}){const p=(0,Se.W)(),x=(0,Oe.n)(),[b,k]=(0,Pe.A)(e),L=(0,i.useCallback)((async()=>{p({targetUri:e,intent:b?"unsave":"save",type:"click"});const a=r.saveButtonFactory();l.logInteraction(b?a.hitRemoveLike({itemNoLongerLiked:e}):a.hitLike({itemToBeLiked:e}));try{await k(!b)}catch{}}),[p,e,b,r,l,k]),R=(0,i.useCallback)((()=>{const i=(0,v.$I)({isPlaying:s,isActive:t,spec:r.playButtonFactory(),logger:l,uri:e});a({loggingParams:i})}),[t,s,l,r,a,e]),f=(0,i.useCallback)((()=>{l.logInteraction(r.contextButtonFactory().hitUiReveal())}),[l,r]),C=(0,Ee.j)();return(0,D.jsx)(Ue.E,{backgroundColor:n,children:(0,D.jsxs)(Te.S,{children:[(0,D.jsx)(g.ei,{children:(0,D.jsx)(j.D,{onClick:R,isPlaying:s,disabled:!o,size:C,uri:e})}),(0,D.jsx)(g.ei,{children:(0,D.jsx)(we.M,{isAdded:!!b,onClick:L,disabled:!x,size:C})}),(0,D.jsx)(Ae.f,{uri:e,isFollowing:!!b,onFollow:L,size:C}),(0,D.jsx)(h.bz,{menu:(0,D.jsx)(y.P,{uri:e,albumUri:d,artists:u}),onShow:f,children:(0,D.jsx)(Ne.e,{label:m.R.get("more.label.context",c),size:C})})]})})})),Me="OH5mnpJIVCJozYM3raMt",Be="etw0slM6uVrCi5RR3iDi",Fe=({padded:e,providerDisplayName:a})=>a?(0,D.jsx)(S.Z,{as:"p",dir:"auto",variant:"finale",className:`${Me} ${e?Be:""}`,children:m.R.get("web-player.lyrics.providedBy",a)}):null,_e=({uri:e,imageForLyricsRequest:a,isPlayable:s})=>{const{data:i}=ee({uri:e,imageForLyricsRequest:a,isPlayable:s});return i?.hasLyrics?(0,D.jsx)(Fe,{providerDisplayName:i.providerDisplayName}):null};var qe=s(85980),ze=s(12793);const Ge="QhDsXG1Gmo7XmQWLggAO",Ye="bZgWQj7UxvK8GYKWDA7N",$e="AW61P3tnW5cKJCWtbhFh",Ze=({buttonText:e,onSecondaryButtonClick:a,onPrimaryButtonClick:s,secondaryButtonText:i,text:t})=>(0,D.jsxs)("div",{className:Ge,"data-testid":"static-activation-trigger",children:[(0,D.jsx)(n.E,{className:Ye,variant:"bodyMediumBold",children:t}),(0,D.jsxs)("div",{className:$e,children:[(0,D.jsx)(o.H,{onClick:a,semanticColor:"textBase",children:i}),(0,D.jsx)(ze.$,{onClick:s,colorSet:"invertedLight",children:e})]})]});var Ve=s(35195);const We="T1nqQ4HEh3heHy4RCCKa",Ke="L8zjshPVgUMXyZR4FtOk",He="YMn1FWcFmOz9osBrNvhF",Je="Inbyq3TnvKDOJtcKFTDQ",Qe="lWk5se4WETUOJwaEb8D6",Xe="i8DyQbWCmDV_8N5XGJQT",ea="t5WPFlGTY6GCd9UOFfLu",aa="AGQ3wRyMVK1odq860qnT",sa="ZX_r7uZgPgssaUplfpxT",ia="qrqctaPu2XBpxsw23nPX",ta="XnWidTagai3nQwMPxIMF";var ra=s(89927),la=s(96655);let na=function(e){return e.SMALL="small",e.LARGE="large",e}({});const ca=e=>{const{disabled:a,images:s,LinkComponent:i,name:t,size:n,uri:c,enableI18nRoutes:o,enableI18nAdditionalPages:d}=e,h=n===na.SMALL,y=(0,l.Zp)(),g=(0,u.o_)(c),p=g?.type,x=m.R.getLocaleForURLPath(),b=(0,ra.p)({localeFeatureFlag:o,entityFeatureFlag:d,urlLocale:x,entity:p,type:"link"});return(0,D.jsxs)("div",{className:r()(Ke,{[He]:a}),"data-testid":"track-artist-link-card",children:[(0,D.jsx)(U.b,{shape:U.u.CIRCLE,images:s,size:E.Qe.SIZE_80,title:t,type:T.c.ARTIST}),(0,D.jsxs)("div",{className:r()(Qe,{[Xe]:h}),children:[(0,D.jsx)(S.Z,{variant:"mestoBold",className:Je,children:m.R.get("card.tag.artist")}),(0,D.jsx)(i,{to:c,children:(0,D.jsx)(S.Z,{as:"div",dir:"ltr",className:ea,variant:"balladBold",children:t})})]}),(0,D.jsx)("div",{onClick:()=>{const e=g?.toURL(`/${la.CT}${x}/`);if(g){const a=b?e:g.toURLPath(!0);y(a)}},className:aa})]})},oa=({size:e=na.LARGE,disabled:a=!1,enableI18nRoutes:s,enableI18nAdditionalPages:t,...l})=>{const[n,c]=(0,i.useState)(!1),d=(0,i.useCallback)((()=>{c(!n)}),[n]),u=l.artists;return(0,D.jsxs)("div",{"data-testid":"track-artist-link-card-container",children:[(0,D.jsx)("div",{className:We,children:u.map(((i,c)=>(0,D.jsx)("div",{className:r()({[ia]:n&&c>5,[sa]:c>5}),children:(0,D.jsx)(ca,{name:i.name,uri:i.uri,images:i.images,size:e,LinkComponent:l.LinkComponent,disabled:a,enableI18nRoutes:s,enableI18nAdditionalPages:t},i.id)},`${i.uri}-${c}`)))}),u.length>6&&(0,D.jsx)(o.H,{onClick:d,className:ta,children:(0,D.jsx)(S.Z,{as:"p",variant:"violaBold",children:n?m.R.get("show_less"):m.R.get("mwp.search.artists.all")})})]})};var da=s(32227),ua=s(26972);const ma="EaTxqhHk6J4ecKHwpY5m",ha="dUQl9yd5x_1oWk4L0Ntm",ya="xt5C47eHPYNiriMJxGnC",ga=({words:e,onObserve:a,lyricsInView:s})=>{const{ref:t,inView:r}=(0,ua.Wx)({threshold:0}),l=(0,i.useRef)(!1);return(0,i.useEffect)((()=>{s||(l.current=!1)}),[s]),(0,i.useEffect)((()=>{l.current||r&&(a({text:e,outOfView:!1}),l.current=!0)}),[r,a,e]),(0,D.jsx)(n.E,{ref:t,as:"p",dir:"auto",variant:"bodyMedium",className:ya,children:e})};var pa=s(54871);const xa="q1JbsdMqX7OImgIFWa6J",ba="hAGejMh7SncdbJ5wcfUi",ja="IaG9Zc3xGxeYjsn73RAz",va="zgSEYVU2gMYxihFVEJPn",ka="expandable-lyrics-container";const La=({lyrics:e,lyricsInView:a,onObserve:s,previewCount:t})=>{const[l,c]=(0,i.useState)(!1),{visibleLyrics:o,hiddenLyrics:d}=function(e,a){let s=0,i=-1;for(const[t,r]of e.entries())if(s+=r.words.length,s>a){i=t-1;break}return{visibleLyrics:e.slice(0,i),hiddenLyrics:e.slice(i)}}(e,t),u=l?m.R.get("show_less"):`â€¦${m.R.get("show_more")}`;return(0,D.jsxs)(D.Fragment,{children:[o.map((({words:e},i)=>(0,D.jsx)(ga,{onObserve:s,words:e,lyricsInView:a},`lyrics-seo-line-${i}`))),(0,D.jsx)("span",{"aria-hidden":!l,className:r()(ja,{[va]:l}),children:d.map((({words:e},i)=>(0,D.jsx)(ga,{onObserve:s,words:e,lyricsInView:a},`lyrics-seo-line-${i}`)))}),(0,D.jsx)("button",{className:xa,onClick:()=>{c(!l)},"aria-controls":ka,"aria-owns":ka,"aria-label":u,children:(0,D.jsx)(n.E,{variant:"bodyMediumBold",className:ba,children:u})})]})},Ra=({data:e,eventSender:a,playbackId:s,previewCount:t,trackPageEnhancedEnabled:r,uri:l})=>{const{lyrics:c=[],provider:o,providerLyricsId:d,syncType:u}=e,{ref:h,inView:y}=(0,ua.Wx)({threshold:0}),g=function(e){const{trackUri:a,provider:s,providerLyricsId:t,syncType:r,eventSender:l,playbackId:n}=e,c=(0,i.useRef)(null),[o,d]=(0,i.useState)(!1),[u,m]=(0,i.useState)(0),[h,y]=(0,i.useState)(!1),g=(0,i.useMemo)((()=>(0,pa.W)({lyrics_format:"track-page",track_uri:a,provider:s,provider_lyrics_id:t,sync_type:r,playback_id:n})),[s,t,r,a,n]);return(0,i.useEffect)((()=>{d(!1),m(0),y(!1),c.current=null}),[a]),(0,i.useEffect)((()=>{o&&n&&d(!1)}),[n]),(0,i.useEffect)((()=>{o||u>=140&&h&&(l?.send(g),d(!0))}),[u,o,g,l,h]),(0,i.useCallback)((e=>{const{text:a,outOfView:s}=e;a&&a.length>1&&(m((e=>e+a.length)),o||null!==c.current||(c.current=setTimeout((()=>{y(!0)}),1500))),s&&(c.current&&clearTimeout(c.current),c.current=null,m(0))}),[m,o])}({trackUri:l,provider:o,providerLyricsId:d,syncType:u,eventSender:a,playbackId:s});return(0,i.useEffect)((()=>{y||g({outOfView:!0})}),[y,g]),(0,D.jsxs)("div",{className:ma,ref:h,children:[(0,D.jsx)(n.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",className:ha,children:m.R.get("web-player.lyrics.title")}),!r&&c.map((({words:e},a)=>(0,D.jsx)(ga,{onObserve:g,words:e,lyricsInView:y},`lyrics-seo-line-${a}`))),r&&(0,D.jsx)(La,{lyrics:c,lyricsInView:y,onObserve:g,previewCount:t})]})};var fa=s(357),Ca=s(95616),Ia=s(51173),wa=s(17737),Aa=s(3898);const Na=({uri:e,imageForLyricsRequest:a,isPlayable:s})=>{const[t,r]=(0,i.useState)(420),{trackPageEnhancedEnabled:l}=(0,Aa.Zo)(),{data:n}=ee({uri:e,imageForLyricsRequest:a,isPlayable:s}),c=(0,wa.vh)(),{isPaused:o,currentTrackUri:d,playbackId:u}=(0,Ca.o)((e=>({isPaused:e?.isPaused,currentTrackUri:e?.item?.uri,playbackId:e?.playbackId})),Ia.a),m=!o&&d===e,h=(0,i.useCallback)((()=>{window.innerWidth<=768?r(280):window.innerWidth>768&&280===t&&r(420)}),[t]);return(0,i.useEffect)((()=>{h()}),[h]),(0,fa.s)(h),n&&n?.hasLyrics?(0,D.jsx)(Ra,{data:n,uri:e,eventSender:c,playbackId:m?u:void 0,previewCount:t,trackPageEnhancedEnabled:l}):null};var Pa=s(71653),Ua=s(5838);const Ta=e=>{const{albumArtists:a,columnCount:s,imageForLyricsRequest:t,isPlayable:l,uri:n}=e,c=s-2,o={"--column-count":s,"--left-column-end":c-2,"--right-column-start":c},{isAnonymous:d}=(0,qe.d4)(Ua.Ht),u=(0,Oe.n)(),{data:h,status:y}=ee({uri:n,isAnonymous:d,imageForLyricsRequest:t,isPlayable:l}),g=!!h&&h.hasLyrics&&y!==Y.UNAVAILABLE||d,p=(0,qe.d4)(Pa.MU),x=(0,qe.d4)(Pa.NR);return(0,D.jsxs)(i.Suspense,{fallback:null,children:[g&&(0,D.jsx)("div",{className:r()(me,{[he]:s>5}),style:{...o},"data-testid":"lyrics-container",children:d?(0,D.jsx)(Ze,{buttonText:m.R.get("sign_up"),secondaryButtonText:m.R.get("login"),text:m.R.get("track-page.sign-in-to-view-lyrics"),onPrimaryButtonClick:da.ie,onSecondaryButtonClick:da.PW}):(0,D.jsx)(Na,{uri:n,imageForLyricsRequest:t,isPlayable:l})}),(0,D.jsx)("div",{className:r()(de,{[ue]:s>5&&g}),style:{...o},children:(0,D.jsx)(oa,{artists:a,LinkComponent:Ve.default,disabled:!u,enableI18nRoutes:p,enableI18nAdditionalPages:x})})]})};var Ea=s(96590),Sa=s(37006),Oa=s(89911),Da=s(34092),Ma=s(82871),Ba=s(17094);const Fa=new Ma.l("internalLinkRecommenderTrack","query","8c3372e8c118eafd4e044b843473266ff1c7b9deb03f730080cfcad8646829e7",null);var _a=s(41627),qa=s(2096),za=s(75206),Ga=s(35126),Ya=s(39431),$a=s(10629),Za=s(36476),Va=s(62907),Wa=s(56707),Ka=s(38401),Ha=s(6477),Ja=s(86342),Qa=s(60192),Xa=s(85989);const es="Z9Dr8PkXFtlO8KnnDcxp",as="Bm0LUMlhVIcF5qusgdUP",ss="GIyB7JDkRwjtVL6PSBbg",is="whTIka0YYAkqhqrs26Wa",ts=i.memo((function({uri:e,name:a,imgUrl:s,artists:i,isExplicit:t,index:r,albumUri:l,contextUri:n,isPlayable:c,isMOGEFRestricted:o,totalMilliseconds:d,playcount:u}){const{isActive:h,isPlaying:g,triggerPlay:p,togglePlay:x}=(0,q.P)({uri:e},{featureIdentifier:"ilr"}),b=(0,$a.T)(e),j=(0,Ka.g)(e,c),v=i.map((e=>e.name)).join(m.R.getSeparator()),{badges:k,hasBadges:L}=(0,Za.b)({isMOGEFRestricted:o,downloadAvailability:b,isExplicit:t}),R=i.map((e=>e.name)).join(m.R.getSeparator()),f=(0,Wa.c)();return(0,D.jsx)(Ya.pZ,{value:"row",index:r,children:(0,D.jsx)(_a.h,{menu:(0,D.jsx)(y.P,{uri:e,albumUri:l,artists:i,contextUri:n}),children:(0,D.jsxs)(Xa.w,{uri:e,contextUri:n,isPlayable:j,onTriggerPlay:(e,a)=>{p({loggingParams:a})},isActive:h,index:r,ariaRowIndex:r,dragMetadata:{name:a,createdBy:v},children:[(0,D.jsxs)(Ja.U6,{ariaColIndex:0,children:[(0,D.jsx)(Ja.uF,{uri:e,src:s,onClick:(e,a)=>{x({loggingParams:a})},isLocked:!1,isPlaying:g,isActive:h,playAriaLabel:m.R.get("tracklist.a11y.play",a,v)}),(0,D.jsxs)(Ja.l1,{children:[(0,D.jsx)(Ha.R,{uri:e,enabled:f,className:ss,children:(0,D.jsx)(Ja.pJ,{titleText:a,children:a})}),L&&(0,D.jsxs)(Ja.Pe,{children:[k.download&&(0,D.jsx)(qa._,{}),k.explicit&&(0,D.jsx)(za.g,{}),k.nineteen&&(0,D.jsx)(Ga.q,{className:is,size:16})]}),(0,D.jsx)(Ja.pj,{children:(0,D.jsx)(Ja.lw,{artists:i})})]})]}),(0,D.jsx)(Ja.oi,{ariaColIndex:1,children:(0,D.jsx)(Qa.Y,{playcount:u})}),(0,D.jsxs)(Ja.lH,{ariaColIndex:2,children:[(0,D.jsx)(Va.d,{uri:e}),(0,D.jsx)(Ja.Po,{duration:d}),(0,D.jsx)(Ja.Y8,{menu:(0,D.jsx)(y.P,{uri:e,albumUri:l,contextUri:n,artists:i}),label:m.R.get("more.label.track",a,R)})]})]})})})}),((e,a)=>e.uri===a.uri&&e.index===a.index));var rs=s(97572),ls=s(51773),ns=s(96209);const cs=i.memo((function({subtitle:e,uri:a}){const{data:s}=(t={uri:a,strategy:Da.N0.ContentOnly},(0,Ba.I)(Fa,t,r));var t,r;const l=s?.seoRecommended.items,o=(0,i.useMemo)((()=>l?.slice(0,Math.min(l.length,5))),[l]),d=(0,i.useCallback)((e=>({uri:"uri"in e.data?e.data.uri:""})),[]),u=(0,i.useMemo)((()=>[ls.$C.TITLE_AND_ARTIST,ls.$C.ALBUM,ls.$C.DURATION]),[]),h=(0,i.useCallback)(((e,s)=>{if(!(0,ns.g1)(e.data))return(0,D.jsx)(i.Fragment,{});const t=e.data;return(0,D.jsx)(ts,{index:s,contextUri:a,uri:t.uri,name:t.name,totalMilliseconds:t.duration.totalMilliseconds,imgUrl:t.albumOfTrack?.coverArt?.sources[0]?.url,isPlayable:t.playability.playable,artists:t.artists.items.map((e=>({uri:e.uri,id:e.id,name:e.profile.name}))),albumUri:t?.albumOfTrack?.uri||"",isExplicit:t.contentRating?.label===Da.x7.Explicit,isMOGEFRestricted:t.contentRating?.label===Da.x7.NineteenPlus,playcount:parseInt(t.playcount||"0",10)},`${s}-${t.uri}`)}),[a]);return l?.length?(0,D.jsxs)("div",{className:es,children:[(0,D.jsxs)("div",{className:as,children:[(0,D.jsx)(n.E,{variant:"titleSmall",semanticColor:"textBase",children:m.R.get("playlist.extender.recommended.title")}),(0,D.jsx)(n.E,{variant:"bodySmall",paddingBottom:c.CD,children:e})]}),(0,D.jsx)(ls.S4,{ariaLabel:m.R.get("playlist.extender.recommended.title"),nrTracks:Math.min(l.length,5),rowPlaceholder:ls.qq,tracks:o,renderRow:h,resolveItem:d,columns:u},"internal-link-recommender-track-list")]}):null})),os=e=>{const{entityType:a}=e;return(0,D.jsx)(rs.s,{onError:()=>{(0,Oa.fE)({metric_type:Sa.MetricTypes.COUNTER,what:"dwp-ilr-component-error",value:1,tags:{entityType:a}})},children:(0,D.jsx)(cs,{...e})})};var ds=s(70048),us=s(75435);const ms=({album:e,index:a,artistURI:s})=>(0,D.jsx)(Ya.pZ,{value:"card",index:a,children:(0,D.jsx)(us.R,{index:a,latest:!1,showType:!0,...(0,ds.mk)(e,s,e.name)})});var hs=s(29432);const ys=({albums:e,artistName:a,artistId:s,artistUri:i,className:t})=>e?(0,D.jsx)(Ya.pZ,{value:"shelf/albums",children:(0,D.jsx)(hs.$,{total:e.totalCount,title:m.R.get("rich-page.popular-albums-by-artist",{artist:a}),seeAllUri:`${(0,ds.Dh)(s)}:discography:${Da._m.Album.toLowerCase()}`,seeAllLabel:m.R.get("shelf.see-all"),alwaysShowSeeAll:!0,className:t,children:(0,ds.Ey)(e.items).map(((e,a)=>(0,D.jsx)(ms,{album:e,index:a,artistURI:i},e.uri)))})}):null;var gs=s(27582);const ps=({artistId:e,className:a,fansAlsoLike:s,title:i})=>(0,D.jsx)(Ya.pZ,{value:"shelf/fans-also-like",children:(0,D.jsx)(hs.$,{total:s.length,title:i??m.R.get("rich-page.fans-also-like"),seeAllUri:`${(0,ds.Dh)(e)}:related`,className:a,children:s.map(((e,a)=>(0,D.jsx)(Ya.pZ,{value:"card",index:a,children:(0,D.jsx)(gs.a,{index:a,uri:e.uri,name:e.profile.name,images:e.visuals.avatarImage?.sources||[]})},e.uri)))})});var xs=s(46571);const bs="ERm7dIKbVoqGwPb_lXPH",js=({artistName:e,artistUri:a,headerClassName:s,rowClassName:t,topTracks:r,topTracksTransformer:l,uri:c})=>{const o=(0,i.useMemo)((()=>r?.items.map((e=>l(e,c)))),[r?.items,l,c]),{usePlayContextItem:d}=(0,q.P)({uri:a},{featureIdentifier:"artist"});return o&&o.length>0?(0,D.jsxs)("div",{className:t,children:[(0,D.jsxs)("div",{children:[(0,D.jsx)(n.E,{variant:"bodySmall",className:bs,children:m.R.get("rich-page.popular-tracks")}),(0,D.jsx)(n.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",className:s,children:e})]}),(0,D.jsx)(xs.z,{nrTracks:o.length,initialTracks:o,usePlayContextItem:d})]}):null},vs=({artistName:e,artistId:a,artistUri:s,className:i,releases:t,artistImages:r})=>t?(0,D.jsx)(Ya.pZ,{value:"shelf/releases",children:(0,D.jsx)(hs.$,{total:10,title:m.R.get("rich-page.popular-releases-by-artist",{artist:e}),seeAllUri:`${(0,ds.Dh)(a)}:discography:${Da._m.Album.toLowerCase()}`,seeAllLabel:m.R.get("shelf.see-all"),alwaysShowSeeAll:!0,className:i,listRowHeaderProps:r?{title:e,pretitle:m.R.get("artist-page.popular"),media:(0,se.h)(r,{desiredSize:48})||""}:null,children:t.items.map(((e,a)=>(0,D.jsx)(ms,{album:e,index:a,artistURI:s},e.uri)))})}):null,ks=({artistId:e,artistName:a,artistUri:s,className:i,singles:t})=>t?(0,D.jsx)(Ya.pZ,{value:"shelf/singles-and-eps",children:(0,D.jsx)(hs.$,{total:t.totalCount,title:m.R.get("rich-page.popular-singles-and-eps-by-artist",{artist:a}),seeAllUri:`${(0,ds.Dh)(e)}:discography:${Da._m.Single.toLowerCase()}`,seeAllLabel:m.R.get("shelf.see-all"),alwaysShowSeeAll:!0,className:i,children:(0,ds.Ey)(t.items).map(((e,a)=>(0,D.jsx)(ms,{album:e,index:a,artistURI:s},e.uri)))})}):null;var Ls=s(25341),Rs=s(3106),fs=s(80069),Cs=s(42023);const Is=e=>(e.items||[]).map((e=>({name:e.profile.name,images:(e.visuals.avatarImage?.sources||[]).map((e=>({url:e.url,width:e.width,height:e.height}))),uri:e.uri,id:e.id}))),ws=e=>(e||[]).map((e=>e.profile.name)),As=({uri:e,track:a})=>{const s=(0,Oe.n)(),t=(0,Rs.V)(),l=(0,Ls.W)({type:"locale",uri:e}),u=m.R.getLocaleForTranslation(),b=parseInt(a.playcount||"0",10),{firstArtist:R,otherArtists:f,albumOfTrack:C,duration:I,name:w}=a,A=C?.coverArt,N=C?.copyright.items,P=C?.courtesyLine,{date:U,precision:E}=C?.date?(0,ie.mp)(C.date):{date:void 0,precision:void 0},S=A?.extractedColors?.colorRaw.hex,O=(A?.sources||[]).map((e=>({url:e.url,width:e.width||void 0,height:e.height||void 0}))),F={uri:C?.uri||"",name:C?.name||""},_=ws(R.items),G=ws(f.items),Y=Is(R),$=Is(f),Z=[...Y,...$],V=R.items[0],W=a.albumOfTrack,K=W?.playability?.playable,H={artistId:V?.id,artistName:V?.profile?.name,artistUri:V?.uri},J=a.albumOfTrack?.coverArt?.sources,Q=(0,se.h)(J||void 0,{desiredLabel:"large",desiredSize:600})??J?.[0]?.url??"",[ee,re]=(0,i.useState)(!1),le=(0,i.useCallback)((()=>{re(!ee)}),[ee]),ne=f&&f.items.length>5,{spec:oe,logger:de}=(0,ae.r)(d.createDesktopTrackEventFactory,{data:{uri:e}}),ue=a.playability.playable,me=(0,ce.J)(e),{togglePlay:he,isPlaying:pe,isActive:we}=(0,q.P)({uri:me},{featureIdentifier:"track"}),Ae=(0,i.useCallback)((()=>(0,z.rO)({i18n:m.R,trackArtistsList:[..._,...G].join(m.R.getSeparator()),trackName:a.name,shouldLocalize:l})),[_,G,l,a.name]),Ne=(0,i.useCallback)(((e,a)=>{de.logInteraction(oe.headerFactory().artistLinkFactory({position:a.position,uri:a.creator.uri}).hitUiNavigate({destination:a.creator.uri}))}),[de,oe]),Pe=(0,i.useCallback)((()=>{const a=(0,v.$I)({isPlaying:pe,isActive:we,spec:oe.actionBarFactory().playButtonFactory(),logger:de,uri:e});he({loggingParams:a})}),[we,pe,de,oe,he,e]),Ue=W?.uri,Te=(0,i.useMemo)((()=>[...R.items,...f.items].map((e=>({uri:e.uri,name:e.profile.name})))),[R.items,f.items]),Ee=(0,D.jsx)(y.P,{uri:e,albumUri:Ue,artists:Te});return(0,D.jsxs)("section",{"data-testid":"track-page",children:[(0,D.jsx)(Ea.Q,{children:Ae()}),(0,D.jsxs)(g.z4,{backgroundColor:S,children:[(0,D.jsxs)(p.h,{children:[(0,D.jsx)(j.D,{size:"medium",onClick:Pe,disabled:!ue,isPlaying:pe,uri:e}),(0,D.jsx)(x.X,{text:w,dragUri:e,dragLabel:w})]}),(0,D.jsx)(h.hy,{menu:Ee,children:(0,D.jsx)(g.KU,{dragUri:e,images:O,name:w,placeholderType:"album"})}),(0,D.jsxs)(g.Y$,{children:[(0,D.jsx)(n.E,{variant:"bodySmallBold",children:m.R.get("song")}),(0,D.jsx)(h.hy,{menu:Ee,children:(0,D.jsx)(g.mm,{dragUri:e,dragLabel:w,children:w})}),(0,D.jsx)(g.tV,{creators:Y,releaseDate:U,releaseDatePrecision:E,durationMilliseconds:I.totalMilliseconds,onCreatorClick:Ne,isTrack:!0,album:F,playcount:b})]})]}),(0,D.jsx)(De,{uri:e,togglePlay:he,isPlaying:pe,isActive:we,spec:(0,i.useMemo)((()=>oe.actionBarFactory()),[oe]),logger:de,backgroundColor:S,name:w,isPlayable:ue,albumUri:Ue,artists:Te}),(0,D.jsxs)(X,{children:[(0,D.jsxs)("div",{className:"contentSpacing",children:[(0,D.jsx)("div",{className:ye,children:(0,D.jsx)(L.E,{render:({columnCount:a})=>(0,D.jsx)(Ta,{imageForLyricsRequest:Q,albumArtists:Z,columnCount:a,uri:e,isPlayable:ue}),rowGap:c.lT})}),(0,D.jsx)(os,{subtitle:m.R.get("internal-link-recommender.based-on-this-song"),uri:a.uri,entityType:T.c.TRACK}),(0,D.jsx)(js,{artistName:V.profile.name,artistUri:V.uri,headerClassName:be,rowClassName:ye,topTracks:V.discography.topTracks,topTracksTransformer:fs.fX,uri:a.uri}),(0,D.jsx)(vs,{className:xe,releases:V?.discography?.popularReleasesAlbums,...H}),(0,D.jsx)(ys,{albums:V?.discography?.albums,className:xe,...H}),(0,D.jsx)(ks,{className:xe,singles:V?.discography?.singles,...H}),f&&(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("div",{className:ve,children:f.items.map(((e,a)=>(0,D.jsx)(vs,{className:r()(je,{[Le]:a>4,[Re]:ee&&a>4}),releases:e.discography.popularReleasesAlbums,artistName:e.profile.name,artistId:e.id,artistUri:e.uri,artistImages:e.visuals.avatarImage?.sources},e.id)))}),ne&&(0,D.jsx)(o.H,{onClick:le,className:fe,children:(0,D.jsx)(n.E,{as:"h2",variant:"bodySmallBold",children:ee?m.R.get("show_less"):m.R.get("mwp.search.artists.all")})}),(0,D.jsx)(ps,{artistId:V.id,className:r()(xe,{[ke]:f.items.length>0}),fansAlsoLike:V.relatedContent.relatedArtists.items,title:m.R.get("artist-page.fansalsolike")})]}),W&&(0,D.jsx)(B,{art:W.coverArt?.sources[0],disabled:!K||!s,LinkComponent:Ve.default,name:W.name,type:W.type,size:M.LARGE,uri:W.uri}),(0,D.jsx)(Ie,{richTrack:a})]}),(0,D.jsx)("div",{className:"contentSpacing",children:(0,D.jsxs)("div",{className:ge,children:[U&&(0,D.jsx)(n.E,{as:"p",variant:"bodySmall",className:Ce,children:(0,te.rh)((0,te.ad)(U),u,{year:"numeric",month:"long",day:"numeric"},E)}),(0,D.jsx)(k.Z,{copyrights:N||[],courtesyLine:P}),!t&&(0,D.jsx)(_e,{uri:e,imageForLyricsRequest:Q,isPlayable:ue})]})})]})]})},Ns=(0,i.memo)((function(){const{trackId:e=""}=(0,l.g)(),a=(0,u.tR)(e).toURI(),s=(0,Cs.J)({uri:a});return s.loading||s.error||"Track"!==s.data?.trackUnion?.__typename?(0,D.jsx)(b.A,{hasError:!s.loading,errorMessage:m.R.get("track-page.error")}):(0,D.jsx)(_.P,{surface:F.u.TRACK,uris:[a,s.data.trackUnion.albumOfTrack?.uri??null],children:(0,D.jsx)(As,{uri:a,track:s.data.trackUnion})})}))},42023:(e,a,s)=>{s.d(a,{J:()=>l});var i=s(82871),t=s(17094);const r=new i.l("getTrack","query","ae85b52abb74d20a4c331d4143d4772c95f34757bfa8c625474b912b9055b5c0",null),l=(e,a)=>(0,t.I)(r,e,a)}}]);
//# sourceMappingURL=xpui-routes-track-v2.js.map