"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[5783],{90094:(e,t,n)=>{n.d(t,{A:()=>y});var a=n(79474),s=n(43029),o=n(44014),i=n(35195),r=n(91317),c=n(70909);const l="MUiWCNTfb6FcSwVPvQ1V",d="UAk3bMhekwJTV_wIyfsT",m="X9w6LPfKsZHMCs38sVIQ",u="NXn5KjeUOjLGlAfS1Gao",v="N0wgFMDDvCiby4QB5kLJ",g="nloNe2BLRHjz9dxlwfLU",h="FyD0hF1e2PKzRxQ6sYDQ",p="JzXND83mXvcEuntCNR34",x="GR08E4L_rOGljyQQX30R";var j=n(13274);const y=(0,a.memo)((e=>{const{uri:t,title:n,imageUrl:a,date:y,location:f,firstParty:N,onClick:_}=e,b=(0,c.l4)(y);return(0,j.jsxs)(i.Link,{to:t,className:l,"data-testid":"concert-card",onClick:_,children:[a&&(0,j.jsx)(r.b,{children:(0,j.jsx)("div",{role:"img",className:x,style:{backgroundImage:`linear-gradient(180deg, rgba(18, 18, 18, 0) 0%, rgba(6, 6, 6, 0.6) 60%, rgba(0, 0, 0, 0.7) 100%), url(${a})`}})}),(0,j.jsx)("time",{className:d,dateTime:y,children:(0,j.jsx)(s.E,{as:"div",variant:"bodySmallBold",children:(0,c.Fn)(b)})}),(0,j.jsxs)("div",{className:m,dir:"auto",children:[(0,j.jsx)(s.E,{as:"p",className:p,variant:"bodySmall",children:[(0,c.VJ)(b),(0,c.WB)(b)].join(" • ")}),(0,j.jsx)(s.E,{as:"h2",variant:"bodyMediumBold",className:u,children:n}),(0,j.jsxs)("div",{className:v,children:[N&&(0,j.jsx)("span",{className:h,children:(0,j.jsx)(o.D,{size:"small"})}),(0,j.jsx)(s.E,{as:"span",className:g,variant:"bodySmall","data-testid":"location-name",children:f})]})]})]})}))},42168:(e,t,n)=>{n.d(t,{I7:()=>u,bU:()=>v,f7:()=>d,fD:()=>r,he:()=>c,nm:()=>o,oh:()=>m,zm:()=>l});n(62355),n(68607);var a=n(14354),s=n(82190);const o=(e,t)=>{if(!e)return"/concerts";const n=t?.normalize().replaceAll(/\W+/g,"-");return n?`/concerts/location/${e}-${n}`:`/concerts/location/${e}`},i=10;function r(e){if(0===e.length)return[];if(0===e[0].events.length)return[];const t=[];let n={date:e[0].events[0].openingDate.slice(0,i),events:[]};for(const a of e)for(const e of a.events){const a=e.openingDate.slice(0,i);n.date!==a&&(t.push(n),n={date:a,events:[]}),n.events.push(e)}return t.push(n),t}const c=e=>e.ticketers.some((e=>"spotify"===e.partnerDisplayName.toLowerCase())),l=e=>e.concerts.some((({concert:e})=>c(e))),d=e=>{const t=new Date(e);t.setDate(e.getDate()+(6-e.getDay()));const n=new Date(t);return n.setDate(t.getDate()+1),{from:t,to:n}},m=e=>{const t=new Date(e);t.setDate(e.getDate()+(6-e.getDay()));const n=new Date(t);n.setDate(t.getDate()+7);const a=new Date(n);return a.setDate(n.getDate()+1),{from:n,to:a}},u=(e,t)=>!!(e?.from&&e?.to&&t?.from&&t?.to)&&((0,a.r)(e.from,t.from)&&(0,a.r)(e.to,t.to)),v=e=>(0,s.x)(e,{representation:"date"})},43737:(e,t,n)=>{n.r(t),n.d(t,{default:()=>dn});n(1137);var a=n(79474),s=n(85980),o=n(61343),i=n(48581),r=n(4118),c=n(37618),l=n(11807),d=n(85265),m=n(16768),u=n(54794),v=n(99462),g=n(85938),h=n(56260),p=n(57121),x=n(37298),j=n(91846),y=n(34015),f=n(94315),N=n(86597),_=n(5838),b=n(39974),C=n(68256),k=n(15486),I=n(37112),R=n(14354),S=n(73189),D=n(43029),E=n(11520),w=n(34856),L=n(25908),U=n(96590),F=n(15123),M=n(12441),B=n(29432),A=n(97903),O=n(94916),z=n(44014),G=n(62725),H=n(79012),P=n(65474),T=n(35195),W=n(42168),q=n(70909),V=n(19457);const K="cELOd04or4B6BbTbNWA7",J="CHJYbX33oDik9u4n4ohH",$="woQ0wEe6FL4lsGW05bsb",X="KTDREr8pDWjrmnzXzZ2z",Q="UUTvdEOH2v_rejoXdl9Z",Z="cBbTozR921ppaoNZP0Uh",Y="SNyyQ0t_VvlWzzB9li7v",ee="lwO4iko6mhCUgZN1s9AW",te="akvZI06vqHOow1pOL29J",ne="WWZp3WM0maWJzl2qWEHE",ae="YdkAHxbDekz9SiAxHG6M",se="AK37djOBJ2BuJOGuG1kQ",oe="JfYURQbEA_ntMsMZV6tK",ie="du0mOGaZfHg3hsHwRMIu",re="Rvzy4ltiiHIp9mvlxf0c",ce="uEXt8BtfJCONUNVYrAHn";var le=n(13274);const de=(0,a.memo)((e=>{const{concert:t,position:n,modalSpec:s}=e,{id:o,venue:i,location:r}=t,c=t.startDate.localDate,l=(0,q.l4)(c),d="ONLINE"===t.category,m=(0,a.useMemo)((()=>s?.eventRowFactory({position:n,uri:`spotify:concert:${t.id}`})),[s,n,t]),u=(0,b.s)();return(0,le.jsxs)(T.Link,{to:`/concert/${t.id}`,className:ee,onClick:()=>{m&&u.logInteraction(m.hitUiNavigate({destination:`/concert/${o}`}))},children:[(0,le.jsxs)("div",{className:te,"aria-hidden":!0,children:[(0,le.jsx)(D.E,{as:"div",variant:"marginalBold",className:ne,children:(0,q.tj)(l)}),(0,le.jsx)(D.E,{as:"div",variant:"bodyMediumBold",className:ae,children:(0,q.Py)(l)})]}),(0,le.jsxs)("div",{className:se,children:[(0,le.jsx)(D.E,{as:"div",variant:"bodySmallBold",className:oe,"data-testid":"event-title",children:(0,V.DB)(t)}),(0,le.jsx)(O.s,{children:(0,q.Fn)(l)}),(0,le.jsxs)(D.E,{as:"div",variant:"bodySmall",className:ie,children:[(0,q.VJ)(l)," • ",(0,q.WB)(l)]}),(0,le.jsx)("span",{className:ce,children:(0,W.he)(t)&&(0,le.jsx)(z.D,{size:"small"})}),(0,le.jsx)(D.E,{as:"div",variant:"bodySmall",className:re,"data-testid":"event-venue",children:d?i:[i,r].join(x.R.getSeparator())})]})]},t.id)})),me=(0,a.memo)((e=>{const{event:t,locationName:n,onClose:s,feedSpec:o}=e,i=t?.concerts[0]?.concert,r=i?.artists[0],c=(0,a.useMemo)((()=>o?.groupedEventModalFactory({uri:r?.uri||""})),[o,r]),l=(0,b.s)(),d=(0,C.t)(c);if(!t||!i||!r)return null;const m=()=>{c&&l.logInteraction(c.closeButtonFactory().hitUiHide()),s()};return(0,le.jsx)(P.A,{contentLabel:x.R.get("live_events.label"),isOpen:!0,className:K,onRequestClose:m,children:(0,le.jsxs)("section",{className:J,ref:d,children:[(0,le.jsx)("div",{className:$,children:(0,le.jsx)(ue,{"aria-label":x.R.get("close"),iconOnly:G.M,size:"small",onClick:m})}),(0,le.jsxs)("div",{className:X,children:[(0,le.jsx)(H._,{height:"48",width:"48",className:Q,src:r.imageUri}),(0,le.jsxs)("div",{className:Z,children:[(0,le.jsx)(D.E,{as:"h3",variant:"bodyMediumBold",className:Y,"data-testid":"event-venue",children:r.name}),(0,le.jsx)(D.E,{as:"h3",variant:"bodySmall","data-testid":"event-venue",children:`${x.R.get("concerts.count_near_location",t.concerts.length,n)}`})]})]}),t.concerts.map(((e,t)=>(0,le.jsx)(de,{concert:e.concert,position:t,modalSpec:c},e.concert.id)))]})})}));var ue=(0,A.Ay)(m.H).withConfig({displayName:"ConcertFeedGroupedModal___StyledButtonTertiary",componentId:"sc-1o845wh-0"})({color:"#FFFFFF",backgroundColor:"#000000",cursor:"pointer"}),ve=n(49036),ge=n(39807),he=n(6272),pe=n(73534),xe=n(93129),je=n(8e3);const ye=async()=>(await(0,je.oF)(xe.n.getInstance())).body,fe=6e5,Ne=(e,t=h.NC)=>{const n=t(pe.b3k);return(0,ve.I)({queryKey:["concerts",e],queryFn:()=>(async(e,t)=>(await(0,je.Ki)(xe.n.getInstance(),e,t)).body)(e.geonameId,n),staleTime:fe,placeholderData:ge.rX})},_e=e=>{const t=(0,h.NC)(pe.b3k);return(0,he.q)({queryKey:["concerts","all",e],queryFn:({pageParam:n})=>(async(e=1,t,n)=>{const{geonameId:a,startDate:s,endDate:o}=t;return(await(0,je.DX)(xe.n.getInstance(),{page:e,geonameId:a,startDate:s,endDate:o,skipLocationUpdate:n})).body})(n,e,t),staleTime:fe,initialPageParam:1,placeholderData:ge.rX,getNextPageParam:(e,t)=>{if(!(t.length>=50)&&0!==e.events.length)return t.length+1}})},be=e=>{const t=(0,h.NC)(pe.b3k);return(0,ve.I)({queryKey:["concerts","popular",{geonameId:e}],queryFn:()=>(async(e,t)=>(await(0,je.ZV)(xe.n.getInstance(),void 0,e,t)).body)(e,t),staleTime:fe,placeholderData:ge.rX})},Ce=/^(\d+)/,ke=e=>{const t=e?.match(/(202\d)-([01]\d)-([0-3]\d)/);if(!t)return;const[,n,a,s]=t;return new Date(parseInt(n,10),parseInt(a,10)-1,parseInt(s,10))},Ie=e=>{const t=(()=>{const{location:e}=(0,o.g)(),[,t]=e?.match(Ce)||[];if(t)try{return parseInt(t,10)}catch(e){return}})(),[n]=(0,i.ok)(),a=n.get("filter")?.trim();return e.isAnonymous&&!a||"all"===a?{type:"all",geonameId:t}:e.isInterestedEnabled&&"saved"===a?{type:"saved"}:{type:"foryou",geonameId:t}};var Re=n(93825),Se=n(65948);const De="MVPegsivznZB6gdkcnkH",Ee="MlK79hskRbFrN2OBjMkl",we="VxaXFH9Uq1NU0LtsVhIu",Le="vktIWsUczavLRrl4SkRt",Ue="Y1JeRPqrmHKXI1KcstYN",Fe="S667J_S5yumhYS1VoZyw",Me="DbrdfLxSkMqLs3HHrKfo",Be="ofURwIKv0qEXJGTraIis",Ae="LOJZO2MnGW5dCIawF767",Oe="tyc7QRlEJigVFIAeLGOB",ze="PoljWhTLU3MKqIx2gSPY",Ge="ajxCNAuBJSgYfKUUBWBT",He="WR2h2Li5XTrBn_Rdme_k",Pe="WNhsvOyu4doInF525pLE",Te="qSR4imCvzdznIQ4F2kBO",We="BCDMgFFqzEyzC1UqkW3t",qe="jFxUCv1gagc6erXmpgYw",Ve="XOS1JS9iDK8dgeF3GeL5",Ke="LNAJMvRlTPqWsmZvV7Kg",Je="jP10ZUl0Jn2Ijue3fZux",$e="ncN9bwTgIRk6xruAt5T8",Xe="hKG8XDR5S00bjBAibgbI",Qe="XMhrCtHCVSPsNW67vM1m",Ze="vT0t_YE1HgmbnHLLhJD9",Ye=(0,a.memo)((e=>{const{geonameId:t,locationName:n,spec:s}=e,[o,i]=(0,a.useState)(!1),r=(0,C.t)(s),c=`https://concerts.spotifycdn.com/feed_city_images_1/${t}.jpg`;return(0,a.useEffect)((()=>{const e=()=>{i(!0)},t=()=>{i(!1)},n=new Image;return n.addEventListener("load",e),n.addEventListener("error",t),n.src=c,()=>{n.removeEventListener("load",e),n.removeEventListener("error",t)}}),[c]),(0,le.jsx)(le.Fragment,{children:(0,le.jsxs)("div",{className:Xe,ref:r,children:[o&&(0,le.jsx)(H._,{src:c,className:Qe,circle:!0,imageHeight:"56px",imageWidth:"56px"}),(0,le.jsxs)("div",{children:[(0,le.jsx)(D.E,{variant:"bodyMedium",semanticColor:"textSubdued",as:"p",children:x.R.get("live_events.city_info_find_tickets",n)}),(0,le.jsx)(D.E,{variant:"bodyMedium",semanticColor:"textSubdued",as:"p",children:x.R.get("live_events.city_info_view_details")})]})]})})}));var et=n(61765),tt=(n(6891),n(12793)),nt=n(7485);const at="eFIu3aQJuKmf6H4Lb18K",st="LPNL3DZ89Iisp8TMArD3",ot="moVCbo9Ao5YJ5PsH4Qdz",it="URXDMjhb8pQWIDaBrCPC",rt="a3oYct1knu9af60A0v6g",ct="qbIrubbolsixlgVkhO5r",lt="xHihsEV_0W6kpm0wHsXA",dt="T8po_YH39Q9dhAsLAhec",mt={formatCaption:e=>x.R.formatDate(e,{month:"long",year:"numeric"}),formatDay:e=>x.R.formatDate(e,{day:"numeric"}),formatWeekdayName:e=>x.R.formatDate(e,{weekday:"short"})},ut=(0,a.memo)((e=>{const{onDone:t,onClose:n,spec:s}=e,[o,i]=(0,a.useState)(e.dateRange),r=(0,nt.W)(),c=(0,C.t)(s),l=(0,b.s)(),d=new Date,u=(0,W.f7)(d),v=(0,W.oh)(d),g=(0,W.I7)(o,u),h=(0,W.I7)(o,v);return(0,le.jsx)("div",{ref:c,children:(0,le.jsx)(P.A,{isOpen:!0,children:(0,le.jsxs)("section",{className:at,children:[(0,le.jsx)(m.H,{className:st,iconOnly:G.M,size:"small",onClick:n,"aria-label":x.R.get("close_button_action")}),(0,le.jsxs)("div",{className:ot,children:[(0,le.jsx)(D.E,{as:"h3",variant:"bodyMediumBold",children:x.R.get("live_events.date_picker_dialog_title")}),(0,le.jsxs)("div",{className:it,children:[(0,le.jsx)(L.v,{className:rt,size:"md",selectedColorSet:"brightAccent",selected:g,onClick:()=>{i(g?void 0:u),s&&l.logInteraction(s.datePresetButtonFactory({identifier:"thisWeekend",position:0}).hitUiSelect())},children:x.R.get("live_events.this_weekend_preset")}),(0,le.jsx)(L.v,{className:rt,size:"md",selectedColorSet:"brightAccent",selected:h,onClick:()=>{i(h?void 0:v),s&&l.logInteraction(s.datePresetButtonFactory({identifier:"nextWeekend",position:1}).hitUiSelect())},children:x.R.get("live_events.next_weekend_preset")})]})]}),(0,le.jsx)(et.hv,{mode:"range",selected:o,onSelect:i,numberOfMonths:2,defaultMonth:e.dateRange?.from,fromDate:new Date,formatters:mt,dir:r?"rtl":"ltr",modifiersClassNames:{today:ct}}),(0,le.jsxs)("div",{className:lt,children:[(0,le.jsx)(m.H,{className:dt,size:"small",onClick:()=>{i(void 0)},disabled:!o?.from,children:x.R.get("live_events.date_picker_dialog_clear")}),(0,le.jsx)(tt.$,{size:"small",onClick:()=>{if(o?.from){const{from:e,to:n}=o;t({from:e,to:n||e})}else t()},children:x.R.get("live_events.date_picker_dialog_done")})]})]})})})}));var vt=n(48762),gt=n(90094);const ht=(0,a.memo)((e=>{const{concert:t,isVirtual:n,onClick:a}=e,{venue:s,location:o}=t,i=t.artists[0];return(0,le.jsx)(gt.A,{uri:(0,vt.B4)(t.id).toURI(),title:(0,V.a9)(t),imageUrl:i.imageUri,date:t.startDate.localDate,location:n?s:[s,o].join(x.R.getSeparator()),firstParty:(0,W.he)(t),onClick:a})}));var pt=n(91317);const xt="pU4WoqT8T6PmtjPbFtK0",jt="FC5Y_KFJ9rJyTpydqtOW",yt="AAYLcavkBdCuebn9AQxT",ft="lYHCmxpdReachiOORWGo",Nt="JtKEdtTtcK7s6EpGecaC",_t="XuH9DoZCf0aVJ2BxQkTB",bt="myHDa69cI5CHC8fhIhkG",Ct=(0,a.memo)((e=>{const{event:t,onClick:n}=e,s=(0,a.useCallback)((()=>n(t)),[t,n]),o=(0,q.l4)(t.openingDate),i=(0,q.l4)(t.closingDate),r=t.concerts[0].concert,c=r.artists[0];return(0,le.jsxs)(m.H,{onClick:s,className:xt,component:"div","data-testid":"concert-card",role:"button",children:[c.imageUri&&(0,le.jsx)(pt.b,{children:(0,le.jsx)("div",{role:"img",className:bt,style:{backgroundImage:`linear-gradient(180deg, rgba(18, 18, 18, 0) 0%, rgba(6, 6, 6, 0.6) 60%, rgba(0, 0, 0, 0.7) 100%), url(${c.imageUri})`}})}),(0,le.jsx)("time",{className:jt,dateTime:o.toISOString(),children:(0,le.jsx)(D.E,{as:"p",variant:"bodySmallBold",children:(0,q.WZ)(o,i)})}),(0,le.jsxs)("div",{className:yt,dir:"auto",children:[(0,le.jsx)(D.E,{as:"h2",variant:"bodyMediumBold",className:ft,children:(0,V.a9)(r)}),(0,le.jsxs)("div",{className:Nt,children:[(0,W.zm)(t)&&(0,le.jsx)("span",{className:_t,children:(0,le.jsx)(z.D,{size:"small"})}),(0,le.jsx)(D.E,{as:"span",variant:"bodySmall","data-testid":"concerts-count",children:x.R.get("concerts.count",t.concerts.length)})]})]})]})})),kt=(0,a.memo)((e=>{const{event:t,position:n,sectionSpec:s,onOpenGroupedEvent:o}=e,i=t.concerts[0]?.concert,r=i?.id,c=i&&(0,vt.B4)(i.id).toURI(),l=(0,b.s)(),d=(0,a.useMemo)((()=>s?.eventCardFactory({identifier:r??"",position:n,uri:c??""})),[s,r,c,n]),m=(0,C.t)(d),u=e=>{o(e),d&&l.logInteraction(d.hitUiReveal())};if(t.concerts.length>1)return(0,le.jsx)("div",{ref:m,children:(0,le.jsx)(Ct,{event:t,onClick:u})});return(0,le.jsx)("div",{ref:m,children:(0,le.jsx)(ht,{concert:i,isVirtual:"online"===t.source,onClick:()=>{d&&l.logInteraction(d.hitUiNavigate({destination:c}))}})})})),It="yLIDHkmBrjsAVNMCcFM_",Rt="qr_9NXyk7D0t6wclM5R0",St="mDxkFuOd3TBAQI2gXatq",Dt="AQ8ZFs5U45GPiyJnqEvt",Et="E8DcbdVmmoGfC8R8S1Vw",wt="wzS5PwxEhferQEdjumt0",Lt="E0zwnbwA3HzqNi2BV4eq",Ut=(0,a.memo)((e=>{const{event:t,onClick:n}=e,s=(0,a.useCallback)((()=>n(t)),[t,n]),o=(0,q.l4)(t.openingDate),i=(0,q.l4)(t.closingDate),r=t.concerts[0].concert,c=r.artists[0];return(0,le.jsxs)("div",{className:wt,onClick:s,onKeyPress:s,role:"link",tabIndex:0,children:[(0,le.jsx)(H._,{src:c?.imageUri,alt:"",role:"presentation",className:It}),(0,le.jsxs)("div",{className:Rt,children:[(0,le.jsx)(D.E,{as:"span",variant:"bodyMediumBold",className:St,"data-testid":"event-title",children:(0,V.a9)(r)}),(0,le.jsx)(D.E,{as:"span",variant:"bodyMedium",className:Dt,children:(0,q.WZ)(o,i)}),(0,le.jsxs)(D.E,{as:"span",variant:"bodyMedium",className:Et,"data-testid":"event-venue",children:[(0,W.zm)(t)&&(0,le.jsx)(z.D,{size:"small",className:Lt}),x.R.get("concerts.count",t.concerts.length)]})]})]})})),Ft=(0,a.memo)((e=>{const{concert:t,isVirtual:n,onClick:a}=e,{venue:s,location:o}=t,i=t.artists[0],r=(0,q.l4)(t.startDate.localDate);return(0,le.jsxs)(T.Link,{to:`/concert/${t?.id}`,className:wt,"data-testid":"concert-row",onClick:a,children:[(0,le.jsx)(H._,{src:i?.imageUri,alt:"",role:"presentation",className:It}),(0,le.jsxs)("div",{className:Rt,children:[(0,le.jsx)(D.E,{as:"span",variant:"bodyMediumBold",className:St,"data-testid":"event-title",children:(0,V.a9)(t)}),(0,le.jsxs)(D.E,{as:"span",variant:"bodyMedium",className:Dt,children:[(0,q.Y)(r)," • ",(0,q.WB)(r)]}),(0,le.jsxs)(D.E,{as:"span",variant:"bodyMedium",className:Et,"data-testid":"event-venue",children:[(0,W.he)(t)&&(0,le.jsx)(z.D,{size:"small",className:Lt}),n?s:[s,o].join(x.R.getSeparator())]})]})]})})),Mt=(0,a.memo)((e=>{const{event:t,position:n,sectionSpec:s,onOpenGroupedEvent:o}=e,i=t.concerts[0]?.concert,r=i?.id,c=i&&(0,vt.B4)(i.id).toURI(),l=(0,b.s)(),d=(0,a.useMemo)((()=>s?.eventRowFactory({identifier:r??"",position:n,uri:c??""})),[s,r,c,n]),m=(0,C.t)(d),u=e=>{o(e)};if(t.concerts.length>1)return(0,le.jsx)("div",{ref:m,children:(0,le.jsx)(Ut,{event:t,onClick:u})});return(0,le.jsx)("div",{ref:m,children:(0,le.jsx)(Ft,{concert:i,isVirtual:"online"===t.source,onClick:()=>{d&&l.logInteraction(d.hitUiNavigate({destination:c??""}))}})})})),Bt=(0,a.memo)((e=>{const{eventGroups:t,locationName:n,isLoading:s,feedSpec:o,onOpenGroupedEvent:i,layout:r}=e,c=(0,a.useMemo)((()=>o?.eventSectionFactory({identifier:"all",position:1})),[o]),l=(0,C.t)(c);return s?(0,le.jsx)(M.A,{hasError:!1,errorMessage:""}):t?0===t.length||0===t[0].events.length?(0,le.jsx)(F.p,{title:x.R.get("concerts.error.no_concerts_found_title"),message:x.R.get("concerts.error.no_concerts_found_message",n),renderInline:!0}):(0,le.jsx)("div",{ref:l,children:t.map((e=>(0,le.jsxs)("div",{className:Pe,children:["grid"===r&&(0,le.jsx)(B.$,{total:e.events.length,title:x.R.formatDate(new Date(`${e.date}T00:00:00`),{weekday:"long",day:"numeric",month:"long",year:"numeric"}),showAll:!0,withEncoreCards:!1,rowGap:S.lT,colGap:S.lT,children:e.events.map(((e,t)=>{const n=e.concerts[0]?.concert;return(0,le.jsx)(kt,{event:e,position:t,sectionSpec:c,onOpenGroupedEvent:i},n?.id)}))}),"list"===r&&(0,le.jsxs)("div",{children:[(0,le.jsx)(D.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",className:Le,children:x.R.formatDate(new Date(`${e.date}T00:00:00`),{weekday:"long",day:"numeric",month:"long",year:"numeric"})}),e.events.map(((e,t)=>{const n=e.concerts[0]?.concert;return(0,le.jsx)(Mt,{event:e,position:t,sectionSpec:c,onOpenGroupedEvent:i},n?.id)}))]})]},e.date)))}):null})),At={month:"short",day:"numeric"},Ot=e=>{if((0,R.r)(e.from,e.to))return x.R.formatDate(e.from,At);return`${x.R.formatDate(e.from,At)} - ${x.R.formatDate(e.to,At)}`},zt=(0,a.memo)((e=>{const{geonameId:t,spec:n,layout:s,onLocationNameChange:r}=e,c=(()=>{const[e]=(0,i.ok)(),t=e.get("startDate")?.trim(),n=e.get("endDate")?.trim(),a=ke(t),s=ke(n);return a&&s&&{from:a,to:s}})(),l=(0,o.Zp)(),[,d]=(0,i.ok)(),[m]=(0,i.ok)(),[u,v]=(0,a.useState)(),[g,h]=(0,a.useState)(!1),p=(0,Se.W)(),j=(0,a.useMemo)((()=>n?.headerFactory()),[n]),y=(0,a.useMemo)((()=>n?.datePickerModalFactory()),[n]),f=(0,a.useMemo)((()=>n?.cityInfoFactory()),[n]),N=(0,b.s)(),{data:_,isLoading:C,hasNextPage:k,isFetchingNextPage:I,fetchNextPage:R}=_e({geonameId:t,startDate:c&&(0,W.bU)(c.from),endDate:c&&(0,W.bU)(c.to)}),S=(0,a.useMemo)((()=>(0,W.fD)(_?.pages??[])),[_?.pages]),F=_?.pages[0]?.userLocation;(0,a.useEffect)((()=>{F&&r?.(F)}),[F,r]);const M=F||x.R.get("concerts.default_location"),B=(0,W.f7)(new Date),A=(0,W.oh)(new Date),O=(0,a.useCallback)((e=>{const t={filter:"all"};if(e&&(t.startDate=(0,W.bU)(e.from),t.endDate=(0,W.bU)(e.to),y)){const e=new URLSearchParams(t).toString();N.logInteraction(y.doneButtonFactory({uri:e}).hitUiNavigate({destination:e}))}h(!1),d(t),y&&N.logInteraction(y.doneButtonFactory({uri:new URLSearchParams(t).toString()}).hitUiHide())}),[d,y,N]),z=(0,a.useCallback)((e=>{const t={filter:"all"};(0,W.I7)(c,e)||(t.startDate=(0,W.bU)(e.from),t.endDate=(0,W.bU)(e.to)),d(t)}),[c,d]);return(0,le.jsxs)("div",{children:[(0,le.jsx)(U.Q,{children:`${x.R.get("concerts_shows_in")} ${M}`}),(0,le.jsxs)("div",{className:qe,children:[(0,le.jsx)(Re.A,{handleLocationChange:e=>{p({type:"click",intent:"change-live-events-location"}),e?.geonameId&&l({pathname:(0,W.nm)(e.geonameId,e.location),search:`?${m.toString()}`})},locationStr:M,headerSpec:j}),(0,le.jsxs)(le.Fragment,{children:[(0,le.jsx)(E.n,{className:We,iconLeading:w.R,onClick:()=>{h(!0),j&&N.logInteraction(j.datePickerButtonFactory().hitUiReveal())},size:"small",children:c?Ot(c):x.R.get("live_events.date_picker_button_text")}),g&&(0,le.jsx)(ut,{onClose:()=>{h(!1),y&&N.logInteraction(y.closeButtonFactory().hitUiHide())},onDone:O,dateRange:c,spec:y}),(0,le.jsx)(L.v,{className:Ve,size:"sm",selectedColorSet:"brightAccent",selected:(0,W.I7)(c,B),onClick:()=>{if(z(B),j){const e={startDate:(0,W.bU)(B.from),endDate:(0,W.bU)(B.to)},t=new URLSearchParams(e).toString();N.logInteraction(j.datePresetButtonFactory({uri:t,identifier:"thisWeekend",position:0}).hitUiNavigate({destination:t}))}},children:x.R.get("live_events.this_weekend_preset")}),(0,le.jsx)(L.v,{className:Ve,size:"sm",selectedColorSet:"brightAccent",selected:(0,W.I7)(c,A),onClick:()=>{if(z(A),j){const e={startDate:(0,W.bU)(A.from),endDate:(0,W.bU)(A.to)},t=new URLSearchParams(e).toString();N.logInteraction(j.datePresetButtonFactory({uri:t,identifier:"nextWeekend",position:1}).hitUiNavigate({destination:t}))}},children:x.R.get("live_events.next_weekend_preset")})]})]}),(0,le.jsx)(Bt,{isLoading:C,locationName:M,eventGroups:S,onOpenGroupedEvent:e=>{v(e);const t=e.concerts[0]?.concert.artistUris[0];p({type:"click",intent:"open-grouped-live-event",targetUri:t})},feedSpec:n,layout:s}),k&&(0,le.jsx)("div",{className:Te,children:(0,le.jsx)(E.n,{disabled:I,onClick:()=>{R()},children:x.R.get("concerts.load_more")})}),(0,le.jsx)(me,{event:u,locationName:M,feedSpec:n,onClose:()=>v(void 0)}),(0,le.jsx)(D.E,{variant:"marginal",semanticColor:"textSubdued",children:x.R.get("live_events.disclaimer")}),_&&_.pages[0]&&_.pages[0].userLocationGeonameId&&(0,le.jsx)(Ye,{geonameId:_.pages[0].userLocationGeonameId,locationName:M,spec:f})]})}));var Gt=n(72966),Ht=n(32227),Pt=n(39431);const Tt=(0,a.memo)((e=>{const{title:t="",identifier:n,position:s,events:o,feedSpec:i,onOpenGroupedEvent:r,layout:c}=e,l=(0,a.useMemo)((()=>i?.eventSectionFactory({identifier:n,position:s})),[i,n,s]),d=(0,C.t)(l);return 0===o.length?null:(0,le.jsxs)("div",{className:De,ref:d,children:["grid"===c&&(0,le.jsx)(Pt.pZ,{value:"headered-grid",index:s,children:(0,le.jsx)(B.$,{total:o.length,title:t,showAll:!0,withEncoreCards:!1,rowGap:S.lT,colGap:S.lT,children:o.map(((e,t)=>{const n=e.concerts[0]?.concert;return(0,le.jsx)(kt,{event:e,position:t,sectionSpec:l,onOpenGroupedEvent:r},n?.id)}))})}),"list"===c&&(0,le.jsxs)("div",{children:[(0,le.jsx)(D.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",className:Le,children:t}),o.map(((e,t)=>{const n=e.concerts[0]?.concert;return(0,le.jsx)(Mt,{event:e,position:t,sectionSpec:l,onOpenGroupedEvent:r},n?.id)}))]})]})})),Wt=(0,a.memo)((e=>{const{spec:t,layout:n,onLocationNameChange:s}=e,[r,c]=(0,a.useState)(),[l]=(0,i.ok)(),d=be(e.geonameId),m=d.data?.userLocation||x.R.get("concerts.default_location"),u=(0,a.useMemo)((()=>t?.headerFactory()),[t]),v=(0,o.Zp)();return(0,a.useEffect)((()=>{d.data?.userLocation&&s?.(d.data.userLocation)}),[d.data?.userLocation,s]),(0,le.jsxs)("div",{children:[(0,le.jsx)(U.Q,{children:`${x.R.get("concerts_shows_in")} ${m}`}),(0,le.jsx)("div",{className:qe,"data-testid":"location-selector",children:(0,le.jsx)(Re.A,{handleLocationChange:e=>{(0,Gt.d)({action_type:"click",action_intent:"change-live-events-location",view_uri:"",item_id:""}),e?.geonameId&&v({pathname:(0,W.nm)(e.geonameId,e.location),search:`?${l.toString()}`})},locationStr:m,headerSpec:u})}),(0,le.jsxs)("div",{className:Ke,children:[(0,le.jsx)(D.E,{variant:"titleSmall",semanticColor:"textBase",children:x.R.get("live_events.for_you_anonymous_heading")}),(0,le.jsx)(D.E,{variant:"bodyMedium",className:Je,semanticColor:"textSubdued",children:x.R.get("live_events.for_you_anonymous_subheading")}),(0,le.jsx)(tt.$,{colorSet:"invertedLight",className:$e,onClick:()=>(0,Ht.ie)(),children:x.R.get("live_events.sign_up_free")})]}),d.data&&(0,le.jsx)(Tt,{title:x.R.get("concerts.popular_concerts_near",m),identifier:"popular",position:0,events:d.data.events,onOpenGroupedEvent:e=>{c(e);const t=e.concerts[0]?.concert.artistUris[0];(0,Gt.d)({action_type:"click",action_intent:"open-grouped-live-event",target_uri:t,view_uri:"",item_id:""})},feedSpec:t,layout:n}),(0,le.jsx)(me,{event:r,locationName:m,feedSpec:t,onClose:()=>c(void 0)}),(0,le.jsx)(D.E,{variant:"marginal",semanticColor:"textSubdued",children:x.R.get("live_events.disclaimer")}),d.data&&d.data.userLocationGeonameId&&(0,le.jsx)(Ye,{geonameId:d.data.userLocationGeonameId,locationName:m})]})}));n(62355),n(60608);const qt=(0,a.memo)((e=>{const{isLoading:t,events:n,locationName:a,spec:s,layout:o,onOpenGroupedEvent:i}=e;if(t)return(0,le.jsx)(M.A,{hasError:!1,errorMessage:""});if(0===n.length)return(0,le.jsx)(F.p,{title:x.R.get("concerts.error.no_concerts_found_title"),message:x.R.get("concerts.error.no_concerts_found_message",a),renderInline:!0});const r=(e=>{const t={popular:[],recommended:[],online:[]};return e.forEach((e=>{switch(e.source){case"recommendation":t.recommended.push(e);break;case"popular":t.popular.push(e);break;case"online":t.online.push(e)}})),t})(n);return(0,le.jsxs)(le.Fragment,{children:[(0,le.jsx)(Tt,{title:x.R.get("concerts_upcoming_virtual_events"),identifier:"online",position:0,events:r.online,onOpenGroupedEvent:i,feedSpec:s,layout:o}),(0,le.jsx)(Tt,{title:x.R.get("concerts_recommended_for_you"),identifier:"recommended",position:1,events:r.recommended,onOpenGroupedEvent:i,feedSpec:s,layout:o}),(0,le.jsx)(Tt,{title:x.R.get("concerts.popular_concerts_near",a),identifier:"popular",position:2,events:r.popular,onOpenGroupedEvent:i,feedSpec:s,layout:o})]})}));var Vt=n(3106),Kt=n(71310),Jt=n(37669),$t=n(466),Xt=n(82871),Qt=n(17094);const Zt=new Xt.l("promoCardPlaylist","query","ad0959194c2cec8bf10b87c74923628dd7c2ef2abbd217374279b0bc728c3cc2",null),Yt="Cot6ZntaldMo77XCx1dt",en="vfWT92cAm89qtD3Lwfrc",tn="XyJgy3JOLfeFBo2CiltA",nn="UI2hGxMrqbScQtyg3FzT",an="mnwdEtmP084CWa7aUEzN",sn=()=>{const e=(0,Vt.V)(),t=(0,a.useContext)(Jt.wO),{data:n}=(0,ve.I)({queryKey:["cny-resolve"],queryFn:()=>t.resolvePlaylistFormatURI("spotify:playlist-format:concerts-near-you"),enabled:!e,staleTime:1/0}),{data:s}=(o={uri:n},i={enabled:!!n},(0,Qt.I)(Zt,o,i));var o,i;if("Playlist"===s?.playlistV2.__typename)return s.playlistV2},on=(0,a.memo)((e=>{const t=sn();if(!t)return null;const n=(0,$t.g)(t.images.items[0]?.sources,{desiredSize:88});return(0,le.jsxs)(T.default,{to:t.uri,className:Yt,children:[(0,le.jsx)(Kt._,{src:n?.url,loading:"lazy",alt:"",ariaHidden:!0,className:en}),(0,le.jsxs)("div",{className:tn,children:[(0,le.jsx)(D.E,{as:"h3",variant:"bodyMediumBold",className:nn,children:t.name}),(0,le.jsx)(D.E,{as:"p",variant:"bodySmall",className:an,children:t.description})]})]})})),rn=(0,a.memo)((e=>{const{geonameId:t,spec:n,layout:s,onLocationNameChange:i}=e,r=(0,o.Zp)(),[c,l]=(0,a.useState)(),d=(0,Se.W)(),m=(0,a.useMemo)((()=>n.headerFactory()),[n]),{data:u,isLoading:v}=Ne({geonameId:t});(0,a.useEffect)((()=>{u?.userLocation&&i?.(u.userLocation)}),[u?.userLocation,i]);const g=(0,h.NC)(pe.P98,{loadingValue:!1}),p=u?.userLocation||x.R.get("concerts.default_location");return(0,le.jsxs)("div",{children:[(0,le.jsx)(U.Q,{children:`${x.R.get("concerts_shows_in")} ${p}`}),(0,le.jsx)("div",{className:qe,"data-testid":"location-selector",children:(0,le.jsx)(Re.A,{handleLocationChange:e=>{d({type:"click",intent:"change-live-events-location"}),e?.geonameId&&r((0,W.nm)(e.geonameId,e.location))},locationStr:p,headerSpec:m})}),g&&(0,le.jsx)("div",{className:Ze,children:(0,le.jsx)(on,{})}),(0,le.jsx)(qt,{isLoading:v,events:u?.events||[],locationName:p,spec:n,onOpenGroupedEvent:e=>{l(e);const t=e.concerts[0]?.concert.artistUris[0];d({type:"click",intent:"open-grouped-live-event",targetUri:t})},layout:s}),(0,le.jsx)(me,{event:c,locationName:p,feedSpec:n,onClose:()=>l(void 0)}),(0,le.jsx)(D.E,{variant:"marginal",semanticColor:"textSubdued",children:x.R.get("live_events.disclaimer")}),u&&u.userLocationGeonameId&&(0,le.jsx)(Ye,{geonameId:u.userLocationGeonameId,locationName:p})]})})),cn=(0,a.memo)((e=>{const{spec:t,layout:n}=e,[s,o]=(0,a.useState)(),i=(0,ve.I)({queryKey:["savedConcerts"],queryFn:ye}),r=(0,Se.W)(),c=i.data?.userLocation,l=c||x.R.get("concerts.default_location");return(0,le.jsxs)(le.Fragment,{children:[(0,le.jsx)(U.Q,{children:`${x.R.get("live_events.label")}`}),i.data?.events.length?(0,le.jsx)(le.Fragment,{children:(0,le.jsx)(Tt,{title:x.R.get("concerts_upcoming"),identifier:"saved",position:0,events:i.data?.events,feedSpec:t,onOpenGroupedEvent:e=>{o(e);const t=e.concerts[0]?.concert.artistUris[0];r({type:"click",intent:"open-grouped-live-event",targetUri:t})},layout:n})}):(0,le.jsxs)("div",{className:Ae,children:[(0,le.jsx)(D.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",className:Ge,children:x.R.get("concerts_interested_in_live_events")}),(0,le.jsx)(D.E,{as:"p",className:He,children:x.R.get("concerts_no_events_description")}),(0,le.jsx)(T.default,{to:"/concerts",className:Oe,children:(0,le.jsx)(E.n,{as:"span",className:ze,children:x.R.get("concerts_browse_more_events")})})]}),(0,le.jsx)(D.E,{variant:"marginal",semanticColor:"textSubdued",children:x.R.get("live_events.disclaimer")}),(0,le.jsx)(me,{event:s,locationName:l,feedSpec:t,onClose:()=>o(void 0)})]})})),ln=r.Hhe,dn=()=>{const{isAnonymous:e}=(0,s.d4)(_.Ht),t=(0,o.zy)(),n=t.pathname+t.search,r=(0,b.s)(),R=(0,h.NC)(I.oq),[S,D]=(0,a.useState)("grid"),{spec:E}=(0,k.r)(p.s,{}),[w,L]=(0,i.ok)(),U=Ie({isAnonymous:e,isInterestedEnabled:R}),F=(0,a.useMemo)((()=>E.headerFactory().liveEventsNavbarFactory({uri:n,reason:U.type})),[E,U,n]),M=(0,C.t)(F),[B,A]=(0,a.useState)(),O=[{value:"foryou",label:x.R.get("live_events.for_you_tab"),content:e?(0,le.jsx)(Wt,{geonameId:U.geonameId,spec:E,layout:S,onLocationNameChange:A}):(0,le.jsx)(rn,{geonameId:U.geonameId,spec:E,layout:S,onLocationNameChange:A})},{value:"all",label:x.R.get("live_events.all_events_tab"),content:(0,le.jsx)(zt,{geonameId:U.geonameId,spec:E,layout:S,onLocationNameChange:A})},{value:"saved",label:x.R.get("concerts_interested"),content:(0,le.jsx)(cn,{spec:E,layout:S})}],z=()=>{const e=E.headerFactory().layoutToggleFactory().hitToggleState({stateBeforeToggle:S,stateAfterToggle:"grid"===S?"list":"grid"});r.logInteraction(e),D("grid"===S?"list":"grid")},G=e&&B?x.R.get("live_events.location_concert_tickets",B):x.R.get("live_events.label");return(0,le.jsxs)("section",{className:Ee,children:[(0,le.jsxs)(y.z4,{size:y.KR.SMALL,backgroundColor:ln,children:[(0,le.jsx)(y.Y$,{children:(0,le.jsx)(y.mm,{children:G})}),(0,le.jsx)(f.h,{children:(0,le.jsx)(N.X,{text:G})})]}),(0,le.jsxs)("div",{className:we,children:[(0,le.jsx)(j.K,{backgroundColor:ln}),(0,le.jsx)("div",{className:Fe,ref:M,children:(0,le.jsxs)(c.t,{currentTab:U.type,onTabChange:(e,n)=>{if(void 0===n)return;const a=O[n].value,s=`${t.pathname}?filter=${a}`,o=E.headerFactory().liveEventsNavbarFactory({uri:s,reason:a}).hitUiNavigate({destination:s});r.logInteraction(o),L({filter:a})},children:[(0,le.jsxs)("div",{className:Be,children:[(0,le.jsx)(l.w,{"aria-label":"live events navbar",children:O.map((e=>(0,le.jsx)(d.V,{value:e.value,id:e.value,label:e.label,className:Me},e.value)))}),"grid"===S&&(0,le.jsx)(m.H,{"aria-label":x.R.get("concerts.feed_list_layout"),iconOnly:u.N,className:Ue,onClick:z,size:"small"}),"list"===S&&(0,le.jsx)(m.H,{"aria-label":x.R.get("concerts.feed_grid_layout"),iconOnly:v.D,className:Ue,onClick:z,size:"small"})]}),O.map((e=>(0,le.jsx)(g.K,{value:e.value,children:e.content},e.value)))]})})]})]})}}}]);
//# sourceMappingURL=xpui-routes-collection-concerts.js.map