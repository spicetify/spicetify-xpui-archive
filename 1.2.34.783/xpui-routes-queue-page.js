"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[7790],{45239:(e,i,t)=>{t.d(i,{U:()=>F});var s=t(95396),n=t(79474),a=t(37298),r=(t(62355),t(48117),t(63512),t(60608),t(1137),t(45689),t(97500)),l=t.n(r),o=t(61343),u=t(43029),c=t(56718),d=t(57157),m=t(12764),x=t(98678),h=t(5549),p=t(16133);var g=t(48507),y=t(90394);const j="BkpKedcdaMGbvgXMlmcg",b="muYk5XIwKmqR9iNibk_f",f="OEFWODerafYHGp09iLlA",C="m20ShRDiGGDpJ5LSABTi",v="Hvv0e7WKQ4kyftgSQJhg",k="yxf_6IsQEmHjijEBUMTP",N="oaNVBli46GtVjaQKB15g",P="JdlKTdpMquftpMwwegZo",E="Nts_ArOCGeROTDZND3M6",I="FvDsfgxSvLvL3q8d7nQv";var R=t(13274);const w=({items:e,activeItemId:i})=>(0,R.jsx)(g.W,{children:e.map((e=>e.disabled?(0,R.jsx)(y.D,{disabled:!0,role:"menuitemradio",className:k,onClick:e.handleClick,children:e.title},e.uri):(0,R.jsx)(y.D,{role:"menuitemradio",to:e.to,end:!0,"aria-checked":e.itemId===i,className:({isActive:e})=>l()(k,{[N]:e}),onClick:e.handleClick,children:e.title},e.uri)))});var U=t(68680);const A=(0,n.memo)((function({isCentered:e,links:i,landmarkLabel:t,className:s}){const r=(0,n.useRef)(null),[g,y]=(0,n.useState)([]),[k,A]=(0,n.useState)(0),[S,O]=(0,n.useState)([]),T=function(){const[e,i]=(0,n.useState)(window.innerWidth),{scrollNodeChildRef:t}=(0,n.useContext)(h.bi),s=(0,x.YQ)((e=>{e?.width&&i(e.width)}),250);return(0,p.w)({refOrElement:t,observeOnly:"width",onResize:s}),e}()??1/0,{pathname:q}=(0,o.zy)(),Q=i.find((e=>e.to===q));return(0,n.useEffect)((()=>{r.current&&A(r.current.clientWidth)}),[T]),(0,n.useEffect)((()=>{if(!r.current)return;const e=Array.from(r.current.children).map((e=>e.clientWidth));y(e)}),[i]),(0,n.useEffect)((()=>{if(!r.current)return;if(g.slice(0,-1).reduce(((e,i)=>e+i),0)<=k)return void O([]);const e=g.reduce(((e,i)=>e>i?e:i),0),i=[];let t=e;g.forEach(((e,s)=>{k>=t+e?t+=e:i.push(s)})),O(i)}),[k,g]),(0,R.jsx)("nav",{className:l()(s,j),"aria-label":t,children:(0,R.jsxs)("ul",{className:e?b:E,ref:r,children:[i.filter(((e,i)=>!S.includes(i))).map((e=>{const i=e?.render??(e=>e);return(0,R.jsx)(n.Fragment,{children:i((0,R.jsx)("li",{className:f,children:e.disabled?(0,R.jsx)("div",{className:P,children:(0,R.jsx)(u.E,{variant:"bodySmallBold",children:e.title})}):(0,R.jsx)(U.k,{end:!0,className:({isActive:e})=>l()(P,{[N]:e}),to:e.to,onClick:e.handleClick,children:(0,R.jsx)(u.E,{variant:"bodySmallBold",children:e.title})})}))},e.to)})),S.length||0===g.length?(0,R.jsx)("li",{className:f,children:(0,R.jsx)(m.tz,{renderInline:!0,menu:(0,R.jsx)(w,{items:i.filter(((e,i)=>S.includes(i))),activeItemId:Q?.itemId}),children:(e,i,t)=>(0,R.jsxs)("button",{className:l()(C,{[v]:Q}),type:"button",onClick:i,ref:t,children:[(0,R.jsx)(u.E,{variant:"bodySmallBold",children:Q?Q.title:a.R.get("more")}),e?(0,R.jsx)(c.J,{size:"small",className:I,"aria-hidden":"true"}):(0,R.jsx)(d.y,{size:"small",className:I,"aria-hidden":"true"})]})})}):null]})})}));var S=t(97876),O=t(12350),T=t(40155);const q="vhW0kRN8JJD5UwW4TdXi",Q=()=>{const e=(0,T.U)(),i=(0,n.useCallback)((e=>(0,R.jsx)(O.u,{placement:"bottomEnd",arrow:"topStart",title:a.R.get("pick-and-shuffle.upsell.title.queue"),children:e})),[]),t=(0,n.useMemo)((()=>[{title:a.R.get("playback-control.queue"),itemId:"queue",to:"/queue",uri:"spotify:app:queue",render:i,disabled:e},{title:a.R.get("view.recently-played"),itemId:"history",to:"/history",uri:"spotify:app:history"}]),[e,i]);return(0,R.jsx)(S.g,{children:(0,R.jsx)(A,{className:q,links:t})})},F=({children:e})=>{const i=(0,s.yM)();return(0,R.jsxs)("section",{className:"contentSpacing",children:[e,i&&(0,R.jsx)(Q,{})]})}},27053:(e,i,t)=>{t.r(i),t.d(i,{default:()=>pe});var s=t(79474),n=t(97500),a=t.n(n),r=t(43029),l=t(66075),o=t(68087),u=t(37298),c=t(96590),d=t(35195),m=t(88366),x=t(39431),h=t(82719),p=t(13031),g=t(15486),y=t(11520),j=t(13274);const b=({onClick:e})=>(0,j.jsx)(y.n,{onClick:e,size:"small",children:u.R.get("queue.clear-queue")});var f=t(32798),C=t(61426),v=t(33010),k=t(51773),N=t(7404),P=t(65948),E=t(65553),I=t(78051),R=t(23e3),w=t(466),U=(t(1137),t(30826)),A=t(58588),S=t(48762),O=t(41627),T=t(36456),q=t(70856),Q=t(38101),F=t(75450),$=t(86342),L=t(77163),D=t(85989),M=t(59866),B=t(2096),_=t(75206),K=t(35126),G=t(10629),H=t(67404),z=t(49882),W=t(39974),Y=t(36476),J=t(6477),Z=t(38401),X=t(62907),V=t(16388),ee=t(64541),ie=t(3898);let te=function(e){return e.TRACK="track",e.EPISODE="episode",e.CHAPTER="chapter",e.LOCAL="local",e.AD="ad",e}({});const se=s.memo((function({uri:e,uid:i,contextUri:t,name:n,duration_ms:a,artists:r,index:l,rowNumberOffset:o,imgUrl:c,isExplicit:d,isPlayable:m,isMOGEFRestricted:p,album:y,type:b,section:f,usePlayContextItem:C,isAutoPlay:k=!1,isEnhanced:N,queueSpec:P,trackContextUri:E}){const I=(0,W.s)(),R=(0,h.K)(),{triggerPlay:w,togglePlay:se}=C({uid:i,uri:e,index:l}),{spec:ne}=(0,g.r)(A.i,{data:{position:l,reason:"",uri:e}}),{isActive:ae,isPlaying:re}=(0,H.te)(e),le=(0,s.useCallback)(((t,s)=>{i?w({loggingParams:s},(()=>R.skipToNext({uri:e,uid:i}))):w({loggingParams:s})}),[R,w,e,i]),oe=(0,s.useCallback)((t=>{i?se({loggingParams:t},(()=>ae?re?R.pause():R.resume():R.skipToNext({uri:e,uid:i}))):se({loggingParams:t})}),[R,se,e,i,ae,re]),ue=b===te.TRACK,ce=b===te.EPISODE,de=b===te.CHAPTER,me=ce&&"video"===y?.mediaType,xe=b===te.LOCAL,he=b===te.AD,pe=r?.map((e=>e.name)).join(u.R.getSeparator())||"",ge=(0,G.T)(e),ye=(0,Z.g)(e,m,(0,S.Pk)(e)),{badges:je,hasBadges:be}=(0,Y.b)({downloadAvailability:ge,isExplicit:d,isMOGEFRestricted:p,isEnhanced:N}),fe=(0,ee.X)();let Ce;Ce=ce?(0,j.jsx)(q.b,{uri:e,uid:k?void 0:i,showUri:y.uri,contextUri:t}):de?(0,j.jsx)(T.r,{uri:e,removeFromQueueData:{uid:k?void 0:i,contextUri:t}}):xe?(0,j.jsx)(Q.A,{uri:e,uid:k?void 0:i,contextUri:t}):he?null:(0,j.jsx)(F.P,{uri:e,uid:k?void 0:i,albumUri:y.uri,artists:r,contextUri:t,entityContextUri:E,isSmartRecommendation:N});const ve=(0,s.useCallback)(((t,s)=>{const{meta:n,uris:a}=t,r=a.map((e=>({uri:e,uid:null})));let l;l=s===D.Y.Before?{before:{uri:e,uid:i??null}}:{after:{uri:e,uid:i??null}},n.section===v.$.NowPlaying?R.addToQueue(r):n.origin===v.$.NowPlaying?R.insertIntoQueue(r,l):R.reorderQueue(r,l)}),[R,i,e]),ke=(0,s.useCallback)(((t,s)=>{const{items:n}=t;let a;a=s===D.Y.Before?{before:{uri:e,uid:i??null}}:{after:{uri:e,uid:i??null}},R.reorderQueue(n,a)}),[R,i,e]),Ne=k?[]:[M.O[S.NQ.TRACK],M.O[S.NQ.EPISODE]],{trackPageEnhancedEnabled:Pe,trackPageLinksNoLyricsEnabled:Ee}=(0,ie.Zo)(),Ie=ue&&(Pe||Ee);return(0,j.jsx)(x.pZ,{value:"row",index:l,children:(0,j.jsx)(O.h,{menu:Ce,children:(0,j.jsxs)(D.w,{uri:e,contextUri:t,index:l,onTriggerPlay:le,isActive:f===v.$.NowPlaying&&ae,ariaRowIndex:l,isPlayable:ye,ageRestricted:p,spec:ne,dragMetadata:{name:n,createdBy:pe,sectionId:f},onInsert:(i,t,s,n,a)=>{ve({uris:i,dropIndex:t,meta:a},s),P&&I.logInteraction(P.dragAddItemToQueue({itemToAddToQueue:e}))},onMove:(e,i,t,s)=>{ke({items:e,dropIndex:i,meta:s},t),P&&I.logInteraction(P.dragSort())},allowedDropTypes:Ne,children:[(0,j.jsx)($.yv,{ariaColIndex:0,children:(0,j.jsx)($.$H,{uri:e,playAriaLabel:u.R.get("tracklist.a11y.play",n,pe),isPlaying:f===v.$.NowPlaying&&re,isActive:f===v.$.NowPlaying&&ae,spec:ne,onClick:(e,i)=>{oe(i)},children:(0,j.jsx)($.aJ,{children:l+o+1})})}),(0,j.jsxs)($.U6,{ariaColIndex:1,children:[(0,j.jsx)($.eY,{src:c,isVideo:me,isEpisode:ce||de}),(0,j.jsxs)($.l1,{children:[(0,j.jsx)(J.R,{enabled:Ie,uri:e,children:(0,j.jsx)($.pJ,{titleText:n,children:n})}),be&&(0,j.jsxs)($.Pe,{children:[je.enhanced&&(0,j.jsx)(U.R,{size:"small",className:L.A.enhanced,title:u.R.get("web-player.smart-shuffle.icon-hover-label"),"aria-label":u.R.get("web-player.smart-shuffle.icon-hover-label")}),je.download&&(0,j.jsx)(B._,{}),je.explicit&&(0,j.jsx)(_.g,{}),je.nineteen&&(0,j.jsx)(K.q,{className:L.A.nineteen,size:16})]}),(0,j.jsxs)($.pj,{children:[ue&&(0,j.jsx)($.lw,{artists:r,spec:ne}),(ce||xe)&&!me&&pe]})]})]}),(0,j.jsx)($.oi,{ariaColIndex:2,children:(0,j.jsx)($.gy,{nonInteractive:xe,uri:y.uri,name:y.name,creatorUri:r?.[0]?.uri,spec:ne,children:y.name})}),(0,j.jsxs)($.lH,{ariaColIndex:3,children:[N&&fe&&(0,j.jsx)(z.r,{spec:ne,children:(0,j.jsx)(V.o,{className:L.A.rowFeedback,contextUri:E,id:i??void 0,uri:e,isActive:f===v.$.NowPlaying&&ae})}),!de&&!N&&(0,j.jsx)(X.d,{uri:e,type:b}),(0,j.jsx)($.Po,{duration:a}),(0,j.jsx)($.Y8,{menu:Ce,label:u.R.get("more.label.track",n,pe),spec:ne})]})]})})})}),((e,i)=>e.uri===i.uri&&e.index===i.index&&e.name===i.name&&e.isEnhanced===i.isEnhanced)),ne=s.memo((function({tracks:e,ariaLabel:i,contextUri:t,currentlyPlayingContextUri:n=t,rowNumberOffset:a=0,section:r,usePlayContextItem:l}){const o=(0,P.W)(),c=(0,h.K)(),d=(0,s.useCallback)(((e,i)=>{o({intent:"remove-from-queue",type:"click"}),c.removeFromQueue(e).then(i)}),[c,o]),m=(0,s.useCallback)(((e,i)=>{if((0,I.p0)(e)){const s=(0,w.g)(e.show?.images,{desiredSize:40});return(0,j.jsx)(se,{index:i,rowNumberOffset:a,imgUrl:s?.url||"",uri:(0,E.a)(e),uid:e.uid??e.uri,contextUri:t,duration_ms:e.duration.milliseconds,name:e.name,artists:[],album:{name:e.show.name,uri:e.show.uri},isExplicit:!1,isPlayable:!0,isMOGEFRestricted:!1,type:te.EPISODE,section:r,usePlayContextItem:l,isAutoPlay:"autoplay"===e.provider},`${i}${a}${e.uid}`)}if((0,I.dS)(e)){const s=(0,w.g)(e.images||void 0,{desiredSize:40});return(0,j.jsx)(se,{index:i,rowNumberOffset:a,imgUrl:s?.url||"",uri:(0,E.a)(e),uid:e.uid??e.uri,contextUri:t,duration_ms:e.duration.milliseconds,name:e.name,artists:[],album:{name:e.book.name,uri:e.book.uri},isExplicit:!1,isPlayable:!0,isMOGEFRestricted:!1,type:te.CHAPTER,section:r,usePlayContextItem:l,isAutoPlay:"autoplay"===e.provider},`${i}${a}${e.uid}`)}if((0,I.NE)(e)){const s=(0,w.g)(e.images||void 0,{desiredSize:40});return(0,j.jsx)(se,{index:i,rowNumberOffset:a,imgUrl:s?.url||"",uri:e.uri,uid:e.uid??e.uri,contextUri:t,duration_ms:e.duration.milliseconds,name:e.advertiser??e.title??u.R.get("ad-formats.advertisement"),artists:[],album:{name:"",uri:""},isExplicit:!1,isPlayable:!0,isMOGEFRestricted:!1,type:te.AD,section:r,usePlayContextItem:l,isAutoPlay:"autoplay"===e.provider,isEnhanced:!1},`${i}${a}${e.uid}`)}if((0,I.v_)(e)||(0,I.vC)(e)){const s=(0,w.g)(e?.album?.images,{desiredSize:40}),o=e.type===R.c.TRACK?e:null;return(0,j.jsx)(se,{index:i,rowNumberOffset:a,imgUrl:s?.url||"",uri:(0,E.a)(e),uid:e.uid??e.uri,contextUri:t,duration_ms:e.duration.milliseconds,name:e.name,artists:e.artists,album:e.album,isExplicit:o?.isExplicit??!1,isPlayable:!0,isMOGEFRestricted:o?.is19PlusOnly??!1,type:o?.isLocal?te.LOCAL:te.TRACK,section:r,usePlayContextItem:l,isAutoPlay:"autoplay"===e.provider,isEnhanced:(0,N.N)(e),trackContextUri:e.metadata?.context_uri??n},`${i}${a}${e.uid}`)}return(0,j.jsx)(k.nd,{height:`${k.FL}px`})}),[a,t,n,r,l]),x=(0,s.useMemo)((()=>[k.$C.INDEX,k.$C.TITLE_AND_ARTIST,k.$C.ALBUM,k.$C.DURATION]),[]),p=(0,s.useCallback)((e=>({uri:e.uri,uid:e.uid??e.uri})),[]);return(0,j.jsx)(k.S4,{ariaLabel:i,tracks:e,nrTracks:e.length,onRemove:d,renderRow:m,resolveItem:p,columns:x})}));var ae=t(67975);const re="rHpv7osDRvs3SUPMpQ_g",le="DG9CsoFIptJhAneKoo_F",oe="jf2HafzDEI9jn7Yo05eM",ue="H3Puuvc2nV0GoZRrfpRS",ce="HckHyQocDDePWQL2baOY",de=()=>{const{uri:e,description:i,current:t,nextUp:n,queued:y,isEmpty:k,hasQueuedTracks:N,hasNextTracks:P}=(0,ae.H)(),{spec:E,logger:I,UBIFragment:R}=(0,g.r)(l.i,{data:{identifier:o.$h.NOWPLAYING_QUEUE,uri:e??""}}),w=(0,s.useMemo)((()=>E.nowPlayingSectionFactory()),[E]),U=(0,s.useMemo)((()=>E.nextInQueueSectionFactory()),[E]),A=(0,s.useMemo)((()=>E.nextFromSectionFactory()),[E]),S=(0,h.K)(),[O,T]=(0,s.useState)(!1),q=(0,s.useCallback)((()=>{T(!1)}),[T]),Q=(0,s.useCallback)((()=>{S.clearQueue(),T(!1)}),[S]),F=(0,s.useCallback)((()=>{let e;const i=U.clearQueueButtonFactory();y.length>0&&(e=i.hitRemoveItemsFromQueue({numberOfItemsToRemoveFromQueue:y.length}),I.logInteraction(e))}),[I,U,y.length]),$=(0,s.useCallback)((async()=>{F(),T(!0)}),[F]),{usePlayContextItem:L}=(0,p.P)({uri:e??""},{featureIdentifier:"queue"}),D=(0,s.useCallback)((async()=>{if(!P)return;const i=E.nextFromSectionFactory().queueContextLinkFactory().hitUiNavigate({destination:e??""});I.logInteraction(i)}),[P,I,E,e]);return(0,ie.oQ)(),k?(0,j.jsx)(C.K,{}):(0,j.jsxs)("div",{className:re,children:[(0,j.jsx)(c.Q,{children:u.R.get("queue.page-title")}),(0,j.jsx)(R,{spec:E,children:(0,j.jsx)(m.Z,{className:le,emptyStateComponent:(0,j.jsx)(r.E,{as:"h1",variant:"titleSmall",semanticColor:"textBase",className:le,children:u.R.get("playback-control.queue")})})}),t&&e&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(r.E,{as:"h2",variant:"bodyMediumBold",semanticColor:"textSubdued",className:oe,children:u.R.get("queue.now-playing")}),(0,j.jsx)(R,{spec:w,children:(0,j.jsx)(x.pZ,{value:"now-playing",children:(0,j.jsx)(ne,{ariaLabel:u.R.get("queue.now-playing"),tracks:[t],contextUri:e,section:v.$.NowPlaying,usePlayContextItem:L})})})]}),N&&e&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{className:a()(ce,oe),children:[(0,j.jsx)(r.E,{as:"h2",variant:"bodyMediumBold",semanticColor:"textSubdued",children:u.R.get("queue.next-in-queue")}),N&&(0,j.jsx)(b,{onClick:$})]}),(0,j.jsx)(R,{spec:U,children:(0,j.jsx)(x.pZ,{value:"next-in-queue",children:(0,j.jsx)(ne,{ariaLabel:u.R.get("queue.next-in-queue"),tracks:y,rowNumberOffset:1,contextUri:"spotify:app:queue:NextInQueue",currentlyPlayingContextUri:e,section:v.$.NextInQueue,usePlayContextItem:L})})})]}),P&&e&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(r.E,{as:"h2",variant:"bodyMediumBold",semanticColor:"textSubdued",className:oe,children:i&&!(0,ae.K)(t)?(0,j.jsxs)("span",{className:"standalone-ellipsis-one-line",children:[u.R.get("queue.next-from")," ",(0,j.jsx)(d.Link,{className:ue,to:e,onClick:D,children:i})]}):u.R.get("queue.next-up")}),(0,j.jsx)(R,{spec:A,children:(0,j.jsx)(x.pZ,{value:"next-up",children:(0,j.jsx)(ne,{ariaLabel:u.R.get("queue.next-up"),tracks:n,rowNumberOffset:1+(y?.length||0),contextUri:"spotify:app:queue:NextUp",currentlyPlayingContextUri:e,section:v.$.NextUp,usePlayContextItem:L})})})]}),(0,j.jsx)(f.p,{itemCount:y?.length||0,isOpen:O,onClose:q,onConfirm:Q})]})};var me=t(45239),xe=t(40155),he=t(90383);const pe=()=>(0,xe.U)()?(0,j.jsx)(he.InstrumentedRedirect,{to:"/history"}):(0,j.jsx)(me.U,{children:(0,j.jsx)(s.Suspense,{fallback:null,children:(0,j.jsx)(de,{})})})},65553:(e,i,t)=>{t.d(i,{a:()=>s});const s=e=>e?.linked_from?.uri||e.uri}}]);
//# sourceMappingURL=xpui-routes-queue-page.js.map