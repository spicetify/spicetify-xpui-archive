"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[1963],{59461:(e,t,i)=>{i.r(t),i.d(t,{PiPMiniPlayer:()=>ne,TEST_IDS:()=>ie});var n=i(59496),o=i(84875),r=i.n(o),a=i(52939),l=(i(83850),i(93570),i(78537)),c=i(88354),s=i(83699),u=i(65791),d=i(34046),m=i(97582),k=i(51697),C=i(14887),h=i(30099),x=i(67490),g=i(87564),p=i(4637);const f=({item:e,onClick:t})=>(0,p.jsx)(p.Fragment,{children:e.artists.map(((i,n)=>{const o=(0,C.EC)(i.uri)?.toURLPath(!0);return(0,p.jsxs)("span",{children:[n>0?h.ag.getSeparator():null,o?(0,p.jsx)(x.default,{to:o,"data-testid":`context-item-info-${e.type}`,dir:"auto",onClick:t,children:i.name}):(0,p.jsx)("span",{dir:"auto",children:i.name})]},n)}))}),b=({item:e,onClick:t})=>{const{show:i}=e,n=(0,C.EC)(i.uri)?.toURLPath(!0);return n?(0,p.jsx)(x.default,{to:n,"data-testid":"context-item-info-show",dir:"auto",onClick:t,children:i.name}):(0,p.jsx)("span",{dir:"auto",children:i.name})},j=({item:e,onClick:t})=>{const{book:i}=e,n=(0,C.EC)(i.uri)?.toURLPath(!0);return n?(0,p.jsx)(x.default,{to:n,"data-testid":"context-item-info-book",dir:"auto",onClick:t,children:i.name}):(0,p.jsx)("span",{dir:"auto",children:i.name})},S={"data-testid":"context-item-info-ad-subtitle"},v=({onClick:e,adUrl:t,adUri:i,adSubtitle:o})=>{const r=(0,n.useMemo)((()=>(0,C.EC)(i)?.toURLPath(!0)),[i]);return r?(0,p.jsx)(x.default,{to:r,...S,dir:"auto",children:o}):t?(0,p.jsx)("a",{...S,onClick:i=>{e?.(i,t)},href:t,rel:"noopener noreferrer",target:"_blank",dir:"auto",children:o}):(0,p.jsx)("span",{dir:"auto",children:o})},R=({item:e,onClick:t,adUrl:i,adBlurbUri:n,adSubtitle:o})=>(0,u.G_)(e)||(0,u.RB)(e)?(0,p.jsx)(f,{item:e,onClick:t}):(0,u.iw)(e)?(0,p.jsx)(b,{item:e,onClick:t}):(0,u.G7)(e)?(0,p.jsx)(j,{item:e,onClick:t}):(0,u.k6)(e)?(0,p.jsx)(v,{adUrl:i,adUri:n,adSubtitle:o,onClick:t}):(0,g.U)(e);const B=({item:e,children:t,onClick:i,adUrl:n})=>{const o=n??function(e){return(0,u.G_)(e)?(0,C.EC)(e.album.uri)?.toURLPath(!0):(0,u.iw)(e)||(0,u.G7)(e)||(0,u.RB)(e)?(0,C.EC)(e?.uri)?.toURLPath(!0):void((0,u.k6)(e)||(0,g._)(e))}(e);return(0,u.G_)(e)&&e.isLocal?(0,p.jsx)(p.Fragment,{children:t}):(0,u.G_)(e)||(0,u.iw)(e)||(0,u.G7)(e)||(0,u.RB)(e)?void 0===o?(0,p.jsx)(p.Fragment,{children:t}):(0,p.jsx)(x.default,{"data-testid":"context-item-link",to:o,onClick:i,children:t}):(0,u.k6)(e)?o?(0,p.jsx)("a",{"data-testid":"context-item-info-ad-title",onClick:e=>{i?.(e,o)},href:o,rel:"noopener noreferrer",target:"_blank",children:t}):(0,p.jsx)(p.Fragment,{children:t}):(0,g.U)(e)};var y=i(52582),P=i(86046),E=i(71005);const T="gXC4vnPDiiiiawwnDN6i",F="HGOZPJuKeigRY5I0vqQw",_="AZLdtyFhMa1Aqml2YhF2",N="QfiWYSeXiPwGYmKED38q",U=({item:e,onClick:t})=>{const i=(0,y.Q)(e),n=(0,u.k6)(e)?i?.title:e.name,o=(0,u.k6)(e)?i?.subtitle:e.name;return(0,p.jsxs)("div",{className:T,children:[(0,p.jsx)("div",{className:F,children:(0,p.jsx)(P.R,{title:n,children:(0,p.jsx)(k.D,{"data-testid":"context-item-info-title",as:"div",variant:"celloCanon",className:F,dir:"auto",children:(0,p.jsx)(B,{item:e,onClick:t,adUrl:i?.url,children:n})})},e.uri)}),(0,p.jsx)(E.t,{className:N,item:e}),(0,p.jsx)("div",{className:_,children:(0,p.jsx)(P.R,{title:o,children:(0,p.jsx)(k.D,{"data-testid":"context-item-info-subtitles",as:"div",variant:"mesto",className:_,semanticColor:"textSubdued",children:(0,p.jsx)(R,{item:e,onClick:t,adSubtitle:o,adBlurbUri:i?.blurbUri,adUrl:i?.url?i?.url:void 0})})},e.uri)})]})};var V=i(80026),w=i(5991),I=i(76263),L=i(19031),O=i(23123);function M(e){return{itemToBeSkipped:e.item?.uri||"",positionMs:(0,O.k)(e)??-1,totalContentMs:e.duration??-1}}function D(e){return Math.floor(100*e)}var z=i(4008),A=i(2812);const G="transparent",K=n.memo((({uri:e,spec:t,logger:i})=>{const{onClickPlayPause:o,onClickLike:r,onClickSkipPrevious:a,onClickSkipNext:l,onClickRepeat:c,onClickShuffle:s,onClickVolumeButton:d,onClickVolumeBar:m,onDragVolumeBar:k}=(({uri:e,spec:t,logger:i})=>{const o=(0,n.useRef)(e);o.current=e;const r=(0,L.g)(),a=(0,n.useMemo)((()=>t.playerControlsFactory()),[t]),l=(0,n.useCallback)((e=>{let t=null;o.current&&("pause"===e?t=a.playPauseButtonFactory().hitPause({itemToBePaused:o.current}):"resume"===e&&(t=a.playPauseButtonFactory().hitResume({itemToBeResumed:o.current})),t&&i.logInteraction(t))}),[i,a]),c=(0,n.useCallback)((e=>{if(!o.current)return;const t=a.likeButtonFactory(),n=e?t.hitLike({itemToBeLiked:o.current}):t.hitRemoveLike({itemNoLongerLiked:o.current});i.logInteraction(n)}),[i,a]),s=(0,n.useCallback)((()=>{const e=r.getState();if(!e)return;const t=a.previousButtonFactory().hitSkipToPrevious(M(e));i.logInteraction(t)}),[i,r,a]),d=(0,n.useCallback)((()=>{const e=r.getState();if(!e)return;const t=a.nextButtonFactory().hitSkipToNext(M(e));i.logInteraction(t)}),[i,r,a]),m=(0,n.useCallback)((e=>{const t=a.repeatButtonFactory();let n=null;switch(e){case u.zq.REPEAT_TRACK:n=t.hitRepeatOneEnable();break;case u.zq.REPEAT_CONTEXT:n=t.hitRepeatEnable();break;case u.zq.REPEAT_NONE:n=t.hitRepeatDisable();break;default:(0,g._)(e)}n&&i.logInteraction(n)}),[i,a]),k=(0,n.useCallback)((e=>{if(!o.current)return;const t=e?"shuffle":"linear",n=e?"linear":"shuffle",r=a.shuffleButtonFactory({uri:o.current}).hitSelectShuffleMode({previousMode:n,selectedMode:t});i.logInteraction(r)}),[i,a]),C=(0,n.useCallback)((e=>{const t=a.volumeMuteButtonFactory();i.logInteraction(e?t.hitMutePlayback():t.hitUnmutePlayback())}),[i,a]),h=(0,n.useCallback)((e=>{const t=a.volumeBarFactory();i.logInteraction(t.hitSetVolume({newVolumePercentage:D(e)}))}),[i,a]),x=(0,n.useCallback)((e=>{const t=a.volumeBarFactory();i.logInteraction(t.dragSetVolume({newVolumePercentage:D(e)}))}),[i,a]),p=(0,n.useCallback)((e=>{const t=a.seekBackwardButtonFactory();i.logInteraction(t.hitSeekByTime({msSeekedOffset:e}))}),[i,a]);return{onClickSeekForward:(0,n.useCallback)((e=>{const t=a.seekForwardButtonFactory();i.logInteraction(t.hitSeekByTime({msSeekedOffset:e}))}),[i,a]),onClickSeekBack:p,onClickPlayPause:l,onClickLike:c,onClickSkipPrevious:s,onClickSkipNext:d,onClickRepeat:m,onClickShuffle:k,onClickVolumeButton:C,onClickVolumeBar:h,onDragVolumeBar:x}})({uri:e,spec:t,logger:i}),C=(()=>{const e=(0,z.zY)(),t=(e?.innerWidth??0)>=340,i=(0,A.p)();return t&&i})();return e?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(V.B,{uri:e,onClick:r}),C?(0,p.jsx)(w.FP,{iconSize:16}):(0,p.jsx)(w.P4,{iconSize:16,onClick:s}),(0,p.jsx)(w.Wu,{iconSize:16,onClick:a}),(0,p.jsx)(w.IF,{iconSize:24,onClick:o}),(0,p.jsx)(w.C$,{iconSize:16,onClick:l}),C?(0,p.jsx)(w.Of,{iconSize:16}):(0,p.jsx)(w.$Z,{iconSize:16,onClick:c}),(0,p.jsx)(I.h,{iconSize:16,mode:I.R.SHOW_SLIDER_ON_HOVER,sliderSize:80,sliderDirection:"vertical",onToggleMuteClick:d,onVolumeBarClick:m,onVolumeBarDrag:k})]}):null}));var q=i(61664),H=i(34718),Q=i(11592),W=i(51087);const X="ktiXGqfcVuegTncUQJim",Y="xM5DXnNVIBKl0D8KmkKr",Z="xZLIxv5s2tm_tmFk3WK8",$="X_fBDy8Kj2NkVB4npQT3",J="yMMglN43dvX2QKTUoivA",ee="tKfqdd6glswVG49yHgiT",te="Hbbk972I34uVuWeqBn2Q",ie={HOVER_CONTAINER:"document-pip-hover-element",COVER_ART:"document-pip-cover-art",COVER_ART_PLACEHOLDER:"document-pip-cover-art-placeholder"},ne=n.memo((()=>{const{item:e,context:t}=(0,q.x)()??{},i=640,o=(0,n.useMemo)((()=>(0,m.o)(e?.images??void 0,{desiredSize:i})),[e?.images,i]),k=(0,s.b)(o,G);((e,t)=>{const i=(0,W.Y)((e=>e?.nextItems?.[0]),((e,t)=>e?.uri===t?.uri)),o=(0,n.useMemo)((()=>(0,m.o)(i?.images??void 0,{desiredSize:e})),[i?.images,e]);(0,s.b)(o,t)})(i,G);const{spec:C,logger:h}=(0,d.fU)(a.O,{}),x=(0,d.Wi)(C),{setVideoPlayerUIFlag:g}=(0,H.l)();if((0,n.useEffect)((()=>{g(Q.x.documentPip,!0)}),[g]),!e||!t)return null;const f={"--background-color":k,"--background-image-url":`url(${o})`,"--background-image-width":"640px","--background-image-height":"640px"},b=(0,u.iw)(e)&&("video"===e.mediaType||"mixed"===e.mediaType);return(0,p.jsxs)("div",{className:r()("encore-dark-theme",X),style:f,ref:x,children:[(0,p.jsxs)("div",{className:r()(Y,{[Z]:!b}),"data-testid":"pip-hover-element",children:[(0,p.jsx)("div",{className:$,id:"document-pip-main-container",children:!b&&(0,p.jsx)(c.Ee,{className:J,src:o,loading:"eager",testid:ie.COVER_ART,children:(0,p.jsx)(l.t,{type:e.type,"data-testid":ie.COVER_ART_PLACEHOLDER})})}),(0,p.jsx)("div",{className:r()("encore-over-media-set",ee,{[te]:!(0,u.k6)(e)}),children:(0,p.jsx)(K,{uri:e.uri,spec:C,logger:h})})]}),(0,p.jsx)(U,{item:e})]})}))}}]);
//# sourceMappingURL=xpui-pip-mini-player.js.map