"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[7379],{99668:(e,t,l)=>{l.d(t,{l:()=>S});var r=l(59496),a=l(55740),s=l(90633),i=l(53018),n=l(69285);const o={"custom-order":i.HI,title:{column:n.Q.TITLE,order:n.k.ASC},artist:{column:n.Q.TITLE,order:n.k.SECONDARY_ASC},"added-by":{column:n.Q.ADDED_BY,order:n.k.ASC},"added-at":{column:n.Q.ADDED_AT,order:n.k.ASC},duration:{column:n.Q.DURATION,order:n.k.ASC},album:{column:n.Q.ALBUM,order:n.k.ASC},"album-or-podcast":{column:n.Q.ALBUM_OR_PODCAST,order:n.k.ASC},"album-or-show":{column:n.Q.ALBUM_OR_SHOW,order:n.k.ASC}},u={title:n.Q.TITLE,artist:n.Q.TITLE,"added-by":n.Q.ADDED_BY,"added-at":n.Q.ADDED_AT,duration:n.Q.DURATION,album:n.Q.ALBUM,"album-or-podcast":n.Q.ALBUM_OR_PODCAST,"album-or-show":n.Q.ALBUM_OR_SHOW},d={[n.k.NONE]:n.k.NONE,[n.k.ASC]:n.k.DESC,[n.k.DESC]:n.k.ASC,[n.k.SECONDARY_ASC]:n.k.SECONDARY_DESC,[n.k.SECONDARY_DESC]:n.k.SECONDARY_ASC},c={[n.Q.INDEX]:{key:"custom-order",get value(){return a.ag.get("sort.custom-order")}},[n.Q.TITLE]:{key:"title",get value(){return a.ag.get("sort.title")}},[n.Q.ARTIST]:{key:"artist",get value(){return a.ag.get("sort.artist")}},[n.Q.ADDED_BY]:{key:"added-by",get value(){return a.ag.get("sort.added-by")}},[n.Q.ADDED_AT]:{key:"added-at",get value(){return a.ag.get("sort.date-added")}},[n.Q.DURATION]:{key:"duration",get value(){return a.ag.get("sort.duration")}},[n.Q.EVENT_DATE]:null,[n.Q.ALBUM]:{key:"album",get value(){return a.ag.get("sort.album")}},[n.Q.ALBUM_OR_PODCAST]:{key:"album-or-podcast",get value(){return a.ag.get("sort.album-or-podcast")}},[n.Q.ALBUM_OR_SHOW]:{key:"album-or-show",get value(){return a.ag.get("sort.album-or-show")}},[n.Q.PLAYS]:null,[n.Q.RELEASE_DATE]:null,[n.Q.ADD]:null,[n.Q.ACTIONS]:null};var g=l(99703),m=l(1789),x=l(4637);function A(e){return!!e}const S=({columns:e,disabled:t,onSort:l})=>{const S=[...e];S.splice(2,0,g.QD.ARTIST);const{sortState:k,setSortState:C}=(0,r.useContext)(i.Gb),h=function(e){return null===e.column?c[g.QD.INDEX]:(0,m.cB)(e.column,e.order)?c[g.QD.ARTIST]:c[e.column]}(k),D=(0,r.useCallback)((e=>{l?.(),C(((e,t,l)=>e?t!==u[e]||"artist"===e&&[n.k.ASC,n.k.DESC].includes(l)||"title"===e&&[n.k.SECONDARY_ASC,n.k.SECONDARY_DESC].includes(l)?o[e]:{column:u[e],order:d[l]}:i.HI)(e,k.column,k.order))}),[l,C,k.column,k.order]),b=(0,r.useCallback)((()=>null!==k.column),[k.column]),j=S.map((e=>c[e])).filter(A);return(0,x.jsx)(s.A,{options:j,onSelect:D,selected:h,isSelectionChanged:b,sortOrder:k.order,heading:a.ag.get("drop_down.sort_by"),disabled:t})}},42427:(e,t,l)=>{l.r(t),l.d(t,{default:()=>K});var r=l(59496),a=l(86831),s=l(52293),i=l(97653),n=l(55740),o=l(57579),u=l(72962),d=l(85583),c=l(59476),g=l(86739),m=l(52535),x=l(17286),A=l(6123),S=l(1789),k=l(99668),C=l(9864),h=l(99703),D=l(53018),b=l(71597),j=l(95596),y=l(29609),f=l(15238),E=l(55207),p=l(4699),T=l(59642),Q=l(91560),_=l(2437),I=l(66275),v=l(47480),O=l(46061),R=l(39872),P=l(54204),N=l(4637);const U=r.memo((function({uri:e,uid:t,name:l,duration_ms:a,artists:s,album:i,is19PlusOnly:o,isExplicit:u,isPlayable:d,index:c,contextUri:g,imgUrl:m,usePlayContextItem:x}){const{filter:A}=(0,r.useContext)(C.fo),{isActive:S,isPlaying:k,triggerPlay:h,togglePlay:D}=x({uid:t,uri:e,index:c}),{badges:b,hasBadges:j}=(0,_.r)({isExplicit:u}),y=s?.map((e=>e.name)).join(n.ag.getSeparator())||"";return(0,N.jsx)(Q.ZP,{value:"row",index:c,children:(0,N.jsx)(p._,{menu:(0,N.jsx)(I.N,{uri:e,uid:t,contextUri:g}),children:(0,N.jsxs)(P.c,{uri:e,contextUri:g,isActive:S,index:c,onTriggerPlay:()=>{h()},ariaRowIndex:c+1,isPlayable:d,ageRestricted:o,dragMetadata:{name:l,createdBy:y},children:[(0,N.jsx)(O.Dd,{ariaColIndex:0,children:(0,N.jsx)(O.Du,{uri:e,playAriaLabel:n.ag.get("tracklist.a11y.play",l,y),isPlaying:k,isActive:S,onClick:()=>{D()},children:(0,N.jsx)(O.km,{children:c+1})})}),(0,N.jsxs)(O.vZ,{ariaColIndex:1,children:[(0,N.jsx)(O.lD,{src:m}),(0,N.jsxs)(O.vm,{children:[(0,N.jsx)(O.Wh,{titleText:l,children:(0,N.jsx)(v.o,{searchWords:[A],textToHighlight:l})}),j&&(0,N.jsx)(O.g3,{children:b.explicit?(0,N.jsx)(T.N,{}):null}),(0,N.jsx)(O.K9,{children:s&&(0,N.jsx)(R.o,{nonInteractive:!0,artists:s,filter:A})})]})]}),(0,N.jsx)(O.UA,{ariaColIndex:2,children:i?.name&&(0,N.jsx)(O.BM,{nonInteractive:!0,uri:i?.uri,name:i?.name,children:(0,N.jsx)(v.o,{searchWords:[A],textToHighlight:i?.name})})}),(0,N.jsxs)(O.mU,{ariaColIndex:3,children:[(0,N.jsx)(O.A$,{duration:a}),(0,N.jsx)(O.Zv,{menu:(0,N.jsx)(I.N,{uri:e,uid:t,contextUri:g}),label:n.ag.get("more.label.track",l,y)})]})]})})})}),((e,t)=>e.uri===t.uri&&e.index===t.index));var L=l(65391);const B=new Set(D.MI),M=r.memo((function({uri:e,tracks:t,columns:l,sortState:a,handleSort:s,usePlayContextItem:i,tracklistDomRef:o}){const u=(0,r.useRef)(null),d=(0,r.useCallback)(((t,l)=>{const r=(0,L.X)(t.album?.images,{desiredSize:40,desiredLabel:"small"});return(0,N.jsx)(U,{index:l,contextUri:e,uri:t.uri,uid:t.uid,isPlayable:t.isPlayable,duration_ms:t.duration.milliseconds,name:t.name,artists:t.artists,album:t.album||void 0,isExplicit:t.isExplicit,is19PlusOnly:t.is19PlusOnly,type:t.type,imgUrl:r?.url||"",usePlayContextItem:i},t.uid)}),[e,i]);return(0,N.jsx)(N.Fragment,{children:(0,N.jsx)(Q.ZP,{value:"playlist-tracklist",children:(0,N.jsx)(h.Pv,{ariaLabel:n.ag.get("local-files"),hasHeaderRow:!0,columns:l,sortableColumns:B,sortState:a,onSort:s,renderRow:d,resolveUri:e=>e.uri,resolveUid:e=>e.uid,tracks:t,nrTracks:t.length,limit:100,outerRef:u,outerDomRef:o},e)})})}));var w=l(98474),Y=l(53753);const H="uCHqQ74vvHOnctGg0X0B",W="feuNq1FTxMbdeOTuFgpA",z=[h.QD.INDEX,h.QD.TITLE,h.QD.ALBUM,h.QD.DURATION],F=()=>{const{filter:e}=(0,r.useContext)(C.fo),{sortState:t,setSortState:l}=(0,r.useContext)(D.Gb),h=(0,r.useContext)(y.t),p=(0,f.I)(),[T,Q]=(0,r.useState)(),_=(0,b.Y)(a.Fzl),I=(0,r.useRef)(null),v=(0,i.W6)(w.eKc,{loadingValue:!1}),O=(0,r.useCallback)((e=>{l((0,S.VK)(e,t))}),[t,l]),R=(0,r.useCallback)((async()=>{const l=await h.getTracks((0,S._j)(t),e);Q(l)}),[h,t,e]);(0,r.useEffect)((()=>{R()}),[R]);const{isPlaying:P,togglePlay:U,usePlayContextItem:L}=(0,E.n)({uri:j.b,pages:[{items:(T??[]).map((e=>({...e,provider:null})))}]},{featureIdentifier:"local_files"});return T?e||T.length&&p?(0,N.jsxs)("div",{role:"presentation",className:H,children:[(0,N.jsxs)(d.gF,{backgroundColor:_,children:[(0,N.jsxs)(c.W,{children:[(0,N.jsx)(A.$,{size:"md",onClick:()=>U(),isPlaying:P,uri:j.b}),(0,N.jsx)(g.i,{text:n.ag.get("local-files")})]}),(0,N.jsxs)(d.sP,{children:[(0,N.jsx)(d.xd,{children:n.ag.get("local-files")}),(0,N.jsx)(d.T0,{children:n.ag.get("local-files.description")})]})]}),(0,N.jsx)(o.o,{backgroundColor:_,children:(0,N.jsxs)(o.F,{children:[(0,N.jsx)(A.$,{size:"lg",onClick:()=>U(),isPlaying:P,uri:j.b}),v&&(0,N.jsx)(Y.K,{entityName:n.ag.get("local-files"),contextUri:j.b}),(0,N.jsxs)("div",{className:W,children:[(0,N.jsx)(r.Suspense,{fallback:null,children:(0,N.jsx)(m.K,{placeholder:n.ag.get("playlist.search_in_playlist"),clearOnEscapeInElementRef:I})}),(0,N.jsx)(k.l,{columns:D.MI})]})]})}),(0,N.jsx)("div",{className:"contentSpacing",children:(0,N.jsx)(M,{tracks:T,uri:j.b,columns:z,handleSort:O,sortState:t,usePlayContextItem:L,tracklistDomRef:I})})]}):(0,N.jsx)(u.u,{linkTo:"/preferences",linkTitle:n.ag.get("local-files.empty-button"),message:n.ag.get("local-files.empty-description"),title:n.ag.get("local-files.empty-header"),children:(0,N.jsx)(s.Y,{iconSize:64,"aria-hidden":"true"})}):(0,N.jsx)(x.h,{hasError:!1,errorMessage:n.ag.get("error.request-artist-failure"),loadOffline:!0})},K=()=>(0,N.jsx)(D.kz,{uri:"spotify:internal:local-files",children:(0,N.jsx)(C.hz,{uri:"spotify:internal:local-files",children:(0,N.jsx)(F,{})})})}}]);
//# sourceMappingURL=xpui-routes-collection-local-files.js.map