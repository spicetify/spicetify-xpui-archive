"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[6309],{48174:(e,t,n)=>{n.d(t,{u:()=>A});var a=n(59496),r=n(84875),s=n.n(r),i=n(2592),l=n(4285),o=n(24487),c=n(22592);const u="FvfvGU3jvHRskUU9v9_8",d="Q9AlbZn2EGzy3MTWXa8X",m="mxmxS0y8LiwSs5nueKPT",p="GXxVAveNFStY3pBI_NO4",h="eHcXC2s97InYP7rMNT0H";var g=n(4637);const A=(0,a.memo)((function(e){const{children:t,message:n,title:a,linkTitle:r,linkTo:A,onClick:f,renderInline:x=!1}=e,{isXSOnly:E,isSMOnly:C}=(0,o.e)(),b=E||C;return(0,g.jsxs)("section",{className:s()(u,{[d]:x}),children:[t,(0,g.jsx)(i.D,{as:"h1",variant:b?"cello":"alto",className:p,children:a}),(0,g.jsx)(i.D,{variant:b?"mesto":"ballad",className:h,children:n}),r&&(A||f)&&(0,g.jsx)(l.D,{colorSet:"invertedLight",className:m,href:A,onClick:f,component:c.Z,children:r})]})}))},66376:(e,t,n)=>{n.d(t,{n:()=>v});var a=n(59496),r=n(84875),s=n.n(r),i=n(46439),l=n(2592),o=n(10606),c=n(34402),u=n(1740),d=n(27002),m=n(25597),p=n(46217);var h=n(20156),g=n(97373),A=n(71280),f=n(22946);const x="BkpKedcdaMGbvgXMlmcg",E="muYk5XIwKmqR9iNibk_f",C="OEFWODerafYHGp09iLlA",b="m20ShRDiGGDpJ5LSABTi",y="Hvv0e7WKQ4kyftgSQJhg",j="yxf_6IsQEmHjijEBUMTP",L="oaNVBli46GtVjaQKB15g",T="JdlKTdpMquftpMwwegZo",R="Nts_ArOCGeROTDZND3M6",S="FvDsfgxSvLvL3q8d7nQv";var I=n(4637);const D=({items:e,activeItemId:t})=>(0,I.jsx)(A.v,{children:e.map((e=>e.disabled?(0,I.jsx)(f.s,{disabled:!0,role:"menuitemradio",className:j,onClick:e.handleClick,children:e.title},e.uri):(0,I.jsx)(f.s,{role:"menuitemradio",to:e.to,end:!0,"aria-checked":e.itemId===t,className:({isActive:e})=>s()(j,{[L]:e}),onClick:e.handleClick,children:e.title},e.uri)))}),v=(0,a.memo)((function({isCentered:e,links:t,landmarkLabel:n,className:r}){const A=(0,a.useRef)(null),[f,j]=(0,a.useState)([]),[v,_]=(0,a.useState)(0),[k,O]=(0,a.useState)([]),w=function(){const[e,t]=(0,a.useState)(window.innerWidth),{scrollNodeChildRef:n}=(0,a.useContext)(m.VX),r=(0,d.y1)((e=>{e?.width&&t(e.width)}),250);return(0,p.y)({refOrElement:n,observeOnly:"width",onResize:r}),e}()??1/0,{pathname:B}=(0,i.TH)(),N=t.find((e=>e.to===B));return(0,a.useEffect)((()=>{A.current&&_(A.current.clientWidth)}),[w]),(0,a.useEffect)((()=>{if(!A.current)return;const e=Array.from(A.current.children).map((e=>e.clientWidth));j(e)}),[t]),(0,a.useEffect)((()=>{if(!A.current)return;if(f.slice(0,-1).reduce(((e,t)=>e+t),0)<=v)return void O([]);const e=f.reduce(((e,t)=>e>t?e:t),0),t=[];let n=e;f.forEach(((e,a)=>{v>=n+e?n+=e:t.push(a)})),O(t)}),[v,f]),(0,I.jsx)("nav",{className:s()(r,x),"aria-label":n,children:(0,I.jsxs)("ul",{className:e?E:R,ref:A,children:[t.filter(((e,t)=>!k.includes(t))).map((e=>{const t=e?.render??(e=>e);return(0,I.jsx)(a.Fragment,{children:t((0,I.jsx)("li",{className:C,children:e.disabled?(0,I.jsx)("div",{className:T,children:(0,I.jsx)(l.D,{variant:"mestoBold",children:e.title})}):(0,I.jsx)(g.O,{end:!0,className:({isActive:e})=>s()(T,{[L]:e}),to:e.to,onClick:e.handleClick,children:(0,I.jsx)(l.D,{variant:"mestoBold",children:e.title})})}))},e.to)})),k.length||0===f.length?(0,I.jsx)("li",{className:C,children:(0,I.jsx)(h.xV,{renderInline:!0,menu:(0,I.jsx)(D,{items:t.filter(((e,t)=>k.includes(t))),activeItemId:N?.itemId}),children:(e,t,n)=>(0,I.jsxs)("button",{className:s()(b,{[y]:N}),type:"button",onClick:t,ref:n,children:[(0,I.jsx)(l.D,{variant:"mestoBold",children:N?N.title:u.ag.get("more")}),e?(0,I.jsx)(o.U,{iconSize:16,className:S,"aria-hidden":"true"}):(0,I.jsx)(c.i,{iconSize:16,className:S,"aria-hidden":"true"})]})})}):null]})})}))},97416:(e,t,n)=>{n.d(t,{$:()=>o,Q:()=>l});var a=n(59496),r=n(7745),s=n(72776),i=n(4637);const l=(0,a.createContext)({setSortState:()=>{throw new Error("setSortState must be used within a LibrarySortProvider")},sortState:s.oT.ADDED_AT}),o=a.memo((function({uri:e,children:t,defaultSortOption:n}){return(0,i.jsx)(r.r,{uri:e,defaultState:n,sortContext:l,children:t})}))},72776:(e,t,n)=>{n.d(t,{Aq:()=>d,Bf:()=>S,EY:()=>f,G5:()=>C,JV:()=>I,MY:()=>o,Ru:()=>c,ZP:()=>x,a6:()=>g,aY:()=>L,e3:()=>h,ei:()=>l,o$:()=>m,oT:()=>i,pT:()=>j,rJ:()=>R,u3:()=>T,w0:()=>b});var a=n(1740),r=n(33222),s=n(33357);let i;!function(e){e.SHOW_ALPHABETICAL="SHOW_ALPHABETICAL",e.BOOK_ALPHABETICAL="BOOK_ALPHABETICAL",e.EPISODE_ALPHABETICAL="EPISODE_ALPHABETICAL",e.PLAYLIST_ALPHABETICAL="PLAYLIST_ALPHABETICAL",e.ALBUM_ALPHABETICAL="ALBUM_ALPHABETICAL",e.ADDED_AT="ADDED_AT",e.CREATOR_NAME="CREATOR_NAME",e.CREATOR_NAME_ALPHABETICAL="CREATOR_NAME_ALPHABETICAL",e.ALBUM_CREATOR_NAME="ALBUM_CREATOR_NAME",e.RECENTLY_PLAYED="RECENTLY_PLAYED",e.MOST_RELEVANT="MOST_RELEVANT",e.CUSTOM_ORDER="CUSTOM_ORDER"}(i||(i={}));const l={"show-alphabetical":i.SHOW_ALPHABETICAL,"book-alphabetical":i.BOOK_ALPHABETICAL,"episode-alphabetical":i.EPISODE_ALPHABETICAL,"playlist-alphabetical":i.PLAYLIST_ALPHABETICAL,"album-alphabetical":i.ALBUM_ALPHABETICAL,"recently-added":i.ADDED_AT,"creator-name":i.CREATOR_NAME,"creator-name-alphabetical":i.CREATOR_NAME_ALPHABETICAL,"album-creator-name":i.ALBUM_CREATOR_NAME,"recently-played":i.RECENTLY_PLAYED,"playlist-most-relevant":i.MOST_RELEVANT,"playlist-custom-order":i.CUSTOM_ORDER},o={[i.RECENTLY_PLAYED]:{key:"recently-played",get value(){return a.ag.get("collection.sort.recently-played")}},[i.ADDED_AT]:{key:"recently-added",get value(){return a.ag.get("collection.sort.recently-added")}},[i.SHOW_ALPHABETICAL]:{key:"show-alphabetical",get value(){return a.ag.get("collection.sort.alphabetical")}},[i.BOOK_ALPHABETICAL]:{key:"book-alphabetical",get value(){return a.ag.get("collection.sort.alphabetical")}},[i.EPISODE_ALPHABETICAL]:{key:"episode-alphabetical",get value(){return a.ag.get("collection.sort.alphabetical")}},[i.PLAYLIST_ALPHABETICAL]:{key:"playlist-alphabetical",get value(){return a.ag.get("collection.sort.alphabetical")}},[i.ALBUM_CREATOR_NAME]:{key:"album-creator-name",get value(){return a.ag.get("collection.sort.creator")}},[i.CREATOR_NAME]:{key:"creator-name",get value(){return a.ag.get("collection.sort.creator")}},[i.CREATOR_NAME_ALPHABETICAL]:{key:"creator-name-alphabetical",get value(){return a.ag.get("collection.sort.alphabetical")}},[i.ALBUM_ALPHABETICAL]:{key:"album-alphabetical",get value(){return a.ag.get("collection.sort.alphabetical")}},[i.MOST_RELEVANT]:{key:"playlist-most-relevant",get value(){return a.ag.get("collection.sort.most-relevant")}},[i.CUSTOM_ORDER]:{key:"playlist-custom-order",get value(){return a.ag.get("collection.sort.custom-order")}}},c=[i.ADDED_AT,i.ALBUM_ALPHABETICAL,i.CREATOR_NAME],u={[i.ADDED_AT]:{field:r.lY.ADDED_AT,order:r.As.DESC},[i.ALBUM_ALPHABETICAL]:{field:r.lY.NAME,order:r.As.ASC},[i.CREATOR_NAME]:{field:r.lY.ARTIST_NAME,order:r.As.ASC}};const d=e=>{if(function(e){return c.includes(e)}(e))return u[e]},m=[i.ADDED_AT,i.CREATOR_NAME_ALPHABETICAL],p={[i.ADDED_AT]:{field:r.hx.ADDED_AT,order:r.As.DESC},[i.CREATOR_NAME_ALPHABETICAL]:{field:r.hx.NAME,order:r.As.ASC}};const h=e=>{if(function(e){return m.includes(e)}(e))return p[e]},g=[i.ADDED_AT,i.SHOW_ALPHABETICAL],A={[i.ADDED_AT]:{field:r.aW.ADDED_AT,order:r.As.DESC},[i.SHOW_ALPHABETICAL]:{field:r.aW.NAME,order:r.As.ASC}};const f=e=>{if(function(e){return g.includes(e)}(e))return A[e]},x=[i.ADDED_AT,i.BOOK_ALPHABETICAL],E={[i.ADDED_AT]:r.VN.ADDED_AT,[i.BOOK_ALPHABETICAL]:r.VN.NAME};const C=e=>{if(function(e){return x.includes(e)}(e))return E[e]},b=[i.MOST_RELEVANT,i.RECENTLY_PLAYED,i.ADDED_AT,i.PLAYLIST_ALPHABETICAL,i.CUSTOM_ORDER],y={[i.ADDED_AT]:{field:s.bD.ADDED_AT,order:s.As.DESC},[i.RECENTLY_PLAYED]:{field:s.bD.RECENTLY_PLAYED,order:s.As.ASC},[i.PLAYLIST_ALPHABETICAL]:{field:s.bD.NAME,order:s.As.ASC},[i.MOST_RELEVANT]:{field:s.bD.RELEVANCE,order:s.As.DESC},[i.CUSTOM_ORDER]:void 0};const j=e=>{if(function(e){return b.includes(e)}(e))return y[e]},L=i.ADDED_AT,T=i.ADDED_AT,R=i.ADDED_AT,S=i.MOST_RELEVANT,I=i.ADDED_AT},73536:(e,t,n)=>{n.d(t,{h:()=>p});var a=n(59496),r=n(69873),s=n(43001),i=n(34604),l=n(5405),o=n(97416),c=n(72776),u=n(4637);const d=a.memo((function({sortOptions:e,onSort:t}){const{sortState:n,setSortState:r}=(0,a.useContext)(o.Q),s=(0,a.useCallback)((e=>{const n=c.ei[e];t?.(n),r(n)}),[t,r]),i=e.map((e=>c.MY[e])),d=c.MY[n];return(0,u.jsx)(l.A,{options:i,onSelect:s,selected:d})})),m="VuUpAVlUW_OfMfOcDEID",p=a.memo((function({canSort:e,canFilter:t,filterPlaceholder:n,sortOptions:l}){const{spec:o,logger:c}=(0,i.fU)(r.createDesktopSearchBarEventFactory,{}),p=(0,a.useCallback)((()=>{c.logInteraction(o.filterFieldFactory().keyStrokeFilter())}),[c,o]),h=(0,a.useCallback)((()=>{c.logInteraction(o.filterFieldFactory().hitClearFilter())}),[c,o]),g=(0,a.useCallback)((()=>{c.logInteraction(o.sortButtonFactory().hitSort())}),[c,o]);return(0,u.jsxs)("div",{className:m,children:[t?(0,u.jsx)(a.Suspense,{fallback:null,children:(0,u.jsx)(s.K,{placeholder:n,onFilter:p,onClear:h})}):null,e?(0,u.jsx)(d,{sortOptions:l,onSort:g}):null]})}))},78933:(e,t,n)=>{n.d(t,{$:()=>a.$,Q:()=>a.Q});var a=n(97416)},43924:(e,t,n)=>{n.d(t,{Aq:()=>a.Aq,Bf:()=>a.Bf,EY:()=>a.EY,G5:()=>a.G5,JV:()=>a.JV,Ru:()=>a.Ru,ZP:()=>a.ZP,a6:()=>a.a6,aY:()=>a.aY,e3:()=>a.e3,o$:()=>a.o$,oT:()=>a.oT,pT:()=>a.pT,rJ:()=>a.rJ,u3:()=>a.u3,w0:()=>a.w0});var a=n(72776)},94e3:(e,t,n)=>{n.r(t),n.d(t,{default:()=>lt});var a=n(59496),r=n(77646),s=n(3539),i=n(98355),l=n(75930),o=n(1740),c=n(58754),u=n(581),d=n(25875),m=n(90978),p=n(30893),h=n(93090),g=n(2592),A=n(48642),f=n(91766),x=n(84875),E=n.n(x),C=n(33315),b=n(4637);const y=({span:e,onInView:t,marginBottom:n,marginTop:r})=>{const s=(0,a.useRef)(null);return(0,a.useEffect)((()=>{if(!window.IntersectionObserver)return()=>{};const e=new window.IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&t()}))}));return s.current&&e.observe(s.current),()=>{e.disconnect()}}),[t]),e<=0?null:(0,b.jsx)("div",{style:{gridColumn:"1/-1",gridRow:`span ${e}`,marginBottom:n,marginTop:r},ref:s,"data-type":"sentinel"},"topSentinel")},j=({renderItems:e,nrItems:t,estimatedItemMaxHeight:n,scrollNodeRef:r,nrRowsOverscan:s=5,initalNrRows:i=5})=>{const[l,o]=(0,a.useState)({firstRowToRender:0,nrRows:i+s}),c=(0,a.useRef)(0),u=(0,a.useRef)(null),d=(0,a.useRef)(n),m=(0,a.useCallback)((()=>{const e=r.current;if(!e)return;const t=u.current?.querySelector(':scope > *:not([data-type="sentinel"])');d.current=t?t.getBoundingClientRect().height+C.w:d.current;const n=Math.floor((e.scrollTop-c.current)/d.current),a=Math.max(n-s,0),i=Math.ceil(e.offsetHeight/d.current)+2*s;a===l.firstRowToRender&&i===l.nrRows||o({firstRowToRender:a,nrRows:i})}),[s,l,r]),p=(0,a.useCallback)((({columnCount:n})=>{if(n<=0)return[null];const a=Math.ceil(t/n),r=l.firstRowToRender*n,i=l.firstRowToRender+l.nrRows-1,o=Math.min(t-1,(i+1)*n-1),c=d.current*(s-2);return[(0,b.jsx)(y,{span:l.firstRowToRender,onInView:m,marginBottom:`-${c}px`},`topSentinel-${l.firstRowToRender}`),e(r,o,n),(0,b.jsx)(y,{span:a-i,onInView:m,marginTop:`-${c}px`},"bottomSentinel-"+(a-i))]}),[t,s,m,e,l.firstRowToRender,l.nrRows]);return(0,a.useEffect)((()=>{const e=u.current,t=r.current;e&&t&&(c.current=e.getBoundingClientRect().top-t.getBoundingClientRect().top+t.scrollTop)}),[r]),(0,b.jsx)(C.T,{useUniformRowHeight:!0,ref:u,render:p})};var L=n(25597),T=n(19831),R=n(81637),S=n(56674);const I=(0,a.memo)((function({index:e}){return(0,b.jsx)(R.C,{index:e,headerText:"",uri:"",renderCardImage:()=>(0,b.jsx)(S.x,{images:[]}),featureIdentifier:"unknown"})})),D="lA3jnNwnLc3CoYKT06Vz";function v({renderCard:e,nrCards:t,fetchData:n,limit:r=50,cardGridApiRef:s}){const{scrollNodeRef:i}=(0,a.useContext)(L.VX),{getItems:l,nrValidItems:o,invalidateCache:c,hasItems:u}=(0,T.Q)({nrItems:t,fetch:n,limit:r});(0,a.useImperativeHandle)(s,(()=>({update:()=>c()})));return(0,b.jsx)("div",{className:E()({[D]:!u}),children:(0,b.jsx)(j,{renderItems:(t,n,a)=>l(t,n).map(((n,r)=>(n?e(n,t+r,a):null)??(0,b.jsx)(I,{index:r},t+r))),scrollNodeRef:i,nrItems:o,estimatedItemMaxHeight:250})})}var _=n(48174),k=n(19435),O=n(73961),w=n(10616),B=n(46997),N=n(41062),P=n(34604),M=n(73536),H=n(78933),Y=n(43924),U=n(77304),F=n(62141);const V={offset:0,limit:1},W=()=>{const e=(0,a.useContext)(N.H);return(e=>{const[t,n]=(0,a.useState)(null),r=(0,a.useCallback)((async()=>{if(!e)return;const t=await e();n(t?.totalLength||0)}),[e]);return(0,a.useEffect)((()=>{null===t&&r()}),[t,r]),{total:t}})((0,a.useCallback)((()=>e?e?.getShows(V):Promise.resolve({totalLength:0})),[e]))},Z=()=>{const e=(0,a.useContext)(N.H),[t,n]=(0,a.useState)(null),r=(0,a.useCallback)((async()=>{if(!e)return;const t=await(e?.getBooks(V));n(t?.totalLength||0)}),[e]);return(0,a.useEffect)((()=>{null===t&&r()}),[t,r]),(0,F.b)(U.EW.UPDATE,r),{total:t}};var G=n(55066);const K=a.memo((function({nrAlbums:e}){const t=(0,a.useContext)(N.H),{filter:n}=(0,a.useContext)(O.fo),{sortState:r}=(0,a.useContext)(H.Q),s=(0,a.useRef)(null),{spec:i,UBIFragment:c}=(0,P.fU)(A.createDesktopLibraryEventFactory,{data:{uri:"spotify:app:collection:albums",identifier:l.Wg.YOURLIBRARY_ALBUMS}}),u=(0,a.useMemo)((()=>i.headerFactory()),[i]),d=(0,a.useCallback)((async(e,a)=>{const s=await t.getAlbums({offset:e,limit:a,filter:n,sort:(0,Y.Aq)(r)});return{items:s.items,totalLength:s.totalLength}}),[t,n,r]),m=(0,a.useCallback)(((e,t)=>(0,b.jsx)(B.ZP,{value:"card",index:t,children:(0,b.jsx)(f.r,{index:t,uri:e.uri,name:e.name,images:e.images,artists:e.artists,sharingInfo:e.sharingInfo})},e.uri)),[]);return(0,b.jsxs)(c,{spec:i,children:[(0,b.jsx)(c,{spec:u,children:(0,b.jsxs)("div",{className:G.Z.header,children:[(0,b.jsx)(g.D,{as:"h1",variant:"canon",children:o.ag.get("albums")}),(0,b.jsx)(a.Suspense,{fallback:null,children:(0,b.jsx)(M.h,{canSort:t.getCapabilities().canSort,canFilter:t.getCapabilities().canFilter,filterPlaceholder:o.ag.get("collection.filter.albums"),sortOptions:Y.Ru})})]})}),(0,b.jsx)(v,{nrCards:e,renderCard:m,fetchData:d,cardGridApiRef:s})]})})),$=a.memo((function(){const{total:e}=(()=>{const e=(0,a.useContext)(N.H),[t,n]=(0,a.useState)(null),r=(0,a.useCallback)((async()=>{if(!e)return;const t=await(e?.getAlbums(V));n(t?.totalLength||0)}),[e]);return(0,a.useEffect)((()=>{null===t&&r()}),[t,r]),(0,F.b)(U.EW.UPDATE,r),{total:t}})();return null===e?(0,b.jsx)(k.h,{hasError:!1,errorMessage:o.ag.get("error.request-collection-albums-failure")}):e?(0,b.jsx)(K,{nrAlbums:e}):(0,b.jsx)(_.u,{linkTo:"/search",linkTitle:o.ag.get("collection.empty-page.albums-cta"),message:o.ag.get("collection.empty-page.albums-subtitle"),title:o.ag.get("collection.empty-page.albums-title"),children:(0,b.jsx)(w.t,{type:"album"})})})),z=a.memo((function(){return(0,b.jsx)(H.$,{uri:"collection/albums",defaultSortOption:Y.aY,children:(0,b.jsx)(O.hz,{uri:"collection/albums",children:(0,b.jsx)($,{})})})}));var J=n(64533);const Q=a.memo((function({nrArtists:e}){const t=(0,a.useContext)(N.H),{filter:n}=(0,a.useContext)(O.fo),{sortState:r}=(0,a.useContext)(H.Q),s=(0,a.useRef)(null),{spec:i,UBIFragment:c}=(0,P.fU)(A.createDesktopLibraryEventFactory,{data:{uri:"spotify:app:collection:artists",identifier:l.Wg.YOURLIBRARY_ARTISTS}}),u=(0,a.useMemo)((()=>i.headerFactory()),[i]),d=(0,a.useCallback)((async(e,a)=>{const s=await t.getArtists({offset:e,limit:a,filter:n,sort:(0,Y.e3)(r)});return{items:s.items,totalLength:s.totalLength}}),[t,n,r]),m=(0,a.useCallback)(((e,t)=>(0,b.jsx)(B.ZP,{value:"card",index:t,children:(0,b.jsx)(J.I,{index:t,name:e.name,uri:e.uri,images:e.images})},e.uri)),[]);return(0,a.useEffect)((()=>{s.current&&s.current.update()}),[r,n,e]),(0,b.jsxs)(c,{spec:i,children:[(0,b.jsx)(c,{spec:u,children:(0,b.jsxs)("div",{className:G.Z.header,children:[(0,b.jsx)(g.D,{as:"h1",variant:"canon",children:o.ag.get("artists")}),(0,b.jsx)(a.Suspense,{fallback:null,children:(0,b.jsx)(M.h,{canSort:t.getCapabilities().canSort,canFilter:t.getCapabilities().canFilter,filterPlaceholder:o.ag.get("collection.filter.artists"),sortOptions:Y.o$})})]})}),(0,b.jsx)(v,{nrCards:e,renderCard:m,fetchData:d,cardGridApiRef:s})]})})),X=a.memo((function(){const{total:e}=(()=>{const e=(0,a.useContext)(N.H),[t,n]=(0,a.useState)(null),r=(0,a.useCallback)((async()=>{if(!e)return;const t=await(e?.getArtists(V));n(t?.totalLength||0)}),[e]);return(0,a.useEffect)((()=>{null===t&&r()}),[t,r]),(0,F.b)(U.EW.UPDATE,r),{total:t}})();return null===e?(0,b.jsx)(k.h,{hasError:!1,errorMessage:o.ag.get("error.request-collection-artists-failure")}):e>0?(0,b.jsx)(Q,{nrArtists:e}):(0,b.jsx)(_.u,{message:o.ag.get("collection.empty-page.artists-subtitle"),title:o.ag.get("collection.empty-page.artists-title"),linkTo:"/search",linkTitle:o.ag.get("collection.empty-page.artists-cta"),children:(0,b.jsx)(w.t,{type:"artist"})})})),q=a.memo((function(){return(0,b.jsx)(H.$,{uri:"collection/artists",defaultSortOption:Y.u3,children:(0,b.jsx)(O.hz,{uri:"collection/artists",children:(0,b.jsx)(X,{})})})}));var ee=n(19964);const te=a.memo((function({nrBooks:e}){const t=(0,a.useContext)(N.H),{filter:n}=(0,a.useContext)(O.fo),{sortState:r}=(0,a.useContext)(H.Q),{spec:s,UBIFragment:i}=(0,P.fU)(A.createDesktopLibraryEventFactory,{data:{uri:"spotify:app:collection:audiobooks",identifier:l.Wg.YOURLIBRARY_AUDIOBOOKS}}),c=(0,a.useMemo)((()=>s.headerFactory()),[s]),u=(0,a.useRef)(null),d=(0,a.useCallback)((async(e,a)=>{const s=await t.getBooks({offset:e,limit:a,filter:n,sort:(0,Y.G5)(r)});return{items:s.items.map((e=>(e=>""===e.authorName&&""===e.name)(e)?null:e)),totalLength:s.totalLength}}),[t,n,r]),m=(0,a.useCallback)(((e,t)=>(0,b.jsx)(B.ZP,{value:"card",index:t,children:(0,b.jsx)(ee.c,{index:t,uri:e.uri,name:e.name,images:e.images,authorName:e.authorName,isLocked:e.isLocked})},e.uri)),[]);return(0,b.jsxs)(i,{spec:s,children:[(0,b.jsx)(i,{spec:c,children:(0,b.jsxs)("div",{className:G.Z.header,children:[(0,b.jsx)(g.D,{as:"h1",variant:"canon",children:o.ag.get("search.title.audiobooks")}),(0,b.jsx)(M.h,{canSort:t.getCapabilities().canSort,canFilter:t.getCapabilities().canFilter,filterPlaceholder:"Search in Audiobooks",sortOptions:Y.ZP})]})}),(0,b.jsx)(v,{nrCards:e,renderCard:m,fetchData:d,cardGridApiRef:u})]})})),ne=a.memo((function(){const{total:e}=Z();return null===e?(0,b.jsx)(k.h,{hasError:!1,errorMessage:o.ag.get("error.request-collection-albums-failure")}):e>0?(0,b.jsx)(te,{nrBooks:e}):(0,b.jsx)(_.u,{linkTo:"/search",linkTitle:o.ag.get("collection.empty-page.books-cta"),message:o.ag.get("collection.empty-page.books-subtitle"),title:o.ag.get("collection.empty-page.books-title"),children:(0,b.jsx)(w.t,{type:"book"})})})),ae=a.memo((function(){return(0,b.jsx)(H.$,{uri:"collection/books",defaultSortOption:Y.JV,children:(0,b.jsx)(O.hz,{uri:"collection/books",children:(0,b.jsx)(ne,{})})})}));var re=n(1369),se=n(50177),ie=n(27002),le=n(11179),oe=n(66508),ce=n(667),ue=n(86496),de=n(20460),me=n(28010),pe=n(73305),he=n(86255),ge=n(36522);const Ae=function({uri:e,name:t,images:n,index:r}){const s=(0,ue.u)(),i=(0,a.useRef)(null),l=(0,a.useRef)(!0),c=(0,a.useContext)(de.t),{isPlaying:u}=(0,he.cR)(ce.b),{togglePlay:d}=(0,pe.n)({uri:ce.b,pages:[{items:i.current?.map((e=>({...e,provider:null})))||[]}]},{featureIdentifier:"local_files"});(0,a.useEffect)((()=>(l.current=!0,()=>{l.current=!1})),[]);const m=(0,me.I)(),p=(0,ie.y1)((async(e,t)=>{if(!i.current){const e=await c.getTracks();i.current=e}l&&d({loggingParams:t},{uri:ce.b,pages:[{items:i.current?.map((e=>({...e,provider:null})))||[]}]})}),oe.s_,{leading:!0,trailing:!1});return s.canFetchAllTracks&&m?(0,b.jsx)(R.Z,{index:r,delegatePlayback:!0,delegateLogging:!0,isPlaying:u,onPlay:p,headerText:t,featureIdentifier:"local_files",uri:e,renderCardImage:()=>(0,b.jsx)(S.x,{images:n,FallbackComponent:ge.S}),renderSubHeaderContent:()=>(0,b.jsx)("span",{children:o.ag.get("local-files.description")})}):null},fe=({index:e})=>{const t=(0,le.gB)();return(0,b.jsx)(a.Suspense,{fallback:null,children:(0,b.jsx)(Ae,{index:e,name:t.name,uri:t.uri,images:t.images})})};var xe=n(82984),Ee=n(71140),Ce=n(82411),be=n(84805),ye=n(88668),je=n(40239),Le=n(8527),Te=n(70962),Re=n(55715),Se=n(60957);const Ie="NGSgqDuaOH2VDApkzoxN",De="ZzUvBwE6uj5CAU2pjlQX",ve="kST1INfbHSxzydJffBq_",_e="DY2YrJ5MH3ddIhZGORBq",ke="ZXOyJPokUIObMnvTOJvc",Oe="lBs1v3T3HAPrOxfyWemr",we="xhPzQCyks9pfizJj_PVK",Be="d8ifuAZX8mK644AwlRZK";function Ne(e,t){return Array.from(new Array(e).keys()).map((e=>(0,b.jsx)(Se.C,{as:"div",className:Oe,charCount:t,isLoading:!0},e)))}const Pe=({index:e,onClick:t})=>{const n=(0,Re.MY)({limit:7}),{user:a}=(0,r.v9)(be.Gg),s=(0,le.I2)(a?.id);return s?(0,b.jsx)(Te.Z,{index:e,className:E()(Ie,De),onClick:t,headerText:s.name,featureIdentifier:"your_library",uri:s.uri,ariaPlayLabel:o.ag.get("playlist.a11y.play",s.name),ariaPauseLabel:o.ag.get("playlist.a11y.pause",s.name),renderCardImage:()=>{return(0,b.jsx)("div",{className:_e,children:(0,b.jsx)("div",{className:ke,children:n?(e=n,e.items.map((({uri:e,name:t,artists:[n]},a)=>(0,b.jsxs)("span",{children:[(0,b.jsx)("span",{className:Be,children:a?" • ":""}),(0,b.jsx)("span",{dir:"auto",children:n.name}),(0,b.jsx)("span",{dir:"auto",className:Be,children:t})]},e)))):Ne(3)})});var e},renderSubHeaderContent:()=>(0,b.jsx)("div",{className:we,children:n?`${n.totalLength} ${s.name}`:Ne(1,s.name.length)})}):null},Me=(e,t,n)=>(0,b.jsx)(B.ZP,{value:"card",index:t,children:n},`${e.uri}`??0),He=(e,t,n)=>{switch(e.type){case je.p.LIKED_SONGS:return Me(e,t,n>1?(0,b.jsx)(Pe,{index:t},e.uri):(0,b.jsx)(se.p,{index:t},e.uri));case je.p.YOUR_EPISODES:return Me(e,t,(0,b.jsx)(Ee.T,{index:t},e.uri));case je.p.LOCAL_FILES:return Me(e,t,(0,b.jsx)(fe,{index:t},e.uri));case je.p.PLAYLIST:return Me(e,t,(0,b.jsx)(re.Z,{index:t,name:e.name,uri:e.uri,images:e.images,description:e.description,authorName:e.owner?.displayName,isPlayable:e.totalLength>0},e.uri));case"placeholder":return Me(e,t,(0,b.jsx)(re.Z,{index:t,uri:e.uri,name:"",images:[],description:"",authorName:""},e.uri));case"empty":return(0,b.jsx)(a.Fragment,{},t);case"folder":return null;default:return(0,Le._)(e),null}},Ye=a.memo((function({nrPlaylists:e,showYourEpisodesCard:t,showLocalFilesCard:n}){const{filter:s}=(0,a.useContext)(O.fo),{sortState:i}=(0,a.useContext)(H.Q),c=(0,a.useContext)(ye.BS),u=(0,a.useRef)(null),d=(0,r.v9)(be.Gg).user,{spec:m,UBIFragment:p}=(0,P.fU)(A.createDesktopLibraryEventFactory,{data:{uri:"spotify:app:collection:playlists",identifier:l.Wg.YOURLIBRARY_PLAYLISTS}}),h=(0,a.useMemo)((()=>m.headerFactory()),[m]),f=(0,a.useMemo)((()=>{const e=[];if(s)return e;const a=(0,le.I2)(d?.id);a&&(e.push(a),e.push({uri:"",type:"empty"}));const r=t?(0,le.bl)(d?.id):null;r&&e.push(r);const i=n?(0,le.gB)():null;return i&&e.push(i),e}),[s,n,t,d]),x=(0,a.useCallback)((()=>{u?.current&&u.current.update()}),[u]);(0,ye.iu)(x);const E=(0,a.useCallback)((async(e,t)=>{const n=f.slice(e),a=e-(f.length-n.length),r=await c.getContents({offset:a,limit:t,filter:s,sort:(0,Y.pT)(i),flatten:!0,decorateImagesAndOwner:!0}),l=r.items.map((e=>"placeholder"===e.type?null:e));return{items:[...n,...l],totalLength:r.totalItemCount+f.length}}),[f,c,s,i]);return(0,b.jsxs)(p,{spec:m,children:[(0,b.jsx)(p,{spec:h,children:(0,b.jsxs)("div",{className:G.Z.header,children:[(0,b.jsx)(g.D,{as:"h1",variant:"canon",children:o.ag.get("playlists")}),(0,b.jsx)(a.Suspense,{fallback:null,children:(0,b.jsx)(M.h,{canSort:c.getCapabilities().canSort,canFilter:c.getCapabilities().canFilter,filterPlaceholder:o.ag.get("collection.filter.playlists"),sortOptions:Y.w0})})]})}),(0,b.jsx)(v,{nrCards:e+f.length,renderCard:He,fetchData:E,cardGridApiRef:u})]})})),Ue=a.memo((function(){const e=(0,ye.Rt)(),t=(0,xe.x)(),n=(0,ue.u)(),{createPlaylist:r}=(0,Ce.K)(),s=(0,me.I)(),i=(0,a.useCallback)((()=>{r()}),[r]);return null===e||null===t?(0,b.jsx)(k.h,{hasError:!1,errorMessage:o.ag.get("error.request-collection-albums-failure")}):e?.playlistCount?(0,b.jsx)(Ye,{nrPlaylists:e.playlistCount,showYourEpisodesCard:t.totalLength>0,showLocalFilesCard:n.canFetchAllTracks&&s}):(0,b.jsx)(_.u,{linkTitle:o.ag.get("collection.empty-page.playlists-cta"),onClick:i,title:o.ag.get("collection.empty-page.playlists-title"),message:o.ag.get("collection.empty-page.playlists-subtitle"),children:(0,b.jsx)(w.t,{type:"playlist"})})})),Fe=a.memo((function(){return(0,b.jsx)(H.$,{uri:"collection/playlists",defaultSortOption:Y.Bf,children:(0,b.jsx)(O.hz,{uri:"collection/playlists",children:(0,b.jsx)(Ue,{})})})}));var Ve=n(88935),We=n(81560),Ze=n(95524),Ge=n(84147),Ke=n(50872);const $e=()=>{const e="ginger-audio-shows-top-20-web",{view:t}=(0,We.P)(e);if(!t)return null;const{content:n,name:a}=t,{total:r=0,items:s}=n;return(0,b.jsx)(Ke.P,{title:a,total:r,seeAllUri:(0,Ze.p)(e),children:s.filter((e=>"show"===e.type)).map(((e,t)=>(0,b.jsx)(Ve._,{name:e.name,uri:e.uri,images:e.images,publisher:e.publisher,mediaType:{audio:Ge.E.AUDIO,video:Ge.E.VIDEO,mixed:Ge.E.MIXED}[e.media_type]??Ge.E.AUDIO,sharingInfo:null,index:t},e.uri)))})};var ze=n(28313),Je=n(23923);function Qe(e,t){return Array.from(new Array(e).keys()).map((e=>(0,b.jsx)(Se.C,{as:"div",className:Oe,charCount:t,isLoading:!0},e)))}const Xe=({index:e})=>{const t=(0,Re.j$)({limit:7}),{user:n}=(0,r.v9)(be.Gg),a=(0,le.bl)(n?.id);return a?(0,b.jsx)(Te.Z,{index:e,className:E()(Ie,ve),headerText:a.name,featureIdentifier:"your_library",uri:a.uri,ariaPlayLabel:o.ag.get("playlist.a11y.play",a.name),ariaPauseLabel:o.ag.get("playlist.a11y.pause",a.name),renderCardImage:()=>{return(0,b.jsx)("div",{className:_e,children:(0,b.jsx)("div",{className:ke,children:t?(e=t,e.items.map((({uri:e,name:t,show:n},a)=>(0,b.jsxs)("span",{children:[(0,b.jsx)("span",{className:Be,children:a?" • ":""}),(0,b.jsx)("span",{dir:"auto",children:t}),n&&(0,b.jsx)("span",{dir:"auto",className:Be,children:n.name})]},e)))):Qe(3)})});var e},renderSubHeaderContent:()=>(0,b.jsx)("div",{className:we,children:t?o.ag.get("tracklist-header.episodes-counter",t.totalLength):Qe(1,a.name.length)})}):null},qe=a.memo((function({nrShows:e}){const t=(0,a.useContext)(N.H),{filter:n}=(0,a.useContext)(O.fo),{sortState:s}=(0,a.useContext)(H.Q),i=(0,a.useRef)(!1),c=(0,a.useRef)({entities:[],total:e}),[u,d]=(0,a.useState)(0),{user:m}=(0,r.v9)(be.Gg),{spec:p,UBIFragment:h}=(0,P.fU)(A.createDesktopLibraryEventFactory,{data:{uri:"spotify:app:collection:podcasts",identifier:l.Wg.YOURLIBRARY_SHOWS}}),f=(0,a.useMemo)((()=>p.headerFactory()),[p]),x=(0,a.useCallback)((async(e,a,r=!1)=>{if(!i.current){i.current=!r;const l=await t.getShows({offset:e,limit:a,filter:n,sort:(0,Y.EY)(s)});c.current=function(e,t,n){const a={...n};return a.entities=t?e.items||[]:a.entities.concat(e.items||[]),a.total=e.totalLength,a}(l,r,c.current),i.current=!1,d((e=>e+1))}}),[t,n,s,c]),E=(0,a.useCallback)((e=>{c.current=function(e,t){const n={...t},a=t.entities.filter((t=>t.uri!==e));return n.total=(t.total||0)-(t.entities.length-a.length),n.entities=a,n}(e,c.current),d((e=>e+1))}),[]);(0,a.useEffect)((()=>{x(0,50,!!u)}),[n,s]);const y=(0,a.useCallback)((()=>{c.current.entities.length!==c.current.total&&x(c.current.entities.length,50)}),[x,c]);return(0,b.jsx)(h,{spec:p,children:(0,b.jsxs)(ze.C,{onReachBottom:y,children:[(0,b.jsx)(h,{spec:f,children:(0,b.jsxs)("div",{className:G.Z.header,children:[(0,b.jsx)(g.D,{as:"h1",variant:"canon",children:o.ag.get("podcasts")}),(0,b.jsx)(a.Suspense,{fallback:null,children:(0,b.jsx)(M.h,{canSort:t.getCapabilities().canSort,canFilter:t.getCapabilities().canFilter,filterPlaceholder:o.ag.get("collection.filter.podcasts"),sortOptions:Y.a6})})]})}),(0,b.jsx)(Je.r,{onLibraryItemRemove:E,children:(0,b.jsx)(B.ZP,{value:"EntitiesGrid",children:(0,b.jsx)(C.T,{render:()=>{const e=(0,le.bl)(m?.id),t=n||!e||0===c.current.entities.length?[]:[(0,b.jsx)(a.Suspense,{fallback:null,children:(0,b.jsx)(Xe,{index:0})},"your-episodes-card")],r=t.length>0;return t.concat(c.current.entities.map(((e,t)=>{const n=r?t+1:t;return(0,b.jsx)(B.ZP,{value:"card",index:n,children:(0,b.jsx)(Ve._,{index:n,name:e.name,uri:e.uri,images:e.images,publisher:e.publisher,sharingInfo:null})},e.uri)})))}})})})]})})})),et=a.memo((function(){const{total:e}=W(),{productState:t}=(0,r.v9)(be.Gg),n=!!t&&parseInt(t.ads,10)>0;return null===e?(0,b.jsx)(k.h,{hasError:!1,errorMessage:o.ag.get("error.request-collection-shows-failure")}):e?(0,b.jsx)(qe,{nrShows:e}):(0,b.jsxs)("div",{className:E()(G.Z.emptyStateContainer,{[G.Z.adBarEnabled]:n}),children:[(0,b.jsx)(_.u,{linkTo:"/genre/podcasts-web",linkTitle:o.ag.get("collection.empty-page.shows-cta"),message:o.ag.get("collection.empty-page.shows-subtitle"),title:o.ag.get("collection.empty-page.shows-title"),renderInline:!0,children:(0,b.jsx)(w.t,{type:"show"})}),(0,b.jsx)($e,{})]})})),tt=a.memo((function(){return(0,b.jsx)(H.$,{uri:"collection/podcasts",defaultSortOption:Y.rJ,children:(0,b.jsx)(O.hz,{uri:"collection/podcasts",children:(0,b.jsx)(et,{})})})}));var nt=n(13155),at=n(66376),rt=n(23348);const st=({isAudiobooksEnabled:e})=>{const t=(0,r.v9)(m.rH),{spec:n,logger:s}=(0,P.fU)(nt.createDesktopLibraryTopbarEventFactory,{}),i=(0,a.useMemo)((()=>[{title:o.ag.get("playlists"),itemId:"collection.tab-playlists",to:"/collection/playlists",uri:"spotify:app:collection:playlists"},...t?[{title:o.ag.get("podcasts"),itemId:"collection.tab-podcasts",to:"/collection/podcasts",uri:"spotify:app:collection:podcasts"}]:[],...e?[{title:o.ag.get("search.title.audiobooks"),itemId:"collection.tab-audiobooks",to:"/collection/audiobooks",uri:"spotify:app:collection:audiobooks"}]:[],{title:o.ag.get("artists"),itemId:"collection.tab-artists",to:"/collection/artists",uri:"spotify:app:collection:artists"},{title:o.ag.get("albums"),itemId:"collection.tab-albums",to:"/collection/albums",uri:"spotify:app:collection:albums"}].map(((e,t)=>{const a=e.uri;return{...e,handleClick:()=>{const e=n.linkFactory({position:t,uri:a}).hitUiNavigate({destination:a});s.logInteraction(e)}}}))),[t,e,s,n]);return(0,b.jsx)(rt.w,{children:(0,b.jsx)(at.n,{className:G.Z.tabBar,links:i})})},it=a.lazy((async()=>await n.e(4246).then(n.bind(n,39575)))),lt=()=>{const e=(0,r.v9)(m.rH),t=(0,i.W6)(d.uB);(0,u.z)("your_library");const{total:n}=Z(),a=!!(n&&n>0);return(0,b.jsxs)("section",{className:"contentSpacing",children:[(0,b.jsx)(c.$,{children:o.ag.get("collection.page-title")}),(0,b.jsxs)(s.rs,{children:[(0,b.jsx)(p.g,{path:"/collection/artists",pathV6:"artists",children:(0,b.jsx)(h.K,{pageId:l.Wg.YOURLIBRARY_ARTISTS,children:(0,b.jsx)(q,{})})}),(0,b.jsx)(p.g,{path:"/collection/albums",pathV6:"albums",children:(0,b.jsx)(h.K,{pageId:l.Wg.YOURLIBRARY_ALBUMS,children:(0,b.jsx)(z,{})})}),(0,b.jsx)(p.g,{path:"/collection/playlists",pathV6:"playlists",children:(0,b.jsx)(h.K,{pageId:l.Wg.YOURLIBRARY_PLAYLISTS,children:(0,b.jsx)(Fe,{})})}),e&&(0,b.jsx)(p.g,{path:"/collection/podcasts",pathV6:"podcasts",children:(0,b.jsx)(h.K,{pageId:l.Wg.YOURLIBRARY_SHOWS,children:(0,b.jsx)(tt,{})})}),(t||a)&&(0,b.jsx)(p.g,{path:"/collection/audiobooks",pathV6:"audiobooks",children:(0,b.jsx)(h.K,{pageId:l.Wg.YOURLIBRARY_AUDIOBOOKS,children:(0,b.jsx)(ae,{})})}),(0,b.jsx)(p.g,{path:"/collection/music-downloads",pathV6:"music-downloads",children:(0,b.jsx)(h.K,{pageId:l.Wg.YOURLIBRARY_DOWNLOADS,children:(0,b.jsx)(it,{})})})]}),(0,b.jsx)(st,{isAudiobooksEnabled:t||a})]})}},36522:(e,t,n)=>{n.d(t,{S:()=>i});var a=n(46622);const r="fRZRXRIV2YBCFLYgwDAr";var s=n(4637);const i=({iconSize:e=64,...t})=>(0,s.jsx)("div",{className:r,children:(0,s.jsx)(a._,{iconSize:e,...t,semanticColor:"textBrightAccent","aria-hidden":!0})})},24487:(e,t,n)=>{n.d(t,{e:()=>p});var a=n(58646);const r="(min-width: 0px)",s="(min-width: 0px) and (max-width: 767px)",i="(min-width: 768px)",l="(min-width: 768px) and (max-width: 1023px)",o="(min-width: 1024px)",c="(min-width: 1024px) and (max-width: 1279px)",u="(min-width: 1280px)",d="(min-width: 1280px) and (max-width: 1919px)",m="(min-width: 1920px)",p=()=>({isXS:(0,a.a)(r),isXSOnly:(0,a.a)(s),isSM:(0,a.a)(i),isSMOnly:(0,a.a)(l),isMD:(0,a.a)(o),isMDOnly:(0,a.a)(c),isLG:(0,a.a)(u),isLGOnly:(0,a.a)(d),isXL:(0,a.a)(m)})},81560:(e,t,n)=>{n.d(t,{P:()=>m});var a=n(59496),r=n(59689),s=n(68281),i=n(3102),l=n(77646),o=n(98355),c=n(42069),u=n(84805),d=n(26891);const m=(e,t)=>{const n=(()=>{const e=(0,o.W6)(d.Xf),t=(0,l.v9)(c.rZ),{locale:n,overrides:r}=(0,l.v9)(u.Gg),s=r?.country||t,i=r?.locale||n;return(0,a.useMemo)((()=>{const t=["album","playlist","artist","show","station","episode","merch","artist_concerts"];return e&&t.push("uri_link"),{country:s,locale:i,types:t.join(",")}}),[s,e,i])})(),{data:m,fetchNextPage:p}=(0,r.useInfiniteQuery)(["useView",e,n],(async({pageParam:t})=>void 0===t?async function(e,t){const{body:n}=await i.kO.getView(s.b.getInstance(),e,t);return n}(e,n):async function(e){const{body:t}=await i.TV.getGeneric(s.b.getInstance(),e);return t}(t)),{cacheTime:t?.cacheTime??18e5,staleTime:t?.staleTime??3e5,getNextPageParam:e=>e.content.next??void 0,getPreviousPageParam:e=>e.content.previous??void 0});return{view:(0,a.useMemo)((()=>m?.pages.reduce(((e,t)=>({...e,content:{...e.content,href:t.content.href,next:t.content.next,offset:t.content.offset,previous:t.content.previous,total:t.content.total,items:e.content.items.concat(t.content.items)}})))),[m?.pages]),getNextPage:p}}},28010:(e,t,n)=>{n.d(t,{I:()=>r});var a=n(94887);function r(){return(0,a.S)()[0]}},55066:(e,t,n)=>{n.d(t,{Z:()=>a});const a={header:"fLqEiE5HwKr9eFCbJgeu",tabBar:"tUg9tRrSVbtjHJ4WHnxw",AddToPlaylistIcon:"Hbwta1_s02edtdkgJ7qZ",emptyStateContainer:"nHGnfkVXCk9YYVitV6eu",adBarEnabled:"YV8aNrRwNwFaMozM_Bfo"}}}]);
//# sourceMappingURL=xpui-routes-collection.js.map