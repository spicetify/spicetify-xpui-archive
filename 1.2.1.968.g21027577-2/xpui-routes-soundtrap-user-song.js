"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[1248],{49290:(e,r,a)=>{a.d(r,{t:()=>l});var s=a(81637),i=a(56674),t=a(85059),n=a(4637);const l=({project:e,index:r,onClick:a})=>(0,n.jsx)(s.C,{index:r,onClick:()=>a(e.key),headerText:e.title,featureIdentifier:"make_music",uri:e.originalTrackUri,delegateNavigation:!0,renderCardImage:()=>(0,n.jsx)(i.x,{images:[{url:e.imageUri}]}),renderSubHeaderContent:()=>(0,n.jsx)(t.NB,{source:e.templateDescription})})},59563:(e,r,a)=>{a.r(r),a.d(r,{UserSong:()=>X,default:()=>J,parseReleaseDate:()=>V});var s=a(59496),i=a(77646),t=a(46439),n=a(88585),l=a.n(n),o=a(2592),c=a(66281),u=a(75930),d=a(1740),m=a(89349),g=a(92656),h=a(14927),p=a(58754),x=a(99162),f=a(97036),j=a(73459),y=a(19435),b=a(33354),I=a(10117),k=a(43236),P=a(79396),v=a(87452),C=a(62991),S=a(84805),U=a(20156),R=a(3102),w=a(45462),T=a(73305),D=a(86255),E=a(39189),N=a(12101),L=a(6755),A=a(34604),_=a(40239),O=a(69084),B=a(81093),H=a(49290),F=a(84156),z=a(67779),Q=a(46997),Y=a(4637);const W=[z.QD.INDEX,z.QD.TITLE,z.QD.DURATION],$=s.memo((function({ariaLabel:e,tracks:r,creator:a,highlightUri:i,scrollToIndex:t,usePlayContextItem:n,hasHeaderRow:l=!0}){const o=(0,s.useRef)(null),c=(0,s.useRef)(!1),[u]=(0,s.useState)(null);(0,s.useEffect)((()=>{o.current&&(u?o.current.scrollToIndex(u):t&&o.current.scrollToIndex(t))}),[u,t]);const d=(0,s.useCallback)(((e,r)=>{const s=!c.current&&!!i&&i===e.uri;return s&&(c.current=!0),(0,Y.jsx)(z.Ym,{index:r,trackNumber:r+1,contextUri:a.uri,uri:e.uri,duration_ms:e.duration.milliseconds,name:e.name,isPlayable:e.playability.playable,artists:[{uri:a.uri,profile:{name:a.displayName??a.name??""}}],playcount:0,shouldRenderPlayCount:!1,shouldHighLight:s,usePlayContextItem:n},r+e.uri)}),[a,i,n]),m=(0,s.useCallback)((e=>"track"in e?e.track.uri:""),[]);return(0,Y.jsx)(Q.ZP,{value:"album-tracklist",children:(0,Y.jsx)(z.Pv,{ariaLabel:e,tracks:r,hasHeaderRow:l,rowPlaceholder:z.uD,columns:W,renderRow:d,resolveUri:m,nrTracks:r.length,outerRef:o},a.uri)})})),q="a4JGtYPrNWmb5GUgrYMX",G="Y3jBRL4mS97_u1yK6lml",M="uV9hvAknI8LQmO3fPuqx",X=({episode:e,creator:r})=>{const{uri:a,coverArt:n}=e,l=(0,t.TH)(),{spec:u,logger:y}=(0,A.fU)(c.createDesktopEpisodeEventFactory,{data:{uri:a}}),k=(0,w.g)(),P=(0,v.o)(),R=parseInt(new URLSearchParams(l.search).get("index")||"0",10),{usePlayContextItem:N,triggerPlay:L,togglePlay:_,isActive:z}=(0,T.n)({uri:a},{featureIdentifier:"episode"}),{isPlaying:Q,isActive:W}=(0,D.$o)(a),X=n[0].url,J=(0,C.Zj)(X||null),Z=(0,E.Y)((e=>e?.isPaused??void 0)),K=W||z,ee=(0,s.useCallback)(((e,r,s)=>{let i="play";if(!Q||0!==e&&r||(i="pause"),P({intent:i,targetUri:a,type:"click",itemIdSuffix:e>0?"podcast-description-timestamp":"button"}),z&&!r)_({loggingParams:s?.()});else if(W&&!r)Z?(s?.("resume"),k.resume()):(s?.("pause"),k.pause());else{const r=s?.("play");L({seekTo:e,loggingParams:r})}}),[Q,P,a,W,z,Z,k,_,L]),re=(0,s.useCallback)((()=>{ee(0,!1,(e=>{const r=u.actionBarFactory().playButtonFactory();let s;return s="pause"===e||Q?r.hitPause({itemToBePaused:a}):"resume"===e||K?r.hitResume({itemToBeResumed:a}):r.hitPlay({itemToBePlayed:a}),y.logInteraction(s)}))}),[ee,K,Q,y,u,a]);(0,s.useEffect)((()=>{if(e){const r=new URLSearchParams(l.search);if(r.has("t")){const a=r.get("t")||"0",s=1e3*parseInt(a,10);s<=e.duration.milliseconds&&ee(s,!0)}}}),[e]);const ae=e.playability.playable,se=(e.coverArt||[]).map((e=>({url:e.url,width:e.width||void 0,height:e.height||void 0}))),ie=(0,s.useCallback)((()=>new URLSearchParams(l.search.slice(1)).get("highlight")||""),[l.search])(),te=(0,i.v9)(S.Gg),ne=te.overrides?.locale??te.locale,{projects:le}=(0,B.w)(!1,r.id),[oe,ce]=(0,s.useState)([]);return(0,s.useEffect)((()=>{const r=le.filter((r=>r.publishedTrackUri!==e.uri));ce(r)}),[le,e.uri]),(0,Y.jsxs)("section",{"data-testid":"user-song",className:q,children:[(0,Y.jsx)(p.$,{children:d.ag.get("podcasts.episode.seo.title",{name:e.name,show:e.podcast?.name??""})}),(0,Y.jsxs)(x.gF,{backgroundColor:J,children:[(0,Y.jsxs)(f.W,{children:[(0,Y.jsx)(b.$,{size:"md",onClick:()=>_(),disabled:!ae,isPlaying:Q,uri:a}),(0,Y.jsx)(j.i,{text:e.name})]}),(0,Y.jsx)(U._P,{menu:(0,Y.jsx)(F.kn,{uri:a,sharingInfo:e.sharingInfo}),children:(0,Y.jsx)(x.Oz,{dragUri:a,images:se,name:e.name,placeholderType:"album"})}),(0,Y.jsxs)(x.sP,{children:[(0,Y.jsx)(x.dy,{small:!0,uppercase:!0,children:"Song"}),(0,Y.jsx)(U._P,{menu:(0,Y.jsx)(F.kn,{uri:a,sharingInfo:e.sharingInfo}),children:(0,Y.jsx)(x.xd,{dragUri:e.uri,dragLabel:e.name,children:e.name})}),(0,Y.jsx)(x.QS,{creators:[r],releaseDate:V(e.releaseDate?.isoString),durationMilliseconds:e.duration.milliseconds})]})]}),(0,Y.jsx)(m.o,{backgroundColor:J,children:(0,Y.jsxs)(m.F,{children:[(0,Y.jsx)(b.$,{onClick:re,disabled:!ae,isPlaying:Q,size:"lg",uri:a}),(0,Y.jsx)(h.w,{uri:e.uri,size:g.q.md}),(0,Y.jsx)(U.yj,{menu:(0,Y.jsx)(F.kn,{uri:e.uri,sharingInfo:e.sharingInfo}),children:(0,Y.jsx)(g.z,{label:d.ag.get("more.label.context",e.name)})})]})}),(0,Y.jsxs)("div",{className:"contentSpacing",children:[(0,Y.jsx)($,{ariaLabel:e.name,tracks:[e],creator:r,highlightUri:ie,scrollToIndex:R,usePlayContextItem:N}),(0,Y.jsx)("div",{className:M,children:(0,Y.jsx)("div",{children:e.releaseDate?.isoString&&(0,Y.jsx)(o.D,{as:"p",variant:"mesto",children:(0,O.BI)((0,O.RX)(e.releaseDate.isoString),ne,{year:"numeric",month:"long",day:"numeric"})})})})]}),oe.length>0&&(0,Y.jsx)("div",{className:"contentSpacing",children:(0,Y.jsx)(I.q,{index:0,id:"more-user-songs",className:G,title:d.ag.get("album-page.more-by-artist",r.displayName??r.name??"User"),total:oe.length,seeAllUri:r.uri,seeAllLabel:"Show profile",alwaysShowSeeAll:!0,children:oe.map(((e,r)=>(0,Y.jsx)(H.t,{index:r,project:e,onClick:()=>{}},e.key)))})})]})},J=s.memo((function(){const{episodeId:e}=(0,t.UO)(),r=l().episodeURI(e).toURI(),a=(0,N.I)(r);let i="";a?.type===_.p.EPISODE&&(i=a.podcast?.uri||"");const{data:n,error:o}=(0,L.l)(i||"");let c="",m="",g="";n?.type===_.p.SHOW&&(c=n.publisherName,m=l().profileURI(c).toURI(),g=n.name);const{data:h}=(0,P.J)(R.n5.getProfile,[{uri:m,playlists:10,artists:10,episodes:10}]),p={uri:m,name:g,displayName:g,id:c,images:h?[{url:h.image_url}]:[]};return!a||a.type!==_.p.EPISODE||o?(0,Y.jsx)(y.h,{hasError:!1,errorMessage:d.ag.get("error.not_found.title.podcast")}):(0,Y.jsx)(s.Suspense,{fallback:null,children:(0,Y.jsx)(k.C,{pageId:u.Wg.PODCAST_EPISODE,uri:r,children:(0,Y.jsx)(X,{episode:a,creator:p})})})}));function V(e){return e?.replace(/T.*/,"")||""}},43236:(e,r,a)=>{a.d(r,{C:()=>n});var s=a(59496),i=a(37958),t=a(4637);const n=({pageId:e,uri:r,children:a})=>{const n=(0,i.b)(),l=(0,i.H)();return(0,s.useEffect)((()=>{n?.reportPageView({pageId:e,navigationalRoot:l??void 0,entityUri:r})}),[e,l,n,r]),(0,t.jsx)(t.Fragment,{children:a})}}}]);
//# sourceMappingURL=xpui-routes-soundtrap-user-song.js.map